{"meta":{"title":"ç‹è¯›é­”","subtitle":"ç‹è¯›é­”çš„åšå®¢","description":"ç‹è¯›é­”","author":"wangzhumo","url":"http://www.wangzhumo.com"},"pages":[{"title":"","date":"2018-01-10T16:04:17.785Z","updated":"2018-01-10T16:04:17.000Z","comments":true,"path":"404.html","permalink":"http://www.wangzhumo.com/404.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2017-12-24T11:24:42.000Z","updated":"2017-12-24T12:07:01.685Z","comments":false,"path":"categories/index.html","permalink":"http://www.wangzhumo.com/categories/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2017-12-24T11:24:42.000Z","updated":"2017-12-24T12:04:52.000Z","comments":false,"path":"tags/index.html","permalink":"http://www.wangzhumo.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Androidä¸­çš„è´å¡å°”æ›²çº¿","slug":"Androidä¸­çš„è´å¡å°”æ›²çº¿","date":"2018-07-05T08:05:12.000Z","updated":"2018-07-05T10:37:44.056Z","comments":true,"path":"Android/Androidä¸­çš„è´å¡å°”æ›²çº¿/","link":"","permalink":"http://www.wangzhumo.com/Android/Androidä¸­çš„è´å¡å°”æ›²çº¿/","excerpt":"","text":"ç®€ä»‹è´å¡å°”æ›²çº¿(BÃ©zier curve) æˆ‘ä»¬åœ¨å¾ˆå¤šAppç§éƒ½èƒ½å‘ç°å®ƒçš„å½±å­,æ¯”å¦‚è¯´ 1234QQçš„å°çº¢ç‚¹ä¸‹æ‹‰åˆ·æ–°çš„ç²˜è¿æ•ˆæœä¸ªäººåŠ¨æ€ç­‰é¡µé¢çš„æ³¢æµªæ•ˆæœé˜…è¯»è½¯ä»¶çš„ç¿»é¡µæ•ˆæœ è´å¡å°”æ›²çº¿æ˜¯ç”¨ä¸€ç³»åˆ—ç‚¹æ¥æ§åˆ¶æ›²çº¿çŠ¶æ€ï¼Œä¸»è¦å°±æ˜¯ï¼šæ•°æ®ç‚¹ã€æ§åˆ¶ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´æ§åˆ¶ç‚¹ï¼Œæ¥ä½¿å¾—è´å¡å°”æ›²çº¿å½¢çŠ¶å˜åŒ– æ•°æ®ç‚¹ æŒ‡å®šäº†èµ·å§‹ä½ç½® æ§åˆ¶ç‚¹ ä¸€æˆ–å¤šä¸ª,å†³å®šäº†æ›²çº¿çš„è½¨è¿¹ è¿™é‡Œæ”¾ä¸¤ä¸ªåœ¨çº¿æŸ¥çœ‹è´å¡å°”æ›²çº¿çš„é“¾æ¥ http://myst729.github.io/bezier-curve/ http://cubic-bezier.com/#.17,.67,.83,.67 è¿™é‡Œæ˜¯ä¸€ä¸ªå¿«é€Ÿç¡®å®šç‚¹ä½ç½®çš„æ•™ç¨‹ https://www.jianshu.com/p/1d766455445b","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"GitHubä½¿ç”¨SSHçš„æ–¹å¼å…å¯†ä¸Šä¼ ","slug":"GitHubä½¿ç”¨SSHçš„æ–¹å¼å…å¯†ä¸Šä¼ ","date":"2018-07-05T05:13:25.000Z","updated":"2018-07-05T05:33:39.132Z","comments":true,"path":"Tools/GitHubä½¿ç”¨SSHçš„æ–¹å¼å…å¯†ä¸Šä¼ /","link":"","permalink":"http://www.wangzhumo.com/Tools/GitHubä½¿ç”¨SSHçš„æ–¹å¼å…å¯†ä¸Šä¼ /","excerpt":"","text":"å‰è¨€å‰ä¸€æ®µæ—¶é—´æ¢äº†githubè´¦å·,å„ç§è½¬ç§»æ•°æ®,ç´¯æ­»æˆ‘ è€Œå,æˆ‘é¡ºæ‰‹æ·»åŠ äº†githubçš„ssh-key(æ–°åˆ›å»ºäº†ä¸€ä¸ªrsaçš„Key),ç„¶è€Œå½“æˆ‘: 1234567# phyooos @ wangzhumo in ~/develop/hexo [12:10:02] C:2$ hexo dINFO Deploying: gitINFO Clearing .deploy_git folder... #...git@github.com: Permission denied (publickey).fatal: Could not read from remote repository. å¾ˆè¿·,å®Œå…¨ä¸çŸ¥é“ä¸ºä»€ä¹ˆ æ’é™¤é—®é¢˜æŸ¥çœ‹~/.sshç›®å½•123456789-rw------- 1 phyooos staff 1.6K 6 27 2017 aliyun_rsa-rw-r--r-- 1 phyooos staff 398B 6 27 2017 aliyun_rsa.pub-rw-r--r-- 1 phyooos staff 402B 5 22 2017 authorized_keys-rw-r--r-- 1 phyooos staff 1.1K 6 28 14:48 config-rw------- 1 phyooos staff 3.2K 6 27 18:05 github_rsa-rw-r--r-- 1 phyooos staff 746B 6 27 18:05 github_rsa.pub-rw------- 1 phyooos staff 1.6K 5 17 2017 id_rsa-rw-r--r--@ 1 phyooos staff 402B 5 17 2017 id_rsa.pub-rw-r--r-- 1 phyooos staff 1.3K 7 5 12:33 known_hosts å…¶ä¸­ 12-rw------- 1 phyooos staff 3.2K 6 27 18:05 github_rsa-rw-r--r-- 1 phyooos staff 746B 6 27 18:05 github_rsa.pub å°±æ˜¯æˆ‘åˆ›å»ºç”¨æ¥ç»™githubç”¨çš„ æŸ¥çœ‹~/.ssh/config123456# ---- github------------------Host github HostName github.com User git IdentityFile /Users/phyooos/.ssh/github_rsa# ----------------------------- ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„,è€Œgithubä¸Šçš„keyä¹Ÿå°±ç¡®å®æ˜¯github_rsa.pub Towerä½†æ˜¯æˆ‘çš„Towerä¸Š,ä¹Ÿæœ‰å‡ ä¸ªgithubä¸Šçš„é¡¹ç›®,å´å¯ä»¥æ­£å¸¸çš„ä¸Šä¼ , è€ŒTowerä¸Šçš„ç§é’¥æ˜¯æˆ‘æ‰‹åŠ¨é…ä¸Šå»çš„,æ‰€ä»¥é—®é¢˜åªæœ‰å¯èƒ½æ˜¯ç»ˆç«¯ä¸­æ²¡æœ‰æŒ‰ç…§æˆ‘çš„é…ç½®IdentityFile /Users/phyooos/.ssh/github_rsaæ¥å’Œgithubå»ºç«‹è¿æ¥ æˆ‘å°è¯•æŠŠid_rsa.pubå¯†é’¥åŠ å…¥åˆ°githubä¸Š. 1234To github.com:wangzhumo/wangzhumo.github.io.git c45bbef..6b25311 HEAD -&gt; masterBranch 'master' set up to track remote branch 'master' from 'git@github.com:wangzhumo/wangzhumo.github.io.git'.INFO Deploy done: git ç«Ÿç„¶æˆåŠŸäº†. ç»“è®º~/.ssh/configä¸­çš„é…ç½®,è«åæ²¡æœ‰ç”Ÿæ•ˆ,æˆ‘è‡³ä»Šä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆ è¿˜æ˜¯è¯´,githubåœ¨ç»ˆç«¯ä¸­ä¸Šä¼ æ—¶,åªä¼šé»˜è®¤å»æ‹¿id_rsa??? é‚£å°±å…ˆè¿™ä¹ˆç”¨å§..è¿·","categories":[{"name":"Tools","slug":"Tools","permalink":"http://www.wangzhumo.com/categories/Tools/"}],"tags":[{"name":"GitHub","slug":"GitHub","permalink":"http://www.wangzhumo.com/tags/GitHub/"}]},{"title":"Androidéé™æ€å†…éƒ¨ç±»ä¸åŒ¿åå†…éƒ¨ç±»å¼•èµ·çš„å†…å­˜æ³„æ¼","slug":"Androidéé™æ€å†…éƒ¨ç±»ä¸åŒ¿åå†…éƒ¨ç±»å¼•èµ·çš„å†…å­˜æ³„æ¼","date":"2018-07-05T04:06:51.000Z","updated":"2018-07-05T04:09:22.075Z","comments":true,"path":"Android/Androidéé™æ€å†…éƒ¨ç±»ä¸åŒ¿åå†…éƒ¨ç±»å¼•èµ·çš„å†…å­˜æ³„æ¼/","link":"","permalink":"http://www.wangzhumo.com/Android/Androidéé™æ€å†…éƒ¨ç±»ä¸åŒ¿åå†…éƒ¨ç±»å¼•èµ·çš„å†…å­˜æ³„æ¼/","excerpt":"","text":"å†…å­˜å†…å­˜æ³„æ¼ç®€å•çš„è¯´ï¼Œå½“æˆ‘ä»¬çš„å¯¹è±¡åˆ›å»ºæ—¶ï¼Œå°±å ç”¨äº†ä¸€éƒ¨åˆ†å†…å­˜ï¼Œè€Œåœ¨è¿™ä¸ªå¯¹è±¡æ²¡æœ‰è¢«å¼•ç”¨åä¼šè¿›è¡Œå›æ”¶é”€æ¯ï¼Œ ä»¥é‡Šæ”¾æ‰å ç”¨çš„å†…å­˜ã€‚ä½†æ˜¯å¦‚æœjvmæ²¡æœ‰æˆåŠŸå›æ”¶è¿™ä¸ªå¯¹è±¡ï¼Œå°±ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚ å†…å­˜æº¢å‡ºAndroidä¸­çš„OOMï¼Œç³»ç»Ÿä¼šç»™æ¯ä¸€ä¸ªAndroidç¨‹åºåˆ†é…ä¸€å®šçš„å†…å­˜ã€‚æˆ‘çš„çš„Appå¯èƒ½ä¼šå› ä¸ºå¤§é‡çš„å†…å­˜æ³„æ¼è€Œå¯¼è‡´å†…å­˜è€—å°½ï¼Œå¼•å‘OOMå¯¼è‡´æ•´ä¸ªAppçš„å´©æºƒã€‚ å°±ç®—å†…å­˜æ²¡æœ‰è€—å°½è€Œå´©æºƒï¼Œä¹Ÿä¼šå¯¼è‡´Appå†…å­˜ä¸è¶³ã€‚æ­¤æ—¶æˆ‘ä»¬åˆ›å»ºæ–°çš„å¯¹è±¡æˆ–è€…å…¶ä»–æ–¹å¼éœ€è¦ä½¿ç”¨å†…å­˜æ—¶ï¼ŒGCå°±ä¼šä¸»åŠ¨è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä¸ºä½ çš„æ“ä½œå‡†å¤‡å¥½å†…å­˜ç©ºé—´ï¼Œæ¯æ¬¡GCéƒ½æ˜¯é˜»å¡æ“ä½œï¼Œè¿™å°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„Appå¡é¡¿ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¼˜åŒ–Appå¡é¡¿æ—¶ï¼Œæœ‰ä¸€ç‚¹å°±æ˜¯è¦å…³æ³¨â€œå†…å­˜æŠ–åŠ¨â€ã€‚ æ¡ˆä¾‹handlerçš„å†…éƒ¨ç±»1234567891011121314151617181920212223 public class MainActivity extends Activity &#123; private final Handler mHandler = new Handler() &#123; @Override public void handleMessage(Message msg) &#123; // do something &#125; &#125; public void test1()&#123; // å»¶æ—¶60s mHandler.postDelayed(new Runnable() &#123; @Override public void run() &#123; //run &#125; &#125;, 6000); finish(); &#125; &#125; æˆ‘ä»¬çŸ¥é“åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºçš„Handlerä¼šè¢«å…³è”åˆ° Looperï¼ˆä¸»çº¿ç¨‹çš„ï¼‰ä¸­å»ï¼Œè€Œä¸»çº¿ç¨‹çš„Looperåœ¨åº”ç”¨ç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­å­˜åœ¨ ï¼Œæ­¤æ—¶çš„Messageä¼šæŒæœ‰Handlerå¯¹è±¡ï¼Œç”¨æ¥æœ€åå¤„ç†æ¶ˆæ¯ã€‚ ä¹Ÿå°±æ˜¯è°ƒç”¨Handler#handleMessage(Message msg) å½“æˆ‘ä»¬è°ƒç”¨test1()æ–¹æ³• å»¶æ—¶60sæ‰§è¡Œï¼ˆä½†å®é™…ä¸Šï¼Œè¿™ä¸ªmessageå·²ç»å‘é€ï¼Œåœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­äº†ï¼Œåªæ˜¯60såæ‰ handleMessageï¼‰ finish()æ‰è¿™MainActivity new Runnableæ˜¯ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œä¼šæŒæœ‰éšå¼çš„å¤–éƒ¨ç±»å¼•ç”¨ è¿™ä¸‹å°±å¾®å¦™äº†ï¼ŒMainActivityå·²ç»è¢«finishäº†ï¼Œä½†æ˜¯å»¶æ—¶Messageå´è¿˜å­˜åœ¨äºæ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç›´åˆ°å®ƒè¢«å¤„ç† å»¶æ—¶Message æŒæœ‰ MainActivityçš„Handler(ç”¨æ¥å¤„ç†è¿™ä¸ªæ¶ˆæ¯)ï¼Œè€Œæˆ‘ä»¬çŸ¥é“åœ¨Javaä¸­ï¼Œéé™æ€å†…éƒ¨ç±»å’ŒåŒ¿åç±»ä¼šéšå¼æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»çš„å¼•ç”¨ ï¼Œåœ¨è¿™é‡Œå°±æ˜¯Handleréšå¼æŒæœ‰MainActivity è¿™ä¸‹å°±å¯¼è‡´ï¼ŒMainActivity æ²¡æœ‰è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ è¿˜æœ‰ä¸ªRunnableé‚£â€¦ è§£å†³æ€è·¯ å»é™¤éšå¼å¼•ç”¨ï¼Œå¯ä»¥æŠŠéé™æ€å†…éƒ¨ç±»è½¬åŒ–æˆé™æ€çš„ æ‰‹åŠ¨ç®¡ç†å¤–éƒ¨ç±»ä¾èµ–ï¼Œå¦‚æœä¸€å®šè¦ä½¿ç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨ä¼ å…¥å¤–éƒ¨ç±»ï¼ˆåƒContextè¿™æ ·çš„å®Œå…¨å¯ä»¥ä½¿ç”¨ApplicationContextæ›¿ä»£ï¼‰ æ¡ˆä¾‹å°ç»“éé™æ€çš„å†…éƒ¨ç±»ï¼Œç”±äºå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½åŒå¤–éƒ¨ç±»ä¸€è‡´ï¼Œå®ƒçš„ç”Ÿå­˜å‘¨æœŸå·²ç»è¶…è¿‡äº†å®ƒçš„å¤–éƒ¨ç±»ã€‚ æ‰€ä»¥åœ¨å®ƒçš„å¤–éƒ¨ç±»è¢«å›æ”¶æ—¶ï¼Œè¢«å®ƒæ‰“æ–­äº†è¿™ä¸ªæ“ä½œï¼Œå¯¼è‡´å†…å­˜æ³„æ¼äº§ç”Ÿ å†…éƒ¨ç±»Javaä¸­å†…éƒ¨ç±»åˆ†ä¸ºå››ç§ é™æ€å†…éƒ¨ç±» é™æ€åŒ¿åå†…éƒ¨ç±» éé™æ€å†…éƒ¨ç±» éé™æ€å†…éƒ¨åŒ¿åç±» è¯´æ˜ æˆå‘˜å†…éƒ¨ç±» é™æ€å†…éƒ¨ç±» é™æ€æˆå‘˜ é™æ€æˆå‘˜éœ€åŒæ—¶æœ‰finalå…³é”®è¯ä¿®é¥° å¯ä»¥ é™æ€æ–¹æ³• ä¸å¯å®šä¹‰ å¯ä»¥ è®¿é—®å¤–éƒ¨ç±»éstaticå±æ€§/æ–¹æ³• å¤–éƒ¨ç±»å.this.æˆå‘˜æ–¹æ³•/å±æ€§ ä¸å¯ä»¥ å¤–éƒ¨ç±»è®¿é—®å†…éƒ¨ç±» éœ€è¦é€šè¿‡å†…éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹æ¥è®¿é—® éœ€è¦é€šè¿‡å†…éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹æ¥è®¿é—® åˆ›å»ºå®ä¾‹ å¤–éƒ¨ç±»å.å†…éƒ¨ç±»å å®ä¾‹å = å¤–éƒ¨ç±»å®ä¾‹å.new å†…éƒ¨ç±»æ„é€ æ–¹æ³•(å‚æ•°) å¤–éƒ¨ç±»å.å†…éƒ¨ç±»å å®ä¾‹å = new å¤–éƒ¨ç±»å.å†…éƒ¨ç±»å(å‚æ•°) ç¼–è¯‘åçš„classæ–‡ä»¶ å•ç‹¬çš„classæ–‡ä»¶(soå†…éƒ¨ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡å¯ä»¥è·Ÿçˆ¶ç±»çš„æ–¹æ³•å’Œå˜é‡åŒå)ï¼Œå¤–éƒ¨ç±»$å†…éƒ¨ç±».class å•ç‹¬çš„classæ–‡ä»¶(soå†…éƒ¨ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡å¯ä»¥è·Ÿçˆ¶ç±»çš„æ–¹æ³•å’Œå˜é‡åŒå)ï¼Œå¤–éƒ¨ç±»$å†…éƒ¨ç±».class å…¶ä»– ä¸å¤–éƒ¨ç±»å¹³çº§çš„ç±»ç»§æ‰¿å†…éƒ¨ç±»æ—¶ï¼Œå…¶æ„é€ æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥çˆ¶ç±»çš„å®ä¾‹å¯¹è±¡ã€‚ä¸”åœ¨æ„é€ æ–¹æ³•çš„ç¬¬ä¸€å¥è°ƒç”¨â€œå¤–éƒ¨ç±»å®ä¾‹å.super(å†…éƒ¨ç±»å‚æ•°)â€ æ—  è¯´æ˜ æˆå‘˜å†…éƒ¨ç±» åŒ¿åå†…éƒ¨ç±» é™æ€æˆå‘˜ é™æ€æˆå‘˜éœ€åŒæ—¶æœ‰finalå…³é”®è¯ä¿®é¥° ä¸å¯å®šä¹‰ é™æ€æ–¹æ³• ä¸å¯å®šä¹‰ ä¸å¯å®šä¹‰ è®¿é—®å¤–éƒ¨ç±»éstaticå±æ€§/æ–¹æ³• å¤–éƒ¨ç±»å.this.æˆå‘˜æ–¹æ³•/å±æ€§ å¤–éƒ¨ç±»å.this.æˆå‘˜æ–¹æ³•/å±æ€§ å¤–éƒ¨ç±»è®¿é—®å†…éƒ¨ç±» éœ€è¦é€šè¿‡å†…éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹æ¥è®¿é—® éœ€è¦é€šè¿‡å†…éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹æ¥è®¿é—® åˆ›å»ºå®ä¾‹ å¤–éƒ¨ç±»å.å†…éƒ¨ç±»å å®ä¾‹å = å¤–éƒ¨ç±»å®ä¾‹å.new å†…éƒ¨ç±»æ„é€ æ–¹æ³•(å‚æ•°) å¦‚ä¸Šï¼šçˆ¶ç±» å®ä¾‹å = new çˆ¶ç±»ï¼ˆï¼‰{} ç¼–è¯‘åçš„classæ–‡ä»¶ å•ç‹¬çš„classæ–‡ä»¶(soå†…éƒ¨ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡å¯ä»¥è·Ÿçˆ¶ç±»çš„æ–¹æ³•å’Œå˜é‡åŒå)ï¼Œå¤–éƒ¨ç±»$å†…éƒ¨ç±».class å•ç‹¬çš„classæ–‡ä»¶ï¼Œä½¿ç”¨ç±»$æ•°å­—.class å…¶ä»– ä¸å¤–éƒ¨ç±»å¹³çº§çš„ç±»ç»§æ‰¿å†…éƒ¨ç±»æ—¶ï¼Œå…¶æ„é€ æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥çˆ¶ç±»çš„å®ä¾‹å¯¹è±¡ã€‚ä¸”åœ¨æ„é€ æ–¹æ³•çš„ç¬¬ä¸€å¥è°ƒç”¨â€œå¤–éƒ¨ç±»å®ä¾‹å.super(å†…éƒ¨ç±»å‚æ•°)â€ æ—  https://www.cnblogs.com/dorothychai/p/6007709.html å¯ç¤º éé™æ€å†…éƒ¨ç±» æ”¹ä¸º é™æ€éåŒ¿åå†…éƒ¨ç±» ä½¿ç”¨å¼±å¼•ç”¨ åœ¨é€‚å½“çš„æ—¶æœºæ‰‹åŠ¨é”€æ¯ï¼Œåœ¨onDestoryä¸­æ‰‹åŠ¨é”€æ¯ å…»æˆè‰¯å¥½çš„ä¹ æƒ¯ï¼ŒContextã€Handlerã€Timerã€Thread ã€å¹¿æ’­ ã€ IO ç­‰éƒ½è¦æ³¨æ„é”€æ¯","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/tags/Java/"}]},{"title":"ä»¿å†™UCæµè§ˆå™¨è§†é¢‘ç±»æ–°é—»ç‚¹èµæ•ˆæœ","slug":"ä»¿å†™UCæµè§ˆå™¨è§†é¢‘ç±»æ–°é—»ç‚¹èµæ•ˆæœ","date":"2018-07-02T10:20:49.000Z","updated":"2018-07-03T02:42:14.824Z","comments":true,"path":"View/ä»¿å†™UCæµè§ˆå™¨è§†é¢‘ç±»æ–°é—»ç‚¹èµæ•ˆæœ/","link":"","permalink":"http://www.wangzhumo.com/View/ä»¿å†™UCæµè§ˆå™¨è§†é¢‘ç±»æ–°é—»ç‚¹èµæ•ˆæœ/","excerpt":"","text":"ç›®æ ‡æ•ˆæœ ğŸ‘ æ•ˆæœ å°ç‰©ä»¶çš„æŠ›ç‰©çº¿ å°ç‰©ä»¶çš„åˆé€Ÿåº¦ å°ç‰©ä»¶çš„å–·å°„è§’åº¦ å°ç‰©ä»¶å¹¶ä¸æ˜¯ç›´æ¥æ¶ˆå¤±çš„,è€Œæ˜¯é€æ˜åº¦ åˆ†æUCæµè§ˆå™¨çš„apkæ–‡ä»¶,çœ‹åˆ°äº†ä¸€ä¸ªlottieâ€¦ç„¶è€Œ è¿™ä¸ªç‚¹èµ,æ¯æ¬¡çš„æ•ˆæœéƒ½ä¸ä¸€æ ·,åº”è¯¥è€ƒè™‘ä½¿ç”¨å±æ€§åŠ¨ç”»å»å®ç° ä½¿ç”¨å·®å€¼å™¨å¯ä»¥æ¨¡ä»¿æŠ›ç‰©çº¿çš„æ•ˆæœæ¥ä½¿ç”¨,gogogo","categories":[{"name":"View","slug":"View","permalink":"http://www.wangzhumo.com/categories/View/"}],"tags":[{"name":"View","slug":"View","permalink":"http://www.wangzhumo.com/tags/View/"}]},{"title":"Git Submodule å­æ¨¡å—çš„ä½¿ç”¨","slug":"Git-Submodule-å­æ¨¡å—çš„ä½¿ç”¨","date":"2018-07-02T08:41:23.000Z","updated":"2018-07-02T09:45:25.276Z","comments":true,"path":"Tools/Git-Submodule-å­æ¨¡å—çš„ä½¿ç”¨/","link":"","permalink":"http://www.wangzhumo.com/Tools/Git-Submodule-å­æ¨¡å—çš„ä½¿ç”¨/","excerpt":"","text":"å‰è¨€Gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ,å¤§å®¶å…¬å¸å¯èƒ½éƒ½æ˜¯ä½¿ç”¨çš„Gitæ¥è¿›è¡Œç‰ˆæœ¬æ§åˆ¶. å¯¹äºæˆ‘ä¸ªäºº,æœ¬åœ°é¡¹ç›®ä¹Ÿå–œæ¬¢ä½¿ç”¨git,ä¸‡ä¸€å“ªå¤©æƒ³å›é€€ä¸€ä¸‹,æ²¡æœ‰gitå¯å°±çœŸè´¹åŠ²äº†. å¯¹äºgitçš„å¸¸è§„æ“ä½œä¸ç”¨å¤šè¯´,ä»Šå¤©è´´ä¸€ä¸ªsubmoduleçš„çœŸå®ä½¿ç”¨è¿‡ç¨‹ é¡¹ç›®ç»“æ„å¦‚ä¸Š. ä¸ºäº†æ–¹ä¾¿æˆ‘è‡ªå·±ç©,æˆ‘å¼€äº†ä¸€ä¸ªplaygroundçš„é¡¹ç›® playground 123456.â”œâ”€â”€ app #ä¸»é¡¹ç›®â”œâ”€â”€ lib_common #å­é¡¹ç›®,å…¶ä¸­ä¸»è¦æä¾›ä¸‰æ–¹çš„ä¾èµ–,ä»¥åŠæ•´ä¸ªé¡¹ç›®çš„å…¬å…±ä»£ç éƒ¨åˆ† #å› ä¸ºè¿™ä¸ªé¡¹ç›®éœ€è¦åŠæ—¶æ›´æ–°,æ–¹ä¾¿æ¯ä¸ªäººä½¿ç”¨,æ‰€ä»¥æ˜¯ä¸€ä¸ªsubmoduleæ¥ç®¡ç† â”œâ”€â”€ lib_player â”œâ”€â”€ module_views #ä»Šå¤©è¦æ¼”ç¤ºçš„å­æ¨¡å— å…¶å®Submodule å’ŒAndroidçš„ç»„ä»¶åŒ–æ›´é…å“¦,å±äºå¼ºå¼ºè”åˆ åˆ›å»ºmodule_viewsæ¨¡å—å»ºç«‹moduleåœ¨æˆ‘ä»¬playgroundçš„é¡¹ç›®ä¸Š,åˆ›å»ºä¸€ä¸ªæ–°æ¨¡å—,æ€ä¹ˆæ“ä½œå°±ä¸è¯´äº† åœ¨module_viewsä¸­åˆå§‹åŒ–Git æ³¨æ„,å½“module_viewsè¿™ä¸ªæ¨¡å—åˆ›å»ºæ—¶,ä¸€å®šä¸è¦æ‰‹å¿«æŠŠè¿™ä¸ªæ¨¡å—æ·»åŠ åˆ°playgroundæ•´ä¸ªé¡¹ç›®çš„ç‰ˆæœ¬æ§åˆ¶ä¸­ è®°å¾—å¿½ç•¥module_viewsæ•´ä¸ªmodule ç›´æ¥è´´æ“ä½œäº† 12345678910111213# phyooos @ wangzhumo in ~ [16:38:01]$ cd ~/workspace/playground# phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:58:48]$ ll | grep 'module_views'drwxr-xr-x 11 phyooos staff 352B 7 2 16:31 module_views# phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:59:03]$ cd module_views# phyooos @ wangzhumo in ~/workspace/playground/module_views [16:59:19]$ git initReinitialized existing Git repository in /Users/phyooos/workspace/playground/module_views/.git/ å› ä¸ºæˆ‘çš„module_viewså·²ç»åˆ›å»ºgitä»“åº“äº†,æ‰€ä»¥æœ€åä¸€æ­¥æç¤º Reinitialized existing Git repository å…³è”è¿œç¨‹ä»“åº“è¿™ä¸€æ­¥éšæ„,æˆ‘æœ¬äººæ˜¯åœ¨githubä¸Šåˆ›å»ºäº†ä¸€ä¸ªåä¸ºmodule_viewsçš„åº“ æ‹¿åˆ°è¿œç¨‹ä»“åº“åœ°å€ git@github.com:wangzhumo/module_views.git 12345678910111213# phyooos @ wangzhumo in ~/workspace/playground/module_views [16:59:30]$ git remote add origin git@github.com:wangzhumo/module_views.git# phyooos @ wangzhumo in ~/workspace/playground/module_views on git:master o [16:59:30]$ git pushEverything up-to-date# phyooos @ wangzhumo in ~/workspace/playground/module_views on git:master o [17:06:51]$ git statusOn branch masterYour branch is up to date with 'origin/master'.nothing to commit, working tree clean æ·»åŠ è¿œç¨‹ä»“åº“,å¹¶push,æŠŠæœ¬åœ°ä»£ç æäº¤åˆ°githubä¸Šå»,å› ä¸ºæˆ‘è‡ªå·±å·²ç»æäº¤è¿‡äº†,æ‰€ä»¥å¯ä»¥çœ‹åˆ° Everything up-to-date æ·»åŠ å­æ¨¡å—åˆ°playgroundä¸­è´´æ“ä½œ 123456789101112131415161718192021# phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:38:12]$ git submodule add git@github.com:wangzhumo/module_views.git ./module_viewsThe following path is ignored by one of your .gitignore files:module_viewsUse -f if you really want to add it.# phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:38:59] C:1$ git submodule add -f git@github.com:wangzhumo/module_views.git ./module_viewsAdding existing repo at 'module_views' to the index# phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:39:21]$ git submodule 1616423ab118e2154bcf018c825f6ed3a57cf59b lib_common (heads/master) 55ae43eb327207a456624c69e3c01868f8cf43e3 module_views (heads/master)# phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:39:48]$ git submodule foreach git pullEntering 'lib_common'Already up to date.Entering 'module_views'Already up to date. ä¸‹é¢è§£é‡Šæ¯ä¸€æ¡å‘½ä»¤ git submodule add git@github.com:wangzhumo/module_views.git ./module_views æ·»åŠ å­æ¨¡å— git submodule add &lt;repository&gt; &lt;path&gt; æ·»åŠ å­æ¨¡å— æç¤ºå¦‚ä¸‹: 123The following path is ignored by one of your .gitignore files:module_viewsUse -f if you really want to add it. è¯´æˆ‘å·²ç»æŠŠmodule_viewsæ·»åŠ åˆ°å¿½ç•¥æ–‡ä»¶ä¸­äº†,å¦‚æœç¡®å®æƒ³è¿™æ ·æ“ä½œ,åŠ ä¸Š-få¼ºåˆ¶æ“ä½œ git submodule add -f git@github.com:wangzhumo/module_views.git ./module_views å¯ä»¥çœ‹åˆ°æç¤º,æˆ‘å·²ç»æˆåŠŸçš„æŠŠmodule_viewsä½œä¸ºå­é¡¹ç›®æ·»åŠ åˆ°playgroundä¸­äº† git submodule ä¸€å…±çœ‹åˆ°ä¸¤ä¸ªå­æ¨¡å—,ä¸€ä¸ªæ˜¯åˆšæ·»åŠ çš„module_views,ä¸€ä¸ªæ˜¯æˆ‘ä¹‹å‰æ·»åŠ çš„ git submodule foreach git pull æ‹‰å–æœ€æ–°ä»£ç  å…¶ä»–submoduleæ“ä½œæ–‡æ¡£","categories":[{"name":"Tools","slug":"Tools","permalink":"http://www.wangzhumo.com/categories/Tools/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://www.wangzhumo.com/tags/Git/"}]},{"title":"ServiceLoader ä¸ è´£ä»»é“¾è®¾è®¡æ¨¡å¼","slug":"ServiceLoader-ä¸-è´£ä»»é“¾è®¾è®¡æ¨¡å¼","date":"2018-06-26T10:22:46.000Z","updated":"2018-06-27T08:36:54.134Z","comments":true,"path":"Java/ServiceLoader-ä¸-è´£ä»»é“¾è®¾è®¡æ¨¡å¼/","link":"","permalink":"http://www.wangzhumo.com/Java/ServiceLoader-ä¸-è´£ä»»é“¾è®¾è®¡æ¨¡å¼/","excerpt":"","text":"å‰å› æœ€è¿‘åœ¨åšäººè„¸è¯†åˆ«çš„ä¸€äº›ä¸œè¥¿ ä¸»è¦æ˜¯ä½¿ç”¨ç™¾åº¦çš„SDKæ¥å®Œæˆé‡‡é›†, è¯†åˆ«. è¿™ä¸ªåŠŸèƒ½æ˜¯ä½¿ç”¨ç™¾åº¦äº‘çš„Apiæ¥å¯¹äººè„¸è¿›è¡Œåˆ†æ,æ‹¿åˆ°å¹´é¾„ é¢œå€¼ ç­‰ç­‰ä¿¡æ¯ ç¬¬ä¸€ç‰ˆè®¾è®¡ç¨¿: é‚£æˆ‘å°±ç›´æ¥æŠŠè¯·æ±‚åˆ°çš„æ•°æ®å±•ç¤ºäº†ä¸€ä¸‹,ç„¶è€Œ ç¬¬äºŒç‰ˆè®¾è®¡ç¨¿: è¿™ä¸€ç‰ˆå°±æ˜¯éœ€è¦æŠŠæ‹¿åˆ°çš„æ•°å€¼æŒ‰ç…§åŒºé—´æ¥å±•ç¤ºæˆæ–‡å­—æè¿° é‚£ä¹ˆ,åº”è¯¥å°±æ˜¯å„ç§switch if else â€¦. æœ¬æ¥ä¹Ÿæ˜¯åšDemo,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é«˜ç‚¹å…¶ä»–çš„ä¸œè¥¿,äºæ˜¯æˆ‘å°±æƒ³èµ·äº†è´£ä»»é“¾æ¨¡å¼,å‹‰å¼ºå¯ä»¥åšåšä¹ˆ å®ç°è´£ä»»é“¾å®šä¹‰æŠ½è±¡ç±»com.baidu.aip.fl.func.service.HandlerFace.java æ¥å£ 12345678910111213141516public abstract class HandlerFace &#123; private HandlerFace nextHandler; //æ¥æ”¶ä¸€ä¸ªå®ä½“ç±» public abstract ResultBean process(ResultBean bean); //è¿”å›ä¸‹ä¸€ä¸ªå¤„ç†ç±» public HandlerFace nextHandler()&#123; return nextHandler; &#125; //è®¾ç½®ä¸‹ä¸€ä¸ªå¤„ç†ç±» public void setHandler(HandlerFace handler)&#123; this.nextHandler = handler; &#125;&#125; å…·ä½“å®ç°com.baidu.aip.fl.func.service.AgeHandlerFace.java å®ç°ç±»,å¤„ç†å¹´é¾„ä¿¡æ¯ 123456789101112131415161718192021222324252627282930public class AgeHandlerFace extends HandlerFace &#123; @Override public ResultBean process(ResultBean bean) &#123; //1.å¤„ç†è‡ªå·±çš„äº‹æƒ… if (bean != null &amp;&amp; bean.getIntAge() == 0 )&#123; bean.setResultAge(\"-\"); &#125;else if (bean != null &amp;&amp; bean.getIntAge() &lt;= 5)&#123; bean.setResultAge(\"å°æœ‹å‹\"); &#125;else if (bean != null &amp;&amp; bean.getIntAge() &lt;= 10)&#123; bean.setResultAge(\"ä¸­ç­‰æœ‹å‹\"); &#125;else if (bean != null &amp;&amp; bean.getIntAge() &lt;= 15)&#123; bean.setResultAge(\"å¤§æœ‹å‹\"); &#125;else if (bean != null &amp;&amp; bean.getIntAge() &lt;= 20)&#123; bean.setResultAge(\"æˆå¹´äºº\"); &#125;else if (bean != null &amp;&amp; bean.getIntAge() &lt;= 40)&#123; bean.setResultAge(\"ä¸­å¹´äºº\"); &#125;else if (bean != null &amp;&amp; bean.getIntAge() &lt;= 60)&#123; bean.setResultAge(\"è€å¹´äºº\"); &#125;else if (bean != null &amp;&amp; bean.getIntAge() &lt;= 100)&#123; bean.setResultAge(\"å¹´çºªå¥½å¤§\"); &#125; //2.æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªäººæ¥å¤„ç† if (nextHandler() != null)&#123; //2.1.å¦‚æœæœ‰ä¸‹ä¸€ä¸ªå¤„ç†ç±»,åˆ™æŠŠä¿¡æ¯äº¤ç»™ä»–ç»§ç»­å¤„ç† return nextHandler().process(bean); &#125; //3.æ²¡æœ‰ä¸‹ä¸€ä¸ªå¤„ç†ç›´æ¥è¿”å› return bean; &#125;&#125; AgeHandlerFaceç±»åªå¤„ç†å¹´çºªç›¸å…³çš„ä¸œè¥¿ com.baidu.aip.fl.func.service.BeautyHandlerFace.java com.baidu.aip.fl.func.service.GenderHandlerFace.java åŒæ ·å®ç°HandlerFace,åˆ†åˆ«å¤„ç†é¢œå€¼å’Œæ€§åˆ« ServiceLoaderä¸Šé¢çš„è´£ä»»é“¾å…¶å®å·²ç»å¯ä»¥ä½¿ç”¨,ä½†æ˜¯éœ€è¦æ‰‹åŠ¨æ¥åˆå§‹åŒ–æ¯ä¸ªå…·ä½“å®ç°ç±», å¹¶ä¸”ä¸€ä¸ªä¸€ä¸ªè®¾ç½® nextHandler ,æœ€åè°ƒç”¨å¤„ç† 123456789101112131415161718192021222324252627282930313233343536public class RealProcessFace&#123; //ä¿å­˜HandlerFaceçš„æ¯ä¸€ä¸ªå®ç°ç±» private static ArrayList&lt;HandlerFace&gt; arraylist; static &#123; arraylist = new ArrayList(); //é€šè¿‡ServiceLoaderæ¥åŠ è½½æ‰€æœ‰HandlerFaceçš„å®ç°ç±» ServiceLoader&lt;HandlerFace&gt; processors = ServiceLoader.load(HandlerFace.class); Iterator iterator = processors.iterator(); while (iterator.hasNext()) &#123; //iterator.next() è¿™é‡Œå…·ä½“å®ç°ç±»æ‰çœŸæ­£çš„åˆå§‹åŒ–äº† arraylist.add((HandlerFace) iterator.next()); &#125; &#125; /** * è·å–ç»„åˆçŸ­è¯­ * @param task äººè„¸ä¿¡æ¯ * @return ç»„åˆçŸ­è¯­ */ public static String process(ResultBean task) &#123; for (int i = 0; i &lt; arraylist.size() - 1 ; i++) &#123; //ä¾æ¬¡è®¾ç½®setHandler //å› ä¸ºæˆ‘å¹¶ä¸éœ€è¦ä»–ä»¬ä¾æ¬¡å¤„ç†,æ‰€ä»¥æˆ‘å¹¶ä¸å…³ç³»ä»–ä»¬å¤„ç†çš„é¡ºåº //å¦‚æœæ˜¯éœ€è¦é¡ºåºæ‰§è¡Œçš„è¯,å»ºè®®è¿˜æ˜¯æ‰‹åŠ¨å¤„ç† arraylist.get(i).setHandler(arraylist.get(i+1)); &#125; //è°ƒç”¨ç¬¬ä¸€ä¸ªå¤„ç†ç±»,å°±ä¼šä¾æ¬¡è°ƒç”¨åé¢çš„å¤„ç†ç±» ResultBean resultBean = arraylist.get(0).process(task); //è¿”å›å¤„ç†ç»“æœ return resultBean.format(); &#125; &#125; ä½¿ç”¨æ–¹æ³• 1.åˆ›å»ºä¸€ä¸ªbaseç±»,å°±æ˜¯æˆ‘ä¸Šé¢å†™è¿‡çš„,å¯ä»¥æ˜¯æ¥å£å’ŒæŠ½è±¡ç±» com.baidu.aip.fl.func.service.HandlerFace 2.ä¸€ä¸ªæˆ–å¤šä¸ªå®ç°ç±» com.baidu.aip.fl.func.service.AgeHandlerFace.java com.baidu.aip.fl.func.service.BeautyHandlerFace.java com.baidu.aip.fl.func.service.GenderHandlerFace.java è¿™é‡Œä¸€å…±æ˜¯3ä¸ª 3.å®šä¹‰resources/META-INF/ â€¦. æ–‡ä»¶ è¯¥æ–‡ä»¶æ— æ‹“å±•å æ–‡ä»¶åå°±æ˜¯ baseç±» æˆ–è€…æ¥å£ çš„å…¨è·¯å¾„( åŒ…å + Filename ) æ–‡ä»¶ä¸­æ¯ä¸€è¡Œå†™ä¸€ä¸ªå®ç°ç±»çš„å…¨è·¯å¾„å( åŒ…å + Filename ) src/main/resources/META-INF/services/com.baidu.aip.fl.func.service.HandlerFace 123com.baidu.aip.fl.func.service.GenderHandlerFacecom.baidu.aip.fl.func.service.AgeHandlerFacecom.baidu.aip.fl.func.service.BeautyHandlerFace 4.è·å–æ‰€æœ‰å®ç°ç±» 1234567ServiceLoader&lt;HandlerFace&gt; processors = ServiceLoader.load(HandlerFace.class);//æ³¨æ„æ­¤æ—¶å®ç°ç±»éƒ½æ²¡æœ‰å®ä¾‹åŒ–Iterator iterator = processors.iterator();while (iterator.hasNext()) &#123; //iterator.next() è¿™é‡Œå…·ä½“å®ç°ç±»æ‰çœŸæ­£çš„åˆå§‹åŒ–äº† arraylist.add((HandlerFace) iterator.next());&#125; è¿™æ ·çš„æ‡’åŠ è½½è¿‡ç¨‹æ˜¯ç”±ServiceLoaderå®ç°çš„ æ€»ç»“è´£ä»»é“¾è¿™æ ·çš„å½¢å¼,ä¸ºåæœŸçš„æ‰©å±•æä¾›äº†å¾ˆå¤§çš„ä¾¿åˆ© AgeHandlerFace ä¸­,æˆ‘å¯ä»¥åˆ†æ›´ç»†çš„ç²’åº¦,ä¹Ÿå¯ä»¥åˆå¹¶. eg: 50 ä»¥ä¸‹éƒ½æ˜¯å¹´è½»äºº â€‹ 100 - 50 æ˜¯è€å¹´äºº è´£ä»»é“¾è™½ç„¶Androidç«¯æœ€æ˜¾è‘—çš„ç®—æ˜¯ äº‹ä»¶åˆ†å‘æœºåˆ¶ ,å¾ˆå¤šæ¡†æ¶ä¸­ä¹Ÿéƒ½æœ‰ä½¿ç”¨,filterè¿™æ ·çš„ä¸œè¥¿ ServiceLoaderè¿™ä¸ªä¸œè¥¿,å¾ˆå¼ºå¤§ åœ¨æ’ä»¶åŒ–,ä»¥åŠ æœåŠ¡æä¾›ç­‰æ–¹é¢éƒ½æœ‰åº”ç”¨","categories":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/categories/Java/"}],"tags":[{"name":"-Java -è®¾è®¡æ¨¡å¼","slug":"Java-è®¾è®¡æ¨¡å¼","permalink":"http://www.wangzhumo.com/tags/Java-è®¾è®¡æ¨¡å¼/"}]},{"title":"Androidè‡ªå·±å°è£…ä¸€ä¸ªVideoPlayer","slug":"Androidè‡ªå·±å°è£…ä¸€ä¸ªVideoPlayer","date":"2018-05-23T08:00:32.000Z","updated":"2018-05-23T15:34:52.909Z","comments":true,"path":"Video/Androidè‡ªå·±å°è£…ä¸€ä¸ªVideoPlayer/","link":"","permalink":"http://www.wangzhumo.com/Video/Androidè‡ªå·±å°è£…ä¸€ä¸ªVideoPlayer/","excerpt":"","text":"éœ€æ±‚åˆ†æå®šä¹‰: æ’­æ”¾å™¨ - TextureView .. æ’­æ”¾æ§åˆ¶å™¨ - MeadiaPlayer Ijk æ§åˆ¶å™¨ - å³æ§åˆ¶æ’­æ”¾çš„UIéƒ¨åˆ†,å¿«è¿›ç­‰ç­‰ éœ€æ±‚: æ’­æ”¾å™¨ , æ’­æ”¾æ§åˆ¶å™¨ , æ§åˆ¶å™¨UI åˆ†ç¦»,æ–¹ä¾¿éšæ—¶æ›¿æ¢ å¯¹MeadiaPlayer ç®¡ç†,è¾¾åˆ°æ— ç¼åˆ‡æ¢æ’­æ”¾å™¨ å‚è€ƒ: JiaoZiVideoPlayer GSYVideoPlayer è¿›ä¸€æ­¥åˆ†æ: ç°åœ¨éœ€è¦å®ç°: æ— ä»»ä½•æ§åˆ¶å™¨çš„æ’­æ”¾,ä½†æ˜¯ä¿è¯å…¶åœ¨RecyclerViewä¸­çš„æ’­æ”¾ åªå¯ä»¥ç‚¹å‡»æ’­æ”¾ æ»‘åŠ¨åˆ°ç¬¬ä¸€ä¸ªè‡ªåŠ¨æ’­æ”¾è§†é¢‘ è¯¦æƒ…é¡µæ’­æ”¾å™¨ æ—¶é•¿ æ’­æ”¾è¿›åº¦ å…¨å±æ’­æ”¾ ç»“æ„åˆ†æ ç”±äºä¸€èˆ¬é€šè¿‡æ’­æ”¾å™¨æ¥æ§åˆ¶æ•´ä¸ªæ’­æ”¾è¿‡ç¨‹,æ‰€ä»¥éƒ½åº”è¯¥é›†ä¸­åˆ°æ’­æ”¾å™¨ä¸­å» æ’­æ”¾æ§åˆ¶å™¨ å®šä¹‰ä¸€ä¸ªæ’­æ”¾æ§åˆ¶å™¨çš„æŠ½è±¡ç±»,è¯¥ç±»åº”è¯¥åŒ…å«ä¸€ä¸ªæ’­æ”¾æ§åˆ¶å™¨åº”è¯¥æœ‰çš„åŠŸèƒ½","categories":[{"name":"Video","slug":"Video","permalink":"http://www.wangzhumo.com/categories/Video/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Video","slug":"Video","permalink":"http://www.wangzhumo.com/tags/Video/"}]},{"title":"Androidè‡ªå®šä¹‰ä¸€ä¸ªé®ç½©å¼•å¯¼å±‚","slug":"Androidè‡ªå®šä¹‰ä¸€ä¸ªé®ç½©å¼•å¯¼å±‚","date":"2018-05-21T08:53:08.000Z","updated":"2018-05-23T07:59:43.755Z","comments":true,"path":"uncategorized/Androidè‡ªå®šä¹‰ä¸€ä¸ªé®ç½©å¼•å¯¼å±‚/","link":"","permalink":"http://www.wangzhumo.com/uncategorized/Androidè‡ªå®šä¹‰ä¸€ä¸ªé®ç½©å¼•å¯¼å±‚/","excerpt":"","text":"åˆ†æéœ€æ±‚é«˜äº®æ˜¾ç¤ºæŒ‡å®šçš„æ§ä»¶(1ä¸ªæˆ–è€…å¤šä¸ª) åªæœ‰ä¸€ä¸ªé«˜äº®æ§ä»¶,åˆ™ç›´æ¥ç»˜åˆ¶å³å¯ å¤šä¸ªé«˜äº®æ§ä»¶,åˆ™åˆ†ä¸¤ç§æ•ˆæœå±•ç¤º é¡ºåºå±•ç¤ºæ¯ä¸€ä¸ªæ§ä»¶ å±•ç¤ºæ‰€æœ‰æ§ä»¶ é«˜äº®éƒ¨åˆ†çš„å½¢çŠ¶ æ–¹å½¢ åœ†å½¢ å±•ç¤ºä¸æ¶ˆå¤± è‡ªåŠ¨å±•ç¤º,è‡ªåŠ¨æ¶ˆå¤± ç‚¹å‡»æ¶ˆå¤± ç‚¹å‡»æŒ‡å®šéƒ¨åˆ†æ¶ˆå¤± å®ç°æ–¹å¼é®ç½©å±‚ ç›´æ¥åœ¨æœ¬æ¥çš„é¡µé¢æ˜¯æ·»åŠ ,ä¸ç”¨æ—¶æ¶ˆå¤± ä½¿ç”¨DecorViewçš„æ–¹å¼,æ·»åŠ viewå³å¯ ä½¿ç”¨é€æ˜Activityè¦†ç›– é€‰æ‹©ç¬¬äºŒç§æ–¹å¼æ¥å®ç° ç¬¬ä¸€ç§æ–¹ä¾¿ä½†æ˜¯è€—æ—¶è€—åŠ›,å¹¶ä¸”ä¸èƒ½é€šç”¨ ç¬¬äºŒç§æ˜¯å¤§å®¶éƒ½è®¤å¯çš„ä¸€ç§æ–¹å¼,è€Œä¸”æ”¯æŒé…ç½® ç¬¬ä¸‰ç§,å¯¹åŸç•Œé¢ç”Ÿå‘½å‘¨æœŸé€ æˆå½±å“,ä¸å¤ªå¥½ é«˜äº®çš„å®ç°PorterDuffXfermode :: PorterDuff.Mode.XOR) ä»£ç è®¾è®¡ mask layer View ç”¨æ¥å®ç°é®ç½©å±‚ é«˜äº®æ˜¾ç¤ºç»˜åˆ¶\u0010 æŒ‡ç¤ºè¯­ä½ç½® mask layer Manager ç”¨æ¥ç®¡ç† é®ç½©å±‚ addView Show / hide DecorView æ“ä½œ å…¶ä»–é…ç½®ä¿¡æ¯ mask bean ç”¨æ¥å­˜æ”¾éœ€è¦é«˜äº®çš„Viewä¿¡æ¯(é«˜åº¦,å®½åº¦..) å®ç°mask: MaskGuideView é®ç½©å±‚å®¹å™¨ MaskLayout é«˜äº®æ§ä»¶ä¸æŒ‡ç¤ºè¯­çš„ä½ç½®,ä»¥åŠæ’åˆ—å±•ç¤º MaskManager åŠ è½½ç®¡ç†æ•´ä¸ªé®ç½©å±‚ MaskType é«˜äº®æ§ä»¶çš„å½¢çŠ¶, åœ† æ–¹ TargetInfo é«˜äº®æ§ä»¶çš„ä½ç½®ä¿¡æ¯ TargetInfo.java 123456789101112131415161718192021222324252627282930313233343536373839404142/** * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125; * * @author ç‹è¯›é­” 2018/5/21 ä¸‹åˆ7:20 * * é«˜äº®åŒºåŸŸä¿¡æ¯ */public class TargetInfo &#123; /* * é«˜äº®åŒºåŸŸèµ·å§‹Xåæ ‡ */ public int startX; /* * é«˜äº®åŒºåŸŸèµ·å§‹Yåæ ‡ */ public int startY; /* * é«˜äº®åŒºåŸŸå®½åº¦ */ public int width; /* * é«˜äº®åŒºåŸŸé«˜åº¦ */ public int height; /* * åç§»é‡ */ public int offset = 10; /** * è·å–åŠå¾„ */ public int getRadius() &#123; return Math.max(width, height) / 2; &#125; &#125; MaskType.java 12345678/** * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125; * * @author ç‹è¯›é­” 2018/5/21 ä¸‹åˆ7:18 */public enum MaskType &#123; Rect,Circle&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980/** * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125; * * @author ç‹è¯›é­” 2018/5/21 ä¸‹åˆ11:35 * * è´Ÿè´£ç®¡ç†,å‡†å¤‡,æ“ä½œMaskGuideView */public class MaskManager &#123; //å±æ€§ private static final String TAG = \"MaskManager\"; private final ViewGroup mRootView; private final MaskGuideView mMaskGuideView; private final Context mContext; private List&lt;TargetInfo&gt; mTargetInfoList; private List&lt;View&gt; mTargetViewList; private List&lt;MaskLayout&gt; mMaskLayoutList; private MaskType mMaskType; private boolean isShowAll; private int mPadding; /** * è®¡ç®—targetInfo * * @param targetView view * @return TargetInfo */ private TargetInfo generateTargetInfo(View targetView) &#123; int[] location = new int[2]; //æˆ‘ä»¬éœ€è¦çš„æ˜¯,è¿™ä¸ªtargetViewåœ¨æ•´ä¸ªå±å¹•ä¸Šçš„ä½ç½® targetView.getLocationOnScreen(location); TargetInfo targetInfo = new TargetInfo(); //è®¡ç®—startX width ... switch (mMaskType) &#123; case Rect: targetInfo.startX = location[0] - mPadding; targetInfo.startY = location[1] - mPadding; targetInfo.width = targetView.getWidth() + 2 * mPadding; targetInfo.height = targetView.getHeight() + 2 * mPadding; break; case Circle: int diameter = Math.max(targetView.getWidth() + 2 * mPadding, targetView.getHeight() + 2 * mPadding); targetInfo.startX = location[0] - mPadding; targetInfo.startY = location[1] - mPadding - (diameter / 2 - targetView.getHeight() / 2 - mPadding); targetInfo.width = diameter; targetInfo.height = diameter; break; &#125; Log.e(TAG, \"generateTargetInfo: \" + targetInfo.toString() ); return targetInfo; &#125; /* * builderæ¨¡å¼ */ public static class Builder &#123; private ViewGroup mRootView; private MaskGuideView mMaskGuideView; private Context mContext; private List&lt;TargetInfo&gt; mTargetInfoList; private List&lt;MaskLayout&gt; mMaskLayoutList; private List&lt;View&gt; mTargetViewList; private MaskType mMaskType = MaskType.Circle; private int mPadding = 0; private int mGravity = Gravity.TOP; private boolean isShowAll; ...çœç•¥ public MaskManager build() &#123; this.mMaskGuideView.setOnClickListener(this.mMaskGuideView); return new MaskManager(this); &#125; &#125;&#125; é¢,ä»£ç ä¼ gitå¥½äº†","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"View","slug":"View","permalink":"http://www.wangzhumo.com/tags/View/"}]},{"title":"Android Binderæœºåˆ¶(ä¸€)","slug":"Android-Binderæœºåˆ¶-ä¸€","date":"2018-05-11T05:56:25.000Z","updated":"2018-05-14T11:08:24.216Z","comments":true,"path":"Source-Code/Android-Binderæœºåˆ¶-ä¸€/","link":"","permalink":"http://www.wangzhumo.com/Source-Code/Android-Binderæœºåˆ¶-ä¸€/","excerpt":"","text":"ServiceManageré¦–å…ˆæˆ‘ä»¬è¦äº†è§£ä¸€ä¸‹ServiceManager. ServiceManagerçš„åŠŸèƒ½ä¸»è¦å°±æ˜¯æ³¨å†Œ,æŸ¥è¯¢æœåŠ¡,ä½œä¸ºä¸€ä¸ªå¤§ç®¡å®¶çš„è§’è‰²å‡ºç°. æ³¨å†ŒæœåŠ¡ï¼šè®°å½•æœåŠ¡åå’Œä¿¡æ¯ï¼Œæ”¾åˆ°æœåŠ¡åˆ—è¡¨ æŸ¥è¯¢æœåŠ¡ï¼šæ ¹æ®æœåŠ¡åæŸ¥è¯¢ç›¸åº”çš„çš„ä¿¡æ¯ ServiceManageræ˜¯æœ‰æƒé™æ§åˆ¶çš„ï¼Œåªæœ‰å…·æœ‰ç›¸åº”æƒé™çš„è¿›ç¨‹æ‰èƒ½æ³¨å†Œ,æŸ¥è¯¢æœåŠ¡ http://gityuan.com/2015/11/08/binder-get-sm/ Linuxå†…å­˜å†…æ ¸ç©ºé—´ä¸ºä»€ä¹ˆè¿›ç¨‹é—´ä¸å¯ä»¥ç›´æ¥é€šè®¯é‚£? å› ä¸ºæ¯ä¸ªè¿›ç¨‹çš„å†…å­˜ç©ºé—´éƒ½æ˜¯éš”ç¦»èµ·æ¥çš„,ä¸å¯èƒ½éšæ„å»è®¿é—®å…¶ä»–è¿›ç¨‹çš„å†…å­˜. åœ¨32ä½ç³»ç»Ÿä¸­,å¯»å€ç©ºé—´æœ€å¤§ä¸º4G,é‚£ä¹ˆè¿™4Gå†…å­˜,ä¸€èˆ¬å°†1Gåˆ†é…ç»™å†…æ ¸ç©ºé—´,3Gç”¨æˆ·ç©ºé—´,Linuxå†…æ ¸ç”±ç³»ç»Ÿå†…çš„æ‰€æœ‰è¿›ç¨‹å…±äº«. è¿™ä¹ˆä¸€æ¥,æˆ‘ä»¬å°±å¯ä»¥åœ¨å†…æ ¸ç©ºé—´ä¸ºæ‰€æ¬²ä¸ºäº†,ä¸,å¹¶ä¸èƒ½.ç”¨æˆ·è¿›ç¨‹ä¸èƒ½ç›´æ¥æ“ä½œå†…æ ¸. Androidæ˜¯åœ¨Linuxçš„å†…æ ¸ä¸Šè·‘çš„,é‚£ä¹ˆä¸ºä»€ä¹ˆAndroidè¦è‡ªå·±åšä¸€ä¸ªBinderæ¥å®ç°è¿›ç¨‹é—´çš„é€šè®¯é‚£? æˆ‘ä»¬éƒ½çŸ¥é“Linuxä¸ŠSocket/ç®¡é“/æ¶ˆæ¯é˜Ÿåˆ—éƒ½å¯ä»¥åšåˆ°è¿›ç¨‹é—´çš„é€šè®¯,ä½†æ˜¯é€šè¿‡è¿™äº›éƒ½éœ€è¦2æ¬¡å†…å­˜æ‹·è´, è€ŒBinderåªéœ€è¦ä¸€æ¬¡å°±å¯ä»¥å®Œæˆ,å¤§å¤§çš„æé«˜æ•ˆç‡ BINDER_MMAPmmapå¯ä»¥å°†ä¸€ä¸ªæ–‡ä»¶æˆ–è€…å…¶å®ƒå¯¹è±¡æ˜ å°„è¿›å†…å­˜ åœ¨Binderä¸­,é€šè¿‡åœ¨ç”¨æˆ·ç©ºé—´(å½“å‰è¿›ç¨‹çš„ç”¨æˆ·ç©ºé—´)åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿåœ°å€ç©ºé—´,å¹¶åœ¨å†…æ ¸ç©ºé—´åˆ›å»ºç›¸åŒå¤§å°çš„è™šæ‹Ÿåœ°å€ç©ºé—´. æ¥ç€ç”³è¯·ä¸€å—ç‰©ç†å†…å­˜,å°†ç‰©ç†å†…å­˜æ˜ å°„åˆ°å†…æ ¸è™šæ‹Ÿåœ°å€ç©ºé—´å’Œç”¨æˆ·è™šæ‹Ÿå†…å­˜ç©ºé—´,è¿™æ ·å°±å®ç°äº†ç”¨æˆ·æ§ä»¶å’Œå†…æ ¸ç©ºé—´çš„åŒæ­¥. å¤§æ¦‚æµç¨‹ copy_from_user é¦–å…ˆæ˜¯è¦å‘å‡ºæ¶ˆæ¯çš„,é‚£ä¹ˆå…ˆä»ç”¨æˆ·æ§ä»¶from æ‹·è´æ•°æ® binder_thread_write ç¬¬äºŒæ­¥å°±æ˜¯æŠŠåˆšæ‰æ‹·è´çš„æ•°æ®å†™å…¥åˆ°å†…æ ¸ç©ºé—´ binder_thread_read ç¬¬ä¸‰æ­¥å†æ¬¡è¯»å–åˆšæ‰ä»ç”¨æˆ·æ§ä»¶fromè¯»å–å¹¶å†™å…¥å†…æ ¸ç©ºé—´çš„æ•°æ® copy_to_user æœ€åå½“ç„¶æ˜¯ä»å†…æ ¸ç©ºé—´æ‹·è´æ•°æ®åˆ°ç”¨æˆ·ç©ºé—´to(å³ç›®æ ‡) PS:ä»¥ä¸Šå‡å»ºç«‹åœ¨æ¯ä¸€æ¬¡æ“ä½œéƒ½æˆåŠŸçš„åŸºç¡€ä¸Š æ¥è‡ªGityuanå¤§ç¥çš„åˆ†äº«http://gityuan.com/2015/11/01/binder-driver/ è§£é‡Šè¯´æ˜: é¦–å…ˆClientç«¯å‘é€æ¶ˆæ¯,é€šè¿‡copy_from_userä»Clientç«¯æ‹·è´æ•°æ®åˆ°å†…æ ¸ç©ºé—´å» è€Œåè¿˜è®°å¾—BINDER_MMAPä¸­çš„æ“ä½œä¹ˆ,å†…æ ¸ç©ºé—´çš„åœ°å€ä¸Serveræ˜¯åŒä¸€å—ç‰©ç†å†…å­˜, Serverå°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼,ç›´æ¥åŒæ­¥åˆ°Clientå‘é€çš„æ•°æ®. binder_initï¼šåˆå§‹åŒ–å­—ç¬¦è®¾å¤‡ï¼› binder_openï¼šæ‰“å¼€é©±åŠ¨è®¾å¤‡ï¼Œè¿‡ç¨‹éœ€è¦æŒæœ‰binder_main_lockåŒæ­¥é”ï¼› binder_mmapï¼šç”³è¯·å†…å­˜ç©ºé—´ï¼Œè¯¥è¿‡ç¨‹éœ€è¦æŒæœ‰binder_mmap_lockåŒæ­¥é”ï¼› binder_ioctlï¼šæ‰§è¡Œç›¸åº”çš„ioctlæ“ä½œï¼Œè¯¥è¿‡ç¨‹éœ€è¦æŒæœ‰binder_main_lockåŒæ­¥é”ï¼› å½“å¤„äºbinder_thread_readè¿‡ç¨‹ï¼Œread_bufferæ— æ•°æ®åˆ™é‡Šæ”¾åŒæ­¥é”ï¼Œå¹¶å¤„äºwait_event_freezableè¿‡ç¨‹ï¼Œç­‰æœ‰æ•°æ®åˆ°æ¥åˆ™å”¤é†’å¹¶å°è¯•æŒæœ‰åŒæ­¥é”ã€‚","categories":[{"name":"Source Code","slug":"Source-Code","permalink":"http://www.wangzhumo.com/categories/Source-Code/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Source Code","slug":"Source-Code","permalink":"http://www.wangzhumo.com/tags/Source-Code/"},{"name":"Binder","slug":"Binder","permalink":"http://www.wangzhumo.com/tags/Binder/"}]},{"title":"çº¿ç¨‹ä¸è¿›ç¨‹çš„å¼‚åŒä»¥åŠAndroidä¸­çš„IPCæœºåˆ¶","slug":"çº¿ç¨‹ä¸è¿›ç¨‹çš„å¼‚åŒä»¥åŠAndroidä¸­çš„IPCæœºåˆ¶","date":"2018-05-10T09:16:06.000Z","updated":"2018-05-14T10:26:32.972Z","comments":true,"path":"Java/çº¿ç¨‹ä¸è¿›ç¨‹çš„å¼‚åŒä»¥åŠAndroidä¸­çš„IPCæœºåˆ¶/","link":"","permalink":"http://www.wangzhumo.com/Java/çº¿ç¨‹ä¸è¿›ç¨‹çš„å¼‚åŒä»¥åŠAndroidä¸­çš„IPCæœºåˆ¶/","excerpt":"","text":"çº¿ç¨‹ä¸è¿›ç¨‹Google Doc (https://developer.android.com/guide/components/processes-and-threads) è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯cpuè°ƒåº¦çš„æœ€å°å•ä½. è¿›ç¨‹æ˜¯åº”ç”¨ç¨‹åºçš„æ‰§è¡Œå®ä¾‹,ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹, è€Œä¸€ä¸ªè¿›ç¨‹çš„åˆ›å»ºåˆ†é…æ˜¯è¦æ¶ˆè€—è¾ƒå¤§çš„æ€§èƒ½çš„,ç›¸æ¯”æ¥è¯´çº¿ç¨‹å°±è¦æ¯”è¿›ç¨‹çš„å¼€é”€å°. å¯¹äºè¿›ç¨‹æ¥è¯´ä¸å…±äº«èµ„æº,å†…å­˜æ˜¯ç‹¬ç«‹çš„.è€Œçº¿ç¨‹å…±äº«å®ƒæ‰€åœ¨çš„çº¿ç¨‹çš„èµ„æº,å†…å­˜. è¿›ç¨‹é—´çš„é€šä¿¡å°±è¦æ›´åŠ éº»çƒ¦,éœ€è¦ä½¿ç”¨IPC( Inter-Proscess Communication)è¿›ç¨‹é—´çš„é€šè®¯ çº¿ç¨‹æ–¹ä¾¿å¾ˆå¤š,ä½†æ˜¯çº¿ç¨‹é—´çš„åŒæ­¥åˆæ˜¯ä¸€ä¸ªè¾ƒä¸ºå¤§çš„è¯¾é¢˜äº†. â€‹ æƒ³å¼ºè°ƒçš„æ˜¯ï¼Œçº¿ç¨‹å…³æ³¨çš„æ˜¯ä¸­å¤®å¤„ç†å™¨çš„è¿è¡Œï¼Œè€Œä¸æ˜¯è¿›ç¨‹é‚£æ ·å…³æ³¨å†…å­˜ç­‰èµ„æºçš„ç®¡ç†ã€‚ Androidä¸­çš„IPCæœºåˆ¶å¦‚ä¸‹å›¾æ‰€ç¤º:(å·²ç»ä¸çŸ¥é“å“ªé‡Œçš„é…å›¾äº†â€¦æ„Ÿè°¢åˆ†äº«) IPCç®€ä»‹IPC(Inter-Process Communication) è¿›ç¨‹é—´é€šä¿¡ ä½¿ç”¨åœºæ™¯: åœ¨Androidç¨‹åºä¸­ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸€ä¸ªç¨‹åºå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ Appé—´çš„é€šä¿¡,å¸¸è§çš„å¦‚éœ€è¦ä½¿ç”¨å…¶ä»–Appçš„æ•°æ® ä¸€ä¸ªAppä½¿ç”¨å¤šè¿›ç¨‹,æ¯”å¦‚æŒ‡å®šè¿è¡Œçº¿ç¨‹android:process=&quot;:name&quot; éœ€è¦æ³¨æ„çš„æ˜¯,å¦‚æœä¸€ä¸ªAppä½¿ç”¨å¤šè¿›ç¨‹,Applicationä¹Ÿä¼šå¤šæ¬¡åˆ›å»º Bundleå¸¸è§äºActivity,serviceä¸­ä¼ é€’æ•°æ® éœ€è¦æ³¨æ„çš„æ˜¯,bundleä¸­çš„æ•°æ®å¿…é¡»æ”¯æŒåºåˆ—åŒ–(Serializable,Parcelable) æ–‡ä»¶å…±äº«SharedPreferenceå°±æ˜¯è¿™ç§å®ç°çš„. é€‚åˆå¯¹åŒæ­¥è¦æ±‚ä¸é«˜çš„ä½¿ç”¨æ–¹å¼,éœ€è¦æ³¨æ„å¤„ç†å¥½å¹¶å‘çš„é—®é¢˜. MessengerMessenger å¯¹ AIDL è¿›è¡Œäº†å°è£…ï¼Œå®ƒå®ç°äº†ä¸€ç§åŸºäºæ¶ˆæ¯çš„è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼ frameworks/base/core/java/android/os/IMessenger.aidl å®ƒçš„AIDLæ–‡ä»¶å°±åœ¨è¿™é‡Œä¿å­˜ç€! AIDLAIDLï¼ˆAndroid Interface definition languageï¼‰ æ˜¯ Android æä¾›çš„ä¸€ç§è¿›ç¨‹é—´é€šä¿¡ (IPC) æœºåˆ¶ éœ€è¦æ³¨æ„çš„æ˜¯AIDLæ”¯æŒçš„æ•°æ®ç±»å‹ä¸Javaæ¥å£æ”¯æŒçš„æ•°æ®ç±»å‹æœ‰äº›ä¸åŒ: æ‰€æœ‰åŸºç¡€ç±»å‹ï¼ˆint, charâ€¦ï¼‰ Stringï¼ŒListï¼ŒMap æ‰€æœ‰Parcelableçš„ç±» å¹¶ä¸”è¦æ ¹æ®éœ€è¦æ·»åŠ  in out çš„å…³é”®è¯ ContentProviderä¸»è¦æ˜¯é’ˆå¯¹æ•°æ®åº“ä½¿ç”¨çš„,æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯Androidä¸­æœ‰å¾ˆå¤šå·²ç»å®šä¹‰å¥½çš„ContentProvider Socketè¯´åˆ°è¿™é‡Œ,å°±ä¸å¾—ä¸æä¸€ä¸‹Binderäº† http://www.wangzhumo.com/Source-Code/Android-Binder%E6%9C%BA%E5%88%B6-%E4%B8%80/","categories":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/tags/Java/"}]},{"title":"Javaä¸­çš„å†…å­˜æ¨¡å‹","slug":"Javaä¸­çš„å†…å­˜æ¨¡å‹","date":"2018-05-09T14:26:54.000Z","updated":"2018-05-10T09:16:37.418Z","comments":true,"path":"Java/Javaä¸­çš„å†…å­˜æ¨¡å‹/","link":"","permalink":"http://www.wangzhumo.com/Java/Javaä¸­çš„å†…å­˜æ¨¡å‹/","excerpt":"","text":"1. å †åœ¨JVMä¸­åªæœ‰ä¸€ä¸ª,javaå›æ”¶æœºåˆ¶ä¸»è¦å°±æ˜¯ä½œç”¨äºè¿™ä¸€å— å †ä¸»è¦æ˜¯ç”¨æ¥å­˜æ”¾å­˜å‚¨å¯¹è±¡çš„å†…å®¹åŠå…¶æœ¬èº«çš„. 2. æ–¹æ³•åŒºæ–¹æ³•åŒºä¹Ÿå’Œå †ä¸€æ ·,æ˜¯è¢«çº¿ç¨‹å…±äº«çš„. å­˜æ”¾äº†ç±»çš„ä¿¡æ¯(æ–¹æ³•,å­—æ®µ,åç§°),é™æ€å˜é‡,å¸¸é‡ Java1.7ä¹‹å‰,å­—ç¬¦ä¸²å¸¸é‡æ± ä¹Ÿæ˜¯æ”¾åœ¨è¿™é‡Œçš„,ä½†æ˜¯1.7ä»¥åç§»åŠ¨åˆ°å †é‡Œé¢å»äº† 3. è™šæ‹Ÿæœºæ ˆ æ¯ä¸€ä¸ªæ ˆå¸§çš„å‡ºå…¥æ ˆéƒ½æ˜¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒèµ·ç›´åˆ°ç»“æŸè¿”å›çš„è¿‡ç¨‹. æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„Javaæ ˆï¼Œæ ˆå¸§ä¸­åŒ…æ‹¬ å±€éƒ¨å˜é‡è¡¨(Local Variables) æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡,å‡½æ•°çš„å‚æ•°ç­‰.å¯¹äºåŸºç¡€ç±»å‹çš„å˜é‡ç›´æ¥å­˜å‚¨ä»–çš„å€¼,è€Œå¼•ç”¨ç±»å‹çš„å˜é‡ åˆ™å­˜å‚¨çš„æ˜¯æŒ‡å‘å¯¹è±¡çš„å¼•ç”¨ æ“ä½œæ•°æ ˆ(Operand Stack) æŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± çš„å¼•ç”¨(Reference to runtime constant pool) ä¿è¯æ–¹æ³•å¯ä»¥ä½¿ç”¨å½“å‰ç±»çš„å¸¸é‡ æ–¹æ³•è¿”å›åœ°å€(Return Address) æ‰§è¡Œä¸€ä¸ªæ–¹æ³•å®Œæˆåéœ€è¦è¿”å›è°ƒç”¨å®ƒçš„åœ°æ–¹ é™„åŠ ä¿¡æ¯ 4. ç¨‹åºè®¡æ•°å™¨Program Counter Register ä¹Ÿç§°ä½œä¸ºPCå¯„å­˜å™¨,ä¿å­˜çš„æ˜¯ç¨‹åºå½“å‰æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ 5.æœ¬åœ°æ–¹æ³•æ ˆæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºæ‰§è¡Œæœ¬åœ°æ–¹æ³•ï¼ˆNative Methodï¼‰æœåŠ¡çš„","categories":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/tags/Java/"}]},{"title":"Androidçš„å¯åŠ¨æµç¨‹","slug":"Androidçš„å¯åŠ¨æµç¨‹","date":"2018-05-09T07:00:12.000Z","updated":"2018-05-09T10:32:15.451Z","comments":true,"path":"Source-Code/Androidçš„å¯åŠ¨æµç¨‹/","link":"","permalink":"http://www.wangzhumo.com/Source-Code/Androidçš„å¯åŠ¨æµç¨‹/","excerpt":"","text":"ç³»ç»Ÿç»“æ„ åº”ç”¨å±‚ å³ä¸ºå¼€å‘å‡ºæ¥çš„ä¸€äº›app,å½“ç„¶è¿˜åŒ…æ‹¬äº†ä¸€äº›ç³»ç»ŸApp åº”ç”¨æ¡†æ¶å±‚(Java API Framework) è¿™ä¸€å±‚ç”±javaç¼–å†™,æä¾›ç»™æˆ‘ä»¬å¹³æ—¶å¼€å‘ä½¿ç”¨çš„API,ä¸»è¦çš„ä¸€äº›ç»„ä»¶: Manager Activity Manager , Window Manager , Package Manager ,Location Manager Notification Manager,Resource Manager,Telephony Manager Content Providers View System ç³»ç»Ÿè¿è¡Œåº“å±‚ C/C++ç¨‹åºåº“å’ŒAndroidè¿è¡Œæ—¶åº“ ç¡¬ä»¶æŠ½è±¡å±‚(HAL) Linuxå†…æ ¸å±‚ Androidçš„å¯åŠ¨ä¸»è¦è¿‡ç¨‹ initè¿›ç¨‹ initè¿›ç¨‹æ˜¯ç”±å†…æ ¸å¯åŠ¨çš„,æ˜¯ç”¨æˆ·ç©ºé—´çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹,å¯ä»¥è¯´æ˜¯ä¸€ä¸ªrootè¿›ç¨‹ å½“initè¿›ç¨‹å¯åŠ¨åä¼šåˆ›å»ºæŒ‚è½½ç³»ç»Ÿç›®å½•,è®¾å¤‡èŠ‚ç‚¹, è§£æinit.rc å’Œ init.hardware.rc,å¯åŠ¨å±æ€§æœåŠ¡ï¼Œä»¥åŠä¸€ç³»åˆ—çš„æœåŠ¡å’Œè¿›ç¨‹ æœ¬åœ°å®ˆæŠ¤è¿›ç¨‹ å¯åŠ¨ servicemanager ç®¡ç†binderçš„é€šè®¯ surfaceflinger UI mediaserver éŸ³è§†é¢‘,ç›¸æœº netd è“ç‰™ã€wifiã€usbç­‰ adbd rild installd éœ€è¦æ³¨æ„çš„æ˜¯è¿™äº›éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„Linuxè¿›ç¨‹ Nativeç³»ç»ŸæœåŠ¡ è¿è¡Œåœ¨æœ¬åœ°å®ˆæŠ¤è¿›ç¨‹ä¸­,æ‰€å±è¿›ç¨‹åˆå§‹åŒ–çš„æ—¶å€™ä¼šå°†Nativeç³»ç»ŸæœåŠ¡æ³¨å†Œåˆ°ServiceManagerä¸­,æ–¹ä¾¿æˆ‘ä»¬é€šè¿‡Binderæœºåˆ¶è°ƒç”¨Nativeç³»ç»ŸæœåŠ¡ JavaæœåŠ¡ å†åˆ›å»ºæœ¬åœ°æœåŠ¡çš„åŒæ—¶,initè¿›ç¨‹è¿˜ä¼šåˆ›å»ºZygoteè¿›ç¨‹ Zygoteä¹Ÿæ˜¯Androidä¸­ç›¸å½“é‡è¦çš„ä¸€ä¸ªè¿›ç¨‹äº†,Zygoteè¿›ç¨‹ä¼šå»ºç«‹ä¸€ä¸ªDalvik VMå¹¶ä¸”å¯åŠ¨ System Serverç³»ç»ŸæœåŠ¡ System Serverå°†å¯åŠ¨Android Service AccessibilityManagerService æˆªè·ç”¨æˆ·è¾“å…¥ï¼Œå¹¶æ ¹æ®è¾“å…¥ç»™ç”¨æˆ·ä¸€äº›é¢å¤–çš„åé¦ˆï¼Œèµ·åˆ°è¾…åŠ©æ•ˆæœçš„æœåŠ¡AccountManagerService ç®¡ç†è®¾å¤‡ä¸­æ‰€æœ‰è´¦å·çš„æœåŠ¡ï¼ŒåŒ…æ‹¬è´¦å·ã€å¯†ç ã€æˆæƒç®¡ç†åŠŸèƒ½ActivityManagerService ç®¡ç†æ‰€æœ‰ç»„ä»¶çš„æœåŠ¡ï¼Œå®‰å“ç³»ç»Ÿçš„æ ¸å¿ƒæœåŠ¡ AlarmManagerService ç®¡ç†é—¹é’Ÿçš„æœåŠ¡AppWidgetService ç®¡ç†APP widgetsçš„å·¥ä½œï¼ŒåŒ…æ‹¬åŠ è½½ã€åˆ é™¤ã€å¸ƒå±€ç­‰AssetAtlasService å°†ä¸€äº›ç³»ç»Ÿå›¾ç‰‡èµ„æºåˆå¹¶æˆä¸€ä¸ªçº¹ç†å›¾ä¼ ç»™GPUè¾¾åˆ°ç¡¬ä»¶åŠ é€Ÿçš„æ•ˆæœçš„æœåŠ¡AudioService ç®¡ç†éŸ³é¢‘çš„æœåŠ¡BackupManagerService ç®¡ç†å¤‡ä»½å’Œåº”ç”¨æ•°æ®çš„æœåŠ¡BatteryService ç®¡ç†ç”µæ± çš„æœåŠ¡BluetoothManagerService ç®¡ç†ç³»ç»Ÿè“ç‰™çš„æœåŠ¡CertBlacklister æ›´æ–°ç³»ç»ŸSSLè¯ä¹¦çš„å…¬å…±ç§˜é’¥å’Œåºåˆ—å·é»‘åå•çš„æœåŠ¡ClipboardService ç®¡ç†ç³»ç»Ÿå‰ªè´´æ¿çš„æœåŠ¡CommonTimeManagementService ç®¡ç†å…¬å…±æ—¶é—´é…ç½®çš„æœåŠ¡ConnectivityService ç®¡ç†ç½‘ç»œè¿æ¥çš„æœåŠ¡ContentService ç®¡ç†ç³»ç»Ÿæ•°æ®æ›´æ–°é€šçŸ¥çš„æœåŠ¡ï¼Œå’ŒContentProviderå¯†åˆ‡ç›¸å…³CountryDetectorService æ£€æµ‹å½“å‰ç³»ç»Ÿæ‰€å±å›½å®¶çš„æœåŠ¡DevicePolicyManagerService ç®¡ç†ç³»ç»Ÿè®¾å¤‡é…ç½®çš„æœåŠ¡DeviceStorageMonitorService ç®¡ç†ç³»ç»Ÿå­˜å‚¨ç©ºé—´çš„æœåŠ¡ï¼Œå½“å­˜å‚¨ç©ºé—´å°äºæŸä¸ªé˜ˆå€¼æ—¶ï¼Œä¼šå‘å‡ºè­¦å‘Šå¹¿æ’­DiskStateService ç®¡ç†ç³»ç»Ÿå­˜å‚¨ç©ºé—´ç»Ÿè®¡çš„æœåŠ¡DisplayManagerService ç®¡ç†æ˜¾ç¤ºè®¾å¤‡çš„æœåŠ¡DreamManagerService ç®¡ç†å±å¹•ä¿æŠ¤çš„æœåŠ¡DropBoxManagerService ç”Ÿæˆå’Œç®¡ç†ç³»ç»Ÿè¿è¡Œä¸­æ—¥å¿—æ–‡ä»¶çš„æœåŠ¡EntropyMixer åŠ è½½å’Œä¿å­˜éšæœºä¿¡æ¯çš„æœåŠ¡IdleMaintenanceService ç®¡ç†ç³»ç»Ÿåœ¨ç©ºé—²æ—¶æ‰§è¡Œç»´æŠ¤ä»»åŠ¡çš„æœåŠ¡InputManagerService ç®¡ç†è§¦å±è¾“å…¥çš„æœåŠ¡InputMethodManagerService ç®¡ç†ç³»ç»Ÿè¾“å…¥æ³•çš„æœåŠ¡LightsService ç®¡ç†å…‰ä¼ æ„Ÿå™¨çš„æœåŠ¡LocationManagerService ç®¡ç†å®šä½å’Œä½ç½®çš„æœåŠ¡LockSettingsService ç®¡ç†ç³»ç»Ÿé”å±è®¾ç½®çš„æœåŠ¡MountService ç®¡ç†ç³»ç»Ÿå­˜å‚¨è®¾å¤‡æŒ‚è½½å’Œå¸è½½çš„æœåŠ¡NetWorkManagementService ç®¡ç†ç³»ç»Ÿç½‘ç»œçš„æœåŠ¡NetWorkPolicyManagerService ç®¡ç†ç½‘ç»œè¿æ¥ç­–ç•¥çš„æœåŠ¡NetWorkStatsService ç®¡ç†ç½‘ç»œè¿æ¥çŠ¶æ€çš„æœåŠ¡NetWorkTimeUpdateService æ ¹æ®ç½‘ç»œæ—¶é—´æ›´æ–°æœ¬åœ°æ—¶é—´çš„æœåŠ¡NotificationManagerService ç®¡ç†ç³»ç»Ÿé€šçŸ¥çš„æœåŠ¡PackageManagerService ç®¡ç†åº”ç”¨åŒ…çš„æœåŠ¡PowerManagerService ç®¡ç†ç³»ç»Ÿç”µæºçš„æœåŠ¡PrintManagerService ç®¡ç†æ‰“å°çš„æœåŠ¡RecognitionManagerService ç®¡ç†èº«ä»½è¯†åˆ«çš„æœåŠ¡SamplingProfilerService è®°å½•å’Œåˆ†æç³»ç»Ÿå¯åŠ¨æ€§èƒ½çš„æœåŠ¡SchedulingPolicyService ç®¡ç†ç³»ç»Ÿè°ƒåº¦ç­–ç•¥çš„æœåŠ¡SearchManagerServcie ç®¡ç†ç³»ç»Ÿæœç´¢åŠŸèƒ½çš„æœåŠ¡SerialServie ç®¡ç†ç³»ç»Ÿä¸²å£è®¾å¤‡çš„æœåŠ¡StatusBarManagerService ç®¡ç†ç³»ç»ŸçŠ¶æ€æ çš„æœåŠ¡TelephonyRegistry ç›‘å¬å’Œç®¡ç†é€šè¯äº‹ä»¶å’ŒçŠ¶æ€çš„æœåŠ¡TextServicesManagerService æ–‡æœ¬æ‹¼å†™æ£€æŸ¥çš„æœåŠ¡UiModeManagerService è®¾ç½®å’Œç®¡ç†ç³»ç»ŸUIæ¨¡å¼çš„æœåŠ¡UsbService ç®¡ç†USBè¿æ¥çš„æœåŠ¡UserManagerService ç®¡ç†ç³»ç»Ÿç”¨æˆ·èº«ä»½ä¿¡æ¯çš„æœåŠ¡VibratorService ç®¡ç†ç³»ç»ŸæŒ¯åŠ¨å™¨çš„æœåŠ¡ï¼·allpaperManagerService ç®¡ç†ç³»ç»Ÿæ¡Œé¢èƒŒæ™¯å¢™çº¸çš„æœåŠ¡WifiP2pService ç®¡ç†Wifiç‚¹å¯¹ç‚¹è¿æ¥çš„æœåŠ¡WifiService ç®¡ç†ç³»ç»ŸWifiè®¾å¤‡çš„æœåŠ¡WindowManagerService ç®¡ç†çª—å£çš„æœåŠ¡ï¼Œå®‰å“ç³»ç»Ÿçš„æ ¸å¿ƒæœåŠ¡ è¿™äº›æœåŠ¡éƒ½ä¼šæ³¨å†Œåˆ°Service Managerä¸­å»,å®ŒæˆServcieManagerå¯¹æœåŠ¡çš„ç®¡ç† éœ€è¦æ³¨æ„çš„æ˜¯,ç”±System Serveråˆ›å»ºçš„è¿™äº›æœåŠ¡,éƒ½æ˜¯å­˜åœ¨äºSystem Serverè¿›ç¨‹ä¸­çš„çº¿ç¨‹ ä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹ servicemanageræ˜¯initçš„å­è¿›ç¨‹ Zygoteæ˜¯initçš„å­è¿›ç¨‹ï¼Œforkå‡ºæ¥æ‰€æœ‰çš„è™šæ‹Ÿæœº system serveræ˜¯Zygoteçš„å­è¿›ç¨‹ Homeå¯åŠ¨ å½“æ‰€æœ‰çš„ä»»åŠ¡å¯åŠ¨å,ä¼šé€šè¿‡ActivityManagerå¯åŠ¨Homeç•Œé¢ åŒæ—¶å‘é€ACTION_BOOT_COMPLETEDå¹¿æ’­","categories":[{"name":"Source Code","slug":"Source-Code","permalink":"http://www.wangzhumo.com/categories/Source-Code/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Source Code","slug":"Source-Code","permalink":"http://www.wangzhumo.com/tags/Source-Code/"}]},{"title":"JVMè™šæ‹Ÿæœºä¸­çš„ç±»åŠ è½½å™¨","slug":"JVMè™šæ‹Ÿæœºä¸­çš„ç±»åŠ è½½å™¨","date":"2018-03-11T02:35:47.000Z","updated":"2018-07-11T06:40:45.074Z","comments":true,"path":"Java/JVMè™šæ‹Ÿæœºä¸­çš„ç±»åŠ è½½å™¨/","link":"","permalink":"http://www.wangzhumo.com/Java/JVMè™šæ‹Ÿæœºä¸­çš„ç±»åŠ è½½å™¨/","excerpt":"","text":"å‰è¨€å‰ä¸€ç¯‡æ¢³ç†äº†ä¸€ä¸‹ç±»åŠ è½½æœºåˆ¶çš„å¤§æ¦‚æµç¨‹,å…¶ä¸­å°±æ¶‰åŠåˆ°ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿ç±»åŠ è½½å™¨,åœ¨åŠ è½½é˜¶æ®µâ€é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåè·å–æè¿°æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµâ€ æˆ‘ä»¬çŸ¥é“äºŒçº§åˆ¶å­—èŠ‚æµä¸åªæ˜¯æˆ‘ä»¬ç¼–å†™çš„ä»£ç  å¯ä»¥ä»ä¸€äº›jar,waråŒ…ç­‰å‹ç¼©æ–‡ä»¶ä¸­è·å– å·²ç»å‡‰äº†çš„Applet,ä¹Ÿå°±æ˜¯å¯ä»¥ä»ç½‘ç»œä¸­è·å– è¿è¡Œæ—¶ç”Ÿæˆ,å¦‚åŠ¨æ€ä»£ç†,retrofitä¸­ä½¿ç”¨çš„æŠ€æœ¯ä¹‹ä¸€ å…¶ä»–â€¦ é‚£ä¹ˆä¸‹é¢æˆ‘è¦çŸ¥é“çš„æ˜¯: ç±»åŠ è½½å™¨çš„å«ä¹‰å’Œä½œç”¨ ç±»åŠ è½½å™¨çš„ç±»å‹ ç±»åŠ è½½å™¨çš„åº”ç”¨ ç±»åŠ è½½å™¨ç±»åŠ è½½å™¨æœ€åˆæ˜¯ä¸ºäº†Java Appletçš„éœ€æ±‚è€Œç ”å‘çš„,ä¸ºäº†æ–¹ä¾¿åº”ç”¨ç¨‹åºè‡ªå·±å†³å®šå¦‚ä½•å»è·å–æ‰€éœ€è¦çš„ç±»,è€ŒæŠŠè¿™ä¸ªæ“ä½œæ”¾åˆ°äº†JAVAè™šæ‹Ÿæœºå¤–éƒ¨å»å®ç°. å®ç°è¿™ä¸ªåŠ¨ä½œçš„ä»£ç æ¨¡å—è¢«ç§°ä¸ºç±»åŠ è½½å™¨ æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯,åœ¨JVMä¸­,ä»»æ„ä¸€ä¸ªç±»éƒ½éœ€è¦ç”±ç±»åŠ è½½å™¨å’Œå®ƒæœ¬çœå…±åŒç¡®ç«‹å…¶åœ¨JVMä¸­çš„å”¯ä¸€æ€§ æ¯ä¸€ä¸ªç±»åŠ è½½å™¨éƒ½æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç±»å‘½åç©ºé—´. å˜ç°ä¸º: å¦‚æœåŒä¸€ä¸ªç±»,è¢«ä¸åŒçš„ä¸¤ä¸ªç±»åŠ è½½å™¨åŠ è½½,é‚£ä¹ˆå®ƒä»¬å°±å¿…ç„¶ä¸ç›¸ç­‰. ç±»åŠ è½½å™¨çš„ç±»å‹ å¯åŠ¨ç±»åŠ è½½å™¨ Bootstrap ClassLoader ,æ˜¯ç”±C++å®ç°çš„,ä½œä¸ºè™šæ‹Ÿæœºçš„ä¸€éƒ¨åˆ† å…¶ä»–ç±»åŠ è½½å™¨,è¿™äº›åŠ è½½å™¨éƒ½æ˜¯ç”±JAVAè¯­è¨€å®ç°çš„,ç‹¬ç«‹äºJVMä¹‹å¤–å¹¶ä¸”éƒ½æ˜¯java.lang.ClassLoaderçš„å­ç±» ä¸Šé¢çš„åˆ†ç±»æ˜¯å¯¹äºJVMè€Œè¨€çš„åˆ†ç±»,åœ¨æˆ‘ä»¬ç¼–ç çš„è¿‡ç¨‹ä¸­,å¯¹ç±»åŠ è½½å™¨åˆ†ä¸º; å¯åŠ¨ç±»åŠ è½½å™¨ Bootstrap ClassLoader, è´Ÿè´£å°†/lib ç›®å½•ä¸­çš„æ–‡ä»¶åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­ æ‰©å±•ç±»åŠ è½½å™¨ Extension ClassLoader è´Ÿè´£åŠ è½½/lib/ext ç›®å½•ä¸­çš„æ–‡ä»¶,æˆ–è€…è¢« java.ext.dirsç³»ç»Ÿå˜é‡æŒ‡å®šçš„è·¯å¾„ä¸­æ–‡ä»¶ æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨æ‰©å±•ç±»åŠ è½½å™¨ åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ Application ClassLoader ClassLoader.getSystemClassLoader()æ–¹æ³•å¯ä»¥è¿”å›,ä¸€èˆ¬ç§°ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨ è´Ÿè´£åŠ è½½ç”¨æˆ·è·¯å¾„ä¸­çš„ç±»åº“,å¦‚æœç¨‹åºä¸­æ²¡æœ‰ä½¿ç”¨è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨,åˆ™é»˜è®¤æ˜¯ä½¿ç”¨è¯¥ç±»åŠ è½½å™¨çš„ åŒäº²å§”æ´¾æ¨¡å‹#####æ¨¡å‹ç»“æ„ //æˆ‘ä»¬çœ‹çœ‹ä»£ç ä¸­æ˜¯æ€ä¹ˆç»„ç»‡çš„ 12345678910111213141516171819202122232425protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException &#123; // First, check if the class has already been loaded Class&lt;?&gt; c = findLoadedClass(name); if (c == null) &#123; try &#123; if (parent != null) &#123; c = parent.loadClass(name, false); &#125; else &#123; c = findBootstrapClassOrNull(name); &#125; &#125; catch (ClassNotFoundException e) &#123; // ClassNotFoundException thrown if class not found // from the non-null parent class loader &#125; if (c == null) &#123; // If still not found, then invoke findClass in order // to find the class. c = findClass(name); &#125; &#125; return c; &#125; ä¸Šé¢çš„ä»£ç ,æ€»çš„æ¥è¯´æœ‰ findLoadedClass(name) æŸ¥æ‰¾æ˜¯å¦å·²ç»åŠ è½½è¿‡è¿™ä¸ªclassäº†,å¦‚æœä¸ä¸ºç©ºå°±ç›´æ¥è¿”å›äº†è¿™ä¸ªclass åœ¨çœ‹ä¸‹ä¸€æ­¥ 1234567try &#123; if (parent != null) &#123; c = parent.loadClass(name, false); &#125; else &#123; c = findBootstrapClassOrNull(name); &#125;&#125; å¦‚æœçˆ¶åŠ è½½å™¨ parentä¸ä¸ºç©º,åˆ™åŠ è½½å·¥ä½œäº¤ç»™çˆ¶åŠ è½½å™¨å»æ‰§è¡Œ, è€Œè¿™ä¸ªçˆ¶åŠ è½½å™¨ä¹Ÿä¼šæœ‰å®ƒçš„çˆ¶åŠ è½½å™¨ æœ€åå¦‚æœè¿™ä¸ªclassè¿˜æ²¡æœ‰åŠ è½½ 12345if (c == null) &#123; // If still not found, then invoke findClass in order // to find the class. c = findClass(name);&#125; æ‰è½®åˆ°è‡ªå·±å»åŠ è½½ è¦æ³¨æ„çš„æ˜¯,è¿™äº›ç±»åŠ è½½å™¨çš„çˆ¶å­å…³ç³»,ä¸æ˜¯ç”±ç»§æ‰¿æ¥å®ç°çš„,è€Œæ˜¯ä½¿ç”¨ç»„åˆ æ¨¡å‹åŠ è½½æµç¨‹ç±»åŠ è½½å™¨æ”¶åˆ°äº†ä¸€ä¸ªç±»åŠ è½½çš„è¯·æ±‚,ä½†æ˜¯ä¸ä¼šç«‹é©¬å»è‡ªå·±åŠ è½½,è€Œæ˜¯å§”æ´¾ç»™çˆ¶åŠ è½½å™¨å»å°è¯•åŠ è½½,ç„¶åå±‚å±‚å§”æ´¾ç›´åˆ°é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ä¸­.å¦‚æœæ²¡æœ‰æˆåŠŸåŠ è½½,å­åŠ è½½å™¨æ‰ä¼šè‡ªå·±å»åŠ è½½. è¿™æ ·åšæ˜¯æœ‰æ˜æ˜¾çš„å¥½å¤„çš„: è¿™äº›ç±»åŠ è½½å™¨éƒ½å…·æœ‰äº†ä¼˜å…ˆçº§å…³ç³» ä¿è¯äº†æŸäº›ç±»çš„ä¸€è‡´æ€§,å¦‚Object,é€šè¿‡å§”æ´¾,æœ€ç»ˆéƒ½æ˜¯ç”±æœ€é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨å®ŒæˆåŠ è½½çš„. ç±»åŠ è½½å™¨çš„åº”ç”¨å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­,åŠ æ·±ä¸€ä¸‹ç†è§£ 1234567//ä¸€ä¸ªç±»,éœ€è¦æ”¾åœ¨é¡¹ç›®ç›®å½•å¤–,é¿å…è¢«ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½public class TestClassLoader&#123; public void createBy()&#123; System.out.println(\"I'm Batman , Come from \" + getClass().getClassLoader().getClass()); &#125;&#125; è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ 12345678910111213141516171819202122232425262728293031import java.io.FileInputStream;//è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨public class MarvelStudios extends ClassLoader &#123; //å­˜æ”¾çš„æ˜¯TestClassLoader.classçš„ä½ç½®,è®°å¾—å…ˆç¼–è¯‘æˆclasså†ä½¿ç”¨ private final static String CLASS_FILE_PATH = \"/Users/phyooos/workspace/java_workspace/kotlind/soucre/TestClassLoader.class\"; private byte[] loadByte(String name) throws Exception &#123; FileInputStream fis = new FileInputStream(CLASS_FILE_PATH); int len = fis.available(); byte[] data = new byte[len]; fis.read(data); fis.close(); return data; &#125; @Override protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException &#123; //è¿™é‡Œè·å–æ–‡ä»¶ try &#123; byte[] data = loadByte(name); return defineClass(name, data, 0, data.length); &#125; catch (Exception e) &#123; e.printStackTrace(); throw new ClassNotFoundException(); &#125; &#125;&#125; æµ‹è¯•ä¸€ä¸‹ 123456789101112131415public class MainClass &#123; public static void main(String[] args)&#123; MarvelStudios classLoader = new MarvelStudios(); Class clazz = null; try &#123; clazz = classLoader.loadClass(\"TestClassLoader\"); Object obj = clazz.newInstance(); Method createMethod = clazz.getDeclaredMethod(\"createBy\",null); createMethod.invoke(obj, null); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; è¿è¡Œç»“æœä¸º 123I'm Batman , Come from class MarvelStudiosProcess finished with exit code 0 è¿™é‡Œæ˜¾è€Œæ˜“è§,ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨,ä»ç¡¬ç›˜ä¸ŠåŠ è½½äº†ä¸€ä¸ªclassæ–‡ä»¶,å¦‚æœä½ æƒ³åŠ è½½ä¸€ä¸ªjavaæ–‡ä»¶,ä¹Ÿåªéœ€è¦è°ƒç”¨ 12//defineClassæ–¹æ³•å¯ä»¥æŠŠäºŒè¿›åˆ¶æµå­—èŠ‚ç»„æˆçš„æ–‡ä»¶è½¬æ¢ä¸ºä¸€ä¸ªjava.lang.ClassClass&lt;?&gt; c = this.defineClass(name, bytes, 0, bytes.length); è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰ç±»åŠ è½½å™¨ä½¿ç”¨,å¯ä»¥ä»ç¡¬ç›˜ä¸ŠåŠ è½½javaä»£ç . å…¶ä»–å¦‚: ä»£ç åŠ å¯† çƒ­éƒ¨ç½² çƒ­ä¿®å¤","categories":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/tags/Java/"}]},{"title":"JVMè™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶","slug":"JVMè™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶","date":"2018-03-10T03:20:10.000Z","updated":"2018-07-11T02:33:35.322Z","comments":true,"path":"Java/JVMè™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶/","link":"","permalink":"http://www.wangzhumo.com/Java/JVMè™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶/","excerpt":"","text":"å‰è¨€å…³äºJVMè™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶,å¤§æ¦‚æœ‰å¦‚ä¸‹çš„å‡ ä¸ªé—®é¢˜ ç±»åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆ? ç±»åŠ è½½çš„æµç¨‹ ç±»åŠ è½½æœºåˆ¶æˆ‘ä»¬æ‰€å†™çš„Javaä»£ç ,æœ€ç»ˆéƒ½æ˜¯ç¼–è¯‘æˆclasså­—èŠ‚ç æ–‡ä»¶,è¿™äº›å­—èŠ‚ç æ–‡ä»¶æè¿°äº†å„ç§ä¿¡æ¯ éœ€è¦åŠ è½½åˆ°è™šæ‹Ÿæœºä¸­æ‰èƒ½ä½¿ç”¨è¿è¡Œ è€Œè™šæ‹Ÿæœºå•ŠæŠŠæè¿°ç±»çš„æ•°æ®ä»Classæ–‡ä»¶ä¸­åŠ è½½åˆ°å†…å­˜,å¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒ,è½¬æ¢è§£æå’Œåˆå§‹åŒ–, æœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨çš„Javaç±»å‹,è¿™å°±æ˜¯è™šæ‹Ÿæœºçš„ç±»åŠ è½½æœºåˆ¶. ç±»åŠ è½½æœºåˆ¶çš„æµç¨‹è™šæ‹Ÿæœºä¸­ç±»åŠ è½½çš„å…¨è¿‡ç¨‹: åŠ è½½ , éªŒè¯ ,å‡†å¤‡ , è§£æ , åˆå§‹åŒ–è¿™äº”ä¸ªéƒ¨åˆ† åŠ è½½åœ¨åŠ è½½é˜¶æ®µ,å®Œæˆçš„æ˜¯: é€šè¿‡ç±»çš„å…¨é™å®šå(import * è¿™äº›)æ¥è·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµ. å°†è¿™ä¸ªäºŒè¿›åˆ¶å­—èŠ‚æµçš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„. åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.Classå¯¹è±¡,ä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£. å½“æˆ‘ä»¬çš„è™šæ‹Ÿæœºå°†äºŒè¿›åˆ¶å­—èŠ‚æµæ–‡ä»¶åŠ è½½å,ä¼šå­˜æ”¾åœ¨æ–¹æ³•åŒºä¸­,è€Œåå®ä¾‹åŒ–ä¸€ä¸ªClassç±»çš„å¯¹è±¡,(å¯¹äºHotSpotè™šæ‹Ÿæœºè€Œè¨€)ä¼šæ”¾åœ¨æ–¹æ³•åŒºä¸­,è€Œä¸æ˜¯ä¸€èˆ¬å­˜æ”¾å¯¹è±¡,å¼•ç”¨ç±»å‹çš„å †(heap)ä¸­,è¿™ä¸ªClasså¯¹è±¡å°±å¯ä»¥ä½œä¸ºç¨‹åºè®¿é—®æ–¹æ³•åŒºä¸­è¿™äº›ç±»å‹æ•°æ®çš„å¤–éƒ¨æ¥å£. PS:åŠ è½½çš„è¿‡ç¨‹ä¸­,ä¹Ÿå¯èƒ½ä¼šä¼´éšç€ è¿æ¥è¿‡ç¨‹(æ£€æŸ¥,å‡†å¤‡,è§£æ),ä½†æ˜¯å¿…ç„¶æ˜¯å…ˆå‘ç”ŸåŠ è½½,è€Œåæ‰å¯èƒ½å‡ºç°è¿æ¥ éªŒè¯éªŒè¯è¿™ä¸ªé˜¶æ®µéå¸¸çš„é‡è¦ æˆ‘ä»¬çŸ¥é“åœ¨JAVAä»£ç ä¸­,æ˜¯æ— æ³•è¿›è¡Œä¸€äº›ä¸å®‰å…¨çš„æ“ä½œçš„,ä½†æ˜¯classå­—èŠ‚ç æ–‡ä»¶å´å¯ä»¥åšåˆ°,ç±»ä¼¼æ•°ç»„è¶Šç•Œè®¿é—®,è·³è½¬åˆ°ä¸å­˜åœ¨çš„ä»£ç è¡Œâ€¦. é‚£ä¹ˆ,éªŒè¯å°±éå¸¸é‡è¦äº†,ç›´æ¥å†³å®šäº†Javaè™šæ‹Ÿæœºçš„å®‰å…¨æ€§. å¤§æ¦‚åŒ…å«: æ–‡ä»¶æ ¼å¼éªŒè¯åªæœ‰é€šè¿‡äº†æ–‡ä»¶æ ¼å¼éªŒè¯,å­—èŠ‚ç äºŒè¿›åˆ¶æµæ‰ä¼šè¿›å…¥åˆ°æ–¹æ³•åŒºä¸­. æ¯”å¦‚: é­”æ•°CAFEBABE ,ä¸»æ¬¡ç‰ˆæœ¬å·,å¸¸é‡æ± ä¸­å¸¸é‡ç±»å‹,ç¼–ç ç­‰ç­‰â€¦ #####å…ƒæ•°æ®éªŒè¯ ä¸»è¦ç›®çš„æ˜¯å¯¹ç±»çš„å…ƒæ•°æ®è¿›è¡Œè¯­ä¹‰æ£€éªŒ,ç¡®ä¿æè¿°ä¿¡æ¯ç¬¦åˆJAVAçš„è¯­è¨€è§„èŒƒ æ¯”å¦‚:æ˜¯å¦æœ‰çˆ¶ç±»,æ˜¯å¦å®ç°äº†æ‰€ç»§æ‰¿ç±»æˆ–å®ç°æ¥å£çš„å¿…è¦æ–¹æ³•,è¿”å›å€¼ç±»å‹â€¦ #####å­—èŠ‚ç éªŒè¯ åœ¨å…ƒæ•°æ®éªŒè¯å¯¹å…ƒæ•°æ®ä¸­çš„æ•°æ®ç±»å‹åšå®Œæ£€æµ‹å,è¿™ä¸ªé˜¶æ®µä¼šå¯¹ç±»çš„æ–¹æ³•ä½“è¿›è¡Œæ ¡éªŒåˆ†æ,ä¿è¯è¢«éªŒè¯çš„ç±»æ–¹æ³•ä¸ä¼šåœ¨è¿è¡Œæ—¶å¯¹è™šæ‹Ÿæœºåšå‡ºä¸å®‰å…¨æ“ä½œ. ç¬¦å·å¼•ç”¨éªŒè¯å‘ç”Ÿåœ¨è™šæ‹Ÿæœºå°†ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨çš„æ—¶å€™,è¿™ä¸ªè½¬åŒ–çš„æ“ä½œå°†å‘ç”Ÿåœ¨-è§£æé˜¶æ®µ. ç¬¦å·å¼•ç”¨:ç¬¦å·å¼•ç”¨ä»¥ä¸€ç»„ç¬¦å·æ¥æè¿°æ‰€å¼•ç”¨çš„ç›®æ ‡ï¼Œç¬¦å·å¯ä»¥æ˜¯ä»»ä½•å½¢å¼çš„å­—é¢é‡ï¼Œåªè¦ä½¿ç”¨æ—¶èƒ½å¤Ÿæ— æ­§ä¹‰çš„å®šä½åˆ°ç›®æ ‡å³å¯ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œjavaç±»å¹¶ä¸çŸ¥é“æ‰€å¼•ç”¨çš„ç±»çš„å®é™…åœ°å€ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ç¬¦å·å¼•ç”¨æ¥ä»£æ›¿ã€‚ ç›´æ¥å¼•ç”¨:å¦‚æœæœ‰äº†ç›´æ¥å¼•ç”¨ï¼Œé‚£å¼•ç”¨çš„ç›®æ ‡å¿…å®šå·²ç»è¢«åŠ è½½å…¥å†…å­˜ä¸­äº†.ç›´æ¥å¼•ç”¨æœ‰:1ç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆ 2.ç›¸å¯¹åç§»é‡3.ä¸€ä¸ªèƒ½é—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ ####å‡†å¤‡ å‡†å¤‡é˜¶æ®µæ˜¯æ­£å¼ä¸ºå˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡åˆå§‹å€¼çš„é˜¶æ®µ,è¿™äº›å˜é‡çš„å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºè¿›è¡Œåˆ†é…. ç±»å˜é‡:è¢«staticä¿®é¥°çš„å˜é‡,è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªè¦æ³¨æ„çš„å°±æ˜¯finalä¿®é¥°çš„,è¿™æ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µ,ä¼šåœ¨å‡†å¤‡é˜¶æ®µå°±åˆå§‹åŒ–ä¸ºæŒ‡å®šçš„å€¼.(åœ¨å­—æ®µå±æ€§è¡¨ä¸­è¡¨ç°ä¸ºConstantValueå±æ€§) è€Œä¸æ˜¯åƒé€šå¸¸æƒ…å†µä¸‹,ä¼šç»™é™æ€å˜é‡èµ‹é›¶å€¼. è§£æåœ¨ç¬¦å·å¼•ç”¨éªŒè¯ä¸­æåˆ°è¿‡,è¿™ä¸ªé˜¶æ®µæ˜¯è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹. è§£æçš„æ“ä½œä¸€èˆ¬é’ˆå¯¹ç±»,æ¥å£,å­—æ®µ,ç±»æ–¹æ³•,æ¥å£æ–¹æ³•,æ–¹æ³•ç±»å‹,æ–¹æ³•å¥æŸ„å’Œè°ƒç”¨ç‚¹é™å®šç¬¦7ç±»ç¬¦å·å¼•ç”¨ å¤§æ¦‚åˆ†ä¸º: ç±»æˆ–è€…æ¥å£çš„è§£æ,å­—æ®µè§£æ,ç±»æ–¹æ³•è§£æ,æ¥å£æ–¹æ³•è§£æ åˆå§‹åŒ–åˆå§‹åŒ–æ˜¯ç±»åŠ è½½çš„æœ€åä¸€ä¸ªé˜¶æ®µ,ä¹‹å‰çš„é˜¶æ®µ,é™¤äº†åœ¨åŠ è½½é˜¶æ®µå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç±»åŠ è½½å™¨å‚ä¸ä¹‹å¤–,å…¶ä»–çš„éƒ½æ˜¯ç”±è™šæ‹Ÿæœºä¸»å¯¼å’Œæ§åˆ¶.è€Œåˆ°äº†åˆå§‹åŒ–é˜¶æ®µ,æ‰çœŸæ­£å¼€å§‹æ‰§è¡Œç±»ä¸­å®šä¹‰çš„JAVAä»£ç ,è¿™ä¸ªé˜¶æ®µæ ¹æ®ä»£ç ä¸­å®šä¹‰å¥½çš„è®¡åˆ’å»åˆå§‹åŒ–ç±»å˜é‡å’Œå…¶ä»–èµ„æº. åˆå§‹åŒ–é˜¶æ®µæ˜¯æ‰§è¡Œç±»æ„é€ å™¨&lt;client&gt;()æ–¹æ³•çš„è¿‡ç¨‹.","categories":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/tags/Java/"}]},{"title":"Androidé€šè®¯æœºåˆ¶åˆ†æ-Handler","slug":"Handleré€šè®¯æœºåˆ¶åˆ†æ","date":"2018-03-07T06:13:47.000Z","updated":"2018-05-09T09:59:02.204Z","comments":true,"path":"Source-Code/Handleré€šè®¯æœºåˆ¶åˆ†æ/","link":"","permalink":"http://www.wangzhumo.com/Source-Code/Handleré€šè®¯æœºåˆ¶åˆ†æ/","excerpt":"","text":"Handleråœ¨Androidä¸–ç•Œä¸­çš„åœ°ä½ä¸è¨€è€Œå–».è¿™ç¯‡ç¬”è®°ç®—æ˜¯ç®€å•çš„è®°å½•ä¸€ä¸‹æˆ‘å¯¹äºHandlerçš„ç†è§£. å½“æ—¶ç¬¬ä¸€æ¬¡å¯¹Handleräº§ç”Ÿå…´è¶£æ˜¯æˆ‘åœ¨çŸ¥ä¹ä¸Šçœ‹åˆ°ä¸€ä¸ªé—®é¢˜: Androidä¸­ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ä¸ä¼šå› ä¸ºLooper.loop()é‡Œçš„æ­»å¾ªç¯å¡æ­» Handleræ¶ˆæ¯æœºåˆ¶çš„æ„æˆ Handler ä¸»è¦å°±æ˜¯å‘é€å„ç§æ¶ˆæ¯sendMessageç­‰,ä»¥åŠå¤„ç†æ¶ˆæ¯handleMessage Message å³æ˜¯ä¼ é€’æ¶ˆæ¯çš„è½½ä½“,æœ‰æ—¶å€™ä¹Ÿä¼šæ‰¿è½½ç¡¬ä»¶å‘å‡ºçš„æ¶ˆæ¯. Looper è¿™æ˜¯ä¸€ä¸ªå¾ªç¯Looper.loop,å¹¶è´Ÿè´£å°†æ¶ˆæ¯å‘é€ç»™ç›®æ ‡. MessageQueue æ¶ˆæ¯é˜Ÿè´Ÿè´£å°†æ¶ˆæ¯å‘é€éƒ½æ¶ˆæ¯æ± ä»¥åŠåœ¨æ¶ˆæ¯æ± ä¸­æ‹¿èµ°æ¶ˆæ¯ â€‹ Messageç±»åˆ†æé¦–å…ˆæˆ‘ä»¬è¦çœ‹åˆ° 1234private static Message sPool;// sometimes we store linked lists of these things/*package*/ Message next; sPoolå£°æ˜ä¸ºstatic ä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰çš„Messageå®ä¾‹å…±äº« nextåˆ™ä¸ºæ¯ä¸€ä¸ªå®ä¾‹éƒ½æœ‰çš„ Messageç±»ä¸­,ä¸€ç³»åˆ—çš„obtain,å¦‚ä¸‹: obtain(Handler h) obtain(Handler h, int what) obtain(Handler h, Runnable callback) â€¦ obtain() å¤ç”¨æœºåˆ¶ æˆ‘ä»¬æŸ¥çœ‹æºç å¯çŸ¥,ä»–ä»¬æœ€åéƒ½è°ƒç”¨obtain()è·å¾—ä¸€ä¸ªMessageå®ä½“ 12345678910111213141516171819android.os.Message#obtain()/** * Return a new Message instance from the global pool. Allows us to * avoid allocating new objects in many cases. */ public static Message obtain() &#123; synchronized (sPoolSync) &#123; if (sPool != null) &#123; Message m = sPool; sPool = m.next; m.next = null; m.flags = 0; // clear in-use flag sPoolSize--; return m; &#125; &#125; return new Message(); &#125; å¯ä»¥çœ‹åˆ°,å½“sPoolä¸ºnullæ—¶æ‰ä¼šnew Message(); å¦‚æœä¸ä¸ºnullåˆ™æŠŠå½“å‰çš„sPoolèµ‹å€¼ç»™Message m è€ŒåæŠŠsPoolèµ‹å€¼ä¸ºm.next()(ä¹Ÿå°±æ˜¯sPoolæ²¡æœ‰èµ‹å€¼å‰å®ƒçš„ä¸‹ä¸€ä¸ªMessageå¯¹è±¡) æŸ¥çœ‹æºç åˆ†æå¯çŸ¥,æœ‰ä¸€ä¸ªMessageçš„æ¶ˆæ¯æ± ,é‡‡ç”¨çš„æ˜¯å•é“¾è¡¨å¤´æ’æ³•,nextæ°¸è¿œæŒ‡å‘çš„æ˜¯ä¸‹ä¸€ä¸ªå¯å¤ç”¨çš„å®ä¾‹åœ°å€ æ‰€ä»¥,å¦‚æœæˆ‘ä»¬åœ¨ä»£ç ä¸­è¦ä½¿ç”¨Messageå®ä¾‹,å°±å°½é‡ä½¿ç”¨obtain()è¿™ä¸€ç³»åˆ—æ–¹æ³•,è€Œä¸è¦ç›´æ¥New åŠ å…¥æ¶ˆæ¯æ±  1234567891011121314151617181920212223242526272829android.os.Message#recycleUnchecked/** * Recycles a Message that may be in-use. * Used internally by the MessageQueue and Looper when disposing of queued Messages. */ void recycleUnchecked() &#123; // Mark the message as in use while it remains in the recycled object pool. // Clear out all other details. flags = FLAG_IN_USE; what = 0; arg1 = 0; arg2 = 0; obj = null; replyTo = null; sendingUid = -1; when = 0; target = null; callback = null; data = null; synchronized (sPoolSync) &#123; if (sPoolSize &lt; MAX_POOL_SIZE) &#123; next = sPool; sPool = this; sPoolSize++; &#125; &#125; &#125; è¿™é‡Œå…¶å®å°±æ˜¯æŠŠæ— ç”¨çš„Messageå®ä¾‹,åŠ å…¥æ¶ˆæ¯æ± çš„åœ°æ–¹. sPoolSize &lt; MAX_POOL_SIZEåªè¦å½“å‰æ¶ˆæ¯æ± æ²¡æœ‰åˆ°æé™,å°±next = sPool;ä¸”sPool = this; å¯ä»¥ç®€å•ç†è§£ä¸ºæŠŠä¹‹å‰çš„sPoolå¯å¤ç”¨å¯¹è±¡å‘åç§»åŠ¨ä¸€ä½,æŠŠå½“å‰è¿™ä¸ªè¦å›æ”¶çš„Messageç½®ä¸ºç¬¬ä¸€ä¸ªå¯å¤ç”¨å¯¹è±¡ æ‰€ä»¥,Messageä¸»è¦å°±æ˜¯è£…è½½æ•°æ®,å¹¶ä¸”å®ç°äº†Messageçš„å¤ç”¨æœºåˆ¶ MessageQueueç±»åˆ†æ","categories":[{"name":"Source Code","slug":"Source-Code","permalink":"http://www.wangzhumo.com/categories/Source-Code/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Handler","slug":"Handler","permalink":"http://www.wangzhumo.com/tags/Handler/"}]},{"title":"RelativeLayoutä¸­Buttonè¦†ç›–å…¶ä»–View","slug":"RelativeLayoutä¸­Buttonè¦†ç›–å…¶ä»–View","date":"2018-03-07T03:53:36.000Z","updated":"2018-03-07T05:09:51.138Z","comments":true,"path":"Bug/RelativeLayoutä¸­Buttonè¦†ç›–å…¶ä»–View/","link":"","permalink":"http://www.wangzhumo.com/Bug/RelativeLayoutä¸­Buttonè¦†ç›–å…¶ä»–View/","excerpt":"","text":"å‰è¨€å¸ƒå±€æ–‡ä»¶ä¸­,RelativeLayoutåŒ…è£¹æ—¶,åœ¨RelativeLayoutä¸­çš„View,åº”è¯¥æ˜¯â€å±‚å±‚å‹ä¸Šâ€çš„. è¶Šå¾€åº•ä¸‹å†™çš„Viwe,åœ¨è§†å›¾ä¸Šè¶Šåœ¨ä¸Šå±‚. é—®é¢˜activity_main.xml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt; &lt;data&gt; &lt;variable name=&quot;click&quot; type=&quot;com.wangzhumo.app.single.MainActivity.ClickFunc&quot;/&gt; &lt;/data&gt; &lt;RelativeLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; tools:context=&quot;com.wangzhumo.app.single.MainActivity&quot;&gt; &lt;ImageView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:layout_marginBottom=&quot;50dp&quot; tools:background=&quot;@tools:sample/backgrounds/scenic&quot;/&gt; &lt;Button android:id=&quot;@+id/button_finsh&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_alignParentTop=&quot;true&quot; android:layout_centerHorizontal=&quot;true&quot; android:onClick=&quot;@&#123;(v) -&gt; click.onFinshAct(v)&#125;&quot; android:text=&quot;Finsh&quot; /&gt; &lt;Button android:id=&quot;@+id/button_dis&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_alignParentEnd=&quot;true&quot; android:layout_alignParentTop=&quot;true&quot; android:onClick=&quot;@&#123;(v) -&gt; click.onStartAct(v)&#125;&quot; android:text=&quot;Start&quot; tools:ignore=&quot;MissingConstraints&quot; tools:layout_editor_absoluteX=&quot;88dp&quot; tools:layout_editor_absoluteY=&quot;0dp&quot; /&gt; &lt;Button android:id=&quot;@+id/button_start&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:onClick=&quot;@&#123;(v) -&gt; click.onShowDialog(v)&#125;&quot; android:text=&quot;Dialog&quot; tools:ignore=&quot;MissingConstraints&quot; tools:layout_editor_absoluteX=&quot;176dp&quot; tools:layout_editor_absoluteY=&quot;0dp&quot; /&gt; &lt;Button android:id=&quot;@+id/button2&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_alignParentStart=&quot;true&quot; android:onClick=&quot;@&#123;(v) -&gt; click.onPxActivity(v)&#125;&quot; android:layout_below=&quot;@+id/button_start&quot; android:layout_marginTop=&quot;22dp&quot; android:text=&quot;Pixe&quot; /&gt; &lt;Button android:id=&quot;@+id/button3&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:onClick=&quot;@&#123;(v) -&gt; click.onTralActivity(v)&#125;&quot; android:layout_alignStart=&quot;@+id/button_finsh&quot; android:layout_alignTop=&quot;@+id/button2&quot; android:text=&quot;Tranl&quot; tools:text=&quot;@tools:sample/lorem/random&quot;/&gt; &lt;ImageView android:layout_marginBottom=&quot;100dp&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; tools:background=&quot;@tools:sample/backgrounds/scenic&quot;/&gt; &lt;/RelativeLayout&gt;&lt;/layout&gt; Viewçš„ç»“æ„å¦‚ä¸‹: ç„¶è€Œå®é™…æ•ˆæœå¦‚ä¸‹: åˆ†æå¦‚ä¸‹:é€ æˆè¿™æ ·æ•ˆæœ,æ˜¯Buttonçš„åŸå›  åˆ†æ:æ•´ä¸ªé¡µé¢é™¤äº† 2,3,4,5 è¿™5ä¸ªButtonä¹‹å¤–,å…¶ä»–çš„Viewéƒ½ä¾æ—§éµå¾ªRelativeLayoutçš„è§„åˆ™ è§£å†³æ–¹æ¡ˆåœ¨stackoverflowä¸Šæˆ‘æ‰¾åˆ°äº†Buttoné€ æˆè¿™ä¸ªæ•ˆæœçš„åŸå›  https://stackoverflow.com/questions/27080338/android-5-0-androidelevation-works-for-view-but-not-button/27112143#27112143 æ˜¯å› ä¸ºAndroid5.0ä¹‹å,Buttoné»˜è®¤æ·»åŠ äº†StateListAnimator,å…·ä½“å°±æ˜¯å¯¹ android:elevation android:translationZ ä¸¤ä¸ªå±æ€§è¿›è¡Œäº†ä¿®æ”¹,æˆ‘ä»¬å¦‚ä½•å»æ‰è¿™ä¸ªé»˜è®¤çš„æ•ˆæœé‚£? ##### android:stateListAnimatorè®¾ç½®ä¸ºnullå³å¯ 123&lt;Button ... android:stateListAnimator=&quot;@null&quot; /&gt; å¦‚æœä½ éœ€è¦æ·»åŠ stateListAnimatoræ•ˆæœçš„è¯ 123&lt;Button ... android:stateListAnimator=&quot;@anim/you_animator&quot; /&gt;","categories":[{"name":"Bug","slug":"Bug","permalink":"http://www.wangzhumo.com/categories/Bug/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Bug","slug":"Bug","permalink":"http://www.wangzhumo.com/tags/Bug/"}]},{"title":"ConfigChangesçš„å±æ€§å€¼","slug":"ConfigChangesçš„å±æ€§å€¼","date":"2018-03-05T09:51:12.000Z","updated":"2018-03-05T10:26:08.000Z","comments":true,"path":"Android/ConfigChangesçš„å±æ€§å€¼/","link":"","permalink":"http://www.wangzhumo.com/Android/ConfigChangesçš„å±æ€§å€¼/","excerpt":"","text":"é€šè¿‡è®¾ç½®è¿™ä¸ªå±æ€§å¯ä»¥ä½¿Activityæ•æ‰è®¾å¤‡çŠ¶æ€å˜åŒ– 12345678910111213&quot;mcc&quot; å›½é™…ç§»åŠ¨ç”¨æˆ·è¯†åˆ«ç æ‰€å±å›½å®¶ä»£å·æ˜¯æ”¹å˜äº†----- simè¢«ä¾¦æµ‹åˆ°äº†ï¼Œå»æ›´æ–°mcc mccæ˜¯ç§»åŠ¨ç”¨æˆ·æ‰€å±å›½å®¶ä»£å·&quot;mnc&quot; å›½é™…ç§»åŠ¨ç”¨æˆ·è¯†åˆ«ç çš„ç§»åŠ¨ç½‘å·ç æ˜¯æ”¹å˜äº†------ simè¢«ä¾¦æµ‹åˆ°äº†ï¼Œå»æ›´æ–°mnc MNCæ˜¯ç§»åŠ¨ç½‘å·ç ï¼Œæœ€å¤šç”±ä¸¤ä½æ•°å­—ç»„æˆï¼Œç”¨äºè¯†åˆ«ç§»åŠ¨ç”¨æˆ·æ‰€å½’å±çš„ç§»åŠ¨é€šä¿¡ç½‘&quot;locale&quot; åœ°å€æ”¹å˜äº†-----ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªæ–°çš„è¯­è¨€ä¼šæ˜¾ç¤ºå‡ºæ¥&quot;touchscreen&quot; è§¦æ‘¸å±æ˜¯æ”¹å˜äº†------é€šå¸¸æ˜¯ä¸ä¼šå‘ç”Ÿçš„&quot;keyboard&quot; é”®ç›˜å‘ç”Ÿäº†æ”¹å˜----ä¾‹å¦‚ç”¨æˆ·ç”¨äº†å¤–éƒ¨çš„é”®ç›˜&quot;keyboardHidden&quot; é”®ç›˜çš„å¯ç”¨æ€§å‘ç”Ÿäº†æ”¹å˜&quot;navigation&quot; å¯¼èˆªå‘ç”Ÿäº†å˜åŒ–-----é€šå¸¸ä¹Ÿä¸ä¼šå‘ç”Ÿ&quot;screenLayout&quot; å±å¹•çš„æ˜¾ç¤ºå‘ç”Ÿäº†å˜åŒ–------ä¸åŒçš„æ˜¾ç¤ºè¢«æ¿€æ´»&quot;fontScale&quot; å­—ä½“æ¯”ä¾‹å‘ç”Ÿäº†å˜åŒ–----é€‰æ‹©äº†ä¸åŒçš„å…¨å±€å­—ä½“&quot;uiMode&quot; ç”¨æˆ·çš„æ¨¡å¼å‘ç”Ÿäº†å˜åŒ–&quot;orientation&quot; å±å¹•æ–¹å‘æ”¹å˜äº†&quot;screenSize&quot; å±å¹•å¤§å°æ”¹å˜äº†&quot;smallestScreenSize&quot; å±å¹•çš„ç‰©ç†å¤§å°æ”¹å˜äº†ï¼Œå¦‚ï¼šè¿æ¥åˆ°ä¸€ä¸ªå¤–éƒ¨çš„å±å¹•ä¸Š http://www.cnblogs.com/carlo/p/4311010.html","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"Activityä¸Fragmentçš„ç”Ÿå‘½å‘¨æœŸ","slug":"Activityä¸Fragmentçš„ç”Ÿå‘½å‘¨æœŸ","date":"2018-03-05T06:02:42.000Z","updated":"2018-05-09T10:08:36.000Z","comments":true,"path":"Android/Activityä¸Fragmentçš„ç”Ÿå‘½å‘¨æœŸ/","link":"","permalink":"http://www.wangzhumo.com/Android/Activityä¸Fragmentçš„ç”Ÿå‘½å‘¨æœŸ/","excerpt":"","text":"å‰è¨€åšAndroidå¼€å‘å¥½äº›å¹´äº†,è¿™äº›åŸºç¡€çš„çŸ¥è¯†,å®Œå®Œæ•´æ•´çš„åœ¨åšå®¢ä¸Šå†™ä¸€æ¬¡. Activityç”Ÿå‘½å‘¨æœŸå¿…ä¸å¯å°‘çš„ä¸€å¼ å›¾,æ¥è‡ªGoogle Android developer çš„æ–‡æ¡£ä¸Š å›è°ƒæ–¹æ³•ç®€è¿° onCreate() å½“Activityåˆ›å»ºæ—¶,ä¼šå›è°ƒè¯¥æ–¹æ³•,å¸¸ç”¨äºåˆå§‹åŒ–View æˆ–å…¶ä»–çš„ä¸€äº›åŠŸèƒ½çš„åˆå§‹åŒ– onStart() Activityå·²ç»åˆå§‹åŒ–å®Œæ¯•,æ­¤æ—¶çš„é¡µé¢æ˜¯å¯è§çŠ¶æ€,åˆ™å›è°ƒonStart();æ–¹æ³• Activityå¯åŠ¨ï¼šonCreate() -&gt; onStart() -&gt; onResume() onResume() å½“Activityå¯è§,å¹¶ä¸”è·å¾—ç„¦ç‚¹,å¯ä»¥ä¸ç”¨æˆ·äº¤äº’æ—¶å›è°ƒ åœ¨æˆ‘ä»¬å¤„ç†ä¸€äº›è§†å±æ“ä½œ,æˆ–è€…æ˜¯Fragmentæ‡’åŠ è½½ç­‰éƒ½å¯ä»¥ç”¨åˆ° onPause() å½“è°ƒç”¨onPause()æ—¶,è¯´æ˜Activityè¢«é˜»æŒ¡,éƒ¨åˆ†UIå·²ç»ä¸å¯è§äº†,ä½†æ˜¯Activityçš„UIå¹¶æ²¡æœ‰å®Œå…¨æ¶ˆå¤±. onStop() å½“Activityå®Œå…¨ä¸å¯è§,ä¸”åˆ°äº†åå°ä¹‹å,å¦‚æœç³»ç»Ÿå†…å­˜ä¸è¶³,ç³»ç»Ÿå¯èƒ½ä¼šæ€æ­»å½“å‰Activity åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥å–æ¶ˆä¸€äº›åŠ¨ç”»æ•ˆæœç­‰ onDestory() Activityé€€å‡º,é”€æ¯ å¸¸ç”¨äºé”€æ¯,å›æ”¶èµ„æº ç»å…¸åœºæ™¯1.æ­£å¸¸å¯åŠ¨ ç³»ç»Ÿè°ƒç”¨onCreateæ–¹æ³• , ç„¶åè°ƒç”¨onStart() , æœ€åè°ƒç”¨ onResume() ,ç”¨æˆ·å¯æ“ä½œ. 123E/MainActivity: ---- onCreate ----E/MainActivity: ---- onStart ----E/MainActivity: ---- onResume ---- 2.æ­£å¸¸é€€å‡º Activityå…ˆå¤±å»ç„¦ç‚¹ä¸å¯äº¤äº’ 123E/MainActivity: ---- onPause ----E/MainActivity: ---- onStop ----E/MainActivity: ---- onDestroy ---- 2.å¼¹å‡ºDialog MainActivityä»€ä¹ˆlogä¹Ÿæ²¡æœ‰æ‰“å°,è¯´æ˜ä¸å¯¹Activityé€ æˆå½±å“ 3.è·³è½¬ä¸€ä¸ªé€æ˜çš„Activityé¡µé¢(1åƒç´ çš„åŒç†) MainActivityåªè°ƒç”¨äº†onPause() å› ä¸ºMainActivityçš„UIè¢«é®æŒ¡äº† 1E/MainActivity: ---- onPause ---- 4.ä»è¢«é®æŒ¡çŠ¶æ€æ¢å¤ 1E/MainActivity: ---- onResume ---- 6.é”å± 12E/MainActivity: ---- onPause ----E/MainActivity: ---- onStop ---- æ­¤æ—¶,MainActivityå·²ç»åœ¨åå°äº†. 7.ä»é”å±æ¢å¤ 12E/MainActivity: ---- onStart ----E/MainActivity: ---- onResume ---- å¯ä»¥å‘ç°,ä¸ä»…ä»…èµ°äº†onResume() ,è¿˜èµ°äº†ä¸€æ¬¡onStart() 8.æ¨ªç«–å±åˆ‡æ¢ æ­£å¸¸åˆ‡æ¢ 123456789E/MainActivity: ---- onPause ----E/MainActivity: ---- onStop ----E/MainActivity: ---- onDestroy ----E/MainActivity: ---- onCreate ----E/MainActivity: ---- onStart ----E/MainActivity: ---- onResume ----å¦‚æœä½ ä»€ä¹ˆéƒ½ä¸è®¾ç½®,ç›´æ¥åˆ‡æ¢æ˜¯è¿™æ ·çš„. ä¿ç•™Activityçš„åˆ‡æ¢ 12345678910æˆ‘åœ¨manifest.xmlæ–‡ä»¶ä¸­,æ·»åŠ äº†&lt;activity android:name=&quot;.MainActivity&quot; android:configChanges=&quot;orientation|screenSize&quot;&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt; &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;&lt;/intent-filter&gt;&lt;/activity&gt; æ­¤æ—¶: Activityä¸ä¼šè¢«é”€æ¯,ä»è€Œé‡æ–°åˆ›å»º,è€Œæ˜¯è°ƒç”¨onConfigurationChanged 12345@Override public void onConfigurationChanged(Configuration newConfig) &#123; super.onConfigurationChanged(newConfig); //do somethings&#125; â€‹ Fragmentç”Ÿå‘½å‘¨æœŸæƒ¯ä¾‹,å¦‚å›¾: å›è°ƒæ–¹æ³•ç®€è¿°å…¶ä¸­onAttach() onCreateView() onActivityCreated() onDestroy() onDetach() å’ŒActivityçš„ä¸ä¸€è‡´ onAttach() Fragmentä¸å®ƒæ‰€ä¾èµ–çš„Activityå»ºç«‹å…³è” onCreateView() è¿™é‡Œæ˜¯ç»™Fragmentåˆ›å»ºè§†å›¾ç”¨çš„,åœ¨onCreate()ä¸­åˆå§‹åŒ–Fragment,ä½†æ˜¯è§†å›¾ç­‰è¿˜æ˜¯æ²¡æœ‰åŠ è½½ä¸Šå»çš„ onActivityCreated() å¦‚æœè°ƒç”¨è¯¥æ–¹æ³•,è¯´æ˜Fragmentä¾èµ–çš„Activityä¸­onCreate()å·²ç»æ‰§è¡Œå®Œæ¯• onDestroyView() Fragmentä¸­çš„å¸ƒå±€é”€æ¯,ç§»é™¤ è¦æ³¨æ„çš„æ˜¯,æ­¤æ—¶Fragmentä¸å®ƒæ‰€ä¾èµ–çš„Activityè¿˜æ˜¯å…³è”çš„ onDestroy() æ­¤æ—¶,Fragmentè¢«é”€æ¯ onDetach() è§£é™¤ä¸Activityçš„å…³è” PS: Fragmentä¸­çš„onResume()å¹¶ä¸ååˆ†å‡†ç¡®,æ‰€ä»¥å¦‚æœè¦åšæ‡’åŠ è½½,è¦åˆ¤æ–­fragmentä¸èƒ½ä½¿ç”¨onResumeåˆ¤æ–­ ç»å…¸åœºæ™¯1.æ­£å¸¸å¯åŠ¨ çœŸçš„æ˜¯è¶…çº§å¤šå•Š 1234567E/BlankFragment: ---- onAttach ---- å…³è”ActivityE/BlankFragment: ---- onCreate ---- Fragmentåˆå§‹åŒ–E/BlankFragment: ---- onCreateView ---- åˆ›å»ºFragmentçš„å¸ƒå±€E/BlankFragment: ---- onViewCreated ---- onCreateViewæ‰§è¡Œå®Œåè¢«è§¦å‘E/BlankFragment: ---- onActivityCreated ---- å…³è”çš„Activity OnCreate()æ‰§è¡Œå®Œæ¯•åè§¦å‘E/BlankFragment: ---- onStart ---- Fragmentå¯è§E/BlankFragment: ---- onResume ---- Fragmentå¯äº¤äº’,ä¸€èˆ¬ä¸ä½¿ç”¨å®ƒæ¥åˆ¤æ–­ 2.æ­£å¸¸é€€å‡º(æˆ–è€…æ˜¯å®ƒå…³è”çš„Activityè¢«é”€æ¯äº†) 12345E/BlankFragment: ---- onPause ----E/BlankFragment: ---- onStop ----E/BlankFragment: ---- onDestroyView ----E/BlankFragment: ---- onDestroy ----E/BlankFragment: ---- onDetach ---- 3.è¿›å…¥åå° 12E/BlankFragment: ---- onPause ----E/BlankFragment: ---- onStop ---- 4.ä»é”å±åˆ°è§£é” 123456E/BlankFragment: ---- onPause ----E/BlankFragment: ---- onSaveInstanceState ----E/BlankFragment: ---- onStop ----E/BlankFragment: ---- onStart ----E/BlankFragment: ---- onResume ---- 5.åˆ‡æ¢åˆ°OtherFragment 123E/BlankFragment: ---- onPause ----E/BlankFragment: ---- onStop ----E/BlankFragment: ---- onDestroyView ---- 6.ä»OtherFragmentåˆ‡æ¢å›æœ¬Fragment 1234E/BlankFragment: ---- onCreateView ----E/BlankFragment: ---- onActivityCreated ----E/BlankFragment: ---- onStart ---- E/BlankFragment: ---- onResume ----","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Fragment","slug":"Fragment","permalink":"http://www.wangzhumo.com/tags/Fragment/"},{"name":"Activity","slug":"Activity","permalink":"http://www.wangzhumo.com/tags/Activity/"}]},{"title":"Android å•å…ƒæµ‹è¯•(äºŒ)","slug":"Android-å•å…ƒæµ‹è¯•-äºŒ","date":"2018-03-01T07:27:56.000Z","updated":"2018-03-05T06:02:12.092Z","comments":true,"path":"Android-Test/Android-å•å…ƒæµ‹è¯•-äºŒ/","link":"","permalink":"http://www.wangzhumo.com/Android-Test/Android-å•å…ƒæµ‹è¯•-äºŒ/","excerpt":"","text":"åè¡¥.","categories":[{"name":"Android Test","slug":"Android-Test","permalink":"http://www.wangzhumo.com/categories/Android-Test/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Androidå•å…ƒæµ‹è¯•","slug":"Androidå•å…ƒæµ‹è¯•","permalink":"http://www.wangzhumo.com/tags/Androidå•å…ƒæµ‹è¯•/"}]},{"title":"Flutterå®‰è£…æŒ‡å—MACç‰ˆ","slug":"Flutterå®‰è£…æŒ‡å—MACç‰ˆ","date":"2018-02-28T15:56:58.000Z","updated":"2018-02-28T16:44:14.198Z","comments":true,"path":"Flutter/Flutterå®‰è£…æŒ‡å—MACç‰ˆ/","link":"","permalink":"http://www.wangzhumo.com/Flutter/Flutterå®‰è£…æŒ‡å—MACç‰ˆ/","excerpt":"","text":"ä¸‹è½½Flutter SDKä½¿ç”¨Gitå®‰è£…å¦‚æœå·²ç»ä¸‹è½½è¿‡flutterçš„,åˆ‡æ¢åˆ°flutterç›®å½•å»ç›´æ¥ 123456789git checkout betagit pull//å¯èƒ½ä¼šå¤±è´¥,å› ä¸ºè¿™ä¸ªç›®å½•ä¸­å¯èƒ½æœ‰ä¿®æ”¹è¿‡,è¦ç›®æ”¾å¼ƒä¿®æ”¹,è¦ä¹ˆæš‚å­˜å‡å¯(å¦‚æœå¤±è´¥,è¿™é‡Œé€‰æ‹©äº†æš‚å­˜) -- Startgit checkout betagit stashgit pull(å¦‚æœå¤±è´¥,è¿™é‡Œé€‰æ‹©äº†æš‚å­˜) -- End æœªä¸‹è½½è¿‡,ç¬¬ä¸€æ¬¡å®‰è£… 12//å…‹éš†flutterçš„betaåˆ†æ”¯git clone -b beta https://github.com/flutter/flutter.git é…ç½®â€ç¯å¢ƒå˜é‡â€ç†Ÿæ‚‰å‘½ä»¤çš„è‡ªå·±æä¸€ä¸‹ 12//æŠŠ å®‰è£…ç›®å½•/flutter/binexport PATH=`pwd`/flutter/bin:$PATH ä¸ç†Ÿæ‚‰çš„ 1234567~ âŒš 0:01:37$ vim ~/.bash_profile//ä¼šè¿›å…¥vimç¼–è¾‘,å¦‚ä¸‹é…ç½®å³å¯export FLUTTER_HOME=/Users/phyooos/develop/flutterexport PATH=$PATH:$FLUTTER_HOME/bin: ä¸ä¼šçš„ 123456open ~/.bash_profile//ç¼–è¾‘å™¨,æ€»å¯ä»¥äº†å§,å¦‚ä¸‹é…ç½®å³å¯export FLUTTER_HOME=/Users/phyooos/develop/flutterexport PATH=$PATH:$FLUTTER_HOME/bin: æ”¾ä¸€ä¸‹æˆ‘è‡ªå·±çš„é…ç½®: 123456789101112export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0/Contents/Homeexport ANDROID_HOME=/Users/phyooos/Library/Android/sdkexport TOMCAT_HOME=/Users/phyooos/develop/apache-tomcat-7.0.77export GRADLE_USER_HOME=/Users/phyooos/develop/gradleexport MYSQL_HOME=/usr/local/mysql-5.7.18-macos10.12-x86_64export GOROOT=/usr/local/goexport GOPATH=/Users/phyooos/develop/workspaceexport GOBIN=$GOPATH/binexport SCALA_HOME=/Users/phyooos/develop/scala-2.11.8export MAVEN_HOME=/Users/phyooos/develop/apache-maven-3.5.0export FLUTTER_HOME=/Users/phyooos/develop/flutterexport PATH=/usr/local/Cellar/git/2.15.0/bin:$PATH:$JAVA_HOME/bin:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools:$TOMCAT_HOME/bin:$GRADLE_HOME/bin:$MYSQL_HOME/bin:$GOROOT/bin:$GOPATH:$GOBIN:$GOPATH/bin:$FLUTTER_HOME/bin:$MAVEN_HOME/bin:$SCALA_HOME/bin å®‰è£…Flutter1flutter doctor è¿™é‡Œè¦æ³¨æ„çš„æ˜¯,è¿™ä¸ªé…ç½®éœ€è¦â€è‰¯å¥½çš„ç½‘ç»œç¯å¢ƒâ€,æœ€å¥½ç¿»å¢™ä¸‹è½½ä¸ºå¦™,ä½†æ˜¯ç»ˆç«¯ä¸èµ°ä»£ç† æ‰€ä»¥,éœ€è¦æ‰‹åŠ¨ç»™ç»ˆç«¯é…ç½®ä¸€ä¸‹,è¯·çœ‹æˆ‘å¦ä¸€ç¯‡æ–‡ç«  Flutter å®‰è£…","categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://www.wangzhumo.com/categories/Flutter/"}],"tags":[{"name":"Google","slug":"Google","permalink":"http://www.wangzhumo.com/tags/Google/"},{"name":"Flutter","slug":"Flutter","permalink":"http://www.wangzhumo.com/tags/Flutter/"}]},{"title":"Android å•å…ƒæµ‹è¯•(ä¸€)","slug":"Android-å•å…ƒæµ‹è¯•-ä¸€","date":"2018-02-26T06:25:49.000Z","updated":"2018-03-01T07:29:23.818Z","comments":true,"path":"Android-Test/Android-å•å…ƒæµ‹è¯•-ä¸€/","link":"","permalink":"http://www.wangzhumo.com/Android-Test/Android-å•å…ƒæµ‹è¯•-ä¸€/","excerpt":"","text":"åˆè¯†å•å…ƒæµ‹è¯•å½“é¡¹ç›®è¶Šæ¥è¶Šå¤§çš„æ—¶å€™,æ‰“åŒ… &gt; æµ‹è¯• &gt; æ”¹ä»£ç  &gt; æ‰“åŒ… &gt; æµ‹è¯• â€¦.è¿™æ ·çš„æµç¨‹æ—¢è´¹æ—¶ä¹Ÿè´¹åŠ›. æ‰€ä»¥,äº†è§£ä¸€ä¸‹å•å…ƒæµ‹è¯•,çœ‹çœ‹æ˜¯å¦èƒ½å¤Ÿè§£å†³è¿™ä¸ªé—®é¢˜. (å¹³æ—¶å¤ªæ‡’äº†,å°±æ²¡æ­£ç»çš„äº†è§£è¿‡Androidè¿™è¾¹çš„å•å…ƒæµ‹è¯•,æ²¡æœ‰ä¸€ä¸ªç¡®åˆ‡çš„æ¦‚å¿µ) é‚£ä¹ˆ,æˆ‘å­¦ä¹ å•å…ƒæµ‹è¯•çš„åŸå› ç«Ÿç„¶æ˜¯ å› ä¸ºæˆ‘æ‡’ å½“æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™,Android Studioæ€»ä¼šå»è‡ªåŠ¨å¯¼å…¥ä¸€ä¸ªåŒ… 1testImplementation &apos;junit:junit:4.12&apos; è¿™ä¸ªå°±æ˜¯ä¼ è¯´ä¸­çš„ Junit äº†,è¿™ç©æ„é’ˆå¯¹Javaçš„,æ‰€ä»¥ä¸æ¶‰åŠåˆ°Androidéƒ¨åˆ†çš„æµ‹è¯•å¯ä»¥ä½¿ç”¨ è·Ÿç€ä»‹ç»ä¹Ÿæ‰“äº†ä¸€ä¸ªä¾‹å­: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354//åœ¨commonlibä¸­å†™äº†ä¸€ä¸ªCalculator,é‡Œé¢ç®€å•çš„åŠ æ³•package com.wangzhumo.app.commonlib.utils;public class Calculator &#123; public int add(int a,int b)&#123; return a + b; &#125; public String verity(String phone) &#123; if (phone == null || phone.isEmpty()) &#123; throw new IllegalArgumentException(\"phone cannot be empty\"); &#125; return phone; &#125;&#125;//åœ¨ä¸»é¡¹ç›®ä¸­//testç›®å½•ä¸‹package com.wangzhumo.app.test;public class CalculatorTest &#123; Calculator calculator; @Before public void initCalculator()&#123; calculator = new Calculator(); &#125; @Test public void testCalculator() throws Exception&#123; int sum = calculator.add(1,5); Assert.assertEquals(6,sum); &#125; /** * åŠ å…¥æç¤ºä¿¡æ¯ */ @Test public void testCalculatorWithMessage() throws Exception&#123; int sum = calculator.add(1,5); //assertEquals æ–¹æ³•å‰é¢åŠ ä¸€ä¸ª string å½“æŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™ä¼šè¾“å‡ºè¿™ä¸ªmessage //å¯ä»¥è®©æˆ‘ä»¬æ›´æ¸…æ¥šçš„æ˜ç™½æ˜¯ä»€ä¹ˆé—®é¢˜ Assert.assertEquals(\"ä½ çš„æ•°å­¦å¤ªçƒ‚äº†\",5,sum); &#125; /** * å¦‚æœæŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸æ‰ç®—é€šè¿‡ */ @Test(expected = IllegalArgumentException.class) public void testVerity()&#123; calculator.verity(\"\"); &#125; &#125; ç„¶åé€‰ä¸­æ–¹æ³•ç›´æ¥æ‰§è¡Œæ¯”å¦‚ : testCalculatorWithMessage() é€‰ä¸­Run â€˜testCalculatorWithMessage()â€™ å°±å¯ä»¥çœ‹åˆ°è¾“å‡º (æ§åˆ¶å°ä¸­ Run é¢æ¿) 1234java.lang.AssertionError: ä½ çš„æ•°å­¦å¤ªçƒ‚äº† Expected :5Actual :6 &lt;Click to see difference&gt; Android ä¸­çš„å•å…ƒæµ‹è¯•ä¸Šé¢ç®€å•çš„ä½¿ç”¨ Junit å°±å¯ä»¥æµ‹è¯•Javaä¸­çš„æ–¹æ³•,ä½†æ˜¯ä¸æˆ‘çš„éœ€æ±‚å¹¶ä¸ç¬¦åˆ,æ‰€ä»¥ç»§ç»­çœ‹ ä½¿ç”¨robolectric https://github.com/robolectric/robolectric http://robolectric.org","categories":[{"name":"Android Test","slug":"Android-Test","permalink":"http://www.wangzhumo.com/categories/Android-Test/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Androidå•å…ƒæµ‹è¯•","slug":"Androidå•å…ƒæµ‹è¯•","permalink":"http://www.wangzhumo.com/tags/Androidå•å…ƒæµ‹è¯•/"}]},{"title":"Android Studio ä¸­ä½¿ç”¨tools:sample","slug":"Android-Studio-ä¸­ä½¿ç”¨tools-sample","date":"2018-02-26T02:31:28.000Z","updated":"2018-02-26T05:42:17.470Z","comments":true,"path":"Android-Studio/Android-Studio-ä¸­ä½¿ç”¨tools-sample/","link":"","permalink":"http://www.wangzhumo.com/Android-Studio/Android-Studio-ä¸­ä½¿ç”¨tools-sample/","excerpt":"","text":"Google å®˜æ–¹æ–‡æ¡£ https://developer.android.com/studio/write/tool-attributes.html#toolssample_resources ä»–æ‰€èƒ½è¾¾åˆ°çš„æ•ˆæœå°±æ˜¯,æä¾›ç»™ä½ ä¸€äº›æ•°æ®,å¹¶ç›´æ¥åœ¨ Preview æˆ–è€… Designé¢æ¿ä¸­æŸ¥çœ‹æ ·å¼ æ•ˆæœä¸å¦‚æ”¾ä¸€ä¸ªå›¾æ¥çš„ç›´è§‚ itemä¸­ä½¿ç”¨ sampleèµ„æº å°†itemåŠ å…¥åˆ°listä¸­æŸ¥çœ‹æ•ˆæœ å‡†å¤‡ä½¿ç”¨toolsAndroid Studioæ³¨æ„è¦ä½¿ç”¨Android Studio 3.0 + çš„ç‰ˆæœ¬ å‘½åç©ºé—´xmlns:tools=&quot;http://schemas.android.com/tools&quot; ç„¶åå°±å¯ä»¥ä½¿ç”¨toolsçš„ç›¸å…³å±æ€§äº† åœ¨googleæ–‡æ¡£ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šå…¶ä»–å¯ç”¨çš„,å…·ä½“ä½¿ç”¨æ•ˆæœè¯·è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£. å¦‚: context showIn layout listitem layoutManager itemCount ä½¿ç”¨æ–¹å¼ä¸º: 123456789101112131415161718&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:tools=\"http://schemas.android.com/tools\"&gt; &lt;RelativeLayout android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:context=\"com.wangzhumo.app.tips.page.NearbyFragment\"&gt; &lt;com.jcodecraeer.xrecyclerview.XRecyclerView android:id=\"@+id/recycleview\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:layoutManager=\"GridLayoutManager\" tools:itemCount=\"5\" tools:spanCount=\"2\" tools:listitem=\"@layout/nearby_list_item\"&gt; &lt;/com.jcodecraeer.xrecyclerview.XRecyclerView&gt; &lt;/RelativeLayout&gt;&lt;/layout&gt; å¯ç”¨èµ„æºgoogleå·²æä¾›çš„èµ„æº è¿™äº›èµ„æºå¯ä»¥åœ¨xmlä¸­ç›´æ¥ä½¿ç”¨,ä¹Ÿå¯ä»¥åœ¨è‡ªå®šä¹‰çš„èµ„æºä¸­ä½¿ç”¨ ä½¿ç”¨æ–¹å¼ä¸º: 12345678910111213&lt;!-- è¿™é‡Œé¢çš„èµ„æºåœ¨Android Studio/Applications/Android Studio.app/Contents/plugins/android/lib/sampleData/backgrounds/scenic--&gt;&lt;ImageView ... tools:src=\"@tools:sample/backgrounds/scenic\"&gt;&lt;/ImageView&gt; &lt;!-- è¿™ä¸ªæ˜¯ä¸€æ®µå‡æ–‡ç«  --&gt;&lt;TextView ... tools:text=\"@tools:sample/lorem/random\"/&gt;&lt;/TextView&gt; è‡ªå®šä¹‰çš„èµ„æº åˆ›å»ºä¸€ä¸ª sampledata æ–‡ä»¶å¤¹ sampledata/images æ–‡ä»¶ä¸­éƒ½æ˜¯äº›å›¾ç‰‡èµ„æº descriptionæ–‡ä»¶ä¸­æ˜¯æè¿°æ€§æ–‡å­—, æ³¨æ„æ¯ä¸€è¡Œä¸ºä¸€é¡¹ä¸ªå…ƒç´  hotels ä¹Ÿæ˜¯ä¸€äº›æ–‡å­—,ä¸è¿‡æ˜¯ä¸€äº›é…’åº—åå­— hotel.json 1234567891011121314151617181920212223242526272829&#123; \"data\":[ &#123; \"name\":\"@sample/hotels\", //è¿™é‡Œä½¿ç”¨çš„æ˜¯è‡ªå·±å®šä¹‰çš„ hotels æ–‡ä»¶ä¸­çš„å­—æ®µ \"img\":\"@tools:sample/backgrounds/scenic\", \"desc\":\"@sample/description\" //è¿™é‡Œä½¿ç”¨çš„æ˜¯è‡ªå·±å®šä¹‰çš„ description æ–‡ä»¶ä¸­çš„å­—æ®µ &#125;, &#123; \"name\":\"@sample/hotels\", \"img\":\"@tools:sample/backgrounds/scenic\", //è¿™é‡Œçš„å°±æ˜¯è‡ªå¸¦çš„èµ„æºäº† \"desc\":\"@sample/description\" &#125;, &#123; \"name\":\"@sample/hotels\", \"img\":\"@sample/images\", //è¿™ç§å°±æ˜¯/images æ–‡ä»¶ä¸­çš„èµ„æº \"desc\":\"@sample/description\" &#125;, &#123; \"name\":\"@sample/hotels\", \"img\":\"@tools:sample/backgrounds/scenic\", \"desc\":\"@sample/description\" &#125;, &#123; \"name\":\"@sample/hotels\", \"img\":\"@tools:sample/backgrounds/scenic\", \"desc\":\"@sample/description\" &#125; ]&#125; ä½¿ç”¨æ–¹å¼ä¸º: 1234567&lt;TextView ... tools:text=\"@sample/hotels\"/&gt;&lt;ImageView ... tools:src=\"@sample/images\"/&gt;","categories":[{"name":"Android Studio","slug":"Android-Studio","permalink":"http://www.wangzhumo.com/categories/Android-Studio/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Android Studio","slug":"Android-Studio","permalink":"http://www.wangzhumo.com/tags/Android-Studio/"}]},{"title":"Androidé¡¹ç›®ä¸­ä½¿ç”¨Timber + Loggeræ—¥å¿—è¾“å‡º","slug":"Androidé¡¹ç›®ä¸­ä½¿ç”¨Timber-Loggeræ—¥å¿—è¾“å‡º","date":"2018-02-07T09:48:58.000Z","updated":"2018-02-07T10:14:43.116Z","comments":true,"path":"Android/Androidé¡¹ç›®ä¸­ä½¿ç”¨Timber-Loggeræ—¥å¿—è¾“å‡º/","link":"","permalink":"http://www.wangzhumo.com/Android/Androidé¡¹ç›®ä¸­ä½¿ç”¨Timber-Loggeræ—¥å¿—è¾“å‡º/","excerpt":"","text":"ä¸å•°å—¦äº†,ç›´æ¥å¼€å§‹. æ·»åŠ ä¾èµ– Logger orhanobut/Logger Timber JakeWharton/timber 1234//loggerimplementation 'com.orhanobut:logger:2.1.1'//timberimplementation 'com.jakewharton.timber:timber:4.6.0' åˆå§‹åŒ–æˆ‘æ”¾åœ¨äº†æˆ‘çš„Application.javaä¸­åˆå§‹åŒ–çš„ 123456789101112131415161718192021222324252627/** * åˆå§‹åŒ–Timber */ private void initTimber() &#123; //é…ç½®Logger FormatStrategy formatStrategy = PrettyFormatStrategy.newBuilder() .showThreadInfo(true) .methodCount(2) .methodOffset(7) .tag(\"MY_LOG\") .build(); //é…ç½®Loggeråœ¨Debugæ—¶ä¸æ‰“å° Logger.addLogAdapter(new AndroidLogAdapter(formatStrategy)&#123; @Override public boolean isLoggable(int priority, String tag) &#123; return BuildConfig.DEBUG; &#125; &#125;); //ç»™Timberä¸€ä¸ªæ ‘...å¤§ç¥è¿™ä¹ˆæ‰“æ¯”å–»çš„ ğŸ˜† Timber.plant(new Timber.DebugTree()&#123; @Override protected void log(int priority, String tag, @NotNull String message, Throwable t) &#123; Logger.log(priority,tag,message,t); &#125; &#125;); &#125; å…¶ä¸­: showThreadInfo(true) æ˜¯å¦æ˜¾ç¤ºThreadInfo methodCount(2) æ—¥å¿—è¾“å‡ºæ—¶æ˜¾ç¤ºå‡ è¡Œ methodOffset(7) æ–¹æ³•åç§»é‡,é»˜è®¤æ˜¯5,è¿™ä¸ªè‡ªå·±è°ƒå¤§,è°ƒå°çœ‹çœ‹å°±æ˜ç™½äº† tag(&quot;MY_LOG&quot;) è‡ªå®šä¹‰çš„Tag,é»˜è®¤å€¼æ˜¯PRETTY_LOGGER ä½¿ç”¨12Timber.e(\"ä¸‹è½½çŠ¶æ€å‘ç”Ÿæ”¹å˜ = %s\", downLoadInfo.status )Timber.e(\"ä¸‹è½½è¿›åº¦ = %d\", mBindingView.progressBar.progress ) loggerè´Ÿè´£ç”Ÿæˆmessageçš„æ–¹æ³• 123private String createMessage(String message, Object... args) &#123; return args == null || args.length == 0 ? message : String.format(message, args);&#125; String.format(message, args)è¿™å°±èµ‹äºˆäº†æˆ‘ä»¬åœ¨å†™ä¿¡æ¯çš„æ—¶å€™ä½¿ç”¨å ä½ç¬¦.è®°å¾—è¦ç¬¦åˆformatçš„æ ¼å¼å“¦ æ€»ç»“å…¶å®æŒ‰æˆ‘ç°åœ¨çš„éœ€æ±‚,Loggerå®Œå…¨ç¬¦åˆæˆ‘,ä¸ºä»€ä¹ˆåŠ ä¸ŠTimberé‚£? Timberå¯ä»¥åšåˆ°åˆ†å‘,åˆ°æ—¶å€™æˆ‘å¯ä»¥åŠ ä¸Š DiskFileTree â€¦ ä»€ä¹ˆçš„,æ–¹ä¾¿åæœŸæœ‰å˜åŒ–çš„æ—¶å€™ä¿®æ”¹ ç„¶è€Œ,æˆ‘åœ¨Loggeré‡Œå‘ç°äº†ä¸€ä¸ªç±» com.orhanobut.logger.DiskLogAdapter åŸæ¥å®ƒå·²ç»æ”¯æŒå†™åˆ°æœ¬åœ°äº†.. å®å®å¿ƒé‡Œè‹¦","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"Jenkinsæ­å»ºAndroidè‡ªåŠ¨æ‰“åŒ…","slug":"Jenkinsæ­å»ºAndroidè‡ªåŠ¨æ‰“åŒ…","date":"2018-02-05T01:55:44.000Z","updated":"2018-02-05T04:49:03.295Z","comments":true,"path":"Android/Jenkinsæ­å»ºAndroidè‡ªåŠ¨æ‰“åŒ…/","link":"","permalink":"http://www.wangzhumo.com/Android/Jenkinsæ­å»ºAndroidè‡ªåŠ¨æ‰“åŒ…/","excerpt":"","text":"ä¸‹è½½å®‰è£… Jenkinsçš„ä¸‹è½½ä¸å®‰è£… ä¸‹è½½ https://jenkins.io/download/ ä¸‹è½½waråŒ… Generic Java package (.war) å› ä¸ºæ‰“ç®—ä½¿ç”¨Tomcatæ¥éƒ¨ç½²,æ‰€ä»¥éœ€è¦ä¸‹è½½waråŒ…,ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹å¯¹åº”ç‰ˆæœ¬çš„å®‰è£…æ–‡ä»¶,ç›´æ¥å®‰è£… â€‹ å®‰è£… â€‹ waråŒ…æ”¾åˆ°./apache-tomcat-7.0.77/webapps â€‹ Tomcatçš„wabappsåŒ…ä¸‹å³å¯ Tomcat (ç•¥) è®°å¾—é…ç½®ä¸€ä¸‹ç¯å¢ƒå˜é‡,ç­‰ä¼šæ–¹ä¾¿å¯åŠ¨ 123export TOMCAT_HOME=/Users/phyooos/develop/apache-tomcat-7.0.77export PATH.....:$TOMCAT/bin â€‹ åˆå§‹åŒ–Jenkins å¯åŠ¨Jenkins,å³å¯åŠ¨tomcat 1234567$ startup.shUsing CATALINA_BASE: /Users/phyooos/develop/apache-tomcat-7.0.77Using CATALINA_HOME: /Users/phyooos/develop/apache-tomcat-7.0.77Using CATALINA_TMPDIR: /Users/phyooos/develop/apache-tomcat-7.0.77/tempUsing JRE_HOME: /Library/Java/JavaVirtualMachines/jdk1.8.0/Contents/HomeUsing CLASSPATH: /Users/phyooos/develop/apache-tomcat-7.0.77/bin/bootstrap.jar:/Users/phyooos/develop/apache-tomcat-7.0.77/bin/tomcat-juli.jarTomcat started. çœ‹åˆ°è¿™ä¸ªå°±è¯´æ˜,å·²ç»æ­£å¸¸å¯åŠ¨ è®¿é—®http://localhost:8080/jenkins/ æ‰“å¼€åéœ€è¦è¾“å…¥ä¸€ä¸ªå¯†é’¥,macçš„åœ¨jenkins/secrets/initialAdminPassword 123~ âŒš 10:11:03$ cat ~/.jenkins/secrets/initialAdminPassword55ad44431f6d4ebdb53a7c1971d12df4 è¾“å…¥æ­¤å¯†é’¥å³å¯. åˆ›å»ºç”¨æˆ· é…ç½®Jenkins1.å®‰è£…æ’ä»¶12345678910111213141516171819202122232425262728293031323334 Build Timeoutbuild-name-setterCredentials Binding Plugindescription setter pluginDynamic Parameter Plug-in(è¿™ä¸ªæ’ä»¶,æœä¸åˆ°äº†,å› ä¸ºå®‰å…¨é—®é¢˜è¢«å±è”½äº†)Environment Injector PluginGit pluginGitHub Branch Source Plugin Gitlab Authentication pluginGitLab PluginGradle PluginPipelineSSH Slaves plugin SSH plugin Timestamper Upload to pgyer(ä¸Šä¼ åˆ°è’²å…¬è‹±,æ²¡æœ‰éœ€è¦çš„ä¸ç”¨å®‰è£…) Workspace Cleanup Plugin ä»¥ä¸Šæ’ä»¶,æ˜¯å¸¸ç”¨çš„æ’ä»¶,å°½é‡å…¨éƒ¨å®‰è£… 2.é…ç½®ç¯å¢ƒå˜é‡ç³»ç»Ÿç®¡ç† - å…¨å±€å·¥å…·é…ç½® éœ€è¦é…ç½® Java Git Gradle é…ç½®å¥½ä¿å­˜å³å¯ ç³»ç»Ÿç®¡ç† - ç³»ç»Ÿè®¾ç½® è®°å¾—é…ç½®gitlabæˆ–è€… githubè´¦å· 3.åˆå§‹åŒ–é¡¹ç›®åˆ›å»ºé¡¹ç›® General é€‰æ‹©å‚æ•°åŒ–æ„å»ºè¿‡ç¨‹ IS_JENKINS æ˜¯å¦Jenkinsæ‰“åŒ…,è¿™é‡Œè‚¯å®šæ˜¯ä¸€ç›´trueçš„ PRODUCT_FLAVORS ç¯å¢ƒ BUILD_TYPE æ„å»ºç‰ˆæœ¬ VERSION_NAME ç‰ˆæœ¬åå­— JENKINS_OUTPUT Apkç”Ÿæˆç›®å½• JENKINS_TIME æ—¶é—´æˆ³ è¿™äº›å‚æ•°å®šä¹‰å®Œå°±å¯ä»¥ä½¿ç”¨äº† ${å‚æ•°å} çš„å½¢å¼,è¿™äº›å‚æ•°ä¼šå†™å…¥åˆ° Appé¡¹ç›®ä¸­çš„ gradle.propertiesæ–‡ä»¶ Appé¡¹ç›®ä¸­çš„ gradle.propertiesæ–‡ä»¶ 1234567891011# When configured, Gradle will run in incubating parallel mode.# This option should only be used with decoupled projects. More details, visit# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects# org.gradle.parallel=trueorg.gradle.jvmargs=-Xmx4608MVERSION_NAME=1.4.0VERSION_CODE=12IS_JENKINS=falseJENKINS_OUTPUT='output/'JENKINS_TIME='201802021231' è¿›å…¥ä¸‹ä¸€ä¸ªé…ç½®é¡µé¢,åˆ°æºç ç®¡ç†é‚£å— åªè¦ä½ èƒ½ä¸‹è½½åˆ°æºç å³å¯,æ— æ‰€è°“éè¦å’Œæˆ‘è¿™ä¸ªä¸€è‡´,branch å°±æ˜¯æŒ‡å®šåˆ†æ”¯äº†,æˆ‘è¿™å„¿æ˜¯ dev åˆ†æ”¯ ä¸‹ä¸€ä¸ªé…ç½®æ„å»º é€‰æ‹© Invoke Gradle Tasks é‡Œé¢çš„å‘½ä»¤,æˆ‘æ¥è§£é‡Šä¸€ä¸‹ 1234567891011121314151617#æ¸…ç†clean #æ‰“åŒ…assemble$&#123;PRODUCT_FLAVORS&#125;$&#123;BUILD_TYPE&#125;#è¿™é‡Œçš„æ„æ€æ˜¯ æ‰“åŒ…æŒ‡å®šçš„ä¸€ä¸ªFLAVORç‰ˆæœ¬(Release + ç‰ˆæœ¬)#å…³äºassemble ... çš„,è¯·æœ gradle æ‰“åŒ…å‘½ä»¤#å…¶ä»–å‚æ•°-PVERSION_NAME=$&#123;VERSION_NAME&#125;-PVERSION_CODE=$&#123;VERSION_CODE&#125;-PJENKINS_OUTPUT=$&#123;JENKINS_OUTPUT&#125;-PJENKINS_TIME=$&#123;JENKINS_TIME&#125;-PIS_JENKINS=$&#123;IS_JENKINS&#125;#-Pæ„å‘³ç€å‚æ•°#-Påé¢æ˜¯å‚æ•°å#=$&#123;&#125; åˆ™ä¸ºå‚æ•°å€¼,å°±æ˜¯ä¸Šé¢Generalé‡Œé¢é…ç½®çš„ æ„å»ºåæ“ä½œ å‚è€ƒ https://www.pgyer.com/doc/view/jenkins_plugin ä¿å­˜å³å¯ æ”¹é€ App ./gradle.propertiesæ–‡ä»¶ 12345VERSION_NAME=1.4.0VERSION_CODE=12IS_JENKINS=falseJENKINS_OUTPUT=&apos;output/&apos;JENKINS_TIME=&apos;201802021231&apos; ä»¥ä¸Šæ–‡ä»¶,å†™å®Œè¯·buildä¸€æ¬¡,ä¾¿äºbuild.gradleä¸­ä½¿ç”¨ ä½¿ç”¨jenkinsæ—¶,jenkinsä¼šæŠŠå®šä¹‰çš„å€¼æ³¨å…¥åˆ°è¿™é‡Œ,è¦†ç›–è¿™é‡Œå®šä¹‰çš„å€¼ app/build.gradle 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475android&#123; defaultConfig &#123; ... //æ­¤å¤„ä½¿ç”¨gradle.propertiesä¸­çš„å€¼ VERSION_CODEå’ŒVERSION_NAME versionCode VERSION_CODE as Integer versionName VERSION_NAME &#125; //è‡ªå®šä¹‰apkåå­— android.applicationVariants.all &#123; variant -&gt; //è·å–æ—¶é—´æˆ³ def timeNow = getDate() //å¦‚æœæ˜¯IS_JENKINSæ„å»º,åˆ™ä¿®æ”¹æ‰“åŒ…apkçš„ç›®å½• if ('true'.equals(IS_JENKINS)) &#123; //ä½¿ç”¨JENKINS_OUTPUTçš„ç›®å½• def outputFile = JENKINS_OUTPUT //ä½¿ç”¨JENKINS_TIMEçš„æ—¶é—´æˆ³ timeNow = JENKINS_TIME //å®šä¹‰apkç›®å½• variant.getPackageApplication().outputDirectory = new File(outputFile) &#125; variant.getPackageApplication().outputScope.apkDatas.forEach &#123; apkData -&gt; //è¿™ä¸ªä¿®æ”¹è¾“å‡ºAPKçš„æ–‡ä»¶å apkData.outputFileName = \"ä¸€å·è½¦å¸‚_$&#123;variant.versionName&#125;_$&#123;timeNow&#125;.apk\" &#125; &#125; flavorDimensions 'env' productFlavors &#123; envapp &#123; dimension 'env' //æ­¤å¤„ä½¿ç”¨jenkinsä¼ çš„VERSION_NAME versionName VERSION_NAME manifestPlaceholders = [UMENG_CHANNEL_VALUE: \"app\"] buildConfigField \"String\", \"SERVER_HOST\", '\"https://app.wangzhumo.com/\"' &#125; envtest &#123; dimension 'env' //ä¸ºäº†æ–¹ä¾¿æµ‹è¯•çœ‹å‡ºå½“å‰appç¯å¢ƒ,å°±ä¸ç”¨VERSION_NAMEäº† versionName \"Test\" manifestPlaceholders = [UMENG_CHANNEL_VALUE: \"app\"] buildConfigField \"String\", \"SERVER_HOST\", '\"http://app-test.wangzhumo.com/\"' &#125; envpre &#123; dimension 'env' versionName \"Pre\" manifestPlaceholders = [UMENG_CHANNEL_VALUE: \"app\"] buildConfigField \"String\", \"SERVER_HOST\", '\"https://app-pre.wangzhumo.com/\"' &#125; envdev &#123; dimension 'env' versionName \"Dev\" manifestPlaceholders = [UMENG_CHANNEL_VALUE: \"app\"] buildConfigField \"String\", \"SERVER_HOST\", '\"http://192.168.1.16:8080/app2c/\"' &#125; //å…¶å®UMENG_CHANNEL_VALUE SERVER_HOST ä¹Ÿéƒ½å¯ä»¥ä½¿ç”¨jenkinså®šä¹‰å‚æ•°,å¹¶ä½¿ç”¨ &#125; //ä¸€ä¸ªè·å–æ—¶é—´æˆ³çš„æ–¹æ³• static def getDate() &#123; def date = new Date() def formattedDate = date.format('yyyyMMddHHmm') return formattedDate &#125;&#125; è®°å¾—æ”¹å®Œapp,ä¸Šä¼ ä»£ç å“¦ Jenkinsæ‰“åŒ… OKäº†,å¯ä»¥æ„‰å¿«çš„æ‰“åŒ…äº†,æ‰“åŒ…å®Œå°±ä¼šè‡ªåŠ¨ä¸Šä¼ åˆ°è’²å…¬è‹±.","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Server","slug":"Server","permalink":"http://www.wangzhumo.com/tags/Server/"},{"name":"Jenkins","slug":"Jenkins","permalink":"http://www.wangzhumo.com/tags/Jenkins/"}]},{"title":"Javaä¸­String.format()çš„ä½¿ç”¨æŒ‡åŒ—","slug":"Javaä¸­String-format-çš„ä½¿ç”¨æŒ‡åŒ—","date":"2018-02-04T10:16:12.000Z","updated":"2018-02-07T10:27:47.957Z","comments":true,"path":"Java/Javaä¸­String-format-çš„ä½¿ç”¨æŒ‡åŒ—/","link":"","permalink":"http://www.wangzhumo.com/Java/Javaä¸­String-format-çš„ä½¿ç”¨æŒ‡åŒ—/","excerpt":"","text":"æœ¬æ–‡éåŸåˆ›,æ¥è‡ªhttp://blog.csdn.net/lonely_fireworks/article/details/7962171/ è¿™é‡Œåšä¸€ä¸ªå¤‡ä»½,æ–¹ä¾¿éšæ—¶æŸ¥è¯¢ å¸¸è§„ç±»å‹çš„æ ¼å¼åŒ–Stringç±»çš„format()æ–¹æ³•ç”¨äºåˆ›å»ºæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ä»¥åŠè¿æ¥å¤šä¸ªå­—ç¬¦ä¸²å¯¹è±¡,format()æ–¹æ³•æœ‰ä¸¤ç§é‡è½½å½¢å¼ã€‚ format(String format, Objectâ€¦ args) æ–°å­—ç¬¦ä¸²ä½¿ç”¨æœ¬åœ°è¯­è¨€ç¯å¢ƒï¼Œåˆ¶å®šå­—ç¬¦ä¸²æ ¼å¼å’Œå‚æ•°ç”Ÿæˆæ ¼å¼åŒ–çš„æ–°å­—ç¬¦ä¸²ã€‚ format(Locale locale, String format, Objectâ€¦ args) ä½¿ç”¨æŒ‡å®šçš„è¯­è¨€ç¯å¢ƒï¼Œåˆ¶å®šå­—ç¬¦ä¸²æ ¼å¼å’Œå‚æ•°ç”Ÿæˆæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ã€‚ æ˜¾ç¤ºä¸åŒè½¬æ¢ç¬¦å®ç°ä¸åŒæ•°æ®ç±»å‹åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ è½¬ æ¢ ç¬¦ è¯´ æ˜ ç¤º ä¾‹ %s å­—ç¬¦ä¸²ç±»å‹ â€œmingrisoftâ€ %c å­—ç¬¦ç±»å‹ â€˜mâ€™ %b å¸ƒå°”ç±»å‹ true %d æ•´æ•°ç±»å‹ï¼ˆåè¿›åˆ¶ï¼‰ 99 %x æ•´æ•°ç±»å‹ï¼ˆåå…­è¿›åˆ¶ï¼‰ FF %o æ•´æ•°ç±»å‹ï¼ˆå…«è¿›åˆ¶ï¼‰ 77 %f æµ®ç‚¹ç±»å‹ 99.99 %a åå…­è¿›åˆ¶æµ®ç‚¹ç±»å‹ FF.35AE %e æŒ‡æ•°ç±»å‹ 9.38e+5 %g é€šç”¨æµ®ç‚¹ç±»å‹ï¼ˆfå’Œeç±»å‹ä¸­è¾ƒçŸ­çš„ï¼‰ %h æ•£åˆ—ç  %% ç™¾åˆ†æ¯”ç±»å‹ ï¼… %n æ¢è¡Œç¬¦ %tx æ—¥æœŸä¸æ—¶é—´ç±»å‹ï¼ˆxä»£è¡¨ä¸åŒçš„æ—¥æœŸä¸æ—¶é—´è½¬æ¢ç¬¦ æµ‹è¯•ç”¨ä¾‹ 123456789101112131415161718public static void main(String[] args) &#123; String str=null; str=String.format(\"Hi,%s\", \"ç‹åŠ›\"); System.out.println(str); str=String.format(\"Hi,%s:%s.%s\", \"ç‹å—\",\"ç‹åŠ›\",\"ç‹å¼ \"); System.out.println(str); System.out.printf(\"å­—æ¯açš„å¤§å†™æ˜¯ï¼š%c %n\", 'A'); System.out.printf(\"3&gt;7çš„ç»“æœæ˜¯ï¼š%b %n\", 3&gt;7); System.out.printf(\"100çš„ä¸€åŠæ˜¯ï¼š%d %n\", 100/2); System.out.printf(\"100çš„16è¿›åˆ¶æ•°æ˜¯ï¼š%x %n\", 100); System.out.printf(\"100çš„8è¿›åˆ¶æ•°æ˜¯ï¼š%o %n\", 100); System.out.printf(\"50å…ƒçš„ä¹¦æ‰“8.5æŠ˜æ‰£æ˜¯ï¼š%f å…ƒ%n\", 50*0.85); System.out.printf(\"ä¸Šé¢ä»·æ ¼çš„16è¿›åˆ¶æ•°æ˜¯ï¼š%a %n\", 50*0.85); System.out.printf(\"ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°è¡¨ç¤ºï¼š%e %n\", 50*0.85); System.out.printf(\"ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°å’Œæµ®ç‚¹æ•°ç»“æœçš„é•¿åº¦è¾ƒçŸ­çš„æ˜¯ï¼š%g %n\", 50*0.85); System.out.printf(\"ä¸Šé¢çš„æŠ˜æ‰£æ˜¯%d%% %n\", 85); System.out.printf(\"å­—æ¯Açš„æ•£åˆ—ç æ˜¯ï¼š%h %n\", 'A');&#125; è¾“å‡ºç»“æœ 12345678910111213Hi,ç‹åŠ›Hi,ç‹å—:ç‹åŠ›.ç‹å¼ å­—æ¯açš„å¤§å†™æ˜¯ï¼šA 3&gt;7çš„ç»“æœæ˜¯ï¼šfalse 100çš„ä¸€åŠæ˜¯ï¼š50 100çš„16è¿›åˆ¶æ•°æ˜¯ï¼š64 100çš„8è¿›åˆ¶æ•°æ˜¯ï¼š144 50å…ƒçš„ä¹¦æ‰“8.5æŠ˜æ‰£æ˜¯ï¼š42.500000 å…ƒä¸Šé¢ä»·æ ¼çš„16è¿›åˆ¶æ•°æ˜¯ï¼š0x1.54p5 ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°è¡¨ç¤ºï¼š4.250000e+01 ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°å’Œæµ®ç‚¹æ•°ç»“æœçš„é•¿åº¦è¾ƒçŸ­çš„æ˜¯ï¼š42.5000 ä¸Šé¢çš„æŠ˜æ‰£æ˜¯85% å­—æ¯Açš„æ•£åˆ—ç æ˜¯ï¼š41 æ­é…è½¬æ¢ç¬¦çš„æ ‡å¿— æ ‡ å¿— è¯´ æ˜ ç¤º ä¾‹ ç»“ æœ + ä¸ºæ­£æ•°æˆ–è€…è´Ÿæ•°æ·»åŠ ç¬¦å· (â€œ%+dâ€,15) +15 âˆ’ å·¦å¯¹é½ (â€œ%-5dâ€,15) \\ 15 \\ 0 æ•°å­—å‰é¢è¡¥0 (â€œ%04dâ€, 99) 0099 ç©ºæ ¼ åœ¨æ•´æ•°ä¹‹å‰æ·»åŠ æŒ‡å®šæ•°é‡çš„ç©ºæ ¼ (â€œ% 4dâ€, 99) \\ 99\\ , ä»¥â€œ,â€å¯¹æ•°å­—åˆ†ç»„ (â€œ%,fâ€, 9999.99) 9,999.990000 ( ä½¿ç”¨æ‹¬å·åŒ…å«è´Ÿæ•° (â€œ%(fâ€, -99.99) (99.990000) # å¦‚æœæ˜¯æµ®ç‚¹æ•°åˆ™åŒ…å«å°æ•°ç‚¹ï¼Œå¦‚æœæ˜¯16è¿›åˆ¶æˆ–8è¿›åˆ¶åˆ™æ·»åŠ 0xæˆ–0 (â€œ%#xâ€, 99)(â€œ%#oâ€, 99) 0x630143 &lt; æ ¼å¼åŒ–å‰ä¸€ä¸ªè½¬æ¢ç¬¦æ‰€æè¿°çš„å‚æ•° (â€œ%få’Œ%&lt;3.2fâ€, 99.45) 99.450000å’Œ99.45 $ è¢«æ ¼å¼åŒ–çš„å‚æ•°ç´¢å¼• (â€œ%1$d,%2$sâ€, 99,â€abcâ€) 99,abc æµ‹è¯•ç”¨ä¾‹ 1234567891011121314151617181920212223public static void main(String[] args) &#123; String str=null; //$ä½¿ç”¨ str=String.format(\"æ ¼å¼å‚æ•°çš„ä½¿ç”¨ï¼š%1d,%2$s\", 99,\"abc\"); System.out.println(str); //+ä½¿ç”¨ System.out.printf(\"æ˜¾ç¤ºæ­£è´Ÿæ•°çš„ç¬¦å·ï¼š%+dä¸%d%n\", 99,-99); //è¡¥Oä½¿ç”¨ System.out.printf(\"æœ€ç‰›çš„ç¼–å·æ˜¯ï¼š%03d%n\", 7); //ç©ºæ ¼ä½¿ç”¨ System.out.printf(\"Tabé”®çš„æ•ˆæœæ˜¯ï¼š% 8d%n\", 7); //.ä½¿ç”¨ System.out.printf(\"æ•´æ•°åˆ†ç»„çš„æ•ˆæœæ˜¯ï¼š%,d%n\", 9989997); //ç©ºæ ¼å’Œå°æ•°ç‚¹åé¢ä¸ªæ•° System.out.printf(\"ä¸€æœ¬ä¹¦çš„ä»·æ ¼æ˜¯ï¼š% 50.5få…ƒ%n\", 49.8); &#125; è¾“å‡ºç»“æœ 123456æ ¼å¼å‚æ•°$çš„ä½¿ç”¨ï¼š99,abcæ˜¾ç¤ºæ­£è´Ÿæ•°çš„ç¬¦å·ï¼š+99ä¸-99æœ€ç‰›çš„ç¼–å·æ˜¯ï¼š007Tabé”®çš„æ•ˆæœæ˜¯ï¼š 7æ•´æ•°åˆ†ç»„çš„æ•ˆæœæ˜¯ï¼š9,989,997ä¸€æœ¬ä¹¦çš„ä»·æ ¼æ˜¯ï¼š 49.80000å…ƒ æ—¥æœŸå’Œäº‹ä»¶å­—ç¬¦ä¸²æ ¼å¼åŒ–å­—ç¬¦ä¸²æ ¼å¼ä¸­è¿˜æœ‰%txè½¬æ¢ç¬¦æ²¡æœ‰è¯¦ç»†ä»‹ç»ï¼Œå®ƒæ˜¯ä¸“é—¨ç”¨æ¥æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶ é—´çš„ã€‚%txè½¬æ¢ç¬¦ä¸­çš„xä»£è¡¨å¦å¤–çš„å¤„ç†æ—¥æœŸå’Œæ—¶é—´æ ¼å¼çš„è½¬æ¢ç¬¦ï¼Œå®ƒä»¬çš„ç»„åˆèƒ½å¤Ÿå°†æ—¥æœŸå’Œæ—¶é—´æ ¼å¼åŒ–æˆå¤šç§æ ¼å¼ã€‚ å¸¸è§æ—¥æœŸå’Œæ—¶é—´ç»„åˆçš„æ ¼å¼ è½¬ æ¢ ç¬¦ è¯´ æ˜ ç¤º ä¾‹ c åŒ…æ‹¬å…¨éƒ¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ æ˜ŸæœŸå…­ åæœˆ 27 14:21:20 CST 2007 F â€œå¹´-æœˆ-æ—¥â€æ ¼å¼ 2007-10-27 D â€œæœˆ/æ—¥/å¹´â€æ ¼å¼ 10/27/07 r â€œHH:MM:SS PMâ€æ ¼å¼ï¼ˆ12æ—¶åˆ¶ï¼‰ 02:25:51 ä¸‹åˆ T â€œHH:MM:SSâ€æ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ 14:28:16 R â€œHH:MMâ€æ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ 14:28 æµ‹è¯•ç”¨ä¾‹ 123456789101112131415public static void main(String[] args) &#123; Date date=new Date(); //cçš„ä½¿ç”¨ System.out.printf(\"å…¨éƒ¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼š%tc%n\",date); //fçš„ä½¿ç”¨ System.out.printf(\"å¹´-æœˆ-æ—¥æ ¼å¼ï¼š%tF%n\",date); //dçš„ä½¿ç”¨ System.out.printf(\"æœˆ/æ—¥/å¹´æ ¼å¼ï¼š%tD%n\",date); //rçš„ä½¿ç”¨ System.out.printf(\"HH:MM:SS PMæ ¼å¼ï¼ˆ12æ—¶åˆ¶ï¼‰ï¼š%tr%n\",date); //tçš„ä½¿ç”¨ System.out.printf(\"HH:MM:SSæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š%tT%n\",date); //Rçš„ä½¿ç”¨ System.out.printf(\"HH:MMæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š%tR\",date);&#125; è¾“å‡ºç»“æœ 123456å…¨éƒ¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼šæ˜ŸæœŸä¸€ ä¹æœˆ 10 10:43:36 CST 2012å¹´-æœˆ-æ—¥æ ¼å¼ï¼š2012-09-10æœˆ/æ—¥/å¹´æ ¼å¼ï¼š09/10/12HH:MM:SS PMæ ¼å¼ï¼ˆ12æ—¶åˆ¶ï¼‰ï¼š10:43:36 ä¸ŠåˆHH:MM:SSæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š10:43:36HH:MMæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š10:43 å®šä¹‰æ—¥æœŸæ ¼å¼çš„è½¬æ¢ç¬¦å¯ä»¥ä½¿æ—¥æœŸé€šè¿‡æŒ‡å®šçš„è½¬æ¢ç¬¦ç”Ÿæˆæ–°å­—ç¬¦ä¸²ã€‚è¿™äº›æ—¥æœŸè½¬æ¢ç¬¦å¦‚å›¾æ‰€ç¤ºã€‚ 12345678910111213141516171819202122232425262728public static void main(String[] args) &#123; Date date=new Date(); //bçš„ä½¿ç”¨ï¼Œæœˆä»½ç®€ç§° String str=String.format(Locale.US,\"è‹±æ–‡æœˆä»½ç®€ç§°ï¼š%tb\",date); System.out.println(str); System.out.printf(\"æœ¬åœ°æœˆä»½ç®€ç§°ï¼š%tb%n\",date); //Bçš„ä½¿ç”¨ï¼Œæœˆä»½å…¨ç§° str=String.format(Locale.US,\"è‹±æ–‡æœˆä»½å…¨ç§°ï¼š%tB\",date); System.out.println(str); System.out.printf(\"æœ¬åœ°æœˆä»½å…¨ç§°ï¼š%tB%n\",date); //açš„ä½¿ç”¨ï¼Œæ˜ŸæœŸç®€ç§° str=String.format(Locale.US,\"è‹±æ–‡æ˜ŸæœŸçš„ç®€ç§°ï¼š%ta\",date); System.out.println(str); //Açš„ä½¿ç”¨ï¼Œæ˜ŸæœŸå…¨ç§° System.out.printf(\"æœ¬åœ°æ˜ŸæœŸçš„ç®€ç§°ï¼š%tA%n\",date); //Cçš„ä½¿ç”¨ï¼Œå¹´å‰ä¸¤ä½ System.out.printf(\"å¹´çš„å‰ä¸¤ä½æ•°å­—ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š%tC%n\",date); //yçš„ä½¿ç”¨ï¼Œå¹´åä¸¤ä½ System.out.printf(\"å¹´çš„åä¸¤ä½æ•°å­—ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š%ty%n\",date); //jçš„ä½¿ç”¨ï¼Œä¸€å¹´çš„å¤©æ•° System.out.printf(\"ä¸€å¹´ä¸­çš„å¤©æ•°ï¼ˆå³å¹´çš„ç¬¬å‡ å¤©ï¼‰ï¼š%tj%n\",date); //mçš„ä½¿ç”¨ï¼Œæœˆä»½ System.out.printf(\"ä¸¤ä½æ•°å­—çš„æœˆä»½ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š%tm%n\",date); //dçš„ä½¿ç”¨ï¼Œæ—¥ï¼ˆäºŒä½ï¼Œä¸å¤Ÿè¡¥é›¶ï¼‰ System.out.printf(\"ä¸¤ä½æ•°å­—çš„æ—¥ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š%td%n\",date); //eçš„ä½¿ç”¨ï¼Œæ—¥ï¼ˆä¸€ä½ä¸è¡¥é›¶ï¼‰ System.out.printf(\"æœˆä»½çš„æ—¥ï¼ˆå‰é¢ä¸è¡¥0ï¼‰ï¼š%te\",date);&#125; è¾“å‡ºç»“æœ 123456789101112è‹±æ–‡æœˆä»½ç®€ç§°ï¼šSepæœ¬åœ°æœˆä»½ç®€ç§°ï¼šä¹æœˆè‹±æ–‡æœˆä»½å…¨ç§°ï¼šSeptemberæœ¬åœ°æœˆä»½å…¨ç§°ï¼šä¹æœˆè‹±æ–‡æ˜ŸæœŸçš„ç®€ç§°ï¼šMonæœ¬åœ°æ˜ŸæœŸçš„ç®€ç§°ï¼šæ˜ŸæœŸä¸€å¹´çš„å‰ä¸¤ä½æ•°å­—ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š20å¹´çš„åä¸¤ä½æ•°å­—ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š12ä¸€å¹´ä¸­çš„å¤©æ•°ï¼ˆå³å¹´çš„ç¬¬å‡ å¤©ï¼‰ï¼š254ä¸¤ä½æ•°å­—çš„æœˆä»½ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š09ä¸¤ä½æ•°å­—çš„æ—¥ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š10æœˆä»½çš„æ—¥ï¼ˆå‰é¢ä¸è¡¥0ï¼‰ï¼š10 å’Œæ—¥æœŸæ ¼å¼è½¬æ¢ç¬¦ç›¸æ¯”ï¼Œæ—¶é—´æ ¼å¼çš„è½¬æ¢ç¬¦è¦æ›´å¤šã€æ›´ç²¾ç¡®ã€‚å®ƒå¯ä»¥å°†æ—¶é—´æ ¼å¼åŒ–æˆæ—¶ã€åˆ†ã€ç§’ç”šè‡³æ—¶æ¯«ç§’ç­‰å•ä½ã€‚æ ¼å¼åŒ–æ—¶é—´å­—ç¬¦ä¸²çš„è½¬æ¢ç¬¦å¦‚å›¾æ‰€ç¤ºã€‚ è½¬ æ¢ ç¬¦ è¯´ æ˜ ç¤º ä¾‹ H 2ä½æ•°å­—24æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰ 15 I 2ä½æ•°å­—12æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰ 03 k 2ä½æ•°å­—24æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥0ï¼‰ 15 l 2ä½æ•°å­—12æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥0ï¼‰ 3 M 2ä½æ•°å­—çš„åˆ†é’Ÿï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰ 03 S 2ä½æ•°å­—çš„ç§’ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰ 09 L 3ä½æ•°å­—çš„æ¯«ç§’ï¼ˆä¸è¶³3ä½å‰é¢è¡¥0ï¼‰ 015 N 9ä½æ•°å­—çš„æ¯«ç§’æ•°ï¼ˆä¸è¶³9ä½å‰é¢è¡¥0ï¼‰ 562000000 p å°å†™å­—æ¯çš„ä¸Šåˆæˆ–ä¸‹åˆæ ‡è®° ä¸­ï¼šä¸‹åˆè‹±ï¼špm z ç›¸å¯¹äºGMTçš„RFC822æ—¶åŒºçš„åç§»é‡ +0800 Z æ—¶åŒºç¼©å†™å­—ç¬¦ä¸² CST s 1970-1-1 00:00:00 åˆ°ç°åœ¨æ‰€ç»è¿‡çš„ç§’æ•° 1193468128 Q 1970-1-1 00:00:00 åˆ°ç°åœ¨æ‰€ç»è¿‡çš„æ¯«ç§’æ•° 1193468128984 æµ‹è¯•ä»£ç  12345678910111213141516171819202122232425262728293031public static void main(String[] args) &#123; Date date = new Date(); //Hçš„ä½¿ç”¨ System.out.printf(\"2ä½æ•°å­—24æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:%tH%n\", date); //Içš„ä½¿ç”¨ System.out.printf(\"2ä½æ•°å­—12æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:%tI%n\", date); //kçš„ä½¿ç”¨ System.out.printf(\"2ä½æ•°å­—24æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥0ï¼‰:%tk%n\", date); //lçš„ä½¿ç”¨ System.out.printf(\"2ä½æ•°å­—12æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥0ï¼‰:%tl%n\", date); //Mçš„ä½¿ç”¨ System.out.printf(\"2ä½æ•°å­—çš„åˆ†é’Ÿï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:%tM%n\", date); //Sçš„ä½¿ç”¨ System.out.printf(\"2ä½æ•°å­—çš„ç§’ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:%tS%n\", date); //Lçš„ä½¿ç”¨ System.out.printf(\"3ä½æ•°å­—çš„æ¯«ç§’ï¼ˆä¸è¶³3ä½å‰é¢è¡¥0ï¼‰:%tL%n\", date); //Nçš„ä½¿ç”¨ System.out.printf(\"9ä½æ•°å­—çš„æ¯«ç§’æ•°ï¼ˆä¸è¶³9ä½å‰é¢è¡¥0ï¼‰:%tN%n\", date); //pçš„ä½¿ç”¨ String str = String.format(Locale.US, \"å°å†™å­—æ¯çš„ä¸Šåˆæˆ–ä¸‹åˆæ ‡è®°(è‹±)ï¼š%tp\", date); System.out.println(str); System.out.printf(\"å°å†™å­—æ¯çš„ä¸Šåˆæˆ–ä¸‹åˆæ ‡è®°ï¼ˆä¸­ï¼‰ï¼š%tp%n\", date); //zçš„ä½¿ç”¨ System.out.printf(\"ç›¸å¯¹äºGMTçš„RFC822æ—¶åŒºçš„åç§»é‡:%tz%n\", date); //Zçš„ä½¿ç”¨ System.out.printf(\"æ—¶åŒºç¼©å†™å­—ç¬¦ä¸²:%tZ%n\", date); //sçš„ä½¿ç”¨ System.out.printf(\"1970-1-1 00:00:00 åˆ°ç°åœ¨æ‰€ç»è¿‡çš„ç§’æ•°ï¼š%ts%n\", date); //Qçš„ä½¿ç”¨ System.out.printf(\"1970-1-1 00:00:00 åˆ°ç°åœ¨æ‰€ç»è¿‡çš„æ¯«ç§’æ•°ï¼š%tQ%n\", date);&#125; è¾“å‡ºç»“æœ 12345678910111213142ä½æ•°å­—24æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:112ä½æ•°å­—12æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:112ä½æ•°å­—24æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥0ï¼‰:112ä½æ•°å­—12æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥0ï¼‰:112ä½æ•°å­—çš„åˆ†é’Ÿï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:032ä½æ•°å­—çš„ç§’ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:523ä½æ•°å­—çš„æ¯«ç§’ï¼ˆä¸è¶³3ä½å‰é¢è¡¥0ï¼‰:7739ä½æ•°å­—çš„æ¯«ç§’æ•°ï¼ˆä¸è¶³9ä½å‰é¢è¡¥0ï¼‰:773000000å°å†™å­—æ¯çš„ä¸Šåˆæˆ–ä¸‹åˆæ ‡è®°(è‹±)ï¼šamå°å†™å­—æ¯çš„ä¸Šåˆæˆ–ä¸‹åˆæ ‡è®°ï¼ˆä¸­ï¼‰ï¼šä¸Šåˆç›¸å¯¹äºGMTçš„RFC822æ—¶åŒºçš„åç§»é‡:+0800æ—¶åŒºç¼©å†™å­—ç¬¦ä¸²:CST1970-1-1 00:00:00 åˆ°ç°åœ¨æ‰€ç»è¿‡çš„ç§’æ•°ï¼š13472462321970-1-1 00:00:00 åˆ°ç°åœ¨æ‰€ç»è¿‡çš„æ¯«ç§’æ•°ï¼š1347246232773","categories":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/tags/Java/"}]},{"title":"Room --AppDatabase_Impl does not existçš„å¼‚å¸¸è§£å†³","slug":"Room-AppDatabase-Impl-does-not-existçš„å¼‚å¸¸è§£å†³","date":"2018-01-17T09:08:28.000Z","updated":"2018-02-28T16:29:10.941Z","comments":true,"path":"Bug/Room-AppDatabase-Impl-does-not-existçš„å¼‚å¸¸è§£å†³/","link":"","permalink":"http://www.wangzhumo.com/Bug/Room-AppDatabase-Impl-does-not-existçš„å¼‚å¸¸è§£å†³/","excerpt":"","text":"Bugå¦‚ä¸‹:1Caused by: java.lang.RuntimeException: cannot find implementation for com.wangzhumo.app.datasource.database.AppDB. AppDB_Impl does not exist å¯»æ‰¾åŸå› debugä¾æ¬¡å‘ç°: getInstance()ä¸ºç©º 12345678910111213public static AppDB getInstance(Context context) &#123; if (sInstance == null) &#123; synchronized (AppDB.class) &#123; if (sInstance == null) &#123; //æ­¤å¤„è¿”å›ä¸ºç©º sInstance = buildDatabase(context); sInstance.updateDatabaseCreated(context); &#125; &#125; &#125; return sInstance; &#125; buildDatabase(context) è¿”å›ä¸ºç©º 12345678910111213141516171819202122/** * Build the database. * creates a new instance of the database. */private static AppDB buildDatabase(final Context appContext) &#123; AppDB appDB = Room.databaseBuilder(appContext, AppDB.class, DATABASE_NAME) .addCallback(new Callback() &#123; @Override public void onCreate(@NonNull SupportSQLiteDatabase db) &#123; super.onCreate(db); AppDB database = AppDB.getInstance(appContext); database.setDatabaseCreated(); &#125; @Override public void onOpen(@NonNull SupportSQLiteDatabase db) &#123; super.onOpen(db); Log.e(TAG, \"onOpen: \" + db.getPath()); &#125; &#125;).build(); return appDB;&#125; databaseBuilderæ˜¯åˆ›å»ºæ•°æ®åº“çš„æ–¹æ³•,ä½†æ˜¯å®ƒæ„å»ºå¤±è´¥äº†,é‚£ä¹ˆå‰©ä¸‹çš„å°±æ˜¯æºç äº† Debugæºç  databaseBuilder æ–¹æ³• 12345678910111213@SuppressWarnings(\"WeakerAccess\") @NonNull public static &lt;T extends RoomDatabase&gt; RoomDatabase.Builder&lt;T&gt; databaseBuilder( @NonNull Context context, @NonNull Class&lt;T&gt; klass, @NonNull String name) &#123; //noinspection ConstantConditions if (name == null || name.trim().length() == 0) &#123; throw new IllegalArgumentException (\"Cannot build a database with null or empty name.\" + \" If you are trying to create an in memory database, use Room\" + \".inMemoryDatabaseBuilder\"); &#125; return new RoomDatabase.Builder&lt;&gt;(context, klass, name); &#125; æˆ‘ä»¬å¯ä»¥æ˜æ˜¾çš„çœ‹å‡º,æ­¤å¤„æŠ›å‡ºçš„å¼‚å¸¸ä¸æ˜¯AppDB_Impl does not exist çš„æç¤º,å¯ä»¥è‚¯å®šå¹¶ä¸æ˜¯æ­¤å¤„çš„é—®é¢˜ åº”è¯¥æ˜¯æ­£å¸¸è¿”å›çš„ return new RoomDatabase.Builder&lt;&gt;(context, klass, name); RoomDatabase.Builder é‚£ä¹ˆå‡ºé—®é¢˜çš„å°±å¯ä»¥è‚¯å®šæ˜¯ build()æ–¹æ³• 1234567891011121314151617181920212223@NonNull public T build() &#123; //noinspection ConstantConditions if (mContext == null) &#123; throw new IllegalArgumentException (&quot;Cannot provide null context for the database.&quot;); &#125; //noinspection ConstantConditions if (mDatabaseClass == null) &#123; throw new IllegalArgumentException (&quot;Must provide an abstract class that&quot; + &quot; extends RoomDatabase&quot;); &#125; if (mFactory == null) &#123; mFactory = new FrameworkSQLiteOpenHelperFactory(); &#125; DatabaseConfiguration configuration = new DatabaseConfiguration(mContext, mName, mFactory, mMigrationContainer, mCallbacks, mAllowMainThreadQueries, mRequireMigration); T db = Room.getGeneratedImplementation(mDatabaseClass, DB_IMPL_SUFFIX); db.init(configuration); return db; &#125; æ­¤å¤„,debugå‘ç°,æ˜¯åˆ° T db = Room.getGeneratedImplementation(mDatabaseClass, DB_IMPL_SUFFIX); æŠ›å‡ºå¼‚å¸¸çš„. é”å®šé—®é¢˜getGeneratedImplementation 1234567891011121314151617181920212223242526272829@NonNull static &lt;T, C&gt; T getGeneratedImplementation(Class&lt;C&gt; klass, String suffix) &#123; final String fullPackage = klass.getPackage().getName(); String name = klass.getCanonicalName(); final String postPackageName = fullPackage.isEmpty() ? name : (name.substring(fullPackage.length() + 1)); final String implName = postPackageName.replace('.', '_') + suffix; //noinspection TryWithIdenticalCatches try &#123; @SuppressWarnings(\"unchecked\") final Class&lt;T&gt; aClass = (Class&lt;T&gt;) Class.forName( fullPackage.isEmpty() ? implName : fullPackage + \".\" + implName); return aClass.newInstance(); &#125; catch (ClassNotFoundException e) &#123; //**å¾ˆæ˜æ˜¾,å°±æ˜¯è¿™ä¸ªåœ°æ–¹äº†** throw new RuntimeException(\"cannot find implementation for \" + klass.getCanonicalName() + \". \" + implName + \" does not exist\"); &#125; catch (IllegalAccessException e) &#123; throw new RuntimeException(\"Cannot access the constructor\" + klass.getCanonicalName()); &#125; catch (InstantiationException e) &#123; throw new RuntimeException(\"Failed to create an instance of \" + klass.getCanonicalName()); &#125; &#125; å…¶å®å°±æ˜¯,ç”Ÿæˆç±»å¤±è´¥äº† å…¶ä»–å‚æ•°éƒ½æ­£å¸¸,ååç”Ÿæˆå¤±è´¥,æ‰€ä»¥å°±æ€€ç–‘åˆ° Java -&gt; apt çš„é—®é¢˜ Kotlin -&gt; kaptçš„é—®é¢˜ è¿™ä¸¤ä¸ªå°±æ˜¯ç”¨æ¥ç”Ÿæˆä»£ç çš„,è¿™é‡Œçš„ç”Ÿæˆå¤±è´¥,æœ‰å¾ˆå¤§æ¦‚ç‡æ˜¯è¿™ä¸ªé—®é¢˜ è§£å†³é—®é¢˜æŸ¥çœ‹é¡¹ç›®çš„ä¾èµ– lib_opensource -&gt; build.gradle 12345//archapi deps.archLibs.archExtensionsapi deps.archLibs.archLifecycleCommonapi deps.archLibs.archRoomRuntimekapt deps.archLibs.archRoomCompiler æŸ¥çœ‹å‘ç°,æˆ‘å·²ç»æ·»åŠ äº†,é‚£ä¹ˆä»€ä¹ˆé¬¼é—®é¢˜å‘¢? æ€€ç–‘æ˜¯libraryçš„é—®é¢˜,æ‰“å¼€æˆ‘ä½¿ç”¨Roomçš„library ,æŸ¥çœ‹ lib_datasource -&gt; build.gradle 12345678910apply plugin: &apos;com.android.library&apos;...dependencies &#123; implementation fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;]) api project(&apos;:lib_opensource&apos;)// kapt deps.archLibs.archRoomCompiler&#125; æœç„¶å¿˜äº†åŠ  123456789101112apply plugin: &apos;com.android.library&apos;apply plugin: &apos;kotlin-android&apos;apply plugin: &apos;kotlin-kapt&apos;...dependencies &#123; implementation fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;]) api project(&apos;:lib_opensource&apos;)// kapt deps.archLibs.archRoomCompiler&#125; å°±Okäº†,æˆ‘åˆå¯ä»¥æ„‰å¿«çš„ç©è€äº† è®°å¾—: kapt","categories":[{"name":"Bug","slug":"Bug","permalink":"http://www.wangzhumo.com/categories/Bug/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Bug","slug":"Bug","permalink":"http://www.wangzhumo.com/tags/Bug/"},{"name":"Room","slug":"Room","permalink":"http://www.wangzhumo.com/tags/Room/"}]},{"title":"ä½¿ç”¨CharlesæŠ“Httpsçš„æ•°æ®è¯·æ±‚","slug":"ä½¿ç”¨CharlesæŠ“Httpsçš„æ•°æ®è¯·æ±‚","date":"2018-01-11T08:09:46.000Z","updated":"2018-02-28T16:32:52.591Z","comments":true,"path":"uncategorized/ä½¿ç”¨CharlesæŠ“Httpsçš„æ•°æ®è¯·æ±‚/","link":"","permalink":"http://www.wangzhumo.com/uncategorized/ä½¿ç”¨CharlesæŠ“Httpsçš„æ•°æ®è¯·æ±‚/","excerpt":"","text":"ä¹‹å‰çš„æ–‡ç« ä¸­ç»™é¡¹ç›®ä¸­åŠ å…¥äº†Https,æ­¤æ—¶ä½¿ç”¨charlesç å®å°±æ˜¯ä¸€å †ä¹±ç , ä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦å¸¸å¸¸ä½¿ç”¨Charles,è°ƒè¯•æ¥å£,æŸ¥æ‰¾é—®é¢˜ç­‰. å¯¼å‡ºè¯ä¹¦1.æ‰“å¼€Charles 2.Help -&gt; SSL Proxying -&gt; Save Charles Root Certificateâ€¦ 3.ä¿å­˜åˆ°~/Downloads/charles-ssl-proxying-certificate.pem å®‰è£…è¯ä¹¦åˆ°è®¾å¤‡1.æŠŠè¯ä¹¦æ¨é€åˆ°è®¾å¤‡ 12$ adb push charles-ssl-proxying-certificate.pem /sdcard/Download/charles-ssl-proxying-certificate.pem: 1 file pushed. 0.1 MB/s (1921 bytes in 0.012s) 2.å®‰è£…è¯ä¹¦ è®¾ç½® -&gt; å®‰å…¨ -&gt; è®¾å¤‡ç®¡ç†ä¸å‡­è¯ -&gt; ä»å­˜å‚¨å®‰è£… -&gt; charles-ssl-proxying-certificate.pemâ€™ è®¾ç½®Charles1.Proxy -&gt; SSL Proxying Settings 2.æ‰“å¼€æ‰‹æœº,å¼€å§‹è¯·æ±‚","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Https","slug":"Https","permalink":"http://www.wangzhumo.com/tags/Https/"}]},{"title":"Androidå¼€å‘ä¸­å¸¸ç”¨çš„Adbå‘½ä»¤","slug":"Androidå¼€å‘ä¸­å¸¸ç”¨çš„Adbå‘½ä»¤","date":"2018-01-11T04:07:40.000Z","updated":"2018-01-11T05:17:15.482Z","comments":true,"path":"Android/Androidå¼€å‘ä¸­å¸¸ç”¨çš„Adbå‘½ä»¤/","link":"","permalink":"http://www.wangzhumo.com/Android/Androidå¼€å‘ä¸­å¸¸ç”¨çš„Adbå‘½ä»¤/","excerpt":"","text":"åœ¨åšè¿™äº›ä¹‹å‰,å…ˆé…ç½®å¥½adbç¯å¢ƒå˜é‡,ä»¥æˆ‘çš„é…ç½®ä¸ºä¾‹ 12345678910111213$ vim ~/.bash_profileexport ANDROID_HOME=/Users/phyooos/Library/Android/sdk...export PATH=&#123;çœç•¥&#125;:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools$ source ~/.bas$ adbAndroid Debug Bridge version 1.0.39Version 0.0.1-4500957Installed as /Users/phyooos/Library/Android/sdk/platform-tools/adb... è¡¥å…… adb shell pm list packages å½“å‰æ‰‹æœºå®‰è£…çš„æ‰€æœ‰appåŒ…åadb shell pm list packages | grep â€˜googleâ€™ åœ¨æ‰€æœ‰åŒ…åä¸­æŸ¥æ‰¾å¸¦â€™googleâ€™çš„ è¿æ¥è®¾å¤‡æ‰“å¼€å¼€å‘è€… -&gt; æ‰“å¼€è°ƒè¯• -&gt; å…è®¸è°ƒè¯• é€šè¿‡usbè¿æ¥ é€šè¿‡wifiè¿æ¥ ä¿è¯Androidè®¾å¤‡ä¸ç”µè„‘åœ¨å±€åŸŸç½‘ä¸­,ç½‘æ®µå¥½åƒä¹Ÿè¦ä¸€è‡´ eg: 192.168.2.98 , 192.168.2.111 123~ âŒš 9:44:55$ adb connect 192.168.6.51unable to connect to 192.168.6.51:5555: Connection refused æ­¤æ—¶æ˜¯è¿æ¥ä¸ä¸Šçš„,è¦å…ˆtcpip 5555,å¦‚ä¸‹: 12345#ä½¿ç”¨Tcpå¹¶ç›‘å¬ç«¯å£5555adb tcpip 5555#è¿æ¥è®¾å¤‡adb connect 192.168.6.51 å¦‚æœä½ æƒ³ç”¨usbè°ƒè¯• 12#ä½¿ç”¨usbè°ƒè¯• adb usb PS:æœ‰çš„è®¾å¤‡ç›´æ¥adb connect å³å¯,æ‰€ä»¥ä¸å¦¨å…ˆè¯•è¯• â€‹ æŸ¥çœ‹è®¾å¤‡ æŸ¥çœ‹æ‰€æœ‰è¿æ¥çš„è®¾å¤‡ 1234$ adb devicesList of devices attached3080b82d device860BCML228J8 device æŒ‡å®š\bè®¾å¤‡(adb å‘½ä»¤å¿…é¡»æŒ‡å®šä¸€ä¸ªè®¾å¤‡ä½¿ç”¨) 123456abd -s ç¼–å· å‘½ä»¤æ¯”å¦‚æˆ‘è¦è¿æ¥3080b82d device è¿™ä¸ªè®¾å¤‡,å®‰è£…ä¸€ä¸ªapkeg:$ adb -s 3080b82d install Test.apkSuccess å®‰è£…,å¸è½½apk å®‰è£…12$ adb -s 3080b82d install Users/phyooos/develop/Test.apkSuccess install è·Ÿä¸Šapkçš„pathå³å¯ install å¯ä»¥æ­é…å‡ ä¸ªå‚æ•°ä½¿ç”¨,æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ install -r æ›¿æ¢æ‰åŸæ¥çš„apk.(è¢«ç§°ä¸ºå¼ºåˆ¶å®‰è£…) è‡³äºå…¶ä»–çš„å‚æ•°å»googleå®˜ç½‘çœ‹å§ install -t å¯ä»¥å®‰è£…æµ‹è¯•åŒ… å¸è½½ 123adb uninstall [è½¯ä»¶åŒ…å]adb uninstall -k [è½¯ä»¶åŒ…å] -k å‚æ•°,å¸è½½è½¯ä»¶ä½†æ˜¯ä¿ç•™é…ç½®å’Œç¼“å­˜æ–‡ä»¶. åŒ…åä½¿ç”¨æ–‡ç« å¼€å§‹çš„å‘½ä»¤æŸ¥æ‰¾å³å¯(å½“å‰æœ‰ä¸¤ä¸ªæ‰‹æœº,è¿˜è¦æŒ‡å®šè®¾å¤‡)12345$ adb -s 3080b82d shell pm list packages | grep 'miui'package:com.miui.screenrecorderpackage:com.miui.contentextensionpackage:com.miui.powerkeeper... æ‹‰å–,æ¨é€æ–‡ä»¶ å‘é€æ–‡ä»¶åˆ°Androidè®¾å¤‡ adb push [æœ¬åœ°è·¯å¾„] [è¿œç¨‹è·¯å¾„] ä»Androidè®¾å¤‡ä¸­ä¸‹è½½æ–‡ä»¶ adb pull [è¿œç¨‹è·¯å¾„] [æœ¬åœ°è·¯å¾„] æˆªå›¾å½•å± æˆªå›¾adb shell screencap [path] 12adb shell screencap /sdcard/screen.png#æˆªå›¾å¹¶ä¿å­˜åˆ°/sdcard/screen.png å½•å±adb shell screenrecord [path] 12adb shell screenrecord /sdcard/demo.mp4#å½•å± æ³¨æ„: æŒ‰Ctrl-C ç»“æŸå½•åˆ¶ 12345678910adb shell screenrecord --size &lt;WIDTHxHEIGHT&gt;adb shell screenrecord --bit-rate &lt;RATE&gt;adb shell screenrecord --bit-rate 5000000 /sdcard/demo.mp4adb shell screenrecord --time-limit &lt;TIME&gt;adb shell screenrecord --rotateadb shell screenrecord --verbose â€‹ Package æŸ¥çœ‹ç³»ç»Ÿå†…appä¿¡æ¯ adb shell pm list packages æŸ¥çœ‹å½“å‰æ‰€æœ‰åŒ… adb shell pm list packages 123456$ adb shell pm list packagespackage:com.flyme.roamingpaypackage:com.android.cts.priv.ctsshimpackage:com.meizu.ppspackage:com.meizu.net.pedometerpackage:com.android.providers.telephony ç³»ç»Ÿåº”ç”¨ adb shell pm list packages -s 123456$ adb shell pm list packages -spackage:com.miui.screenrecorderpackage:com.android.cts.priv.ctsshimpackage:com.qualcomm.qti.auth.sampleextauthservicepackage:com.qualcomm.qti.perfdump... æ™®é€šå¤–æ¥åº”ç”¨ adb shell pm list packages -3 123456$ adb shell pm list packages -3package:com.google.android.youtubepackage:com.hpbr.bosszhipinpackage:de.blinkt.openvpnpackage:org.iggymedia.periodtrackerpackage:com.daimajia.gold å…¶ä»–å‚æ•° 1234567891011121314#See their associated file.adb shell pm list packages -f #Filter to only show disabled packages.adb shell pm list packages -d #Filter to only show enabled packages.adb shell pm list packages -e #See the installer for the packages.adb shell pm list packages -i #Also include uninstalled packages.adb shell pm list packages -u é€šè¿‡åŒ…åæŸ¥æ‰¾appä½ç½® adb shell pm path [packagename] 12$ adb shell pm path com.miui.screenrecorderpackage:/system/app/MiuiScreenRecorder/MiuiScreenRecorder.apk æ¸…é™¤ç¼“å­˜adb shell pm clear [packageName] æ¸…é™¤äº†è¯¥appçš„ data cache 12$ adb shell pm clear com.yhcs.carmartSuccess â€‹ shellæˆ‘ä»¬çŸ¥é“androidå…¶å®ç²¾ç®€äº†linuxçš„å‘½ä»¤,æœ‰ä¸€å¤§éƒ¨åˆ†linuxå‘½ä»¤æ²¡æ³•ç”¨çš„ 12345678910$ adb shell#å³å¯è¿›å…¥å¦‚æœè¦rootæƒé™,å›½å†…æ‰‹æœºå¥½åƒä¸ä¸€è‡´,æˆ‘æ˜¯ç”¨è¿‡çš„ä¸º$ adb root$ adb shellæ­¤æ—¶æƒé™å°±æ˜¯rootè¿›å…¥shellå,å°±å¯ä»¥ä¸ºæ‰€æ¬²ä¸º,ä¸€èˆ¬å’Œlinuxä¸€è‡´ ä¸è¿‡è¿™äº›,è¿˜æ˜¯ç®¡ç”¨çš„ 1ls , cd , rm , mkdir , touch , pwd ,cp , mv ,netstat , ping, ip ä¸¾ä¸€ä¸ªä¾‹å­,æˆ‘æƒ³æŸ¥çœ‹å½“å‰wifiçš„ipæ˜¯å¤šå°‘. 12345678$ adb shellsagit:/ $ ip -f inet addr show wlan023: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 3000 inet 192.168.6.51/23 brd 192.168.7.255 scope global wlan0 valid_lft forever preferred_lft foreversagit:/ $#ip inet 192.168.6.51 è¿™ä¸ªå°±æ˜¯ Logcatadb logcat [option] [filter] æŸ¥çœ‹log adb logcat é€šè¿‡ control + c é€€å‡º â€‹ æŸ¥çœ‹Debugçš„log adb logcat *:D Logcat,è¿˜æ˜¯Android studio çœ‹èµ·æ¥æ–¹ä¾¿,æ‰€ä»¥æ²¡æœ‰ç»§ç»­å»çœ‹,ä¹Ÿå°±ä¸è¯´äº† dumpsysè¿™æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å‘½ä»¤ ç”µé‡ adb shell dumpsys battery â€‹ æœåŠ¡åˆ—è¡¨ adb shell dumpsys ä¸‹é¢çš„å‘½ä»¤ | more æ˜¯ä¸ºäº†æ˜¾ç¤ºæ‰€æœ‰çš„æ•°æ® 1234567891011$ adb shell dumpsys | moreCurrently running services: DockObserver MiuiBackup MiuiInit SurfaceFlinger accessibility account activity alarm ... è¿™ä¸ªCurrently running services æ‰€æœ‰çš„é¡¹ç›®,éƒ½å¯ä»¥è¯¦ç»†æŸ¥è¯¢ æŸ¥è¯¢å•ä¸ªservice adb shell dumpsys [service name] æå‡ ä¸ªä¾‹å­çœ‹çœ‹: å±å¹•åˆ†è¾¨ç‡adb shell dumpsys window displays 123456$ adb shell dumpsys window displaysWINDOW MANAGER DISPLAY CONTENTS (dumpsys window displays) Display: mDisplayId=0 init=1080x1920 480dpi cur=1080x1920 app=1080x1920 rng=1080x1020-1920x1860 deferred=false mLayoutNeeded=false å…¶ä¸­: init=1080x1920 åˆ†è¾¨ç‡ 480dpi dpiå€¼ â€‹ activityä¿¡æ¯adb shell dumpsys activity æ¯”å¦‚æˆ‘æƒ³çœ‹çœ‹æˆ‘activityçš„ä¿¡æ¯adb shell dumpsys activity | grep &#39;com.yhcs.carmart&#39; 1234567891011121314151617$ adb shell dumpsys activity | grep &quot;com.yhcs.carmart&quot; * com.yhcs.carmart: 2 items #0: PendingIntentRecord&#123;c526be3 com.yhcs.carmart startService&#125; #1: PendingIntentRecord&#123;8949e0 com.yhcs.carmart broadcastIntent&#125; -&gt; 8161:com.yhcs.carmart/u0a460 s1/1 u0/0 +44s372ms -&gt; 8556:com.yhcs.carmart:channel/u0a460 s1/1 u0/0 +33s684ms ... * Recent #0: TaskRecord&#123;6019b81 #14799 A=com.yhcs.carmart U=0 StackId=1 sz=1&#125; packageName=com.yhcs.carmart processName=com.yhcs.carmart launchedFromUid=10460 launchedFromPackage=com.yhcs.carmart userId=0 app=ProcessRecord&#123;3c52934 8161:com.yhcs.carmart/u0a460&#125; Intent &#123; cmp=com.yhcs.carmart/.ui.main.MainActivity &#125; frontOfTask=true task=TaskRecord&#123;6019b81 #14799 A=com.yhcs.carmart U=0 StackId=1 sz=1&#125; taskAffinity=com.yhcs.carmart realActivity=com.yhcs.carmart/.ui.main.MainActivity ç°åœ¨æŒ‡å®šæŸ¥çœ‹è¿™ä¸ªactivity 1234567891011121314$ adb shell dumpsys activity com.yhcs.carmart/.ui.main.MainActivityTASK com.yhcs.carmart id=14799 userId=0 ACTIVITY com.yhcs.carmart/.ui.main.MainActivity a99200b pid=8161 Local Activity 90efa41 State: mResumed=false mStopped=true mFinished=false mChangingConfigurations=false mCurrentConfig=&#123;1.0 460mcc11mnc [zh_CN] ldltr sw360dp w360dp h620dp 480dpi nrml long port finger -keyb/v/h -nav/h appBounds=Rect(0, 0 - 1080, 1920) s.12 themeChanged=0 themeChangedFlags=0&#125; ...View Hierarchy: DecorView@ce71c9e[MainActivity] android.widget.LinearLayout&#123;6106377 V.E...... ......ID 0,0-1080,1920&#125; ...Active Fragments ... é‡Œé¢æœ‰å¾ˆå¤šä¿¡æ¯ â€‹","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"OkHttpä¸­æ·»åŠ httpsæ”¯æŒ","slug":"OkHttpä¸­æ·»åŠ httpsæ”¯æŒ","date":"2018-01-10T08:43:57.000Z","updated":"2018-01-10T15:29:54.000Z","comments":true,"path":"uncategorized/OkHttpä¸­æ·»åŠ httpsæ”¯æŒ/","link":"","permalink":"http://www.wangzhumo.com/uncategorized/OkHttpä¸­æ·»åŠ httpsæ”¯æŒ/","excerpt":"","text":"åŸºç¡€çŸ¥è¯† æ„Ÿè§‰å°±æ˜¯ä¸€å †æœ‰ä¿¡èª‰çš„æœºæ„,è¯´: æˆ‘ä»¬è¿™äº›æœºæ„çš„å…¬é’¥æ˜¯å¯ä¿¡çš„,æˆ‘ä»¬ä¸‹é¢çš„å°å¼Ÿå½“ç„¶ä¹Ÿæ˜¯å¯ä»¥ä¿¡ä»»çš„å•¦ ç„¶åå¤§å®¶å°±å»å½“äººå®¶å°å¼Ÿ,å°±æ˜¯å¯ä¿¡çš„äº†â€¦. å½“ç„¶è¿™é‡Œé¢æœ‰çš„å¤§ä½¬ä¸é«˜å…´,å°±è‡ªå·±æä¸€å¥—è¯ä¹¦,æ¯”å¦‚12306 Httpsä¸­,å€¼å¾—æ³¨æ„çš„å¯†é’¥æœ‰: æœåŠ¡å™¨ç«¯çš„å…¬é’¥å’Œç§é’¥ å®¢æˆ·ç«¯çš„éšæœºå¯†é’¥ å€¼å¾—æ³¨æ„çš„æ˜¯ä¸€ä¸ªHTTPSè¯·æ±‚å®é™…ä¸Šå°±æ˜¯ä¸¤æ¬¡HTTPä¼ è¾“. 1.å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘èµ·HTTPSè¯·æ±‚ï¼Œè¿æ¥åˆ°æœåŠ¡å™¨çš„443ç«¯å£ã€‚ 2.æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚,å‘å®¢æˆ·ç«¯å‘é€è‡ªå·±çš„å…¬é’¥ 3.å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å…¬é’¥,å¼€å§‹éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§,æˆ‘ä»¬çŸ¥é“ç³»ç»Ÿå†…ç½®äº†ä¸€äº›è¯ä¹¦,åº”è¯¥æ˜¯å«é¡¶çº§è¯ä¹¦å§ æˆ‘ä»¬çš„è¯ä¹¦å¹¶ä¸æ˜¯å•¥å¤§æœºæ„å‘çš„,è‚¯å®šä¸åœ¨é‡Œé¢,é‚£ä¹ˆå°±æ²¡æ³•éªŒè¯åˆæ³•. â€‹ åˆæ³• &gt; ç»§ç»­ â€‹ ä¸åˆæ³• &gt; æ­¤æ¬¡Httpsè¯·æ±‚ç»ˆæ­¢ 4.å®¢æˆ·ç«¯éªŒè¯å…¬é’¥åˆæ ¼å(ä¹Ÿå°±æ˜¯ç»™ä½ å‘æ¶ˆæ¯çš„æœåŠ¡å™¨æ˜¯æ­£ç»æœåŠ¡å™¨)ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ä¼šç”Ÿæˆä¸€ä¸ª éšæœºå¯†ç ,å®¢æˆ·ç«¯ä¼šæ‹¿ç€è¿™ä¸ªéšæœºå¯†ç å’Œåˆšæ‰æ”¶åˆ°çš„æœåŠ¡å™¨å¯†é’¥åšéå¯¹ç§°åŠ å¯† &gt;&gt; å¾—åˆ°å¯†æ–‡çš„å¯†ç  â€”â€”â€“ä»¥ä¸Šç¬¬ä¸€æ¬¡httpè¯·æ±‚ç»“æŸäº†â€”â€”â€“ 5.å®¢æˆ·ç«¯ä¼šå‘èµ·HTTPSä¸­çš„ç¬¬äºŒä¸ªHTTPè¯·æ±‚,å‘é€å®¢æˆ·ç«¯å¯†é’¥(å¯†æ–‡)ç»™æœåŠ¡å™¨ã€‚ 6.æœåŠ¡å™¨æ”¶åˆ°å¯†æ–‡ï¼Œä¼šç”¨è‡ªå·±çš„ç§é’¥å¯¹å…¶è¿›è¡Œéå¯¹ç§°è§£å¯†,å¾—åˆ°å®¢æˆ·ç«¯åˆšæ‰ç”Ÿæˆçš„å®¢æˆ·ç«¯éšæœºå¯†ç . æ­¤æ—¶æœåŠ¡å™¨ä½¿ç”¨å®¢æˆ·ç«¯éšæœºå¯†ç ,å¯¹æ•°æ®è¿›è¡Œå¯¹ç§°åŠ å¯† 7.æŠŠå¯¹ç§°åŠ å¯†åçš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯,å®¢æˆ·ç«¯å¯¹ç§°è§£å¯†,OK æ­¤æ¬¡Httpså®Œç¾ç»“æŸ â€”â€”â€“æ•´ä¸ªhttpsè¯·æ±‚ç»“æŸäº†â€”â€”â€“ å…¶ä¸­ , å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†, å„å¸å…¶èŒ,å…±åŒå®Œæˆæ•´ä¸ªè¯·æ±‚. å¯¹ç§°åŠ å¯†: æœ€å¿«é€Ÿ,æœ€ç®€å• éå¯¹ç§°åŠ å¯†:é€Ÿåº¦æ…¢,å¾ˆå®‰å…¨,ä¸éœ€è¦æŠŠç§˜é’¥åˆ†å‘,å®¢æˆ·ç«¯åˆ©ç”¨å…¬é’¥åŠ å¯†çš„æ•°æ®,åªèƒ½æ˜¯æ‹¥æœ‰ç§˜é’¥çš„æœåŠ¡å™¨è§£å¯† åˆ©ç”¨éå¯¹ç§°åŠ å¯†çš„ç‰¹æ€§ä¼ é€’ å®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºå¯†é’¥ ,è¾¾åˆ°åªæœ‰æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯äº’ç›¸çŸ¥é“çš„å¯†é’¥,ä»è€Œä½¿ç”¨å¯†é’¥è¿›è¡Œ(é«˜é€Ÿç®€å•çš„)å¯¹ç§°åŠ å¯†æ•°æ®. ç¬¬ä¸€éƒ¨åˆ†:ä¿¡ä»»æ‰€æœ‰ è¿™å°±æ˜¯,æˆ‘ä¸ç®¡æ˜¯è°ä¼ é€’çš„æ¶ˆæ¯,ä¸æ˜¯ä½ å®¶æœåŠ¡å™¨ä¼ é€’çš„æ¶ˆæ¯,ä½ ä¹Ÿä¼šä¿¡ Api.java (æä¾›okhttpå®ä¾‹,å¹¶åˆ›å»ºRetroitæœåŠ¡) 123456789101112131415161718192021222324OkHttpClient okHttpClient = new OkHttpClient.Builder() .hostnameVerifier(new HostnameVerifier() &#123; @Override public boolean verify(String hostname, SSLSession session) &#123; return true; &#125; &#125;) .sslSocketFactory(createSSLSocketFactory()) .build(); ...//è¿™é‡Œæ˜¯åˆ›å»ºä¸€ä¸ªSSLSocketFactory,æä¾›ç»™ä¸Šé¢çš„ .sslSocketFactory()private SSLSocketFactory createSSLSocketFactory() &#123; SSLSocketFactory ssfFactory = null; try &#123; SSLContext sc = SSLContext.getInstance(&quot;TLS&quot;); sc.init(null, new TrustManager[]&#123;new TrustAllCerts()&#125;, new SecureRandom()); ssfFactory = sc.getSocketFactory(); &#125; catch (Exception e) &#123; &#125; return ssfFactory; &#125; å…¶ä¸­æ¶‰åŠåˆ°TrustAllCerts.java,å¯ä»¥çœ‹åˆ°åªæ˜¯å®ç°X509TrustManager,æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é»˜è®¤å®ç° 1234567891011121314151617/** * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2018/1/8 ä¸‹åˆ2:25 */public class TrustAllCerts implements X509TrustManager &#123; @Override public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException &#123;&#125; @Override public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException &#123;&#125; @Override public X509Certificate[] getAcceptedIssuers() &#123; return new X509Certificate[0]; &#125;&#125; è¿™é‡Œå°±ä»¥åŠå¯ä»¥äº†,ä¿¡ä»»æ‰€æœ‰çš„è¿æ¥ ç¬¬äºŒéƒ¨åˆ†:(å¼ºéªŒè¯) æˆ‘åªä¿¡ä»»è¯ä¹¦åˆæ³•çš„æœåŠ¡å™¨ä¼ é€’çš„æ•°æ®. æŸ¥çœ‹Httpsçš„è¯ä¹¦ åœ¨æµè§ˆå™¨ä¸Šçœ‹åˆ°è¿™ä¸ª,è¿™ä¸ªå·²ç»æ˜¯æˆ‘æŠŠè¯ä¹¦æ·»åŠ ä¸ºä¿¡ä»»äº†,æ‰€ä»¥ä»–æ˜¯ä¸€ä¸ª å®‰å…¨ çš„æ ‡å¿— åˆ†æ è¿™é‡Œæ˜¯æˆ‘æŸ¥çœ‹å½“å‰ç½‘ç«™è¯ä¹¦çš„ç»“æ„ æœ€é¡¶â€”æ˜¯æ ¹è¯ä¹¦,åˆ°æœŸæ—¶é—´æ˜¯2028å¹´ æœ€åº•â€”æ˜¯æˆ‘å¸è¯ä¹¦,åˆ°æœŸæ—¶é—´æ˜¯2018.12.9æ—¥ è¿™é‡Œæˆ‘ä»¬å¯ä»¥å‘ç°,æˆ‘ä»¬ç½‘ç«™çš„è¯ä¹¦æ˜¯æœ‰æ—¶é—´é™åˆ¶çš„,é‚£ä¹ˆå°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜,åˆ°äº†2018.12.9è¿™ä¸€å¤©æ€ä¹ˆåŠ. æˆ‘ä¹Ÿä¸çŸ¥é“ä¼šæ€ä¹ˆæ ·,åº”è¯¥æ˜¯ç»­ç­¾å§!é‚£ä¹ˆä¸‡ä¸€è¿™ä¸ªè¯ä¹¦å˜åŒ–äº†æ€ä¹ˆåŠ? æ‰€ä»¥,æˆ‘ä»¬åº”è¯¥æŠŠæ ¹è¯ä¹¦ç½®ä¸ºä¿¡ä»». ä¸‹è½½ä¿å­˜ Macçš„åœ¨ é’¥åŒ™ä¸²è®¿é—® ä¸­ Windows æ²¡æ³•æ”¾å›¾,åœ¨chromeä¸ŠæŸ¥çœ‹è¯ä¹¦çš„æ—¶å€™åº”è¯¥å°±èƒ½ä¿å­˜. HttpsUtils.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/** * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2018/1/10 ä¸‹åˆ5:07 * æ”¯æŒhttpsçš„å·¥å…·ç±» */public class HttpsUtils &#123; private static final String TAG = &quot;OkHttp&quot;; /** * åˆ›å»ºä¸€ä¸ªç©ºç™½çš„KeyStore * @return KeyStore * @throws GeneralSecurityException */ private static KeyStore createEmptyKeyStore() throws GeneralSecurityException &#123; try &#123; KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType()); //æ­¤å¤„å¯†ç éšæ„,ä¸ä¼šäº§ç”Ÿé—®é¢˜ keystore.load(null, &quot;password&quot;.toCharArray()); return keystore; &#125; catch (IOException e) &#123; return null; &#125; &#125; /** * TrustManager ç”Ÿæˆ * @return * @throws GeneralSecurityException */ private static TrustManager[] generateTrustManager() throws GeneralSecurityException &#123; //åˆ›å»ºä¸€ä¸ªX.509æ ¼å¼çš„CertificateFactory CertificateFactory certificateFactory = CertificateFactory.getInstance(&quot;X.509&quot;); Certificate ca; //è¯ä¹¦å·¥å‚æ ¹æ®è¯ä¹¦æ–‡ä»¶çš„æµç”Ÿæˆè¯ä¹¦Certificate InputStream assets = App.getContext().getResources().openRawResource(R.raw.rootca); ca = certificateFactory.generateCertificate(assets); Log.e(TAG, &quot;trustManager: ca = &quot; + ((X509Certificate) ca).getSubjectDN() ); //åˆ›å»ºKeyStoreï¼Œç”¨æ¥å­˜å‚¨ä¿¡ä»»è¯ä¹¦ KeyStore keyStor = createEmptyKeyStore(); keyStor.setCertificateEntry(&quot;ca&quot;,ca); //åˆ›å»ºä¸€ä¸ªé»˜è®¤ç±»å‹çš„TrustManagerFactory String defaultAlgorithm = TrustManagerFactory.getDefaultAlgorithm(); TrustManagerFactory tmf = TrustManagerFactory.getInstance(defaultAlgorithm); //ç”¨keyStoreå®ä¾‹åˆå§‹åŒ–TrustManagerFactory,æ­¤æ—¶TrustManagerFactoryä¼šä¿¡ä»»æˆ‘ä»¬ä¿å­˜çš„è¯ä¹¦ tmf.init(keyStor); //é€šè¿‡tmfè·å–TrustManageræ•°ç»„ï¼ŒTrustManagerä¹Ÿä¼šä¿¡ä»»keyStorä¸­çš„è¯ä¹¦ return tmf.getTrustManagers(); &#125; /** * æä¾›ä¸€ä¸ªä¸€ä¸ªSSLSocketFactory * @return SSLSocketFactoryå®ä¾‹ */ public static SSLSocketFactory generateSSLSocketFactory() &#123; try &#123; SSLContext sc = SSLContext.getInstance(&quot;TLS&quot;); sc.init(null, generateTrustManager(), new SecureRandom()); Log.e(TAG, &quot;generateSSLSocketFactory &quot;); return sc.getSocketFactory(); &#125; catch (GeneralSecurityException e) &#123; return null; &#125; &#125;&#125; æ³¨é‡Šå¾ˆæ¸…æ¥šäº†. å…³é”®: 1.æ‹¿åˆ°å¸§æ•°çš„æµ 1InputStream assets = App.getContext().getResources().openRawResource(R.raw.rootca); 2.ä¿å­˜åˆ°keystore 12KeyStore keyStor = createEmptyKeyStore();keyStor.setCertificateEntry(&quot;ca&quot;,ca); 3.åˆå§‹åŒ–å¹¶æ‹¿åˆ°TrustManager[] 12tmf.init(keyStor);tmf.getTrustManagers() ä½¿ç”¨å³å¯: 12345//è¿™æ ·å°±OkOkHttpClient okHttpClient = new OkHttpClient.Builder() .hostnameVerifier((hostname, session) -&gt; true) .sslSocketFactory(HttpsUtils.generateSSLSocketFactory()) .build(); è¶…å¥½çš„ä¸¤ç¯‡ http://blog.csdn.net/lmj623565791/article/details/48129405 http://blog.csdn.net/iispring/article/details/51615631","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"WebViewæ’­æ”¾H5è§†å±æ²¡æœ‰ç”»é¢,åªæœ‰å£°éŸ³","slug":"WebViewæ’­æ”¾H5è§†å±æ²¡æœ‰ç”»é¢-åªæœ‰å£°éŸ³","date":"2018-01-04T03:03:45.000Z","updated":"2018-02-28T16:28:33.437Z","comments":true,"path":"Bug/WebViewæ’­æ”¾H5è§†å±æ²¡æœ‰ç”»é¢-åªæœ‰å£°éŸ³/","link":"","permalink":"http://www.wangzhumo.com/Bug/WebViewæ’­æ”¾H5è§†å±æ²¡æœ‰ç”»é¢-åªæœ‰å£°éŸ³/","excerpt":"","text":"æè¿°:ç‚¹å‡»æ’­æ”¾æŒ‰é’®å,åªèƒ½å¬åˆ°å£°éŸ³,è€Œç”»é¢æ˜¯ç™½çš„â€¦.ä¸€ç›´ç™½â€¦æƒ³åˆ°åº”è¯¥æ˜¯ç¡¬ä»¶åŠ é€Ÿçš„é—®é¢˜ 1.ç¡®è®¤ç¡¬ä»¶åŠ é€Ÿ(éæ­¤å› ç´ ) åœ¨WebViewActivity.javaä¸­å‘ç° 1webView.setLayerType(View.LAYER_TYPE_HARDWARE, null); 2.ç¡®è®¤AndroidManifest.xml(éæ­¤å› ç´ ) applicationèŠ‚ç‚¹ä¸‹å¹¶æ²¡æœ‰å‘ç° 1android:hardwareAccelerated=&quot;true&quot; åœ¨WebViewActivityä¸­,ä¹Ÿæ— è¯¥é…ç½® å°è¯•: WebViewActivity.javaä¸­,æ³¨é‡Š 1#webView.setLayerType(View.LAYER_TYPE_HARDWARE, null); åœ¨AndroidManifest.xmlèŠ‚ç‚¹ä¸‹åŠ å…¥android:hardwareAccelerated=&quot;true&quot; ç»“æœâ€¦â€¦æ²¡ç”¨ 3.æ£€æŸ¥activity_web_view.xml 1234567&lt;WebView android:id=\"@+id/webView\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:scrollbars=\"none\" android:visibility=\"@&#123;showError?View.GONE:View.VISIBLE&#125;\" /&gt; æ²¡é—®é¢˜. BUTâ€¦. 12345678910111213141516171819202122232425262728&lt;LinearLayout android:layerType=\"software\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:orientation=\"vertical\"&gt; &lt;include layout=\"@layout/layout_toolbar\" /&gt; &lt;ProgressBar android:id=\"@+id/web_load_progress\" style=\"?android:attr/progressBarStyleHorizontal\" android:layout_width=\"match_parent\" android:layout_height=\"2dp\" android:indeterminateOnly=\"false\" android:max=\"100\" android:progress=\"@&#123;progress&#125;\" android:progressDrawable=\"@drawable/progress_bar_states\" android:visibility=\"gone\" /&gt; &lt;WebView android:id=\"@+id/webView\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:scrollbars=\"none\" android:visibility=\"@&#123;showError?View.GONE:View.VISIBLE&#125;\" /&gt;&lt;/LinearLayout&gt; ####çˆ¶å¸ƒå±€ç«Ÿç„¶android:layerType=&quot;software&quot; è§£å†³,åˆ æ‰è¯¥å±æ€§å³å¯","categories":[{"name":"Bug","slug":"Bug","permalink":"http://www.wangzhumo.com/categories/Bug/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Bug","slug":"Bug","permalink":"http://www.wangzhumo.com/tags/Bug/"}]},{"title":"Roomä¸­List<>ä½¿ç”¨è¯¦è§£","slug":"Roomä¸­List-ä½¿ç”¨è¯¦è§£","date":"2018-01-03T07:03:38.000Z","updated":"2018-01-09T09:11:17.675Z","comments":true,"path":"Android/Roomä¸­List-ä½¿ç”¨è¯¦è§£/","link":"","permalink":"http://www.wangzhumo.com/Android/Roomä¸­List-ä½¿ç”¨è¯¦è§£/","excerpt":"","text":"æ‰‹æ‘¸æ‰‹æ•™ä½ åœ¨Roomä¸­ä½¿ç”¨List. å®é™…é¡¹ç›®æœ‰å¾ˆå¤šè¿™æ ·çš„ç»“æ„: 12345678910111213141516171819&#123; &quot;id&quot;: &quot;001&quot;, &quot;name&quot;: &quot;ç‹è¯›é­”&quot;, &quot;age&quot;: 2018, &quot;books&quot;: [ &#123; &quot;bookId&quot;: 10081, &quot;userId&quot;: 1, &quot;book&quot;: &quot;æ–­ç½ªå°å­¦&quot;, &quot;desc&quot;: &quot;æ¼«ç”»è®²è¿°äº†ææ€ç¥ã€ç‹è¯›é­”å’Œåˆ˜æ–©ä»™ä¸‰ä½å°‘å¹´ï¼Œä¸ºäº†åä¸‡å°å­¦ç”Ÿçš„æœªæ¥ã€ä¸ºäº†æ”¹å˜è¢«è¯…å’’çš„å‘½è¿ï¼Œç›¸èšåœ¨ç‹¼ç‰™åŒºé£è™è·¯ç§ç«‹æ–­ç½ªå°å­¦ï¼Œèª“æ­»æ‰“è´¥å››å¹´çº§çš„é­”ç¥èµµæ—¥å¤©çš„æ•…äº‹ã€‚&quot; &#125;, &#123; &quot;bookId&quot;: 10088, &quot;userId&quot;: 1, &quot;book&quot;: &quot;ç‹‚éœ¸å¤©ä¸‹ä¹‹æ–­ç½ªå­¦å›­&quot;, &quot;desc&quot;: &quot;ã€Šç‹‚éœ¸å¤©ä¸‹ä¹‹æ–­ç½ªå­¦å›­ã€‹ï¼Œåæ¥å› ä¸ºåå­—å¤ªé•¿ï¼Œè€Œä¸”â€œå­¦å›­â€å’Œâ€œå­¦é™¢â€å®¹æ˜“æ··æ·†çš„åŸå› è€Œæ”¹åã€‚&quot; &#125; ]&#125; ä¹Ÿå°±æ˜¯,ç±»ä¼¼booksè¿™æ ·çš„,Listä½œä¸ºä¸€ä¸ªå…ƒç´ å­˜åœ¨. ä¸‹é¢å°±ä»¥ä¸Šé¢çš„ç»“æ„ä¸ºä¾‹,åšä¸€ä¸ªç®€å•çš„æ¼”ç¤º,æŒ‰ç…§æœ€ç®€ç­”çš„æ–¹æ³•å®ç°. 1.æ·»åŠ ä¾èµ– https://developer.android.google.cn/topic/libraries/architecture/adding-components.html å€¼å¾—æ³¨æ„çš„æ˜¯,å¦‚æœä½ åœ¨kotlinä¸­ä½¿ç”¨ 12345678910apply plugin: 'kotlin-kapt'...dependencies&#123; ... //è¿™ä¸ªæ— æ³•ç”Ÿæˆä»£ç ,è¦ç”¨ä¸‹é¢çš„é‚£ä¸€æ¡,ä¸è¦ç–å¿½å¿˜æ‰äº†. //annotationProcessor \"android.arch.persistence.room:compiler:1.0.0\" kapt \"android.arch.persistence.room:compiler:1.0.0\"&#125; ä¸€å®šè®°å¾—ä½¿ç”¨kapt,è¦ä¸ç„¶å°±ä¼šé‡åˆ°è¿™ä¸ªBUG. 2.åˆ›å»ºè¡¨ User.javaè¡¨ 1234567891011/** * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2018/1/3 ä¸‹åˆ1:31 */@Entity(tableName = \"users\")public class User &#123; @PrimaryKey public int id; public String name; public int age;&#125; @Entity ä¸­æŒ‡å®šäº†è¡¨å @PrimaryKey ä¸»é”® è¿™å¼ è¡¨users ç”¨äºä¿å­˜ç”¨æˆ·æ•°æ® Book.javaè¡¨ 123456789101112131415161718/** * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2018/1/3 ä¸‹åˆ1:30 */@Entity(foreignKeys = &#123; @ForeignKey( entity = User.class, parentColumns =&#123;\"id\"&#125;, childColumns = &#123;\"userId\"&#125;)&#125;,tableName = \"books\")public class Book &#123; @PrimaryKey public int bookId; public int userId;//åŒUser.javaä¸­çš„id public String book; public String desc;&#125; @Entity ä¸­ foreignKeys = {} ä¸­å¤–é”®,å¯ä»¥æ˜¯å¤šä¸ª,è¿™é‡Œåªå…³è”äº†Userè¡¨ tableName = â€œbooksâ€ æŒ‡å®šäº†è¡¨å @PrimaryKey è¯¥è¡¨ä¸»é”® â€‹ â€‹ UserAndBook.javaè¡¨ â€”-UserAndBookåªæ˜¯è¾…åŠ©,ä¸ä½œä¸ºä¸€å¼ è¡¨å­˜åœ¨. 12345678910111213/** * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2018/1/3 ä¸‹åˆ1:43 */public class UserAndBook &#123; @Embedded //è¯·çœ‹ä¹‹å‰çš„æ–‡ç« ,è¿™æ˜¯æŒ‡æŠŠUserä¸­æ‰€æœ‰å…ƒç´ å¸¦å…¥åˆ°è¿™é‡Œä½œä¸ºå…ƒç´ å­˜åœ¨ public User userEntity; //@Relation @Relation(parentColumn = \"id\",entityColumn = \"userId\",entity = Book.class) public List&lt;Book&gt; books;&#125; @Embedded è¯·çœ‹å¦ä¸€ç¯‡,æœ‰è§£é‡Š â€‹ @Relation ç‚¹è¿™é‡Œå»çœ‹å®˜æ–¹æ–‡æ¡£ A convenience annotation which can be used in a Pojo to automatically fetch relation entities. When the Pojo is returned from a query, all of its relations are also fetched by Room. ä¸ªäººä»¥ä¸ºå°±æ˜¯ä¸€æ³¨è§£,æŒ‡æ˜å…³ç³»,å¯ä»¥æŠŠå®ä½“å…³è”èµ·æ¥,ç„¶åè‡ªåŠ¨ç»„è£…èµ·æ¥. â€‹ å¹¶ä¸”åœ¨æ–‡æ¡£ä¸­è¿˜å±•ç¤ºäº†ä¸€ç§é«˜ç«¯çš„åŠŸèƒ½,ç”¨ä¸Šé¢åšä¾‹ 1234//@Relation @Relation(parentColumn = \"id\",entityColumn = \"userId\", entity = Book.class ,projection = &#123;\"book\"&#125;) public List&lt;String&gt; bookNames; è§£é‡Šä¸€ä¸‹,projectionæŒ‡å®šäº†è¦å–å‡ºçš„å€¼,å½“å‰æŒ‡æ˜è¦åœ¨ booksè¡¨ä¸­å¯»æ‰¾ç¬¦åˆæ¡ä»¶parentColumn = â€œidâ€,entityColumn = â€œuserIdâ€ çš„é¡¹,æ‰¾åˆ°ä¹‹åä¼šæ‹¿åˆ°bookè¿™ä¸ªå€¼å¹¶è¿”å›. 3.Daoå®ç° 12345678910111213141516171819202122/** * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2018/1/3 ä¸‹åˆ4:20 */@Daopublic abstract class UserAndBookDao &#123; @Insert(onConflict = OnConflictStrategy.REPLACE) public abstract void insert(User user); @Insert(onConflict = OnConflictStrategy.REPLACE) public abstract void insert(List&lt;Book&gt; books); @Transaction public void insert(UserAndBook userAndBook)&#123; insert(userAndBook.userEntity); insert(userAndBook.books); &#125; @Query(\"SELECT * FROM users\") public abstract List&lt;UserAndBook&gt; getAll();&#125; insert(User user); ,insert(List&lt;Book&gt; books); ä¸¤ä¸ªæ–¹æ³•,ä¹Ÿå¯ä»¥ç§æœ‰åŒ–,åªå¯¹å¤–æä¾›insert(UserAndBook userAndBook) æœ€è¿‘æ¢å…¬å¸é¡¹ç›®çš„æ•°æ®åº“,ç”¨sql,çœŸçš„æœ‰æ„æ€,å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°å¾ˆå¤šåŠŸèƒ½ 4.å»ºç«‹æ•°æ®åº“ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778/** * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2017/10/24 ä¸Šåˆ10:13 * æ•°æ®åº“ */@Database(entities = &#123;Book.class, User.class&#125;, version = 1, exportSchema = false)public abstract class AppDB extends RoomDatabase &#123; private static final String TAG = \"AppDB\"; /** * æ•°æ®åº“å®ä¾‹ */ private static AppDB sInstance; private static String DATABASE_NAME = \"developer.db\"; private ObservableBoolean mIsDatabaseCreated = new ObservableBoolean(false); public abstract UserAndBookDao userbook(); /** * å•ä¾‹ * @param context * @return */ public static AppDB getInstance(Context context) &#123; if (sInstance == null) &#123; synchronized (AppDB.class) &#123; if (sInstance == null) &#123; sInstance = buildDatabase(context); sInstance.updateDatabaseCreated(context); &#125; &#125; &#125; return sInstance; &#125; /** * Build the database. * creates a new instance of the database. */ private static AppDB buildDatabase(Context appContext) &#123; AppDB appDB = Room.databaseBuilder(appContext, AppDB.class, DATABASE_NAME) .addCallback(new Callback() &#123; @Override public void onCreate(@NonNull SupportSQLiteDatabase db) &#123; super.onCreate(db); AppDB database = AppDB.getInstance(appContext); database.setDatabaseCreated(); &#125; @Override public void onOpen(@NonNull SupportSQLiteDatabase db) &#123; super.onOpen(db); Log.e(TAG, \"onOpen: \" + db.getPath()); &#125; &#125;).build(); return appDB; &#125; /** * Check whether the database already exists and expose it via */ private void updateDatabaseCreated(final Context context) &#123; if (context.getDatabasePath(DATABASE_NAME).exists()) &#123; setDatabaseCreated(); &#125; &#125; private void setDatabaseCreated() &#123; mIsDatabaseCreated.set(true); &#125; public ObservableBoolean getDatabaseCreated() &#123; return mIsDatabaseCreated; &#125;&#125; ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨,åœ¨Applicationä¸­æ·»åŠ äº† 123public static AppDB getDatabase() &#123; return AppDB.getInstance(context);&#125; 5.ä½¿ç”¨ è¿™é‡Œçš„ä½¿ç”¨æ–¹å¼,ä¸å»ºè®®ä½¿ç”¨,å¤ªç²—æš´äº†. å¯ä»¥å­¦å­¦Demo,Googleå‡ºçš„googlesamples/android-architecture-components 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263class RoomActivity : BindingActivity&lt;ActivityRoomBinding, RoomViewModel&gt;() &#123; val gson = Gson() override fun getBundle(extras: Bundle) &#123; &#125; override fun layoutID(): Int = R.layout.activity_room override fun initViews(savedInstanceState: Bundle?) &#123; //ç‚¹å‡»äº‹ä»¶ ADDæŒ‰é’®,æ·»åŠ æ•°æ®åˆ°æ•°æ®åº“ mBindingView.button.setOnClickListener(&#123; val userBook = UserAndBook() val jsonStr = FileUtils.getJson(this, \"data.txt\") val objectJson = JsonParser().parse(jsonStr).asJsonObject //è·å–ç”¨æˆ· val user = objectJson.get(\"user\") userBook.userEntity = gson.fromJson&lt;User&gt;(user, User::class.java) //ä¿å­˜ç”¨æˆ· Observable .empty&lt;Any&gt;() .observeOn(Schedulers.io()) .subscribe(object : EmptyObserver&lt;Any?&gt;() &#123; override fun onComplete() &#123; App.getDatabase().userbook().insert(userBook.userEntity) &#125; &#125;) //è·å–ä¹¦ç± val books = objectJson.get(\"books\") userBook.books = gson.fromJson&lt;ArrayList&lt;Book&gt;&gt; (books, object : TypeToken&lt;List&lt;Book&gt;&gt;() &#123;&#125;.type) //ä¿å­˜ä¹¦ç± Observable .empty&lt;Any&gt;() .observeOn(Schedulers.io()) .subscribe(object : EmptyObserver&lt;Any?&gt;() &#123; override fun onComplete() &#123; App.getDatabase().userbook().insert(userBook.books) &#125; &#125;) &#125;) //ç‚¹å‡»äº‹ä»¶,æŒ‰é’®QUERY æŸ¥è¯¢æ•°æ® mBindingView.button2.setOnClickListener &#123; Flowable.create(FlowableOnSubscribe&lt;List&lt;UserAndBook&gt;&gt; &#123; e -&gt; val userBook = App.getDatabase().userbook().all e.onNext(userBook) e.onComplete() &#125;, BackpressureStrategy.DROP) .compose(DatabaseTransformer()) .subscribe(object : DatabaseSubscriber&lt;List&lt;UserAndBook&gt;&gt;() &#123; override fun onNext(userAndBooks: List&lt;UserAndBook&gt;) &#123; mBindingView.data = userAndBooks[0] &#125; &#125;) &#125; &#125;&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;data&gt; &lt;import type=\"com.wangzhumo.app.data.UserAndBook\"/&gt; &lt;import type=\"com.wangzhumo.app.data.User\"/&gt; &lt;import type=\"com.wangzhumo.app.data.Book\"/&gt; &lt;variable name=\"data\" type=\"com.wangzhumo.app.data.UserAndBook\"/&gt; &lt;/data&gt; &lt;RelativeLayout android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;Button android:id=\"@+id/button\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_alignParentLeft=\"true\" android:layout_alignParentStart=\"true\" android:layout_alignParentTop=\"true\" android:layout_marginLeft=\"57dp\" android:layout_marginStart=\"57dp\" android:layout_marginTop=\"125dp\" android:text=\"Add\" /&gt; &lt;Button android:id=\"@+id/button2\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_alignBaseline=\"@+id/button\" android:layout_alignBottom=\"@+id/button\" android:layout_alignParentEnd=\"true\" android:layout_alignParentRight=\"true\" android:layout_marginEnd=\"56dp\" android:layout_marginRight=\"56dp\" android:text=\"Query\" /&gt; &lt;RelativeLayout android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" android:layout_alignParentLeft=\"true\" android:layout_alignParentStart=\"true\" android:layout_below=\"@+id/button\" android:layout_marginTop=\"68dp\"&gt; &lt;TextView android:id=\"@+id/textView\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_alignParentLeft=\"true\" android:layout_alignParentStart=\"true\" android:layout_alignParentTop=\"true\" android:layout_marginLeft=\"36dp\" android:layout_marginStart=\"36dp\" android:layout_marginTop=\"32dp\" android:text=\"@&#123;data.userEntity.name&#125;\" /&gt; &lt;TextView android:id=\"@+id/textView2\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_alignLeft=\"@+id/textView\" android:layout_alignStart=\"@+id/textView\" android:layout_below=\"@+id/textView\" android:layout_marginTop=\"41dp\" android:text=\"@&#123;data.books.get(0).book&#125;\" /&gt; &lt;TextView android:id=\"@+id/textView3\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:layout_alignLeft=\"@+id/textView2\" android:layout_alignStart=\"@+id/textView2\" android:layout_centerVertical=\"true\" android:text=\"@&#123;data.books.get(0).desc&#125;\" /&gt; &lt;/RelativeLayout&gt; &lt;/RelativeLayout&gt;&lt;/layout&gt; â€‹ â€‹","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Room","slug":"Room","permalink":"http://www.wangzhumo.com/tags/Room/"}]},{"title":"Androidå­—ä½“ä¸è·Ÿéšç³»ç»Ÿå˜åŒ–","slug":"Androidå­—ä½“ä¸è·Ÿéšç³»ç»Ÿå˜åŒ–","date":"2017-12-28T07:30:11.000Z","updated":"2017-12-28T07:32:46.175Z","comments":true,"path":"Android/Androidå­—ä½“ä¸è·Ÿéšç³»ç»Ÿå˜åŒ–/","link":"","permalink":"http://www.wangzhumo.com/Android/Androidå­—ä½“ä¸è·Ÿéšç³»ç»Ÿå˜åŒ–/","excerpt":"","text":"å·²çŸ¥çš„æ–¹æ³•æœ‰ä¸¤ç§: ç¬¬ä¸€ç§ ä¸ä½¿ç”¨sp è€Œä½¿ç”¨ dp ç¬¬äºŒç§ åœ¨Applicationä¸­åŠ å…¥ 1234567891011121314151617@Overridepublic void onConfigurationChanged(Configuration newConfig) &#123; if (newConfig.fontScale != 1) getResources(); super.onConfigurationChanged(newConfig);&#125;@Overridepublic Resources getResources() &#123; Resources res = super.getResources(); if (res.getConfiguration().fontScale != 1) &#123; Configuration newConfig = new Configuration(); newConfig.setToDefaults(); res.updateConfiguration(newConfig, res.getDisplayMetrics()); &#125; return res;&#125;","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"Apk Install çš„å„ç§é—®é¢˜","slug":"Apk-Install-çš„å„ç§é—®é¢˜","date":"2017-12-28T06:48:09.000Z","updated":"2018-02-28T16:29:52.521Z","comments":true,"path":"Bug/Apk-Install-çš„å„ç§é—®é¢˜/","link":"","permalink":"http://www.wangzhumo.com/Bug/Apk-Install-çš„å„ç§é—®é¢˜/","excerpt":"","text":"[INSTALL_FAILED_TEST_ONLY: installPackageLI] æ–¹æ³•1ï¼šAndroidManifest.xml åŠ å…¥android:testOnly=â€falseâ€ã€‚ æ–¹æ³•2ï¼šadb install -t *.apk","categories":[{"name":"Bug","slug":"Bug","permalink":"http://www.wangzhumo.com/categories/Bug/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Bug","slug":"Bug","permalink":"http://www.wangzhumo.com/tags/Bug/"}]},{"title":"Android StudioæŠ¥é”™Error Running app: cannot debug application","slug":"Android-StudioæŠ¥é”™Error-Running-app-cannot-debug-application","date":"2017-12-26T07:26:29.000Z","updated":"2018-02-28T16:30:01.000Z","comments":true,"path":"Bug/Android-StudioæŠ¥é”™Error-Running-app-cannot-debug-application/","link":"","permalink":"http://www.wangzhumo.com/Bug/Android-StudioæŠ¥é”™Error-Running-app-cannot-debug-application/","excerpt":"","text":"Android StudioæŠ¥é”™Error Running app: cannot debug application è¿™é‡Œæœ‰ä¸€ä½ä»å…„å¸®å¿™ç¿»è¯‘äº†. http://blog.csdn.net/yishichangan1/article/details/77451486 1234567891011Cannot debug application xx.xxx.xxx.app on device lge_nexus_5x(æ­¤å¤„è¡¨ç¤ºä½ çš„æ‰‹æœºå‹å·).ä½ çš„xxxappä¸èƒ½åœ¨å‹å·ä¸ºNexus 5xçš„LGEæ‰‹æœºä¸Šè°ƒè¯•ã€‚This application does not have the debuggable attribute enabled in its manifest.è¿™ä¸ªé¡¹ç›®åœ¨æ¸…å•æ–‡ä»¶ï¼ˆAndroidManifest.xmlï¼‰ä¸­æ²¡æœ‰è®¾ç½®å¯ä»¥è°ƒè¯•çš„å‚æ•°ã€‚If you have manually set it in the manifest, then remove it and let the IDE automatically assign it.å¦‚æœä½ å·²ç»æ‰‹åŠ¨åœ¨æ¸…å•æ–‡ä»¶ç§è®¾ç½®äº†è¿™ä¸ªå±æ€§ï¼Œè¯·removeæ‰ï¼Œè®©IDEè‡ªåŠ¨ç”Ÿæˆã€‚If you are using Gradle, make sure that your current variant is debuggable.å¦‚æœä½ ä½¿ç”¨Gradleï¼Œç¡®è®¤ä½ ç°åœ¨çš„å˜ä½“æ˜¯å¯è°ƒè¯•çš„ã€‚ ####æˆ‘å°±çŸ¥é“æ˜¯æˆ‘è‡ªå·±é€‰äº†releaseâ€¦.æœç„¶","categories":[{"name":"Bug","slug":"Bug","permalink":"http://www.wangzhumo.com/categories/Bug/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Android Studio","slug":"Android-Studio","permalink":"http://www.wangzhumo.com/tags/Android-Studio/"},{"name":"Bug","slug":"Bug","permalink":"http://www.wangzhumo.com/tags/Bug/"}]},{"title":"Centos åˆ›å»ºç”¨æˆ·å¹¶å®ç°å…å¯†ç ç™»å½•","slug":"Centos åˆ›å»ºç”¨æˆ·å¹¶å®ç°å…å¯†ç ç™»å½•","date":"2017-12-25T08:25:04.000Z","updated":"2017-12-25T08:34:09.109Z","comments":true,"path":"Server/Centos åˆ›å»ºç”¨æˆ·å¹¶å®ç°å…å¯†ç ç™»å½•/","link":"","permalink":"http://www.wangzhumo.com/Server/Centos åˆ›å»ºç”¨æˆ·å¹¶å®ç°å…å¯†ç ç™»å½•/","excerpt":"","text":"æ¯”å¦‚,åˆ›å»ºä¸€ä¸ªåä¸ºwzmçš„è´¦å· ####åˆ›å»ºè´¦å· 1.åˆ›å»º 1234[root@localhost ~]# adduser wzm[root@localhost ~]# passwd wzm#æ­¤æ—¶,è¾“å…¥ä¸¤æ¬¡å¯†ç å³å¯ 2.èµ‹äºˆsudo 1234567891011121314#æ‰¾åˆ°sudoers[root@localhost ~]# whereis sudoers#ä¿®æ”¹sudoersçš„è¯»å†™æƒé™[root@localhost ~]# chmod -v u+w /etc/sudoers#åŠ å…¥æ–°ç”¨æˆ·## Allow root to run any commands anywher root ALL=(ALL) ALL linuxidc ALL=(ALL) ALL #è¿™ä¸ªæ˜¯æ–°å¢çš„ç”¨æˆ·#æŠŠsudoersæƒé™è¿˜ç»™ä»–[root@localhost ~]# chmod -v u-w /etc/sudoers 3.å°½æƒ…äº«ç”¨å§ ####sshå…å¯†ç ç™»å½• 1.ä¿®æ”¹é…ç½®æ–‡ä»¶sudo vim /etc/ssh/sshd_config 2.é‡å¯sshæœåŠ¡service sshd restart 3.ç”Ÿæˆå¯†é’¥1234ssh-keygen -t rsa é»˜è®¤åœ¨ ~/.sshç›®å½•ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š id_rsa ï¼šç§é’¥ id_rsa.pub ï¼šå…¬é’¥ 4.å¯¼å…¥æœ¬æœºcat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys 5.ä¸‹è½½åˆ°å®¢æˆ·ç«¯å¹¶è®¾ç½®12345678910scp [-r] ç”¨æˆ·å@ip:æ–‡ä»¶è·¯å¾„ æœ¬åœ°è·¯å¾„#ä¸‹è½½æ–‡ä»¶scp [-r] æœ¬åœ°æ–‡ä»¶ ç”¨æˆ·å@ip:ä¸Šä¼ è·¯å¾„ eg:~/.ssh âŒš 16:27:33$ scp id_rsa.pub root@45.XX.XX.XX:/home/id_rsa.pub 6.æ”¹æƒé™å¦‚æœå¸Œæœ›sshå…¬é’¥ç”Ÿæ•ˆéœ€æ»¡è¶³è‡³å°‘ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼š 1) .sshç›®å½•çš„æƒé™å¿…é¡»æ˜¯7002) .ssh/authorized_keysæ–‡ä»¶æƒé™å¿…é¡»æ˜¯600 eg: 1234~ âŒš 16:33:21$ ssh wzm@45.XX.XX.XXLast login: Mon Dec 25 16:21:11 2017 from 118.102.XXX.XXX[wzm@wangzhumo ~]$","categories":[{"name":"Server","slug":"Server","permalink":"http://www.wangzhumo.com/categories/Server/"}],"tags":[{"name":"Server","slug":"Server","permalink":"http://www.wangzhumo.com/tags/Server/"},{"name":"Linux","slug":"Linux","permalink":"http://www.wangzhumo.com/tags/Linux/"}]},{"title":"Androidé¡¹ç›®ä¸­ä½¿ç”¨RxBusè¿›è¡Œé€šè®¯","slug":"Androidé¡¹ç›®ä¸­ä½¿ç”¨RxBusè¿›è¡Œé€šè®¯","date":"2017-12-25T06:50:16.000Z","updated":"2017-12-25T08:19:44.694Z","comments":true,"path":"Android/Androidé¡¹ç›®ä¸­ä½¿ç”¨RxBusè¿›è¡Œé€šè®¯/","link":"","permalink":"http://www.wangzhumo.com/Android/Androidé¡¹ç›®ä¸­ä½¿ç”¨RxBusè¿›è¡Œé€šè®¯/","excerpt":"","text":"åŠ å…¥JakeWhartonå¤§ç¥çš„RxRelay JakeWharton/RxRelay1compile &apos;com.jakewharton.rxrelay2:rxrelay:2.0.0&apos; RxBus.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394/** * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2017/11/30 ä¸‹åˆ6:09 * */public class RxBus &#123; private Relay&lt;Object&gt; mBus = null; private static volatile RxBus mDefaultInstance; public RxBus() &#123; mBus = PublishRelay.create().toSerialized(); &#125; public static RxBus getDefault() &#123; if (mDefaultInstance == null) &#123; synchronized (RxBus.class) &#123; if (mDefaultInstance == null) &#123; mDefaultInstance = new RxBus(); &#125; &#125; &#125; return mDefaultInstance; &#125; /** * å‘é€äº‹ä»¶ */ public void post(Object event) &#123; mBus.accept(event); &#125; /** * æ ¹æ®ä¼ é€’çš„ eventType ç±»å‹è¿”å›ç‰¹å®šç±»å‹(eventType)çš„ è¢«è§‚å¯Ÿè€… */ public &lt;T&gt; Observable&lt;T&gt; toObservable(Class&lt;T&gt; eventType) &#123; return mBus.ofType(eventType); &#125; /** * åˆ¤æ–­æ˜¯å¦æœ‰è®¢é˜…è€… */ public boolean hasObservers() &#123; return mBus.hasObservers(); &#125; /** * å–æ¶ˆè®¢é˜… * @param disposable */ public void unregister(Disposable disposable) &#123; if (disposable != null &amp;&amp; !disposable.isDisposed()) &#123; disposable.dispose(); &#125; &#125; public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Scheduler scheduler, Consumer&lt;T&gt; onNext) &#123; return toObservable(eventType).observeOn(scheduler).subscribe(onNext); &#125; public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Scheduler scheduler, Consumer&lt;T&gt; onNext, Consumer onError, Action onComplete, Consumer onSubscribe) &#123; return toObservable(eventType).observeOn(scheduler).subscribe(onNext, onError, onComplete, onSubscribe); &#125; public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Scheduler scheduler, Consumer&lt;T&gt; onNext, Consumer onError, Action onComplete) &#123; return toObservable(eventType).observeOn(scheduler).subscribe(onNext, onError, onComplete); &#125; public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Scheduler scheduler, Consumer&lt;T&gt; onNext, Consumer onError) &#123; return toObservable(eventType).observeOn(scheduler).subscribe(onNext, onError); &#125; public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Consumer&lt;T&gt; onNext) &#123; return toObservable(eventType).observeOn(AndroidSchedulers.mainThread()).subscribe(onNext); &#125; public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Consumer&lt;T&gt; onNext, Consumer onError, Action onComplete, Consumer onSubscribe) &#123; return toObservable(eventType).observeOn(AndroidSchedulers.mainThread()).subscribe(onNext, onError, onComplete, onSubscribe); &#125; public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Consumer&lt;T&gt; onNext, Consumer onError, Action onComplete) &#123; return toObservable(eventType).observeOn(AndroidSchedulers.mainThread()).subscribe(onNext, onError, onComplete); &#125; public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Consumer&lt;T&gt; onNext, Consumer onError) &#123; return toObservable(eventType).observeOn(AndroidSchedulers.mainThread()).subscribe(onNext, onError); &#125;&#125; è¿˜æœ‰ä¸€ä¸ªé€šç”¨çš„Event.javaä¾æ®è‡ªå·±çš„éœ€è¦åˆ¶å®šå³å¯ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/** * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2017/10/19 ä¸‹åˆ5:38 * * å‘é€äº‹ä»¶åŒ…è£…ç±» */public class Event&lt;T&gt; &#123; public static final int EVENT_CLOSE_ALL_ACTIVITY = 10001; /** * reserved data */ private T data; /** * this code distinguish between different events */ private int eventCode = -1; public Event(int eventCode) &#123; this(eventCode, null); &#125; public Event(int eventCode, T data) &#123; this.eventCode = eventCode; this.data = data; &#125; /** * get event code * * @return */ public int getCode() &#123; return this.eventCode; &#125; /** * get event reserved data * * @return */ public T getData() &#123; return this.data; &#125;&#125; RxBusçš„ä½¿ç”¨ æ³¨å†Œ æœ€å¥½æ˜¯å†åŸºç±»ä¸­,åŠ ä¸Š. 1234567891011121314151617181920if (useEventBus()) &#123; //æ³¨å†Œeventbus Disposable disposable = RxBus.getDefault() .register(Event.class, new Consumer&lt;Event&gt;() &#123; @Override public void accept(Event event) &#123; int eventCode = event.getCode(); Log.e(&quot;RxBus&quot;, event.toString()); switch (eventCode) &#123; case Event.EVENT_CLOSE_ALL_ACTIVITY: break; default: onEvent(event); break; &#125; &#125; &#125;); addDispose(disposable);&#125; å…¶ä¸­: useEventBus()ç”±å­ç±»å®ç°,æ˜¯å¦å¼€å¯RxBus,é¿å…æµªè´¹ addDispose(disposable);addDispose æ˜¯åŸºç±»çš„æ–¹æ³• 12345678910/** * RxJava æ·»åŠ è®¢é˜… */protected void addDispose(Disposable disposable) &#123; if (mDisposables == null) &#123; mDisposables = new CompositeDisposable(); &#125; //å°†æ‰€æœ‰disposableæ”¾å…¥,é›†ä¸­å¤„ç† mDisposables.add(disposable);&#125; ç»Ÿä¸€ç®¡ç†,é”€æ¯æ—¶ä¸€èµ·é”€æ¯,é¿å…çˆ†å†…å­˜ onEvent(event);æ˜¯ä¸€ä¸ªç©ºæ–¹æ³•,å¦‚æœå­ç±»é‡å†™å°±æŠŠäº‹ä»¶äº¤ç»™å­ç±»å¤„ç† å‘é€ 123RxBus.getDefault().post(new Event(100,&quot;message&quot;))//codeæœ€å¥½åœ¨Event.javaä¸­ç»Ÿä¸€å®šä¹‰,æ–¹ä¾¿ç®¡ç† å¤„ç† 12345override fun onEvent(event: Event&lt;*&gt;?) &#123; super.onEvent(event) &#125; è¿™ä¸€éƒ¨åˆ†,å…¶å®åœ¨ æ³¨å†Œ ä¸­å·²ç»å®Œæˆ,åªè¦å­ç±»è‡ªå·±é‡å†™æ–¹æ³•,å°±èƒ½å–åˆ°æ•°æ®","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Rxjava","slug":"Rxjava","permalink":"http://www.wangzhumo.com/tags/Rxjava/"}]},{"title":"Nginxå®‰è£…åŠå…¶ç®€å•é…ç½®","slug":"Nginxå®‰è£…åŠå…¶ç®€å•é…ç½®","date":"2017-12-25T05:39:40.000Z","updated":"2017-12-25T06:03:27.000Z","comments":true,"path":"Server/Nginxå®‰è£…åŠå…¶ç®€å•é…ç½®/","link":"","permalink":"http://www.wangzhumo.com/Server/Nginxå®‰è£…åŠå…¶ç®€å•é…ç½®/","excerpt":"","text":"ç¯å¢ƒ: centos7 1.ä¸‹è½½å®‰è£… ä¸‹è½½nginx-1.12.0,å®˜ç½‘sudo wget http://nginx.org/download/nginx-1.12.0.tar.gz è§£å‹sudo tar -zxvf nginx-1.12.0.tar.gz å…¶ä»–çš„åº“,nginxä¾èµ–çš„åº“ å®‰è£…gccyum -y install gcc å®‰è£…pcreyum -y install pcre pcre-devel å®‰è£…zlibyum -y install zlib zlib-devel å®‰è£…opensslyum -y install openssl openssl-devel å®‰è£… 12345sudo ./configure sudo make sudo make install é»˜è®¤ä½ç½® /usr/local/nginx å¦‚æœå®‰è£…è¿‡ç¨‹ä¸­å‡ºç°æ–‡ä»¶ç›®å½•æƒé™é—®é¢˜,ç™¾åº¦å³å¯è§£å†³. 2.ç³»ç»Ÿä¸­é…ç½® 1.åœ¨ç³»ç»ŸæœåŠ¡ç›®å½•é‡Œåˆ›å»ºnginx.serviceæ–‡ä»¶ 1vim /lib/systemd/system/nginx.service 12345678910111213[Unit]Description=nginxAfter=network.target [Service]Type=forkingExecStart=/usr/local/nginx/sbin/nginxExecReload=/usr/local/nginx/sbin/nginx -s reloadExecStop=/usr/local/nginx/sbin/nginx -s quitPrivateTmp=true [Install]WantedBy=multi-user.target 2.è®¾ç½®å¼€æœºå¯åŠ¨ systemctl enable nginx.service 3.å…¶ä»–å‘½ä»¤ å¯åŠ¨nginxæœåŠ¡systemctl start nginx.service è®¾ç½®å¼€æœºè‡ªå¯åŠ¨systemctl enable nginx.service åœæ­¢å¼€æœºè‡ªå¯åŠ¨systemctl disable nginx.service æŸ¥çœ‹æœåŠ¡å½“å‰çŠ¶æ€systemctl status nginx.service é‡æ–°å¯åŠ¨æœåŠ¡systemctl restart nginx.service æŸ¥çœ‹æ‰€æœ‰å·²å¯åŠ¨çš„æœåŠ¡ systemctl list-units --type=service 3.nginx.confçš„é…ç½® 12345678910111213[root@wangzhumo hooks]# cd /usr/local/nginx/[root@wangzhumo nginx]# lltotal 96drwx------ 2 root root 4096 Dec 24 20:57 client_body_tempdrwxr-xr-x 3 root root 4096 Dec 24 23:24 confdrwx------ 2 root root 4096 Dec 24 20:57 fastcgi_tempdrwxr-xr-x 2 root root 4096 Dec 23 10:38 htmldrwxr-xr-x 2 root root 4096 Dec 24 22:43 logs-rw-r--r-- 1 root root 53861 Dec 25 13:37 ondrwx------ 2 root root 4096 Dec 24 20:57 proxy_tempdrwxr-xr-x 2 root root 4096 Dec 23 10:38 sbindrwx------ 2 root root 4096 Dec 24 20:57 scgi_tempdrwx------ 2 root root 4096 Dec 24 20:57 uwsgi_temp å…¶ä¸­/confå­˜æ”¾é…ç½®æ–‡ä»¶/conf/nginx.confvim /conf/nginx.conf ä»€ä¹ˆéƒ½ä¸è¦åŠ¨,åœ¨nginx.confç¬¬ä¸€æ¡serveré…ç½®ä¸‹é¢å†™å…¥:include vhost/*.conf; 123456789101112131415161718&#125;#æ­¤å¤„æ˜¯ç¬¬ä¸€æ¡å¯ç”¨çš„serverçš„ç»“æŸ #åŠ å…¥è¿™å¥,å…¶å®æ˜¯æŠŠå…¶ä»–åœ°æ–¹é…ç½®çš„é…ç½®æ–‡ä»¶åŠ è½½åˆ°é‡Œé¢æ¥ #ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†,ä¿®æ”¹ include vhost/*.conf; # another virtual host using mix of IP-, name-, and port-based configuration # #server &#123; # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / &#123; # root html; # index index.html index.htm; # &#125; #&#125; 3.1 /vhost/*.confçš„é…ç½® å½“å‰ç›®å½•åˆ°cd /usr/local/nginx/conf åˆ›å»ºç›®å½•vhostmkdir /usr/local/nginx/conf/vhost åˆ›å»º.confæ–‡ä»¶(æˆ‘åªç”¨åˆ°hexoçš„é…ç½®,æ‰€ä»¥åªæœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶)vim /usr/local/nginx/conf/vhost/hexo.conf 12345678910111213141516171819202122232425262728server&#123; listen 80; #listen [::]:80; server_name www.phyooos.top phyooos.top; index index.html index.htm index.php default.html default.htm default.php; #web root path root /home/wzm/hexo; #error_page 404 /404.html; location ~ .*\\.(ico|gif|jpg|jpeg|png|bmp|swf)$ &#123; access_log on; expires 1d; &#125; location ~ .*\\.(js|css|txt|xml)?$ &#123; access_log on; expires 12h; &#125; location / &#123; try_files $uri $uri/ =404; &#125; access_log /usr/local/nginx/logs/hexo.log combined;&#125; 4.é‡å¯systemctl reload nginx åœ¨å¤–é¢è®¿é—®å³å¯","categories":[{"name":"Server","slug":"Server","permalink":"http://www.wangzhumo.com/categories/Server/"}],"tags":[{"name":"Server","slug":"Server","permalink":"http://www.wangzhumo.com/tags/Server/"},{"name":"Linux","slug":"Linux","permalink":"http://www.wangzhumo.com/tags/Linux/"}]},{"title":"Roomæ•°æ®åº“ä½¿ç”¨æŒ‡åŒ—List<>çš„é—®é¢˜","slug":"Roomæ•°æ®åº“ä½¿ç”¨æŒ‡åŒ—List<>çš„é—®é¢˜","date":"2017-12-25T05:08:10.000Z","updated":"2018-01-09T07:15:26.000Z","comments":true,"path":"Android/Roomæ•°æ®åº“ä½¿ç”¨æŒ‡åŒ—List<>çš„é—®é¢˜/","link":"","permalink":"http://www.wangzhumo.com/Android/Roomæ•°æ®åº“ä½¿ç”¨æŒ‡åŒ—List<>çš„é—®é¢˜/","excerpt":"","text":"Roomä¾èµ– 12implementation &quot;android.arch.persistence.room:runtime:1.0.0&quot;annotationProcessor &quot;android.arch.persistence.room:compiler:1.0.0&quot; æŸ¥æ‰¾ æŸ¥æ‰¾è¡¨ä¸­æ‰€æœ‰æ•°æ® 123456/** * æŸ¥æ‰¾user * @return */ @Query(&quot;SELECT * FROM banners&quot;) List&lt;BannerModel&gt; findBanners(); æŒ‰æ¡ä»¶æŸ¥æ‰¾ 1234567/** * filters * @return * @param typeSort */@Query(&quot;SELECT * FROM filters WHERE type != :typeSort&quot;)List&lt;FilterItemModel&gt; findFilters(String typeSort); é™åˆ¶æ¡æ•°çš„æ¡ä»¶æŸ¥æ‰¾ 123456/** * è·å–æ’åº * @return */@Query(&quot;SELECT * FROM filters WHERE type = :name LIMIT 0,1&quot;)FilterItemModel findSort(String name); ç°åœ¨è·å–çš„æ˜¯ç¬¬ä¸€æ¡æ•°æ® //æ–‡æ¡£ä¸­çš„ä¾‹å­ 12345@Daopublic interface MyDao &#123; @Query(&quot;SELECT first_name, last_name FROM user WHERE region IN (:regions)&quot;) public List&lt;NameTuple&gt; loadUsersFromRegions(List&lt;String&gt; regions);&#125; åœ¨userè¡¨ä¸­æŸ¥æ‰¾æ»¡è¶³é›†åˆList regionsä¸­æ¡ä»¶çš„å…ƒç´  è·å–æ€»è¡Œæ•° 123456/** * è·å–æ•°æ®åº“è¡¨ä¸­æ€»æ¡æ•° * @return */@Query(&quot;SELECT count(*) FROM search_history&quot;)long findHistoryCount(); è·å–æŸä¸€åˆ—çš„å’Œ 123456/** * æ±‚å’Œ * @return */@Query(&quot;SELECT sum(count) FROM status_stock&quot;)long findStatusStockCount(); æŒ‰ç…§é™åºæ’åˆ—(ASCå‡åº DESCé™åº) 123456/** * æŸ¥æ‰¾user * @return */@Query(&quot;SELECT * FROM search_history ORDER BY time DESC&quot;)List&lt;SearchHistoryModel&gt; findSearchHistory(); æ–‡æ¡£ä¸­çš„ä¾‹å­: 123456789101112131415161718192021@Daopublic interface MyDao &#123; //æ­£å¸¸çš„æŸ¥è¯¢ @Query(&quot;SELECT * FROM user WHERE age != :minAge&quot;) public User[] loadAllUsersOlderThan(int minAge);&#125;@Daopublic interface MyDao &#123; //åŒºé—´ä¸­çš„å€¼ @Query(&quot;SELECT * FROM user WHERE age BETWEEN :minAge AND :maxAge&quot;) public User[] loadAllUsersBetweenAges(int minAge, int maxAge); //æˆ–å…³ç³»çš„æŸ¥è¯¢ @Query(&quot;SELECT * FROM user WHERE first_name LIKE :search &quot; + &quot;OR last_name LIKE :search&quot;) public List&lt;User&gt; findUserWithName(String search);&#125; å¦‚æœ,ä½ ä¸æƒ³æŸ¥åˆ°è¡¨ è¡Œä¸­æ‰€æœ‰å­—æ®µ,åˆ™1.å®šä¹‰ä¸€ä¸ªå®ä½“1234567public class NameTuple &#123; @ColumnInfo(name=&quot;first_name&quot;) public String firstName; @ColumnInfo(name=&quot;last_name&quot;) public String lastName;&#125; 2.æŸ¥è¯¢12345@Daopublic interface MyDao &#123; @Query(&quot;SELECT first_name, last_name FROM user&quot;) public List&lt;NameTuple&gt; loadFullName();&#125; å¤šè¡¨æŸ¥è¯¢Querying multiple tables 123456789101112131415@Daopublic interface MyDao &#123; @Query(&quot;SELECT user.name AS userName, pet.name AS petName &quot; + &quot;FROM user, pet &quot; + &quot;WHERE user.id = pet.user_id&quot;) public LiveData&lt;List&lt;UserPet&gt;&gt; loadUserAndPetNames(); // You can also define this class in a separate file, as long as you add the // &quot;public&quot; access modifier. //æ³¨æ„ public static class UserPet &#123; public String userName; public String petName; &#125;&#125; æ›´æ–° æ›´æ–°æŒ‡å®šæ¡ç›® 123456/** * æ›´æ–°æ—¶é—´ * @param time */@Query(&quot;UPDATE search_history SET time = :time WHERE content = :content&quot;)void updateSearchHistory(String content,long time); åˆ é™¤æ•°æ® åˆ é™¤æ‰€æœ‰æ•°æ® 123456/** * åˆ é™¤è¡¨ * @return */@Query(&quot;DELETE FROM filters&quot;)void delectFilters(); åˆ é™¤æœ€åä¸€æ¡ 123456/** * åˆ é™¤æœ€åä¸€ä¸ª * @return */@Query(&quot;DELETE FROM search_history WHERE time in(SELECT time FROM search_history ORDER BY time ASC LIMIT 1 )&quot;)void delectLastHistory(); æŒ‰æ¡ä»¶åˆ é™¤ 123456/** * åˆ é™¤è¡¨by listtype * @return */@Query(&quot;DELETE FROM vehicle_model WHERE listType = :type&quot;)void delectVehicleByType(String type); ####è¡¥å…… 1.List&lt;String&gt;è¿™æ ·çš„å…ƒç´ 1private ArrayList&lt;String&gt; tags; è¿™æ ·çš„å…ƒç´ ,å¯ä»¥é€šè¿‡Converteræå®š 12345678910111213141516171819202122/*** If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;** @author ç‹è¯›é­” 2017/12/27 ä¸Šåˆ11:51*/public class TagsConverter &#123; @TypeConverter public static ArrayList&lt;String&gt; fromString(String value) &#123; Type listType = new TypeToken&lt;ArrayList&lt;String&gt;&gt;() &#123;&#125;.getType(); return new Gson().fromJson(value, listType); &#125; @TypeConverter public static String fromArrayList(ArrayList&lt;String&gt; list) &#123; Gson gson = new Gson(); String json = gson.toJson(list); return json; &#125;&#125; åœ¨dbä¸­,ä¼šå­˜ä¸º 123[&quot;ç²¾é€‰&quot;][&quot;ç²¾é€‰&quot;,&quot;æ€¥å”®&quot;][&quot;å‡†æ–°&quot;,&quot;SUV&quot;] 3.@Embedded ä½œç”¨æ˜¯,æŠŠå·²ç»å†™å¥½çš„æ™®é€šçš„ç±»æ·»åŠ åˆ°æ•°æ®è¡¨ä¸­.ç”¨Roomçš„æ–‡æ¡£åšè¯´æ˜: 123456789//è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ•°æ®è¡¨@Entityclass User &#123; @PrimaryKey public int id; public String firstName;&#125; å…¶ä¸­åªæœ‰id , firstName è€Œæˆ‘æƒ³æ·»åŠ  street; state; city; postCode;åˆšå¥½ä¹‹å‰å†™äº†ä¸€ä¸ªç±»å«Address 123456789class Address &#123; public String street; public String state; public String city; @Ignore public String nothing; @ColumnInfo(name = &quot;post_code&quot;) public int postCode;&#125; é‚£ä¹ˆæˆ‘é€šè¿‡ @Embedded 12345678910@Entityclass User &#123; @PrimaryKey public int id; public String firstName; @Embedded public Address address;&#125; è¡¨ä¸­å°±ä¼šæœ‰:names: id, firstName, street, state, city, and post_code å¦‚æœä½ æƒ³ç»™@Embeddedçš„ç±»ä¸­æ‰€æœ‰å…ƒç´ å‰é¢åŠ ä¸Šç»Ÿä¸€çš„æ ‡å¿— @Embedded(prefix = &quot;address_&quot;) è¡¨ä¸­å°±ä¼šæœ‰: names: id, firstName, address_street, address_state, address_city, and address_post_code 3.List&lt;Object&gt;è¿™æ ·çš„æ•°æ® è§£å†³æ–¹æ³•google developer çœŸçš„ç»™è°·æ­Œè·ªäº†,ä»€ä¹ˆé¬¼æ–‡æ¡£ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061@Entitypublic class User &#123; // è¿™é‡Œæ˜¯ç”¨æˆ·çš„ Id @PrimaryKey public int id; //çœç•¥ ...&#125;@Entitypublic class Book &#123; //ä¹¦çš„id @PrimaryKey public int bookId; //è¿™é‡Œå°±æ˜¯è¿™æœ¬ä¹¦ä¸ \bUser\bçš„å…³ç³»,è¿™é‡Œçš„æ˜¯User.id public int userId; public String name; public String desc;&#125;//æ³¨æ„,ä»€ä¹ˆæ³¨è§£ä¹Ÿä¸è¦åŠ public class UserAndBooks &#123; //åŠ å…¥æ‰€æœ‰çš„userçš„å±æ€§ @Embedded public User user; //è¿™é‡Œå®šä¹‰User å’Œ Bookçš„å…³ç³» @Relation(parentColumn = &quot;id&quot;, entityColumn = &quot;userId&quot;, entity = Book.class) public List&lt;Book&gt; books; &#125;//æ–‡æ¡£ä¸Šè¿˜è®²äº†ä¸€ä¸ªæ¯”è¾ƒç‰›é€¼çš„åŠŸèƒ½,è¿™é‡Œä¸è®¨è®ºpublic class UserAndAllPets &#123; @Embedded public User user; @Relation(parentColumn = &quot;id&quot;, entityColumn = &quot;userId&quot;, entity = Book.class, projection = &#123;&quot;name&quot;&#125;) public List&lt;String&gt; bookNames; &#125;//ç„¶å,daoæ˜¯è¿™æ ·çš„@Daopublic interface UserDao &#123; @Query(&quot;SELECT * FROM User&quot;) public List&lt;UserAndBooks&gt; loadUserWithBooks();&#125;PS:å½“ç„¶ä½ å­˜çš„æ—¶å€™,åˆ†è¾¨åˆ«å­˜User å’Œ Book å³å¯","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Room","slug":"Room","permalink":"http://www.wangzhumo.com/tags/Room/"}]},{"title":"Retrofit2 + Okhttp3 + Rxjava2 ç½‘ç»œè¯·æ±‚å°è£…(ä¸‹)","slug":"Retrofit2-Okhttp3-Rxjava2-ç½‘ç»œè¯·æ±‚å°è£…-ä¸‹","date":"2017-12-25T04:51:47.000Z","updated":"2017-12-25T08:19:07.794Z","comments":true,"path":"Android/Retrofit2-Okhttp3-Rxjava2-ç½‘ç»œè¯·æ±‚å°è£…-ä¸‹/","link":"","permalink":"http://www.wangzhumo.com/Android/Retrofit2-Okhttp3-Rxjava2-ç½‘ç»œè¯·æ±‚å°è£…-ä¸‹/","excerpt":"","text":"1234567891011121314151617181920//è¯·æ±‚:RetrofitApis.getNetworkApis().getFriendsCircle(userBean.token, String.valueOf(45),null,lastId) .compose(new DefaultTransformer&lt;&gt;()) .subscribe(new Defaultubscriber&lt;List&lt;FriendItem&gt;&gt;() &#123; @Override protected void onError(ApiException ex) &#123; //è¯·æ±‚é”™è¯¯,exä¸­å¯ä»¥æ‹¿åˆ°code å’Œ msg ä¾¿äºå±•ç¤ºç»™ç”¨æˆ· &#125; @Override public void onNext(List&lt;FriendItem&gt; friends) &#123; //è¯·æ±‚æˆåŠŸ,friendså°±æ˜¯æ•°æ® &#125; @Override public void onComplete() &#123; //æ²¡æœ‰é”™è¯¯çš„è¯,\bæœ€åä¼šèµ°ç€ &#125;&#125;); compose() è½¬åŒ–subscribe() è®¢é˜… DefaultTransformer.java 1234567891011121314151617/** * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2017/11/3 ä¸‹åˆ5:06 * * é»˜è®¤çš„åˆ‡æ¢çº¿ç¨‹,å¹¶è¿”å›å®ä½“ç±» */public class DefaultTransformer&lt;T extends ResultResponse&lt;RP&gt;, RP&gt; implements FlowableTransformer&lt;T, RP&gt; &#123; @Override public Publisher&lt;RP&gt; apply(Flowable&lt;T&gt; upstream) &#123; return upstream .map(t -&gt; t.getResult()) .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()); &#125;&#125; 1.map å°†è¿”å›çš„ResultResponse&lt;&gt; è½¬åŒ–,ç›´æ¥å–ResultResponseçš„æ³›å‹å®ä½“1234&#123;&quot;result&quot;:&#123;&#125;&quot;code&quot;:&quot;&quot;,&quot;msg&quot;:&quot;&quot;&#125; ä¸­çš„result 2.subscribeOn(Schedulers.io()) ç½‘ç»œè¯·æ±‚çš„è€—æ—¶æ“ä½œ,æ”¾åœ¨æ–¹ä¾¿ioæ“ä½œçš„çº¿ç¨‹é‡Œé¢3.observeOn(AndroidSchedulers.mainThread()) åé¢çš„æ“ä½œ,éƒ½åœ¨ä¸»çº¿ç¨‹è¿›è¡Œ Defaultubscriber.java 123456789101112131415161718192021222324252627282930313233343536373839/** * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2017/10/24 ä¸Šåˆ10:36 * * ç”¨äºæ²¡æœ‰ç½‘ç»œæ—¶åœæ­¢ç½‘ç»œè¯·æ±‚ */public abstract class Defaultubscriber&lt;T&gt; extends DisposableSubscriber&lt;T&gt; &#123; @CallSuper @Override public void onError(Throwable e) &#123; if (e instanceof ApiException) &#123; onError((ApiException) e); &#125; else &#123; onError(new ApiException(&quot;&quot;,&quot;&quot;)); &#125; &#125; @Override protected void onStart() &#123; if (!SystemUtils.isNetworkConnected()) &#123; onError(new ApiException(Utils.getString(R.string.net_error_title),&quot;999&quot;)); cancel(); return; &#125; super.onStart(); &#125; /** * é”™è¯¯å›è°ƒ * * @param ex å¼‚å¸¸ä¿¡æ¯ */ protected abstract void onError(ApiException ex);&#125; 1.extends DisposableSubscriber ä¾¿äºé€šè¿‡CompositeDisposableç®¡ç†è¯·æ±‚,æ­¤å¤„æ²¡æœ‰å±•ç¤º,ä¸ç”¨ç®¡2.onStart() ä¸­,åˆ¤æ–­æ˜¯å¦æœ‰ç½‘ç»œ æ²¡æœ‰ç½‘ç»œonError(new ApiException(Utils.getString(R.string.net_error), false));æŠ›å‡ºæ²¡æœ‰ç½‘ç»œçš„é”™è¯¯,ç”±å„ä¸ªé¡µé¢è‡ªè¡Œå¤„ç† cancel(); å–æ¶ˆ \bæœ‰ç½‘ç»œåˆ™ç»§ç»­ 3.é‡å†™çš„ onError()ä¸­. æ˜¯ApiExceptionå®ä¾‹çš„,æ˜¯è‡ªå·±æŠ›å‡ºçš„å¼‚å¸¸,å·²ç»å¤„ç†è¿‡äº†,ç›´æ¥onErrorç»™å„ä¸ªé¡µé¢å¤„ç† ä¸æ˜¯çš„å†å¤„ç†ä¸€æ¬¡,åœ¨åˆ†å‘ç»™å„ä¸ªé¡µé¢å¤„ç† ####æœªå®Œå¾…ç»­â€¦","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Rxjava","slug":"Rxjava","permalink":"http://www.wangzhumo.com/tags/Rxjava/"},{"name":"Okhttp","slug":"Okhttp","permalink":"http://www.wangzhumo.com/tags/Okhttp/"}]},{"title":"Retrofit2 + Okhttp3 + Rxjava2 ç½‘ç»œè¯·æ±‚å°è£…(ä¸Š)","slug":"Retrofit2-Okhttp3-Rxjava2-ç½‘ç»œè¯·æ±‚å°è£…(ä¸Š)","date":"2017-12-25T04:14:04.000Z","updated":"2017-12-25T08:13:49.835Z","comments":true,"path":"Android/Retrofit2-Okhttp3-Rxjava2-ç½‘ç»œè¯·æ±‚å°è£…(ä¸Š)/","link":"","permalink":"http://www.wangzhumo.com/Android/Retrofit2-Okhttp3-Rxjava2-ç½‘ç»œè¯·æ±‚å°è£…(ä¸Š)/","excerpt":"","text":"\bæœ€ç»ˆç»“æ„ 1234567891011121314netâ”œâ”€â”€ RequestBuilder.javaâ”œâ”€â”€ RetrofitApis.javaâ”œâ”€â”€ baseâ”‚ â”œâ”€â”€ ApiException.javaâ”‚ â”œâ”€â”€ CustomGsonConverter.javaâ”‚ â”œâ”€â”€ DefaultSubscriber.javaâ”‚ â””â”€â”€ DefaultTransformer.javaâ””â”€â”€ response â”œâ”€â”€ BaseResponse.java â””â”€â”€ ResultResponse.javaNetworkApis.java 1.æ·»åŠ ä¾èµ– 1234567implementation &quot;io.reactivex.rxjava2:rxjava:2.1.7&quot;implementation &quot;io.reactivex.rxjava2:rxandroid:2.0.1&quot;implementation &quot;com.squareup.okhttp3:okhttp:3.9.0&quot;implementation &quot;com.squareup.okhttp3:logging-interceptor:3.9.0&quot;implementation &quot;com.squareup.retrofit2:retrofit:2.3.0&quot;implementation &quot;com.squareup.retrofit2:converter-gson:2.3.0&quot;implementation &quot;com.squareup.retrofit2:adapter-rxjava2:2.3.0&quot; 2.è¯·æ±‚æœåŠ¡æ„å»º 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293/** * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2017/11/1 ä¸‹åˆ11:13 * */public class RetrofitApis &#123; private static OkHttpClient okHttpClient = null; private static NetworkApis networkApis = null; private static Gson gson = new Gson(); private static final String TAG = &quot;RetrofitApis&quot;; /** * ä¸ºHOSTåˆ›å»ºä¸€ä¸ªè¯·æ±‚å®¢æˆ·ç«¯ * @return */ public static NetworkApis getNetworkApis() &#123; initOkhttp(); if (networkApis == null) &#123; Retrofit retrofit = new Retrofit.Builder() .client(okHttpClient) .baseUrl(Constants.HOST) .addConverterFactory(CustomGsonConverter.create(gson)) .addCallAdapterFactory(RxJava2CallAdapterFactory.create()) .build(); networkApis = retrofit.create(NetworkApis.class); &#125; return networkApis; &#125; /** * åˆå§‹åŒ–ä¸€ä¸ªOkHttpClient */ private static void initOkhttp()&#123; //æ²¡æœ‰åˆ›å»ºå°±å®ä¾‹ä¸€ä¸ª if(okHttpClient == null)&#123; final OkHttpClient.Builder builder = new OkHttpClient.Builder(); //è®¾ç½®logç­‰çº§ if(BuildConfig.DEBUG)&#123; HttpLoggingInterceptor interceptor = new HttpLoggingInterceptor(); //BODY åŒ…å«è¯·æ±‚url å‚æ•° response ,ä¼šæ‰“å°åœ¨logcat interceptor.setLevel(HttpLoggingInterceptor.Level.BODY); builder.addInterceptor(interceptor); &#125; //æ‰“å¼€ä¸€ä¸ªFileç”¨äºç¼“å­˜ File cacheFile = new File(Constants.PATH_CACHE); Cache cache = new Cache(cacheFile,1024*1024*50); //ä¸€ä¸ªæ‹¦æˆªå™¨ Interceptor cacheInterceptor = new Interceptor() &#123; @Override public Response intercept(Chain chain) throws IOException &#123; Request.Builder builder = chain.request().newBuilder(); if(SystemUtils.isNetworkConnected())&#123; int maxAge = 0 ; //æœ‰ç½‘ç»œ,ä¸ç¼“å­˜,æœ€é•¿ä¿å­˜æ—¶é—´ä¸º0 builder.removeHeader(&quot;Pragma&quot;) .header(&quot;Cache-Control&quot;, &quot;public, max-age=&quot; + maxAge) .build(); &#125; else &#123; // æ— ç½‘ç»œæ—¶ï¼Œè®¾ç½®è¶…æ—¶ä¸º2å‘¨ int maxStale = 60 * 60 * 24 * 14; builder.removeHeader(&quot;Pragma&quot;) .header(&quot;Cache-Control&quot;, &quot;public, only-if-cached, max-stale=&quot; + maxStale) .build(); throw new ApiException(false); &#125; return chain.proceed(builder.build()); &#125; &#125;; //è®¾ç½®ç¼“å­˜æ‹¦æˆªå™¨ builder.addInterceptor(cacheInterceptor); builder.addNetworkInterceptor(cacheInterceptor); //è¿™é‡Œé€šè¿‡Interceptor å¯ä»¥å®ç°æ·»åŠ å…¬å…±å‚æ•°,ä¸è¯¦ç»†è¯´æ˜äº† //stetho,å¦‚æœä½¿ç”¨åˆ™éœ€è¦æ·»åŠ  //builder.addNetworkInterceptor(new StethoInterceptor()); builder.cache(cache); //é”™è¯¯é‡è¿ builder.retryOnConnectionFailure(true); //è®¾ç½®è¶…æ—¶ builder.connectTimeout(15, TimeUnit.SECONDS); builder.readTimeout(15, TimeUnit.SECONDS); builder.writeTimeout(15, TimeUnit.SECONDS); okHttpClient = builder.build(); &#125; &#125;&#125; ä»¥ä¸Š; ä½¿ç”¨ CustomGsonConverter.java / NetworkApis.javaé€šè¿‡getNetworkApis()æ–¹æ³•,å‘å¤–æä¾›äº†ä¸€ä¸ªè¯·æ±‚æœåŠ¡.å…¶ä¸­ .addConverterFactory(CustomGsonConverter.create(gson))æ˜¯ä½¿ç”¨è‡ªå®šä¹‰çš„Converteræ›¿ä»£äº†é»˜è®¤æä¾›çš„ CustomGsonConverter.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970/** * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2017/10/24 ä¸Šåˆ10:31 * * GsonConverter ç”¨äºåœ¨ä¸è§£æè¿”å›æ­£æ–‡çš„å‰æä¸‹è·å–è¯·æ±‚æˆåŠŸå¤±è´¥å’Œ è¿”å›ä¿¡æ¯ */public class CustomGsonConverter extends Converter.Factory &#123; private final Gson gson; private CustomGsonConverter(Gson gson) &#123; if (gson == null) &#123; throw new NullPointerException(&quot;gson == null&quot;); &#125; this.gson = gson; &#125; public static CustomGsonConverter create() &#123; return create(new Gson()); &#125; public static CustomGsonConverter create(Gson gson) &#123; return new CustomGsonConverter(gson); &#125; @Override public Converter&lt;ResponseBody, ?&gt; responseBodyConverter(Type type, Annotation[] annotations, Retrofit retrofit) &#123; TypeAdapter&lt;?&gt; adapter = gson.getAdapter(TypeToken.get(type)); return new CustomGsonResponseBodyConverter&lt;&gt;(gson, adapter); &#125; private class CustomGsonResponseBodyConverter&lt;T&gt; implements Converter&lt;ResponseBody, T&gt; &#123; private final Gson gson; private final TypeAdapter&lt;T&gt; adapter; public CustomGsonResponseBodyConverter(Gson gson, TypeAdapter&lt;T&gt; adapter) &#123; this.gson = gson; this.adapter = adapter; &#125; @Override public T convert(ResponseBody value) throws IOException &#123; String response = value.string(); BaseResponse baseResponse = gson.fromJson(response,BaseResponse.class); if (!baseResponse.isCodeSuccess()) &#123; value.close(); throw new ApiException(baseResponse.error); &#125; MediaType contentType = value.contentType(); Charset charset = contentType != null ? contentType.charset(UTF_8) : UTF_8; InputStream inputStream = new ByteArrayInputStream(response.getBytes()); Reader reader = new InputStreamReader(inputStream, charset); JsonReader jsonReader = gson.newJsonReader(reader); try &#123; return adapter.read(jsonReader); &#125; finally &#123; value.close(); &#125; &#125; &#125; @Nullable @Override public Converter&lt;?, RequestBody&gt; requestBodyConverter(Type type, Annotation[] parameterAnnotations, Annotation[] methodAnnotations, Retrofit retrofit) &#123; return super.requestBodyConverter(type,parameterAnnotations,methodAnnotations,retrofit); &#125;&#125; requestBodyConverteræ²¡æœ‰é‡å†™,åé¢å‘ç°äº†ä¸€ä¸ªbug,ä¸Šä¼ æ–‡ä»¶+æ–‡å­—å‚æ•°æ—¶,å¯èƒ½ä¼šé€ æˆ Lengthå‡ºé”™.responseBodyConverter é‡å†™,å…ˆæŠŠresponseè§£æ,å¦‚æœæœ‰é—®é¢˜åˆ™throw new ApiException(baseResponse.error);ä¼šä¸»åŠ¨èµ°RxJavaçš„ onError() å¦‚æœæ²¡æœ‰é—®é¢˜,åˆ™ç»§ç»­,å¥½åƒæœ‰ç‚¹å¤šä½™â€¦â€¦ ApiException.java å°±æ˜¯ç”¨äºå°è£…å¼‚å¸¸ 1234567891011121314151617181920212223242526272829303132333435/** * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2017/10/24 ä¸Šåˆ10:29 * * æ­¤ç±»ä½œä¸ºç½‘ç»œè¯·æ±‚å¼‚å¸¸çš„åŸº */public class ApiException extends IOException &#123; String code; String msg; public ApiException(String code)&#123; this.code = code; &#125; public ApiException(String msg, String code)&#123; super(msg); this.msg = msg; this.code = code; &#125; public boolean getCode() &#123; return code; &#125; @Override public String getMessage() &#123; return msg; &#125;&#125; 3.Responseè¿”å›æ•°æ®çš„å°è£… è¿™é‡Œæ ¹æ®åå°è¿”å›æ•°æ®ç»“æ„ æˆ‘ä»¬çš„è¿”å›æ˜¯1234567&#123; &quot;result&quot;:&#123; &#125;, &quot;msg&quot;:&quot;è¯·æ±‚æˆåŠŸ&quot;, &quot;code&quot;:&quot;0000&quot;&#125; BaseResponse.java 123456789101112131415161718192021/** * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2017/10/19 ä¸‹åˆ5:41 * */public class BaseResponse&#123; public String code; public String msg; /** * APIæ˜¯å¦è¯·æ±‚å¤±è´¥ * * @return å¤±è´¥è¿”å›true, æˆåŠŸè¿”å›false */ public boolean isCodeSuccess() &#123; return &quot;0000&quot;.equals(code); &#125;&#125; æ‰€æœ‰çš„è¿”å›æ•°æ®ç±»,éƒ½è¦ç»§æ‰¿å®ƒ,ä¾¿äºCustomGsonConverter ä¸­åˆ¤æ–­è¿”å›æ•°æ®çš„æ­£ç¡®æ€§ ResultResponse.java 1234567891011121314/** * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2017/10/19 ä¸‹åˆ5:37 */public class ResultResponse&lt;T&gt; extends BaseResponse &#123; private T result; public T getResult() &#123; return result; &#125;&#125; é€šè¿‡T\bæ³›å‹,æŒ‡å®šè¿”å›resultçš„ç»“æ„,è®©gsonè§£ææˆå®ä½“å¯¹è±¡ T å¯èƒ½æ˜¯ å®ä½“å¯¹è±¡ å¯èƒ½æ˜¯ \bList&lt;å®ä½“å¯¹è±¡&gt; â€¦. 4.è¯·æ±‚æ•°æ® NetworkApis.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/** * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125; * @author ç‹è¯›é­” 2017/10/19 ä¸‹åˆ5:40 * * æ‰€æœ‰ç½‘ç»œè¯·æ±‚ */public interface NetworkApis &#123; /** * è·å–æœ‹å‹åœˆåˆ—è¡¨ * @param token * @return */ @POST(&quot;QCRL/qcrl?command=getFriendsCircle&quot;) @FormUrlEncoded Flowable&lt;ResultResponse&lt;List&lt;FriendItem&gt;&gt;&gt; getFriendsCircle( @Field(&quot;token&quot;) String token, @Field(&quot;number&quot;) String number, @Field(&quot;userId&quot;) String userId, @Field(&quot;lastDate&quot;) String lastId); /** * åˆ é™¤ * @param token * @param circleId * @return */ @POST(&quot;QCRL/qcrl?command=updateFriendsCircle&quot;) @FormUrlEncoded Flowable&lt;ResultResponse&lt;String&gt;&gt; updateFriendsCircle( @Field(&quot;token&quot;) String token, @Field(&quot;circleId&quot;) String circleId); /** * èµ * @param token * @param circleId * @param userId * @return */ @POST(&quot;QCRL/qcrl?command=addFavor&quot;) @FormUrlEncoded Flowable&lt;ResultResponse&lt;Object&gt;&gt; addFavor( @Field(&quot;token&quot;) String token, @Field(&quot;circleId&quot;) String circleId, @Field(&quot;toId&quot;) String userId); ...&#125; æ ¹æ®è‡ªå·±çš„æ¥å£ç¼–å†™å³å¯@POST() æŒ‡è¯·æ±‚æ–¹å¼ä¸º POST æ³¨æ„,æ‹¬å·ä¸­çš„ç½‘å€,å¼€å¤´ä¸å¯ä»¥ä½¿ç”¨/QCRL/â€¦å¦åˆ™ä¼šç›´æ¥æ‹¼åˆ°HOSTåé¢,urlå¯èƒ½ä¼šé”™è¯¯ @FormUrlEncoded è¡¨ç¤ºformè¡¨å•æäº¤,ä¼šEncodedç¼–ç å‚æ•° @Field æ¯ä¸€ä¸ªå‚æ•°","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Rxjava","slug":"Rxjava","permalink":"http://www.wangzhumo.com/tags/Rxjava/"},{"name":"Okhttp","slug":"Okhttp","permalink":"http://www.wangzhumo.com/tags/Okhttp/"}]},{"title":"Androidé¡¹ç›®çš„build.gradleé€šç”¨è®¾ç½®","slug":"Androidé¡¹ç›®çš„build-gradleé€šç”¨è®¾ç½®","date":"2017-12-25T03:57:59.000Z","updated":"2017-12-25T04:25:51.673Z","comments":true,"path":"Android/Androidé¡¹ç›®çš„build-gradleé€šç”¨è®¾ç½®/","link":"","permalink":"http://www.wangzhumo.com/Android/Androidé¡¹ç›®çš„build-gradleé€šç”¨è®¾ç½®/","excerpt":"","text":"123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114apply plugin: &apos;com.android.application&apos;android &#123; //å¼€å¯dataBinding dataBinding&#123; enabled = true &#125; defaultConfig &#123; //å¼€å¯multiDex multiDexEnabled true //ä½¿ç”¨jni ndk &#123; //è®¾ç½®æ”¯æŒçš„SOåº“æ¶æ„,è¿™é‡Œçš„æ„æ€æ˜¯åªæ”¯æŒ&apos;armeabi&apos;, &apos;armeabi-v7a&apos;, &apos;x86&apos; //è¿™ä¸‰ç§æ¶æ„ abiFilters &apos;armeabi&apos;, &apos;armeabi-v7a&apos;, &apos;x86&apos; &#125; &#125; //è®¾ç½®ä¸€ä¸ªç¼–è¯‘çš„é…ç½® signingConfigs &#123; //åä¸ºrelease\b\bçš„é…ç½®é¡¹ release &#123; //ç­¾åæ–‡ä»¶çš„ä½ç½®,å½“å‰ä½ç½®æ˜¯æ ¹ç›®å½• storeFile file(&quot;/keyfile.jks&quot;) //storePassword storePassword &quot;xxxxxxxx&quot; //keyAlias keyAlias &quot;wangzhumo&quot; //keyPassword keyPassword &quot;xxxxxxxx&quot; //æ˜¯å¦ä½¿ç”¨v2Signing v2SigningEnabled false &#125; &#125; //ç¼–è¯‘çš„ç‰ˆæœ¬ buildTypes &#123; //debugæ—¶çš„é…ç½® debug &#123; minifyEnabled false //è¿™é‡Œä½¿ç”¨ä¸Šé¢é…ç½®çš„ç­¾å,å¯ä»¥åšåˆ°debugæ—¶,ä¹Ÿä½¿ç”¨çš„æ˜¯æ­£å¼ç­¾å,è€Œä¸æ˜¯debugçš„ keystore signingConfig signingConfigs.release //buildConfig çš„ä¸€ä¸ªå‚æ•°,æ˜¯å¦å¼€å¯log buildConfigField &quot;boolean&quot;, &quot;LOG_DEBUG&quot;, &quot;true&quot; proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos; &#125; release &#123; // æ˜¾ç¤ºLog minifyEnabled false signingConfig signingConfigs.release buildConfigField &quot;boolean&quot;, &quot;LOG_DEBUG&quot;, &quot;false&quot; proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos; &#125; &#125; //adbçš„é…ç½®é¡¹ adbOptions &#123; //è¶…æ—¶æ—¶é—´ timeOutInMs = 5 * 1000 //adb install -r /path..apk installOptions &apos;-r&apos; &#125; flavorDimensions &apos;env&apos; productFlavors &#123; //æ­£å¼ç‰ˆæœ¬ envydemo&#123; dimension &apos;env&apos; //æ­¤å¤„æ˜¯versionName versionName &quot;V1.1&quot; //manifestPlaceholders //æ˜¯manifestå·²ç»å®šä¹‰çš„å‚æ•°,è¿™é‡Œç»™è¯¥å‚æ•°èµ‹å€¼ manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;wangzhumoo&quot;] //buildConfig çš„å‚æ•°,Appå½“å‰çš„HOSTåœ°å€ buildConfigField &quot;String&quot;,&quot;SERVER_HOST&quot;,&apos;&quot;http://app....com/&quot;&apos; &#125; envtest &#123; dimension &apos;env&apos; versionName &quot;Test&quot; manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;wangzhumoo&quot;] buildConfigField &quot;String&quot;,&quot;SERVER_HOST&quot;,&apos;&quot;http://app.test....com/&quot;&apos; &#125; &#125; //è‡ªå®šä¹‰apkåå­— android.applicationVariants.all &#123; variant -&gt; variant.outputs.all &#123; //apkçš„åå­— outputFileName = &quot;App_$&#123;variant.versionName&#125;.apk&quot; &#125; &#125; android &#123; //æ’é™¤ configurations.all &#123; resolutionStrategy.force &apos;com.google.code.findbugs:jsr305:1.3.9&apos; &#125; &#125; //ä½¿ç”¨java8 compileOptions &#123; sourceCompatibility JavaVersion.VERSION_1_8 targetCompatibility JavaVersion.VERSION_1_8 &#125;&#125; ä»¥ä¸Šä»£ç ,åˆ é™¤äº†å¸¸è§çš„éƒ¨åˆ†. buildConfigField 12345678910/** * å¸¸é‡ç±» */public class Constants &#123; //å–åˆ°åœ¨productFlavors.envyhcsé…ç½®çš„å‚æ•° //buildConfigField &quot;String&quot;,&quot;SERVER_HOST&quot;,&apos;&quot;http://app....com/&quot;&apos; public static final String BASE_URL = BuildConfig.SERVER_HOST;&#125; manifestPlaceholders 123456789&lt;manifest&gt; &lt;application&gt; //å–åˆ°åœ¨productFlavors.envyhcsé…ç½®çš„å‚æ•° //manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;wangzhumo&quot;] &lt;meta-data android:name=&quot;UMENG_CHANNEL&quot; android:value=&quot;$&#123;UMENG_CHANNEL_VALUE&#125;&quot; /&gt; &lt;/application&gt;&lt;/manifest&gt; Build Variantsåœ¨build.gradleä¸­é…ç½®äº†productFlavors{ envdemo{} , envtest{}} å…¶ä¸­dimensionä¸€ä¸ªç»´åº¦å…¶ä¸­buildTypesä¸€ä¸ªç»´åº¦ debug + evndemodebug + evntestrelease + evndemerelease + evntest å…±4ç§,å…¶ä»–çš„å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°,æ‰€ä»¥ä¸åšè¯´æ˜ å¯ä»¥\bé€‰æ‹©debugé»˜è®¤çš„ç‰ˆæœ¬â€¦","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Gradle","slug":"Gradle","permalink":"http://www.wangzhumo.com/tags/Gradle/"}]},{"title":"Android é¡¹ç›®ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬","slug":"Android-é¡¹ç›®ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬","date":"2017-12-25T03:39:45.000Z","updated":"2017-12-25T03:57:01.000Z","comments":true,"path":"Android/Android-é¡¹ç›®ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬/","link":"","permalink":"http://www.wangzhumo.com/Android/Android-é¡¹ç›®ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬/","excerpt":"","text":"å‡†å¤‡å¼•å…¥Arouter,åšä¸€ä¸ªç»„ä»¶çš„demo,å°±å¼€å§‹æ…¢æ…¢çš„æ”¹é€ é¡¹ç›® 1234567891011121314151617.|-- app| |-- build.gradle| |-- libs| |-- src| | |-- androidTest| | |-- main| | `-- test||-- opensource| |-- build.gradle| |-- libs| `-- src| `-- main|-- build.gradle|-- settings.gradle`-- versions.gradle app ä¸ºä¸»é¡¹ç›®opensource ä½œä¸ºlibraryå­˜åœ¨,å°†æ¥ä¼šæˆä¸ºbaseLibçš„ä¾èµ–,å…¶ä¸­æ˜¯æ‰€æœ‰çš„ä¸‰æ–¹ä¾èµ–,å¼€æºä»£ç ç­‰ç­‰ 1.æ ¹ç›®å½•åˆ›å»ºversions.gradle /versions.gradle 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150ext.deps = [:] def versions = [:] versions.arch = &quot;1.0.0&quot; versions.support = &quot;27.0.1&quot; versions.dagger = &quot;2.13&quot; versions.stetho = &quot;1.5.0&quot; versions.dialogs = &quot;0.9.6.0&quot; versions.glide = &quot;4.3.1&quot; versions.gradle = &quot;3.0.1&quot; versions.rxJava = &quot;2.1.7&quot; versions.rxAndroid = &quot;2.0.1&quot; versions.rxRelay = &quot;2.0.0&quot; versions.rxBinding = &quot;2.0.0&quot; versions.paging = &quot;1.0.0-alpha3&quot; versions.okhttp = &quot;3.9.0&quot; versions.retrofit = &quot;2.3.0&quot; versions.kotlin = &quot;1.2.0&quot; versions.kotlinBind = &quot;3.0.1&quot; versions.gson = &quot;2.8.2&quot; versions.arouterVersion = &quot;1.2.4&quot; versions.arouterProcessor = &quot;1.1.4&quot; versions.atslRunner = &quot;1.0.1&quot; versions.atslRules = &quot;1.0.1&quot; versions.hamcrest = &quot;1.3&quot; versions.timber = &quot;4.5.1&quot; versions.mockwebserver = &quot;3.8.1&quot; versions.apache_commons = &quot;2.5&quot; versions.mockito = &quot;2.7.19&quot; versions.mockito_all = &quot;1.10.19&quot; versions.dexmaker = &quot;2.2.0&quot; versions.constraint = &quot;1.0.2&quot; versions.junit = &quot;4.12&quot; versions.espresso = &quot;3.0.1&quot; def deps = [:] def rxLib = [:] rxLib.rxJava = &quot;io.reactivex.rxjava2:rxjava:$versions.rxJava&quot; rxLib.rxAndroid = &quot;io.reactivex.rxjava2:rxandroid:$versions.rxAndroid&quot; rxLib.rxBinding = &quot;com.jakewharton.rxbinding2:rxbinding:$versions.rxBinding&quot; rxLib.rxBingingV4 = &quot;com.jakewharton.rxbinding2:rxbinding-support-v4:$versions.rxBinding&quot; rxLib.rxBingingRecycler = &quot;com.jakewharton.rxbinding2:rxbinding-recyclerview-v7:$versions.rxBinding&quot; rxLib.rxBingingV7 = &quot;com.jakewharton.rxbinding2:rxbinding-appcompat-v7:$versions.rxBinding&quot; rxLib.rxBingingDesign = &quot;com.jakewharton.rxbinding2:rxbinding-design:$versions.rxBinding&quot; rxLib.rxRelay = &quot;com.jakewharton.rxrelay2:rxrelay:$versions.rxRelay&quot; deps.rxLibs = rxLib def support = [:] support.annotations = &quot;com.android.support:support-annotations:$versions.support&quot; support.appCompat = &quot;com.android.support:appcompat-v7:$versions.support&quot; support.recyclerview = &quot;com.android.support:recyclerview-v7:$versions.support&quot; support.cardview = &quot;com.android.support:cardview-v7:$versions.support&quot; support.design = &quot;com.android.support:design:$versions.support&quot; support.v4 = &quot;com.android.support:support-v4:$versions.support&quot; support.coreUtils = &quot;com.android.support:support-core-utils:$versions.support&quot; deps.support = support def archLib = [:] archLib.archExtensions = &quot;android.arch.lifecycle:extensions:$versions.arch&quot; archLib.archRoomRuntime = &quot;android.arch.persistence.room:runtime:$versions.arch&quot; archLib.archRoomCompiler = &quot;android.arch.persistence.room:compiler:$versions.arch&quot; archLib.archLifecycleCommon = &quot;android.arch.lifecycle:common-java8:$versions.arch&quot; deps.archLibs = archLib def glide = [:] glide.glide = &quot;com.github.bumptech.glide:glide:$versions.glide&quot; glide.glideCompiler = &quot;com.github.bumptech.glide:compiler:$versions.glide&quot; deps.glide = glide def stethos = [:] stethos.stetho = &quot;com.facebook.stetho:stetho:$versions.stetho&quot; stethos.stethoHttp = &quot;com.facebook.stetho:stetho-okhttp3:$versions.stetho&quot; deps.stetho = stethos def okhttp = [:] okhttp.okhttp = &quot;com.squareup.okhttp3:okhttp:$versions.okhttp&quot; okhttp.okhttpLogging = &quot;com.squareup.okhttp3:logging-interceptor:$versions.okhttp&quot; deps.okhttp = okhttp def retrofit = [:] retrofit.retrofit = &quot;com.squareup.retrofit2:retrofit:$versions.retrofit&quot; retrofit.converterGson = &quot;com.squareup.retrofit2:converter-gson:$versions.retrofit&quot; retrofit.adapterRxjava = &quot;com.squareup.retrofit2:adapter-rxjava2:$versions.retrofit&quot; deps.retrofit = retrofit def arouter = [:] arouter.runtime = &quot;com.alibaba:arouter-api:$versions.arouterVersion&quot; arouter.compiler = &quot;com.alibaba:arouter-compiler:$versions.arouterProcessor&quot; deps.arouter = arouter def dagger = [:] dagger.dagger = &quot;com.google.dagger:dagger:$versions.dagger&quot; dagger.daggerAndroid = &quot;com.google.dagger:dagger-android:$versions.dagger&quot; dagger.daggerAndroidSupport = &quot;com.google.dagger:dagger-android-support:$versions.dagger&quot; dagger.daggerCompiler = &quot;com.google.dagger:dagger-compiler:$versions.dagger&quot; dagger.daggerAndroidCompiler = &quot;com.google.dagger:dagger-android-processor:$versions.dagger&quot; deps.dagger = dagger def kotlin = [:] kotlin.kotlinStdlib = &quot;org.jetbrains.kotlin:kotlin-stdlib-jre8:$versions.kotlin&quot; kotlin.kotlinPlugin = &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$versions.kotlin&quot; kotlin.kotlinDatabind = &quot;com.android.databinding:compiler:$versions.kotlinBind&quot; deps.kotlin = kotlin def espresso = [:] espresso.core = &quot;com.android.support.test.espresso:espresso-core:$versions.espresso&quot; espresso.contrib = &quot;com.android.support.test.espresso:espresso-contrib:$versions.espresso&quot; espresso.intents = &quot;com.android.support.test.espresso:espresso-intents:$versions.espresso&quot; deps.espresso = espresso def atsl = [:] atsl.runner = &quot;com.android.support.test:runner:$versions.atsl_runner&quot; atsl.rules = &quot;com.android.support.test:rules:$versions.atsl_runner&quot; deps.atsl = atsl deps.multidex = &quot;com.android.support:multidex:1.0.1&quot; deps.dialog = &quot;com.afollestad.material-dialogs:core:$versions.dialogs&quot; deps.gson = &quot;com.google.code.gson:gson:$versions.gson&quot; deps.paging = &quot;android.arch.paging:runtime:$versions.paging&quot; deps.dexmaker = &quot;com.linkedin.dexmaker:dexmaker-mockito:$versions.dexmaker&quot; deps.constraint = &quot;com.android.support.constraint:constraint-layout:$versions.constraint&quot; deps.timber = &quot;com.jakewharton.timber:timber:$versions.timber&quot; deps.gradlePlugin = &quot;com.android.tools.build:gradle:$versions.gradle&quot; deps.kotlinPlugin = &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$versions.kotlin&quot; ext.deps = deps def buildVersions = [:] buildVersions.minSDK = 14 buildVersions.targetSDK = 26 buildVersions.compileSDK = 27 buildVersions.buildTools = &quot;26.0.2&quot; ext.buildVersion = buildVersions def addRepos(RepositoryHandler handler) &#123; handler.google() handler.jcenter() handler.mavenCentral() handler.maven &#123; url &apos;https://oss.jfrog.org/libs-snapshot&apos; &#125; handler.maven &#123; url &apos;https://jitpack.io&apos; &#125; &#125; ext.addRepos = this.&amp;addRepos å…¶ä¸­å£°æ˜äº†æ‰€æœ‰å·²ç»ç”¨åˆ°,æˆ–è€…å¯èƒ½ä½¿ç”¨çš„Libç‰ˆæœ¬,ä»¥åŠAndroid sdk tools çš„ç‰ˆæœ¬. 2.å°†å£°æ˜çš„ç‰ˆæœ¬,æ·»åŠ åˆ°é¡¹ç›®ä¸­,æ–¹ä¾¿å¼•ç”¨ /build.gradle é¡¹ç›®çš„build.gradleä¸­ 12345678910111213141516171819buildscript &#123; //åŠ å…¥å¼•ç”¨ apply from: &apos;versions.gradle&apos; //æ·»åŠ rep addRepos(repositories) dependencies &#123; //ç”±versions.gradleç®¡ç†çš„ç‰ˆæœ¬ classpath deps.gradlePlugin classpath deps.kotlinPlugin // NOTE: Do not place your application dependencies here; they belong // in the individual module build.gradle files &#125;&#125;allprojects &#123; //æ·»åŠ rep addRepos(repositories)&#125; 3.å¯¹Android Tools,SDKç‰ˆæœ¬çš„æ§åˆ¶é¡¹ç›®/app/build.gradle 12345678910111213141516android &#123; //sdkçš„ç‰ˆæœ¬ compileSdkVersion buildVersion.compileSDK //toolsçš„ç‰ˆæœ¬ buildToolsVersion buildVersion.buildTools defaultConfig &#123; //sdkç‰ˆæœ¬ minSdkVersion buildVersion.minSDK targetSdkVersion buildVersion.targetSDK versionCode 1 //ä¹Ÿå¯ä»¥ä½¿ç”¨ versionName &quot;1.0&quot; &#125;//&#125; 4.å…¶ä»–Libçš„ä¾èµ–æŒ‰ç…§è¿™æ ·çš„æ ¼å¼å³å¯ 123456789101112131415161718192021222324252627282930313233dependencies &#123; //support api deps.support.appCompat api deps.support.recyclerview api deps.support.cardview api deps.support.design api deps.multidex api deps.constraint //rxjava api deps.rxLibs.rxJava api deps.rxLibs.rxAndroid api deps.rxLibs.rxRelay //http api deps.okhttp.okhttp api deps.okhttp.okhttpLogging api deps.retrofit.retrofit api deps.retrofit.converterGson api deps.retrofit.adapterRxjava api deps.gson //arch api deps.archLibs.archExtensions api deps.archLibs.archRoomRuntime api deps.archLibs.archLifecycleCommon annotationProcessor deps.archLibs.archRoomCompiler //stetho api deps.stetho.stetho api deps.stetho.stethoHttp //dialog api deps.dialog //glide api deps.glide.glide annotationProcessor deps.glide.glideCompiler&#125;","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Gradle","slug":"Gradle","permalink":"http://www.wangzhumo.com/tags/Gradle/"},{"name":"ç»„ä»¶åŒ–","slug":"ç»„ä»¶åŒ–","permalink":"http://www.wangzhumo.com/tags/ç»„ä»¶åŒ–/"}]},{"title":"å¸¸ç”¨çš„Google Chrome æµè§ˆå™¨æ’ä»¶","slug":"å¸¸ç”¨çš„Google-Chrome-æµè§ˆå™¨æ’ä»¶","date":"2017-12-25T02:35:02.000Z","updated":"2018-02-28T16:32:58.322Z","comments":true,"path":"Tools/å¸¸ç”¨çš„Google-Chrome-æµè§ˆå™¨æ’ä»¶/","link":"","permalink":"http://www.wangzhumo.com/Tools/å¸¸ç”¨çš„Google-Chrome-æµè§ˆå™¨æ’ä»¶/","excerpt":"","text":"###å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„Chromeæ’ä»¶ 1.AdBlock æœ€å—æ¬¢è¿çš„Chromeæ‰©å±•ï¼Œæ‹¥æœ‰è¶…è¿‡4000ä¸‡ç”¨æˆ·ï¼å±è”½æ•´ä¸ªäº’è”ç½‘ä¸Šçš„å¹¿å‘Šã€‚ æ¨è: â˜…â˜…â˜… 2.Insight.io for Github Improve GitHub code browsing experienc.é€šè¿‡æ’ä»¶å¯ä»¥åœ¨githubçš„é¡¹ç›®é¡µé¢ä¸Š,ç»“æ„åŒ–çš„æŸ¥çœ‹ä»£ç ,ç”šè‡³è¿˜æœ‰â€å¼•ç”¨â€,â€æŸ¥æ‰¾â€ç­‰ç­‰åŠŸèƒ½.å°±åƒæ˜¯æŠŠgithubé¡¹ç›®é¡µ,å˜æˆäº†ä¸€ä¸ªåªèƒ½æŸ¥çœ‹çš„ide.å¯¹äº†,è¿˜èƒ½å¾ˆæ–¹ä¾¿çš„ä¸‹è½½å•ä¸ªæ–‡ä»¶ æ¨è: \b\b\bâ˜…â˜…â˜…â˜…â˜… 3.Infinityæ–°æ ‡ç­¾é¡µ é‡æ–°å®šä¹‰äº†æ–°æ ‡ç­¾é¡µï¼Œä¸€ä¸ªè¿½æ±‚æç®€ç¾å­¦å’Œä¸€ç«™å¼æœåŠ¡ä½“éªŒæ›´å°‘çš„ä¸œè¥¿ä½“éªŒæ›´å¤šçš„åŠŸèƒ½ã€‚ ç®€æ´,æ–¹ä¾¿,å®ç”¨ æ¨è:â˜…â˜…â˜…â˜… 4.PostmanPostman makes API development faster, easier, and better. æ›´å¿«â€¦..å“ˆå“ˆè¶…çº§æ–¹ä¾¿,æ¨¡æ‹Ÿè¯·æ±‚çš„App,æ”¯æŒpost get,å¯ä»¥æµ‹è¯•æ–‡ä»¶ä¸Šä¼ ç­‰è¿˜æœ‰æ¯”è¾ƒæ–¹ä¾¿çš„ä¸€ç‚¹æ˜¯,å¯ä»¥ç”Ÿæˆå½“å‰è¯·æ±‚çš„okhttp\bä»£ç ,è™½ç„¶åªèƒ½ä½œå‚è€ƒâ€¦.. æ¨è:â˜…â˜…â˜…â˜…â˜… å’Œå®ƒä¸€æ ·çš„è¿˜æœ‰Restlet Client - REST API Testing 5.BaiduExporterå¯ä»¥æ–¹ä¾¿çš„æŠŠç½‘ç›˜çš„ä¸‹è½½åœ°å€å¯¼å‡ºåˆ°aria2/aria2-rpcï¼Œæ”¯æŒYAAWã€‚é…åˆAria2GUI,å¯ä»¥é«˜é€Ÿä¸‹è½½ç™¾åº¦äº‘é™é€Ÿçš„æ–‡ä»¶.. è™½ç„¶è¿˜èƒ½ç”¨,ä½†æ˜¯ä½œè€…è¯´ä¸ç»´æŠ¤äº†,è¿˜æœ‰æ›¿ä»£å“:Aria2c Integrationæ²¡æœ‰ç”¨è¿‡,ä¸çŸ¥é“æ˜¯å¦å¯ç”¨. Aria2GUIGithub : https://github.com/aria2/aria2 æ¨è:â˜…â˜…â˜…â˜…â˜… å…¶ä»–æ¨è:â˜…â˜…â˜… SingleFileArchive a complete page into a single HTML fileå¯ä»¥å°†ç½‘é¡µä¿å­˜ä¸ºå•æ–‡ä»¶,æ–¹ä¾¿ä¿å­˜ å°è±¡ç¬”è®°Â·å‰ªè—ä½¿ç”¨å°è±¡ç¬”è®°æ‰©å±•ç¨‹åºä¸€é”®ä¿å­˜ç²¾å½©ç½‘é¡µå†…å®¹åˆ°å°è±¡ç¬”è®°å¸æˆ·ã€‚ JSON FormatterChrome extension for printing JSON and JSONP nicely when you visit it â€˜directlyâ€™ in a browser tab.Github : https://github.com/callumlocke/json-formatter","categories":[{"name":"Tools","slug":"Tools","permalink":"http://www.wangzhumo.com/categories/Tools/"}],"tags":[{"name":"tools","slug":"tools","permalink":"http://www.wangzhumo.com/tags/tools/"}]},{"title":"jniä½¿ç”¨æŒ‡å—,å…³äº.soä½ åº”è¯¥çŸ¥é“çš„","slug":"jniä½¿ç”¨æŒ‡å—-å…³äº-soä½ åº”è¯¥çŸ¥é“çš„","date":"2017-12-25T02:12:59.000Z","updated":"2017-12-25T02:13:30.345Z","comments":true,"path":"uncategorized/jniä½¿ç”¨æŒ‡å—-å…³äº-soä½ åº”è¯¥çŸ¥é“çš„/","link":"","permalink":"http://www.wangzhumo.com/uncategorized/jniä½¿ç”¨æŒ‡å—-å…³äº-soä½ åº”è¯¥çŸ¥é“çš„/","excerpt":"","text":"å…¶å®è¿™äº›éƒ½æ˜¯Androidè®¾å¤‡CPUçš„: armeabi: æ—©æœŸçš„æ‰‹æœºç”¨çš„æ¯”è¾ƒå¤š,é’ˆå¯¹æ™®é€šçš„æˆ–æ—§çš„arm v5 cpu,ã€‚ armeabiv-v7a:ç›®å‰ä¸»æµç‰ˆæœ¬ 2011å¹´ä»¥åçš„ç”Ÿäº§çš„å¤§éƒ¨åˆ†è®¾å¤‡,é’ˆå¯¹æœ‰æµ®ç‚¹è¿ç®—æˆ–é«˜çº§æ‰©å±•åŠŸèƒ½çš„arm v7 cpu. arm64-v8a: 8ä»£ã€64ä½ARMå¤„ç†å™¨ï¼Œ64ä½æ”¯æŒ. x86: æˆ‘ä»¬è§åˆ°çš„æ¨¡æ‹Ÿå™¨å¤§å¤šå°±æ˜¯è¿™ä¸ªã€‚ x86_64: 64ä½çš„å¹³æ¿ã€‚ ç„¶åç‰¹æ„è¯´ä¸€ä¸‹x86ç³»åˆ—çš„,æ˜¯å…¼å®¹armçš„,ä½†æ˜¯æ€§èƒ½æŸå¤±ç‰¹åˆ«å¤§. AndroidåŠ è½½.soçš„åŸåˆ™åŒä¸€ç›®å½•ä¸‹è¦ä¹ˆæ‰€æœ‰ä½¿ç”¨jniçš„é¡¹ç›®éƒ½ç»™åŠ ä¸Š.soæ–‡ä»¶,è¦ä¹ˆä½ å°±åˆ«ç»™è¿™ä¸ªç›®å½•,ä¹Ÿå°±æ˜¯åªè¦ä¸é½å…¨å°±éƒ½å¹²æ‰æ¯”å¦‚ä½ çš„libç»“æ„æ˜¯è¿™æ ·çš„ 123456libs -armeabi -aaa.so -bbb.so -arm64-v8a -aaa.so å…¶å®è¿™ç§æƒ…å†µå°±æ˜¯å±äºåŒä¸€ç›®å½•ä¸‹,æä¾›çš„.soæ–‡ä»¶ä¸å…¨â€¦ç„¶è€Œå¾ˆå®¹æ˜“å‡ºç°,æ¯•ç«Ÿæœ‰äº›ä¸‰æ–¹å•Šä»€ä¹ˆçš„,æä¾›çš„.soæ–‡ä»¶å¹¶ä¸é½å…¨,è¿™æ ·çš„è¯åŒä¸€ä¸ªæ¶æ„ç›®å½•ä¸‹ä¼šç¼ºå°‘ä¸€ä¸ªæˆ–å¤šä¸ª.soæ–‡ä»¶. Androidåœ¨åŠ è½½æŸä¸ªä½¿ç”¨jniçš„åŠŸèƒ½æ—¶,ä½ å¹¶æ²¡æœ‰æä¾›x86çš„.soæ–‡ä»¶,ä½†æ˜¯ä½ æœ‰x86è¿™ä¸ªç›®å½•,é‚£å°±ä¼šå»x86ç›®å½•ä¸‹å»æ‰¾,æ²¡æœ‰å•Šç„¶åå°±å¼‚å¸¸äº†. AndroidåŠ è½½.soçš„ç›®å½•1.æˆ‘è‡ªå·±ç”¨çš„æ˜¯ ä¹Ÿå°±æ˜¯è‡ªå·±åœ¨app -&gt; src -&gt; main ä¸‹è‡ªå·±å»ºç«‹ä¸€ä¸ªç›®å½•: jniLibsç„¶åæ”¾è¿›å»å³å¯. 2.å°±æ˜¯é€šå¸¸æ”¾åœ¨libsç›®å½•ä¸‹äº†åˆ«å¿˜äº†åœ¨build.gradleæ–‡ä»¶ä¸­è®¾ç½® jniLibs.srcDir Androidæ’é™¤æŸæ¶æ„çš„.so 1234567891011android &#123; ... defaultConfig &#123; ... ndk &#123; // è®¾ç½®æ”¯æŒçš„ SO åº“æ„æ¶ abiFilters &apos;armeabi&apos;, &apos;armeabi-v7a&apos; // &apos;arm64-v8a&apos;, &apos;x86&apos;, &apos;x86_64&apos;, &apos;mips&apos;, &apos;mips64&apos; &#125; &#125; &#125; å¦‚æœç¼–è¯‘æŠ¥1NDK integration is deprecated in the current plugin. gradle.properties æ–‡ä»¶ä¸­æ·»åŠ ï¼š1android.useDeprecatedNdk=true åº”è¯¥è¿˜æœ‰å…¶ä»–æ–¹æ³•æ’é™¤,æˆ‘ä¹Ÿå°±çŸ¥é“è¿™ä¸€ç§,å¦‚æœæœ‰çŸ¥é“å…¶ä»–æ–¹æ³•çš„,è¯·å‘ŠçŸ¥ä¸€ä¸‹,è°¢è°¢","categories":[],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"EditTextçš„è¾“å…¥å±æ€§InputTypeä»¥åŠimeOptions","slug":"EditTextçš„è¾“å…¥å±æ€§InputTypeä»¥åŠimeOptions","date":"2017-12-25T02:11:15.000Z","updated":"2017-12-25T02:12:54.159Z","comments":true,"path":"Android/EditTextçš„è¾“å…¥å±æ€§InputTypeä»¥åŠimeOptions/","link":"","permalink":"http://www.wangzhumo.com/Android/EditTextçš„è¾“å…¥å±æ€§InputTypeä»¥åŠimeOptions/","excerpt":"","text":"EditTextçš„è¾“å…¥å±æ€§1234567android:imeOptions=&quot;flagNoExtractUi&quot; //ä½¿è½¯é”®ç›˜ä¸å…¨å±æ˜¾ç¤ºï¼Œåªå ç”¨éƒ¨åˆ†å±å¹•android:imeOptions=&quot;actionNone&quot; //è¾“å…¥æ¡†å³ä¾§ä¸å¸¦ä»»ä½•æç¤ºandroid:imeOptions=&quot;actionGo&quot; //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸º&apos;å¼€å§‹&apos;android:imeOptions=&quot;actionSearch&quot; //å³ä¸‹è§’æŒ‰é”®ä¸ºæœç´¢android:imeOptions=&quot;actionSend&quot; //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸º&apos;å‘é€&apos;android:imeOptions=&quot;actionNext&quot; //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸º&apos;ä¸‹ä¸€æ­¥&apos;android:imeOptions=&quot;actionDone&quot; //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸º&apos;å®Œæˆ&apos; EditTextçš„inputTypeå±æ€§12345678910111213141516171819202122232425262728293031&lt;EditText android:inputType=&quot;phone&quot; //ç”µè¯å·ç  android:inputType=&quot;none&quot; android:inputType=&quot;text&quot; //æ–‡æœ¬ç±»å‹ android:inputType=&quot;textCapCharacters&quot; //å­—æ¯å¤§å†™ android:inputType=&quot;textCapWords&quot; //é¦–å­—æ¯å¤§å†™ android:inputType=&quot;textCapSentences&quot; //ä»…ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ android:inputType=&quot;textAutoCorrect&quot; //è‡ªåŠ¨å®Œæˆ android:inputType=&quot;textAutoComplete&quot; //è‡ªåŠ¨å®Œæˆ android:inputType=&quot;textMultiLine&quot; //å¤šè¡Œè¾“å…¥ android:inputType=&quot;textImeMultiLine&quot; //è¾“å…¥æ³•å¤šè¡Œ android:inputType=&quot;textNoSuggestions&quot; //ä¸æç¤º android:inputType=&quot;textUri&quot; //ç½‘å€ android:inputType=&quot;textEmailAddress&quot; //ç”µå­é‚®ä»¶åœ°å€ android:inputType=&quot;textEmailSubject&quot; //é‚®ä»¶ä¸»é¢˜ android:inputType=&quot;textShortMessage&quot; //çŸ­è®¯ android:inputType=&quot;textLongMessage&quot; //é•¿ä¿¡æ¯ android:inputType=&quot;textPersonName&quot; //äººå android:inputType=&quot;textPostalAddress&quot; //åœ°å€ android:inputType=&quot;textPassword&quot; //å¯†ç  android:inputType=&quot;textVisiblePassword&quot; //å¯è§å¯†ç  android:inputType=&quot;textWebEditText&quot; //ä½œä¸ºç½‘é¡µè¡¨å•çš„æ–‡æœ¬ android:inputType=&quot;textFilter&quot; //æ–‡æœ¬ç­›é€‰è¿‡æ»¤ android:inputType=&quot;textPhonetic&quot; //æ‹¼éŸ³è¾“å…¥ android:inputType=&quot;number&quot; //æ•°å­— android:inputType=&quot;numberSigned&quot; //å¸¦ç¬¦å·æ•°å­—æ ¼å¼ android:inputType=&quot;numberDecimal&quot; //å¸¦å°æ•°ç‚¹çš„æµ®ç‚¹æ ¼å¼ android:inputType=&quot;datetime&quot; //æ—¶é—´æ—¥æœŸ android:inputType=&quot;date&quot; //æ—¥æœŸé”®ç›˜ android:inputType=&quot;time&quot; //æ—¶é—´é”®ç›˜ /&gt;","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"TextViewä¸­çš„æ–‡å­—é¢œè‰²,ç‚¹å‡»,æ–œä½“ç­‰å®ç°--SpannableString","slug":"TextViewä¸­çš„æ–‡å­—é¢œè‰²-ç‚¹å‡»-æ–œä½“ç­‰å®ç°-SpannableString","date":"2017-12-25T02:06:03.000Z","updated":"2017-12-25T08:19:22.197Z","comments":true,"path":"Android/TextViewä¸­çš„æ–‡å­—é¢œè‰²-ç‚¹å‡»-æ–œä½“ç­‰å®ç°-SpannableString/","link":"","permalink":"http://www.wangzhumo.com/Android/TextViewä¸­çš„æ–‡å­—é¢œè‰²-ç‚¹å‡»-æ–œä½“ç­‰å®ç°-SpannableString/","excerpt":"","text":"ä¸€èˆ¬å®ç°æ–¹å¼å¦‚ä¸‹:12String html = &quot;æ–‡å­—&lt;font color=\\&quot;red\\&quot;&gt;å˜è‰²&lt;/font&gt;çš„æ•ˆæœ&quot;;tvMainShow.setText(Html.fromHtml(html)); ä½¿ç”¨Htmlçš„æ–¹å¼æ¥å®ç°,ç®€å•çš„è¿˜å¥½,å¤æ‚ä¸€ç‚¹çš„çœŸçš„å¾ˆä¸æ–¹ä¾¿ Googleæ˜¾ç„¶æ—©å°±å·²ç»æƒ³åˆ°äº†è¿™æ ·çš„é—®é¢˜,æ‰€ä»¥ SpannedString &amp; SpannableStringBuilder å°±æ˜¯å¹²è¿™ä¸ªçš„ ä»–ä»¬éƒ½å®ç°äº† CharSequence,çœ¼ç†Ÿä¹ˆ? text)```.ä¹Ÿå°±æ˜¯è¯´,ä½ å¯ä»¥ç›´æ¥èµ‹å€¼ç»™TextView123456789101112ä»–ä»¬ä¸¤ä¸ªçš„åŒºåˆ«å°±æ˜¯ This is the class for text whose content is immutable but to which markup objects can be attached and detached. For mutable text, see SpannableStringBuilderæ–‡æ¡£è¯´çš„å¾ˆæ¸…æ¥šäº†,å°±æ˜¯CharSequenceæ˜¯å›ºå®šé•¿åº¦çš„,ä¸€æ—¦é€šè¿‡ new SpannableString(&quot;è®¾ç½®æ–‡å­—&quot;);åˆ™ä¸å¯ä»¥æ›´æ”¹æ–‡å­—å†…å®¹,è€ŒSpannableStringBuilderæ˜¯å¯ä»¥çš„,ä¸ªäººç†è§£æ¯”è¾ƒåƒString å’Œ StringBuilder çš„å…³ç³»###ä¸å¤šè¯´äº†,å¼€æ:**1.è®¾ç½®æ–‡å­—**&gt;SpannableString spannableString = new SpannableString(&quot;æ–‡å­—çš„å‰æ™¯è‰²ä¸èƒŒæ™¯è‰²&quot;);---**2.é€šè¿‡setSpanæ¥ä¿®æ”¹æ–‡å­—çš„æ ·å¼**```setSpan [Object what, int start, int end, int flags) flags:Spannable.SPAN_EXCLUSIVE_EXCLUSIVEï¼šå‰åéƒ½ä¸åŒ…æ‹¬Spannable.SPAN_EXCLUSIVE_INCLUSIVE ï¼šå‰é¢ä¸åŒ…æ‹¬Spannable.SPAN_INCLUSIVE_EXCLUSIVE ï¼šå‰é¢åŒ…æ‹¬Spannable.SPAN_INCLUSIVE_INCLUSIVE ï¼šå‰åéƒ½åŒ…æ‹¬ ä¸ºäº†è¯´æ˜è¿™å››ä¸ªå‚æ•°,æœ‰ä¾‹å­å¦‚ä¸‹: ä»£ç å¦‚ä¸‹:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/* * * @author ç‹è¯›é­” 2017/1/21 ä¸Šåˆ11:31 * @e-mail phyooos@163.com */public class MainActivity extends AppCompatActivity &#123; @BindView(R.id.edit_show) EditText etMainShow; @BindView(R.id.tab_view) TabLayout tabLayout; @Override public void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); ButterKnife.bind(this); showText(Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); tabLayout.setOnTabSelectedListener(new TabLayout.OnTabSelectedListener() &#123; @Override public void onTabSelected(TabLayout.Tab tab) &#123; switch (tab.getPosition()) &#123; case 0: showText(Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); break; case 1: showText(Spannable.SPAN_EXCLUSIVE_INCLUSIVE); break; case 2: showText(Spannable.SPAN_INCLUSIVE_EXCLUSIVE); break; case 3: showText(Spannable.SPAN_INCLUSIVE_INCLUSIVE); break; &#125; &#125; @Override public void onTabUnselected(TabLayout.Tab tab) &#123; &#125; @Override public void onTabReselected(TabLayout.Tab tab) &#123; &#125; &#125;); &#125; /** * å±•ç¤ºæ–‡å­— */ private void showText(int type) &#123; //æ„é€ SpannableString SpannableString spanString = new SpannableString(&quot;è¿™é‡Œæ˜¯ç‹è¯›é­”çš„ç®€ä¹¦æ–‡ç« &quot;); //å­—ä½“é¢œè‰²çš„Span ForegroundColorSpan span = new ForegroundColorSpan(Color.RED); //æŒ‡å®šèŒƒå›´ spanString.setSpan(span, 3, 6, type); //è®¾ç½®ç»™EditTextæ˜¾ç¤ºå‡ºæ¥ etMainShow.setText(spanString); &#125;&#125; ä¸Šé¢çš„ä»£ç ä¸­:123456//å­—ä½“é¢œè‰²çš„SpanForegroundColorSpan span = new ForegroundColorSpan(Color.RED);ForegroundColorSpanå°±æ˜¯è®¾ç½®çš„æ–‡å­—æ ·å¼,,è¿™ä¸ªæ˜¯å‰æ™¯è‰²,,ä¹Ÿå°±æ˜¯å­—ä½“çš„é¢œè‰²//æŒ‡å®šèŒƒå›´spanString.setSpan(span, 3, 6, type);è¿™é‡Œçš„ä¸‰ä¸ªå‚æ•°å·²ç»åœ¨ä¸Šé¢è¯´è¿‡äº†,é€šè¿‡ä¸Šé¢çš„ä»£ç ä¹Ÿä¼šå‘ç°,å…¶å®3,6 å…¶ä¸­ä¸‹æ ‡3æ˜¯åŒ…å«çš„,è€Œä¸‹æ ‡6å°±ä¸ä¼šæ”¹å˜ 3.è‡³äºSpançš„è¿™äº›ä¸ªæ ·å¼åœ¨å“ªé‡Œæ‰¾,è¯·çœ‹æ–‡æ¡£:å…³é”®è¯:CharacterStyle https://developer.android.com/reference/android/text/style/CharacterStyle.html è¯´å‡ ä¸ªå¸¸ç”¨çš„å§: ForegroundColorSpan å­—ä½“é¢œè‰² BackgroundColorSpan å­—ä½“èƒŒæ™¯è‰²è®¾ç½® AbsoluteSizeSpan å­—ä½“å¤§å° StyleSpan ç²—ä½“ç­‰1234567891011121314//å­—ä½“ç”±Typefaceæ¥æ§åˆ¶StyleSpan span = new StyleSpan(Typeface.BOLD_ITALIC);- UnderlineSpan ä¸‹åˆ’çº¿- ImageSpan å›¾ç‰‡ç½®æ¢[ImageSpan https://developer.android.com/reference/android/text/style/ImageSpan.html](https://developer.android.com/reference/android/text/style/ImageSpan.html)è¿™ä¸ªæœ‰ä¸€ç‚¹ä¸åŒ,å®ƒæ˜¯å°†æ–‡å­—ä¸­çš„æŒ‡å®šéƒ¨åˆ†æ›¿æ¢ä¸ºä¸€ä¸ªå›¾ç‰‡,è‡³äºå¦‚ä½•æ„é€ è¯·å‚è€ƒæ–‡æ¡£è®©æˆ‘æƒ³èµ·æ¥äº†é‚£ä¸ªEmojiEditTextçš„åº“,å…¶å®å¯ä»¥ç”¨è¿™ä¸ªImageSpanå®ç°ä¸€ä¸ªç®€å•çš„å¯ä»¥æ˜¾ç¤ºè¡¨æƒ…çš„TextView- ClickableSpan ç‚¹å‡» //è¿™ä¸ªæœ‰äº›ä¸åŒ,éœ€è¦class CustomClickable extends ClickableSpan { @Override public void updateDrawState(TextPaint ds) { //è¿™é‡Œå…¶å®è¿˜å¯ä»¥å¯¹å¯ç‚¹å‡»éƒ¨åˆ†è®¾ç½®ä¸€äº›ä¸œè¥¿ } @Override public void onClick(View widget) { ...do something } } //å¯¹äº†,åŠ ä¸Šè¿™è¡Œä»£ç TextView.setMovementMethod(LinkMovementMethod.getInstance());//è¦ä¸ç‚¹ä¸åŠ¨å“¦ ``` URLSpan è¿™ä¸ªå®Œå…¨å¯ä»¥ç”¨ClickableSpanå®ç° SpannableStringBuilder SpannableStringéƒ½è¯´çš„è¿™ä¹ˆæ˜ç™½äº†,SpannableStringBuilderå°±çœäº† ####End","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"Flutter å®‰è£…","slug":"Flutter-å®‰è£…","date":"2017-12-25T02:03:55.000Z","updated":"2018-02-28T16:31:53.550Z","comments":true,"path":"Flutter/Flutter-å®‰è£…/","link":"","permalink":"http://www.wangzhumo.com/Flutter/Flutter-å®‰è£…/","excerpt":"","text":"ä½¿ç”¨ç³»ç»ŸMac OS å·²ç»æ²¡åŠæ³•ç»™å¤§å®¶çœ‹é—®é¢˜äº†,æˆ‘åœ¨githubä¸Šæäº†é—®é¢˜. github issue 12345678ä½¿ç”¨å‘½ä»¤ command`flutter doctor`å¼‚å¸¸:exceptionSocketException: SocketException: Connection failed (OS Error: No route to host, errno = 65), address = android.googlesource.com, port = 443 æ€»çš„æ¥è¯´å°±æ˜¯ä¸‹è½½ Downloading Gradle Wrapperâ€¦çš„æ—¶å€™è¿æ¥ä¸åˆ°å¤–ç½‘,ä»¥è‡³äºå¤±è´¥ githubä¸Šçš„è¿™ä½å°å“¥æé†’äº†æˆ‘@lishuhao @eseidelGoogleitâ€™s reachable via https from ChromeMaybe his chrome use proxy but terminal not use proxy. æˆ‘ç¡®å®å¼€äº†ss,ä½†æ˜¯ç»ˆç«¯ç¡®å®è¿æ¥ä¸åˆ°ä»£ç†çš„,ä¸èµ°ä»£ç†,é‚£å½“ç„¶æ— è§£ ##è§£å†³: ####1.Macä¸‹ä½¿ç”¨Homebrewå®‰è£… 1brew install polipo ####2.ä¿®æ”¹é…ç½® 1ln -sfv /usr/local/opt/polipo/*.plist ~/Library/LaunchAgents 1vim /usr/local/opt/polipo/homebrew.mxcl.polipo.plist åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ &lt;string&gt;socksParentProxy=localhost:1086&lt;/string&gt; å…¶ä¸­1086è¿™ä¸ªç«¯å£å·,è‡ªå·±å»çœ‹ ####3.å¯åŠ¨ 1launchctl load ~/Library/LaunchAgents/homebrew.mxcl.polipo.plist ####4.ä½¿ç”¨ 1234567$ http_proxy=http://localhost:8123 curl ip.gsCurrent IP / å½“å‰ IP: 47.90.88.133ISP / è¿è¥å•†: ALIYUNCity / åŸå¸‚: Hong KongCountry / å›½å®¶: ChinaIP.GS is now IP.SB, please visit https://ip.sb/ for more IP information, ip.gs will only use for curl purpose. / IP.GS å·²æ›´æ–°è‡³ IP.SB è¯·è®¿é—® https://ip.sb/ è·å–æ›´å¤šä¿¡æ¯, ip.gs åŸŸåä»…ä½œ curl ä½¿ç”¨Please join Telegram group https://t.me/sbfans if you have any issues. / å¦‚æœ‰é—®é¢˜ï¼Œè¯·åŠ å…¥ Telegram ç¾¤ https://t.me/sbfans å¯ä»¥çœ‹åˆ°,ç°åœ¨æˆ‘æ˜¯é¦™æ¸¯çš„IPäº†,http_proxy=http://localhost:8123è¿™ä¸ªæ˜¯æä¾›é»˜è®¤çš„,è‡³äºæ€ä¹ˆä¿®æ”¹æˆ‘æ²¡æœ‰çœ‹,ä¹Ÿä¸çŸ¥é“ æŠŠä»£ç†è®¾ç½®ä¸ºå…¨å±€çš„1234567891011121314151617181920212223~ âŒš 11:42:51$ export http_proxy=http://localhost:8123~ âŒš 11:43:02$ export https_proxy=http://localhost:8123~ âŒš 11:43:09$ curl https://www.google.com&lt;HTML&gt;&lt;HEAD&gt;&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;&lt;TITLE&gt;302 Moved&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;H1&gt;302 Moved&lt;/H1&gt;The document has moved&lt;A HREF=&quot;https://www.google.com.hk/?gfe_rd=cr&amp;ei=5FaaWZDNOMLU8Af_nriwDw&quot;&gt;here&lt;/A&gt;.&lt;/BODY&gt;&lt;/HTML&gt;~ âŒš 11:43:33$ curl www.google.com&lt;HTML&gt;&lt;HEAD&gt;&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;&lt;TITLE&gt;302 Moved&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;H1&gt;302 Moved&lt;/H1&gt;The document has moved&lt;A HREF=&quot;http://www.google.com.hk/?gfe_rd=cr&amp;ei=6laaWZqEO8_U8AeLlID4CA&quot;&gt;here&lt;/A&gt;.&lt;/BODY&gt;&lt;/HTML&gt; ####5.End ##è§è¯å¥‡è¿¹çš„æ—¶åˆ»åˆ°äº† 12345678910111213141516171819202122232425262728293031323334353637383940414243444546~/develop/flutter on î‚  alpha! âŒš 11:44:11$ flutter doctorDownloading Gradle Wrapper... 1.3s[âœ“] Flutter (on Mac OS X 10.12.6 16G29, locale zh-Hans-CN, channel alpha) â€¢ Flutter at /Users/phyooos/develop/flutter â€¢ Framework revision b156a0f054 (9 days ago), 2017-08-11 22:01:40 -0700 â€¢ Engine revision fef7d827d6 â€¢ Tools Dart version 1.25.0-dev.9.0[âœ“] Android toolchain - develop for Android devices (Android SDK 26.0.1) â€¢ Android SDK at /Users/phyooos/Library/Android/sdk â€¢ Platform android-26, build-tools 26.0.1 â€¢ ANDROID_HOME = /Users/phyooos/Library/Android/sdk â€¢ Java binary at: /Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/bin/java â€¢ Java version OpenJDK Runtime Environment (build 1.8.0_112-release-b06)[-] iOS toolchain - develop for iOS devices âœ— Xcode installation is incomplete; a full installation is necessary for iOS development. Download at: https://developer.apple.com/xcode/download/ Or install Xcode via the App Store. Once installed, run: sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer âœ— libimobiledevice and ideviceinstaller are not installed or require updating. To update, run: brew uninstall --ignore-dependencies libimobiledevice brew install --HEAD libimobiledevice brew install ideviceinstaller âœ— ios-deploy not installed. To install: brew install ios-deploy âœ— CocoaPods not installed. CocoaPods is used to retrieve the iOS platform side&apos;s plugin code that responds to your plugin usage on the Dart side. Without resolving iOS dependencies with CocoaPods, plugins will not work on iOS. For more info, see https://flutter.io/platform-plugins To install: brew install cocoapods pod setup[âœ“] Android Studio (version 2.3) â€¢ Android Studio at /Applications/Android Studio.app/Contents â€¢ Java version OpenJDK Runtime Environment (build 1.8.0_112-release-b06)[âœ“] IntelliJ IDEA Ultimate Edition (version 2017.1.3) â€¢ Flutter plugin version 16.0 â€¢ Dart plugin version 171.4424.63[âœ“] Connected devices â€¢ None æˆ‘çš„Flutterå°±okäº†","categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://www.wangzhumo.com/categories/Flutter/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Google","slug":"Google","permalink":"http://www.wangzhumo.com/tags/Google/"}]},{"title":"BottomNavigationViewä½¿ç”¨æŒ‡å—","slug":"BottomNavigationViewä½¿ç”¨æŒ‡å—","date":"2017-12-25T01:40:44.000Z","updated":"2017-12-25T01:47:43.000Z","comments":true,"path":"Android/BottomNavigationViewä½¿ç”¨æŒ‡å—/","link":"","permalink":"http://www.wangzhumo.com/Android/BottomNavigationViewä½¿ç”¨æŒ‡å—/","excerpt":"","text":"æœ€ç»ˆæ•ˆæœ: Android Support Library 25 \bä»¥ä¸Šçš„supportåŒ…ä¸­å¢åŠ äº† BottomNavigationViewæ‰€ä»¥ä½ å¿…é¡»ä½¿ç”¨com.android.support:design:25.0.0ä»¥ä¸Šçš„ç‰ˆæœ¬æ‰èƒ½ç© 1.åœ¨ build.gradle æ–‡ä»¶ä¸­å¢åŠ ä¾èµ–ï¼š 'com.android.support:design:25.0.0'```122.åœ¨main_activity.xmlä¸­æ·»åŠ : 123- å…¶ä¸­```app:menu=&quot;@menu/menu_tab_button&quot;```å†³å®šäº†å±•ç¤ºå‡ ä¸ªitem,éƒ½é•¿ä»€ä¹ˆæ ·- å…¶ä¸­,åˆ†åˆ«å†³å®š**å›¾æ ‡å’Œæ–‡å­—**é€‰ä¸­å’Œæœªé€‰ä¸­itemçš„çŠ¶æ€,é¢œè‰² app:itemIconTint=â€@color/nav_color_selectâ€app:itemTextColor=â€@color/nav_color_selectâ€1234- å…¶ä¸­```app:itemBackground=&quot;@color/text_white_color&quot;```åˆ™æ˜¯æ•´ä¸ªviewçš„èƒŒæ™¯é¢œè‰²3.menu_tab_button.xmlçš„ä»£ç å¦‚ä¸‹: &lt;?xml version=â€1.0â€ encoding=â€utf-8â€?&gt; &lt;item android:id=&quot;@+id/mian_tab_paidui&quot; android:enabled=&quot;true&quot; android:title=&quot;@string/nav_paidui&quot; //æ–‡å­—å†…å®¹ android:icon=&quot;@drawable/paidui&quot;/&gt; //iconå›¾æ ‡ &lt;item android:id=&quot;@+id/mian_tab_find&quot; android:enabled=&quot;true&quot; android:title=&quot;@string/nav_faxiang&quot; android:icon=&quot;@drawable/faxian&quot;/&gt; &lt;item android:id=&quot;@+id/mian_tab_more&quot; android:enabled=&quot;true&quot; android:title=&quot;@string/nav_more&quot; android:icon=&quot;@drawable/more&quot;/&gt; 12345678###ç„¶è€Œ,ä½ ä»¥ä¸ºä¼šè¿™ä¹ˆç®€å•?? shiftingModeæ•™ä½ åšäºº()###è¿™ä¸ªåªä¼šåœ¨itemä¸ªæ•°è¶…è¿‡3ä¸ªæ‰ä¼šå‡ºç°.![ç‰›é€¼çš„ç‰¹æ•ˆ(shiftingMode).gif](http://upload-images.jianshu.io/upload_images/2520304-464b090fa4c8919c.gif?imageMogr2/auto-orient/strip)4.è¿™è®©æˆ‘å¦‚ä½•æ˜¯å¥½?çœ‹äº†åŠå¤©,åœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€ä¸ªæ–¹æ³•. /** ä¸€ä¸ªå…³äºBottomNavigationViewçš„å¸®åŠ©ç±»,ç”¨æ¥å…³é—­shiftingMode @author ç‹è¯›é­” 2017/2/10 ä¸‹åˆ6:35 @e-mail phyooos@163.com*/ public class BNVHelper { public static void disableShiftMode(BottomNavigationView navigationView) { BottomNavigationMenuView menuView = (BottomNavigationMenuView) navigationView.getChildAt(0); try { Field shiftingMode = menuView.getClass().getDeclaredField(&quot;mShiftingMode&quot;); shiftingMode.setAccessible(true); shiftingMode.setBoolean(menuView, false); shiftingMode.setAccessible(false); for (int i = 0; i &lt; menuView.getChildCount(); i++) { BottomNavigationItemView itemView = (BottomNavigationItemView) menuView.getChildAt(i); itemView.setShiftingMode(false); itemView.setChecked(itemView.getItemData().isChecked()); } } catch (NoSuchFieldException e) { // Log } catch (IllegalAccessException e) { // Log } } }1234567891011121314åŸä½œè€…@[ChristmasJason](http://www.jianshu.com/u/4d132a94e6e8):http://www.jianshu.com/p/e2a8791e80d6ç„¶åæˆ‘çœ‹äº†ä¸€ä¸‹æºç **mShiftingMode** è¿™ä¸ªå¸ƒå°”å€¼å†³å®šäº†æ˜¯å¦å¯ç”¨shiftingMode,æ‰€ä»¥ä¸Šé¢çš„æ–¹æ³•å°±æ˜¯shiftingMode.setBoolean(menuView, false);ç„¶åå°±å¥½äº†......æç¤º:googleè¯´é€‰ä¸­å›¾æ ‡çš„é¢œè‰²æ˜¯è¿™ä¹ˆæ”¹çš„,ç„¶è€Œéƒ½æ˜¯éª—äººçš„,è¿™ä¸ªåº”è¯¥æ˜¯é»˜è®¤çš„è®¾ç½®,æˆ‘ä¹Ÿå·æ‡’æ²¡æœ‰éªŒè¯![2017-02-21_17-59-10.png](http://upload-images.jianshu.io/upload_images/2520304-c6c71ad14a9e0106.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) app:itemIconTint=â€@color/nav_color_selectâ€app:itemTextColor=â€@color/nav_color_selectâ€123å…¶å®ä½ é…ç½®äº†ä¹‹å,å°±æ˜¯è¿™ä¸ªä¸œè¥¿æ¥å†³å®šçš„,è€Œä¸æ˜¯app&apos;s primary colornav_color_select.xmlè¿™å°±æ˜¯ä¸ªé€‰æ‹©å™¨,ä»£ç å¦‚ä¸‹: &lt;?xml version=â€1.0â€ encoding=â€utf-8â€?&gt; ``` ####End,åˆ°è¿™é‡Œä½ çš„å¯¼èˆªæ¡ä¹Ÿåº”è¯¥okäº†","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"Android Studio ä½¿ç”¨æ­£å¼ç­¾ådebugè°ƒè¯•","slug":"Android-Studio-ä½¿ç”¨æ­£å¼ç­¾ådebugè°ƒè¯•","date":"2017-12-25T01:38:59.000Z","updated":"2018-02-26T02:32:53.935Z","comments":true,"path":"Android-Studio/Android-Studio-ä½¿ç”¨æ­£å¼ç­¾ådebugè°ƒè¯•/","link":"","permalink":"http://www.wangzhumo.com/Android-Studio/Android-Studio-ä½¿ç”¨æ­£å¼ç­¾ådebugè°ƒè¯•/","excerpt":"","text":"###è§£å†³é—®é¢˜: å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹ç™»å½•ä»€ä¹ˆçš„ä¸œè¥¿,éœ€è¦æˆ‘ä»¬æä¾›æ­£å¼ç­¾å,ä½†æ˜¯æˆ‘ä»¬æ€»æ˜¯éœ€è¦è°ƒè¯•çš„.ä¸€èˆ¬æƒ…å†µ,æˆ‘ä»¬ä¸å¯èƒ½ä¸€æ¬¡æ€§OK,é‚£ä¹ˆæ¯ä¸€æ¬¡è°ƒè¯•éƒ½éœ€è¦æ­£å¼ç­¾åæ‰“åŒ…,å¹¶å®‰è£…,ç„¶åå†è°ƒè¯•,è¿™ä¹Ÿå¤ªéº»çƒ¦äº†,. æ‰€ä»¥,ç›´æ¥ä¸Šä»£ç : 1234567891011121314151617181920signingConfigs &#123; release &#123; keyAlias &apos;phyooos&apos; keyPassword &apos;phyooos&apos; storeFile file(&apos;phyooos.jks&apos;) storePassword &apos;phyooos&apos; &#125; &#125; buildTypes &#123; release &#123; minifyEnabled false signingConfig signingConfigs.release proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos; &#125; debug&#123; minifyEnabled false signingConfig signingConfigs.release proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos; &#125; &#125; è§£é‡Šä¸€ä¸‹: 12345678signingConfigs &#123; release &#123; keyAlias &apos;phyooos&apos; keyPassword &apos;phyooos&apos; storeFile file(&apos;phyooos.jks&apos;) storePassword &apos;phyooos&apos; &#125; &#125; è¿™ä¸€æ®µä»£ç å†™åœ¨é¡¹ç›®appç›®å½•ä¸‹&gt;gradleé…ç½®æ–‡ä»¶ä¸­&gt;androidèŠ‚ç‚¹ä¸‹,æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ä¸€ä¸ªé…ç½® keyAlias â€˜phyooosâ€™ è¿™æ˜¯ç­¾åæ–‡ä»¶çš„Alias keyPassword â€˜phyooosâ€™ è¿™æ˜¯ç­¾åæ–‡ä»¶çš„å¯†ç  storeFile file(â€˜phyooos.jksâ€™) è¿™ä¸ªå°±æ˜¯ç­¾åæ–‡ä»¶çš„åœ°å€,æˆ‘æ”¾åœ¨appç›®å½•ä¸‹äº† storePassword â€˜phyooosâ€™ è¿™æ˜¯storeå¯†ç  123456789101112buildTypes &#123; release &#123; minifyEnabled false signingConfig signingConfigs.release proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos; &#125; debug&#123; minifyEnabled false signingConfig signingConfigs.release proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos; &#125; &#125; è¿™ä¸€æ®µçš„æ„æ€å°±æ˜¯debugè°ƒè¯•ä»¥åŠæ­£å¼æ‰“åŒ…éƒ½ä½¿ç”¨ä¸Šé¢è‡ªå®šä¹‰çš„é…ç½® The End å¥½äº†,æ„‰å¿«çš„ç©è€å§","categories":[{"name":"Android Studio","slug":"Android-Studio","permalink":"http://www.wangzhumo.com/categories/Android-Studio/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Android Studio","slug":"Android-Studio","permalink":"http://www.wangzhumo.com/tags/Android-Studio/"}]},{"title":"ä½åŠŸè€—è“ç‰™iBeaconçš„å¼€å‘ç¬”è®°","slug":"ä½åŠŸè€—è“ç‰™iBeaconçš„å¼€å‘ç¬”è®°","date":"2017-12-25T01:37:23.000Z","updated":"2018-03-08T03:22:17.813Z","comments":true,"path":"Android/ä½åŠŸè€—è“ç‰™iBeaconçš„å¼€å‘ç¬”è®°/","link":"","permalink":"http://www.wangzhumo.com/Android/ä½åŠŸè€—è“ç‰™iBeaconçš„å¼€å‘ç¬”è®°/","excerpt":"","text":"###1.æŒ£æ‰çš„å¼€å§‹å„ç§ç™¾åº¦,google,å‘ç°å›½å†…èµ„æ–™å¾ˆå°‘,æœ‰çš„ä¹Ÿæ˜¯å•†ä¸šå…¬å¸æä¾›çš„sdk,è¿™å¹¶ä¸ç¬¦åˆæˆ‘éœ€è¦,googleå€’æ˜¯ä¸å°‘,ç„¶è€Œä»¥æˆ‘çš„è‹±è¯­æ°´å¹³,æœ›æ´‹å…´å¹ç½¢äº†@ä¸å‘ç‰¢éªšäº†: é¦–å…ˆä½ éœ€è¦äº†è§£è¿™äº›èµ„æ–™1ã€profile rofileå¯ä»¥ç†è§£ä¸ºä¸€ç§è§„èŒƒï¼Œä¸€ä¸ªæ ‡å‡†çš„é€šä¿¡åè®®ï¼Œå®ƒå­˜åœ¨äºä»æœºä¸­ã€‚è“ç‰™ç»„ç»‡è§„å®šäº†ä¸€äº›æ ‡å‡†çš„profileï¼Œä¾‹å¦‚ HID OVER GATT ï¼Œé˜²ä¸¢å™¨ ï¼Œå¿ƒç‡è®¡ç­‰ã€‚æ¯ä¸ªprofileä¸­ä¼šåŒ…å«å¤šä¸ªserviceï¼Œæ¯ä¸ªserviceä»£è¡¨ä»æœºçš„ä¸€ç§èƒ½åŠ›ã€‚ 2ã€serviceserviceå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæœåŠ¡ï¼Œåœ¨bleä»æœºä¸­ï¼Œé€šè¿‡æœ‰å¤šä¸ªæœåŠ¡ï¼Œä¾‹å¦‚ç”µé‡ä¿¡æ¯æœåŠ¡ã€ç³»ç»Ÿä¿¡æ¯æœåŠ¡ç­‰ï¼Œæ¯ä¸ªserviceä¸­åˆåŒ…å«å¤šä¸ªcharacteristicç‰¹å¾å€¼ã€‚æ¯ä¸ªå…·ä½“çš„characteristicç‰¹å¾å€¼æ‰æ˜¯bleé€šä¿¡çš„ä¸»é¢˜ã€‚æ¯”å¦‚å½“å‰çš„ç”µé‡æ˜¯80%ï¼Œæ‰€ä»¥ä¼šé€šè¿‡ç”µé‡çš„characteristicç‰¹å¾å€¼å­˜åœ¨ä»æœºçš„profileé‡Œï¼Œè¿™æ ·ä¸»æœºå°±å¯ä»¥é€šè¿‡è¿™ä¸ªcharacteristicæ¥è¯»å–80%è¿™ä¸ªæ•°æ® 3ã€characteristiccharacteristicç‰¹å¾å€¼ï¼Œbleä¸»ä»æœºçš„é€šä¿¡å‡æ˜¯é€šè¿‡characteristicæ¥å®ç°ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ ‡ç­¾ï¼Œé€šè¿‡è¿™ä¸ªæ ‡ç­¾å¯ä»¥è·å–æˆ–è€…å†™å…¥æƒ³è¦çš„å†…å®¹ã€‚ 4ã€UUIDUUIDï¼Œç»Ÿä¸€è¯†åˆ«ç ï¼Œæˆ‘ä»¬åˆšæ‰æåˆ°çš„serviceå’Œcharacteristicï¼Œéƒ½éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„uuidæ¥æ ‡è¯† S: ç™¾åº¦åˆ°çš„,æˆ‘ä»¥ä¸€ä¸ªè¿‡æ¥äººçš„èº«ä»½ä¿è¯è¿™ä¸ªå¾ˆé‡è¦ ###2.èµ„æ–™,å‡†å¤‡èµ„æ–™çœ‹è¿™é‡Œ: è¿™ä¹Ÿæ˜¯æœ€é‡è¦çš„èµ„æ–™æ¥æº,è°·æ­ŒSDKçš„ä¾‹å­é‡Œé¢æœ‰çš„é¡¹ç›® æ¥ä¸Šæ–‡,è¯´å®Œèµ„æ–™, è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„demosdk\\samples\\android-22\\connectivity\\BluetoothLeGatt è¯¥ç›®å½•ä¸‹ä¸ºè°·æ­Œæä¾›çš„demo,æˆ‘çš„åº”ç”¨ä¹Ÿæ˜¯åœ¨å®ƒçš„åŸºç¡€ä¸Šæ”¹è¿›è€Œæˆçš„.ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆ:1.ä¸€ä¸ªæœåŠ¡ BluetoothLeService,ä¸»è´Ÿè´£ä¸è“ç‰™è®¾å¤‡è¿›è¡Œæ•°æ®äº¤æ¢ 2.ä¸¤ä¸ªactivity:DeviceControlActivity,DeviceScanActivity è§åçŸ¥æ„,ä¸€ä¸ªè´Ÿè´£æ‰«æè®¾å¤‡,è€Œä¸¤å¤–ä¸€ä¸ªä¸è®¾å¤‡è¿›è¡Œäº¤äº’ 3.ä¸€ä¸ªSampleGattAttributes ä¸»è¦æ˜¯å­˜å‚¨äº†ä¸€äº›UUID,æˆ‘å¯¹å®ƒè¿›è¡Œäº†åŠ å¼º ###3.BLEè®¾å¤‡çš„ä½¿ç”¨æ­¥éª¤æ¦‚å†µ1.é¦–å…ˆè¦è¯´æ˜çš„ä¸€ç‚¹æ˜¯,è¦æ±‚Androidç‰ˆæœ¬ä¸º4.3åŠå…¶ä»¥ä¸Š æ¥ç€ç¡®è®¤è®¾å¤‡æ”¯æŒ123456789/** * æ”¯æŒBLE * check to determine whether BLE is supported on the device */public void isSupported()&#123; if (!getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH_LE)) &#123; Toast.makeText(this, &quot;è®¾å¤‡ä¸æ”¯æŒBLEåŠŸèƒ½&quot;, Toast.LENGTH_SHORT).show(); &#125; &#125; 2.ç¡®è®¤æ‰‹æœºæ”¯æŒå¹¶æ‰“å¼€è“ç‰™çš„çŠ¶æ€ä¸‹,ä½ å°±å¯ä»¥è¿›è¡Œè®¾å¤‡çš„æœç´¢äº† æœ‰ä¸¤ç§æ¨¡å¼12345678910//ç¬¬ä¸€ç§//serviceUuids æŒ‡å®šè®¾å¤‡çš„UUID//callback æœç´¢çš„å›è°ƒstartLeScan(final UUID[] serviceUuids, final LeScanCallback callback)//ç¬¬äºŒç§//å…¶å®å°±æ˜¯ä¸ä¼ å…¥serviceUuidsçš„,å°±æ˜¯è¯´æœç´¢èŒƒå›´å†…æ‰€æœ‰è“ç‰™è®¾å¤‡public boolean startLeScan(LeScanCallback callback) &#123; return startLeScan(null, callback);&#125; 3.åŒæ—¶è®°å¾—åœæ­¢æœç´¢,å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸€ç›´æœPSï¼šå…¶å®æˆ‘è§åˆ°çš„appå¤§éƒ¨åˆ†æ˜¯ä¸åœçš„æœç´¢ï¼Œè¿™æ ·çš„è¯ä¼šæœ‰ä¸€ä¸ªå¹¿æ’­æ•°æ®æŒç»­åˆ·æ–°çš„æ•ˆæœ,é‚£ä¹ˆå¾ˆå¤šçš„è·ç¦»åˆ¤æ–­ä»€ä¹ˆçš„éƒ½æ˜¯é€šè¿‡è¿™ç§ä¸åœæœç´¢çš„å½¢å¼æ¥å·¥ä½œçš„123//mBluetoothAdapter è¯·è‡ªè¡ŒæŸ¥çœ‹è°·æ­Œæ–‡æ¡£//mLeScanCallback è¿™å°±æ˜¯ä¸Šé¢æè¿‡çš„LeScanCallbackçš„å®ä¾‹mBluetoothAdapter.stopLeScan(mLeScanCallback); æ¥ç€å°±æ˜¯åœ¨å›è°ƒä¸­æ‹¿åˆ°å„ä¸ªè®¾å¤‡æ•°æ®äº†1234567891011/** * æœç´¢è®¾å¤‡å›è°ƒ */private BluetoothAdapter.LeScanCallback mLeScanCallback = new BluetoothAdapter.LeScanCallback() &#123; @Override public void onLeScan(final BluetoothDevice device, int rssi, byte[] scanRecord) &#123; &#125;&#125;; è¿™é‡Œæœ‰å‡ ä¸ªå€¼å¾—è¯´ä¸€ä¸‹çš„ä¸œè¥¿ 1.BluetoothDevice device è¯¥å¯ä»¥çœ‹çš„å¾ˆæ¸…æ¥š, deviceä¸­åŒ…å«äº†è®¾å¤‡çš„åŸºæœ¬ä¿¡æ¯ 2.rssiä¿¡å·è´¨é‡,ä¹Ÿæœ‰äººå‘Šè¯‰æˆ‘æ˜¯è´¨é‡ä¸è¿‡æˆ‘è¿™æ¬¡å¹¶æ²¡æœ‰ä½¿ç”¨åˆ° 3.byte[] scanRecord (é‡å¤´æˆ)å¹¿æ’­å“åº”åŒ…æ•°æ®ä¸€èˆ¬åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†,æˆ‘ä½¿ç”¨çš„ä¸»è¦æ˜¯ServiceDataåŸŸåœ¨è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªéƒ¨åˆ†éƒ½å­˜åœ¨äºå¹¿æ’­æ•°æ®ï¼Œè€Œä¸”å¹¶ä¸æ˜¯ä¸¤éƒ¨åˆ†éƒ½æœ‰ï¼Œæœ‰å¯èƒ½æ˜¯åªæœ‰ä¸€ä¸ªéƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸€å®šè¦çœ‹æƒ…è®¾å¤‡çš„ç¡¬ä»¶è§„èŒƒï¼Œå› ä¸ºè¿™æ¶‰åŠåˆ°åé¢è§£æå¹¿æ’­æ•°æ® è¦çŸ¥é“ï¼Œæˆ‘ä»¬éƒ½æ˜¯æ‹¿byte[]æ•°ç»„ä¸­çš„æŸäº›éƒ¨åˆ†å¯¹åº”ç‰¹å®šå€¼,ä¸€æ—¦å¯¹åº”å…³ç³»æ‰“ä¹±ï¼Œé‚£ä¹ˆæ•°æ®è§£æå°±æ²¡ä»€ä¹ˆæ­£ç¡®æ€§å¯è¨€äº†è¿™äº›å¹¿æ’­æ•°æ®éƒ½æ˜¯ä¾æ®ä¸€å®šçš„è§„åˆ™æŒ‡å®š çš„,æ‰€ä»¥è¿™æ—¶å€™ä½ éœ€è¦è®¾å¤‡å‚å•†çš„æ–‡æ¡£æ¥æŸ¥çœ‹å¯¹åº”çš„æ•°æ®,ä»¥åŠå…¶ç»“æ„PS:éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯,è¿™äº›æ•°æ®éƒ½æ˜¯byte[],ä½ éœ€è¦å°†å®ƒä»¬è½¬åŒ–(ä¸€èˆ¬å¸¸ç”¨çš„åšæ³•æ˜¯,å…ˆè½¬åŒ–ä¸º16è¿›åˆ¶çš„å­—ç¬¦ä¸²,è€Œåå†è¿›è¡Œè¯»å–è§£æ) ###4.è¯»å–è“ç‰™è®¾å¤‡å†…éƒ¨æ•°æ®è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ªé‡è¦éƒ¨åˆ†service ä»¥åŠ characteristic ä¸€èˆ¬æ¥è¯´ ä¸€ä¸ªService eg: FF01-XXXXXXXXXXX-XXXXX ä¸‹é¢å¯èƒ½æœ‰å¾ˆå¤šçš„characteristicMarjor : FF16 -XXXXXXPower : FF17 - XXXâ€¦.ä¸€å †çš„characteristic å¦‚æœéœ€è¦ç»™æŒ‡å®šçš„é¡¹ç›®å†™å…¥ä¸€ä¸ªæ•°æ® æ¡ä»¶ï¼š1.æ­¤ç‰¹å¾åœ¨å“ªä¸ªServiceä¸‹ï¼Œå³è¯¥serviceçš„UUID 2.è¯¥ç‰¹å¾çš„UUID 3.è¯¥ç‰¹å¾çš„å†™å…¥æ ¼å¼ï¼Œ16è¿›åˆ¶è¿˜æ˜¯å…¶ä»–çš„ä¸œè¥¿ 1234567//ä»£ç ç‰‡æ®µ1//æ­¤æ–¹æ³•è·å–å¯¹åº”ç‰¹å¾å€¼çš„å¯¹è±¡BluetoothGattCharacteristicçš„å®ä½“ public BluetoothGattCharacteristic getCharacteristic(String service,String charact) &#123; if (mBluetoothGatt == null) return null; if(mBluetoothGatt.getService(UUID.fromString(service))==null)&#123;return null ;&#125; return mBluetoothGatt.getService(UUID.fromString(service)).getCharacteristic(UUID.fromString(charact)); &#125; 1234567891011//ä»£ç ç‰‡æ®µ2if(!TextUtils.isEmpty(value))&#123;//è¾“å…¥éç©º byte[] arrayOfByte= new byte[2];//ä¼ å…¥æ•°æ®è§„å®šä¸º2ä¸ªbyte arrayOfByte[0] = ((byte)Integer.parseInt((value).substring(0, 2), 16)); arrayOfByte[1] = ((byte)Integer.parseInt((value).substring(2, 4), 16)); //ä¸Šé¢æ“ä½œï¼Œå…ˆåˆ‡ï¼Œå†è½¬ä¸º16è¿›åˆ¶ characteristic.setValue(arrayOfByte); //characteristicå®ä½“å°±æ˜¯ç‰‡æ®µ1ä»£ç è·å–åˆ°çš„ gattServer.writeCharacteristic(characteristic); //æ‰€æœ‰çš„æ“ä½œéƒ½å°è£…åœ¨ä¸€ä¸ªserviceä¸­ï¼ŒgattServerä¸ºå…¶å®ä½“å¯¹è±¡&#125; 123456789//ç‰‡æ®µ3å°±æ˜¯æœåŠ¡ä¸­çš„å†™å…¥æ–¹æ³•/** * å†™å…¥ä¸€ä¸ªæ•°æ® * @param characteristic */ public void writeCharacteristic(BluetoothGattCharacteristic characteristic) &#123; mBluetoothGatt.setCharacteristicNotification(characteristic, true); mBluetoothGatt.writeCharacteristic(characteristic); &#125; 123456789101112131415161718192021222324252627282930313233343536373839404142//ä»£ç ç‰‡æ®µ4 è¿™æ˜¯å›è°ƒï¼Œ//åœ¨è¿æ¥æ—¶å°±ä½œä¸ºå‚æ•°ä¼ å…¥äº† mBluetoothGatt = device.connectGatt(this, false, mGattCallback);private final BluetoothGattCallback mGattCallback = new BluetoothGattCallback() &#123; @Override public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) &#123; if (newState == BluetoothProfile.STATE_CONNECTED) &#123; Log.e(TAG, &quot;è¿æ¥è‡³ GATT server.&quot;); &#125; else if (newState == BluetoothProfile.STATE_DISCONNECTED) &#123; Log.e(TAG, &quot;æ–­å¼€ GATT server.&quot;); &#125; &#125; @Override public void onServicesDiscovered(BluetoothGatt gatt, int status) &#123; if (status == BluetoothGatt.GATT_SUCCESS) &#123; Log.e(TAG, &quot;å»ºç«‹è¿æ¥æˆåŠŸ&quot;); &#125; else &#123; Log.e(TAG, &quot;è¿æ¥çŠ¶æ€å¼‚å¸¸: &quot; + status); &#125; &#125; @Override public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) &#123; if (status == BluetoothGatt.GATT_SUCCESS) &#123; Log.e(TAG, &quot;å†™å…¥æ•°æ®æˆåŠŸ&quot;); &#125; &#125; @Override public void onCharacteristicRead(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) &#123; if (status == BluetoothGatt.GATT_SUCCESS) &#123; Log.e(TAG, &quot;è¯»å–æ•°æ®æˆåŠŸ&quot;); &#125; &#125; @Override public void onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) &#123; Log.e(TAG, &quot;è¿æ¥çŠ¶æ€å‘ç”Ÿæ”¹å˜&quot;); &#125;;&#125; PS:è¿™é‡Œçš„ä¾‹å­æ˜¯å†™å…¥ï¼Œå…¶å®è¯»å–çš„æ“ä½œä¸æ­¤ç±»ä¼¼ï¼Œæ“ä½œå®Œæˆååœ¨å›è°ƒé‡Œé¢åˆ¤æ–­çŠ¶æ€ä»¥åŠè¯»å–æ•°æ®å³å¯","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"è“ç‰™","slug":"è“ç‰™","permalink":"http://www.wangzhumo.com/tags/è“ç‰™/"}]},{"title":"Android Studio åŸºæœ¬è®¾ç½®","slug":"Android-Studio-åŸºæœ¬è®¾ç½®","date":"2017-12-25T01:35:39.000Z","updated":"2018-02-26T02:33:01.444Z","comments":true,"path":"Android-Studio/Android-Studio-åŸºæœ¬è®¾ç½®/","link":"","permalink":"http://www.wangzhumo.com/Android-Studio/Android-Studio-åŸºæœ¬è®¾ç½®/","excerpt":"","text":"####1.å¸¸ç”¨çš„å¿«æ·é”® ALT + Enter è‡ªåŠ¨æç¤º ALT + Ins get set æ„é€ æ–¹æ³• é‡å†™æ–¹æ³•ä»¥åŠä¸€äº›æ’ä»¶å¦‚è¿™é‡Œçš„ GsonFormat ä»¥åŠ Butterknife Ctrl + Alt + F å…¨å±€å˜é‡ Ctrl +Shift + Enter åŠ ; ä»¥åŠif çš„(){} Ctrl + P ä»¥åŠ Ctrl + Q æ–¹æ³•å‚æ•°ä»¥åŠæ–‡æ¡£ Ctrl +O ç»§æ‰¿é‡å†™çš„æ–¹æ³• Ctrl + / Ctrl +Shift + / æ³¨é‡Š Ctrl + Alt + L æ ¼å¼åŒ– Ctrl + D Ctrl + Y å¤åˆ¶ åˆ é™¤è¡Œ Ctrl + Shift + U å¤§å°å†™ Shift Shift Ctrl + F å…¨å±€ å½“å‰ æœç´¢ Ctrl + U åˆ°çˆ¶ç±» Ctrl + Alt + B æ‰¾åˆ°å­ç±» Ctrl + H ç±»ç»“æ„ Ctrl+Shift + H æ–¹æ³•å±‚æ¬¡ Ctrl + Alt + H è°ƒç”¨å±‚æ¬¡ Alt + F7 find use éå¸¸å¥½ç”¨çš„åŠŸèƒ½ Shift + F6 é‡å‘½å logt + Enter Tag loge logd â€¦ æ‰“å°log ####2.è‡ªåŠ¨ç”Ÿæˆä»£ç  Ctrl + J é‡Œé¢ç›¸å½“å¤šçš„æ¨¡ç‰ˆä»£ç 123456if åˆ¤ç©º ifnfor å¾ªç¯ for foreach foreachsetVisibility gonefindViewById fbcinstanceof inst è¿™äº›æ¯”è¾ƒå¸¸ç”¨ ####3.è‡ªåŠ¨å¯¼å…¥åŒ…Settings&gt;Editor&gt;General&gt;Auto import ####4.å…¶ä»–è®¾ç½®å·²ç»å¯¼å‡º ps : åœ¨ç™¾åº¦äº‘é‡Œæœ‰","categories":[{"name":"Android Studio","slug":"Android-Studio","permalink":"http://www.wangzhumo.com/categories/Android-Studio/"}],"tags":[{"name":"Android Studio","slug":"Android-Studio","permalink":"http://www.wangzhumo.com/tags/Android-Studio/"}]},{"title":"Android Studio å¯¼å…¥ VitamioåŠæ¨ªç«–å±åˆ‡æ¢","slug":"Android-Studio-å¯¼å…¥-VitamioåŠæ¨ªç«–å±åˆ‡æ¢","date":"2017-12-25T01:28:42.000Z","updated":"2018-02-26T02:33:06.709Z","comments":true,"path":"Android-Studio/Android-Studio-å¯¼å…¥-VitamioåŠæ¨ªç«–å±åˆ‡æ¢/","link":"","permalink":"http://www.wangzhumo.com/Android-Studio/Android-Studio-å¯¼å…¥-VitamioåŠæ¨ªç«–å±åˆ‡æ¢/","excerpt":"","text":"##å»ºè®®ä¸è¦ä½¿ç”¨Vitamio,å„ç§æ·±å‘ https://github.com/Bilibili/ijkplayerçœ‹çœ‹bilibiliçš„å¼€æºæ’­æ”¾å™¨ ##Vitamioå®˜æ–¹:https://www.vitamio.org/GitHub:https://github.com/yixia/VitamioBundle Vitamio èƒ½å¤Ÿæµç•…æ’­æ”¾720Pç”šè‡³1080Pé«˜æ¸…MKVï¼ŒFLVï¼ŒMP4ï¼ŒMOVï¼ŒTSï¼ŒRMVBç­‰å¸¸è§æ ¼å¼çš„è§†é¢‘ï¼Œæ”¯æŒ MMS, RTSP, RTMP, HLS(m3u8) ç­‰å¸¸è§çš„å¤šç§è§†é¢‘æµåª’ä½“åè®®ï¼ŒåŒ…æ‹¬ç‚¹æ’­ä¸ç›´æ’­ã€‚ ###1.ä¸‹è½½Vitamio åœ°å€https://www.vitamio.org/Download/ ###2.è§£å‹å¹¶å¯¼å…¥Android æ‰¾åˆ°åˆ°æ–‡ä»¶å¤¹VitamioBundle File &gt; New &gt; New Module å¯¼å…¥å®Œæˆåæ˜¯è¿™æ ·çš„ ###3.å¯¼å…¥åˆ°è‡ªå·±çš„é¡¹ç›®(å³ä¸ä½¿ç”¨Vitamioçš„libiary,å¼ºè¿«ç—‡ä¸“å±) ####A.åœ¨è‡ªå·±çš„ç›®å½•ä¸‹å»ºç«‹io.vov.vitamio å¹¶å¯¼å…¥æ‰€æœ‰çš„ç±»,ä»¥åŠå°†jniLibsç›®å½•æ‹·è´åˆ°mainç›®å½•ä¸‹,è¿˜æœ‰ç›¸å…³çš„èµ„æºæ–‡ä»¶ ####B.åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­å†™å…¥12345&lt;activity android:name=&quot;io.vov.vitamio.activity.InitActivity&quot; android:configChanges=&quot;orientation|screenSize|smallestScreenSize|keyboard|keyboardHidden|navigation&quot;android:launchMode=&quot;singleTop&quot;android:theme=&quot;@android:style/Theme.NoTitleBar&quot;android:windowSoftInputMode=&quot;stateAlwaysHidden&quot;/&gt; å¹¶åŠ å…¥ç›¸åº”çš„æƒé™ ####C.åœ¨ä½ å–œæ¬¢çš„åœ°æ–¹åˆå§‹åŒ–Vitamio å¼€ç©ç¬‘çš„,æ”¾åœ¨activityæˆ–è€…æ˜¯Applicationçš„onCreateä¸­ Vitamio.isInitialized(application.getApplicationContext()); ###3.Vatimioçš„ä½¿ç”¨ ####A.ç•Œé¢çš„æ­å»º å¯ä»¥çœ‹åˆ° æ•´ä¸ªé¡µé¢ä¸»è¦åˆ†ä¸Šä¸‹ä¸¤å±‚,ä¸»è¦æ˜¯ä¸ºäº†è§†å±å…¨å±çš„æ—¶å€™èƒ½æ–¹ä¾¿çš„éšè—æ•´ä¸ªä¸‹é¢çš„å¸ƒå±€ ####B.ä½¿ç”¨åœ¨æ­¤ä¹‹å‰ä¸ºäº†æ–¹ä¾¿çš„ä½¿ç”¨è§†å±å…¨å±æ’­æ”¾,å¯¹MediaController(package io.vov.vitamio.widget)åšä¸€ä¸ªå°å°çš„æ”¹é€ :æ·»åŠ ä¸€ä¸ªæ„é€ :ä¸»è¦ç”¨äºæŠŠè§†å±,è¿›åº¦æ¡ç­‰æ”¾åˆ°ä¸€ä¸ªViewä¸­,ä¾¿äºå…¨å±å±•ç¤º12345678910111213//è¿™ä¸ªå…¨å±çš„æ“ä½œå¯æŠŠæˆ‘éš¾åäº†,çœ‹åˆ°è¿™ä¸ªçœŸçš„æ˜¯ä¸ºåŸä½œè€…çš„æœºæ™ºç‚¹èµ public MediaController(Context context,boolean fromXml,View container) &#123; super(context); initController(context); mFromXml = fromXml; mRoot = makeControllerView(); //è¿™ä¸ªåœ°æ–¹çš„FrameLayout.LayoutpParamsæ˜¯å› ä¸ºå¸ƒå±€æ–‡ä»¶ä¸­è¦æŠŠMediaControllerçš„è§†å›¾ä½œä¸ºchildViewåŠ åˆ°ä¸€ä¸ªFrameLayoutä¸­å» LayoutParams p = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT); //æƒ³æ€æ ·å¸ƒå±€MediaControllerå°±å°½æƒ…çš„å‘æŒ¥è¿™ä¸ªLayoutParamså§ p.gravity = Gravity.BOTTOM; mRoot.setLayoutParams(p); ((FrameLayout)container).addView(mRoot); &#125; æ¥ç€ä½ å°±å¯ä»¥æ„‰å¿«çš„ç©è€äº†:åœ¨oncreateä¸­è°ƒç”¨1initVitamioView(); 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950//åˆå§‹åŒ–æ§ä»¶private void initVitamioView() &#123;//VideoViewmVideoView = (VideoView) findViewById(R.id.buffer);//è¿™ä¸ªå°±æ˜¯åŒ…è£¹æ•´ä¸ªè§†å±æ¨¡å—çš„FrameLayoutfl_controller = (FrameLayout) findViewById(R.id.fl_controller);//ç¼“å†²æ—¶å‡ºç°çš„è¿›åº¦æ¡pb = (ProgressBar) findViewById(R.id.probar);//æ’­æ”¾è¿›åº¦,å¹¶å¯ä»¥æ‹–åŠ¨è°ƒèŠ‚è§†å±æ’­æ”¾ä½ç½®downloadRateView = (TextView) findViewById(R.id.download_rate);loadRateView = (TextView) findViewById(R.id.load_rate);//è®¾ç½®è§†å±setVideoURIå¯ä»¥ç¼“å†²å¹¶æ’­æ”¾//setVideoPath()ç¼“å†²å®Œå†æ’­æ”¾mVideoView.setVideoURI(Uri.parse(TextUtils.isEmpty(path)?defaultPath:path));//è¿™é‡Œä½¿ç”¨è‡ªå®šä¹‰çš„é‚£ä¸ªMediaControlleræ„é€ mMediaController= new MediaController(this, true, fl_controller);//è¿™é‡Œçš„ç›‘å¬å…¶å®æ˜¯åœ¨MediaControllerä¸­è‡ªå·±å®šä¹‰çš„,ä¸»è¦å°±æ˜¯å…¨å±çš„åˆ‡æ¢æŒ‰é’®mMediaController.setOnControllerClick(new MediaController.OnControllerClick() &#123; @Override public void OnClick(int type) &#123; if (type == 0) &#123; //è¡¨ç¤ºç‚¹å‡»åˆ‡æ¢å…¨å±æŒ‰é’® if (isPortrait) &#123; //ä¸æ˜¯å…¨å±,åˆ‡æ¢ä¸ºå…¨å± //ä»£ç å—1 &#125; else &#123; //æ˜¯å…¨å±,è¿‘æ¥å°±åˆ‡ä¸ºåŸæ¥çš„å¤§å° //ä»£ç å—2 &#125; &#125; &#125; &#125;);//ç±»ä¼¼ç»‘å®š mVideoView.setMediaController(mMediaController);//éšè—æ§åˆ¶æ¨¡å—mMediaController.setVisibility(View.GONE);mVideoView.requestFocus();//è®¾ç½®å¯¹è§†å±ä¿¡æ¯çš„ç›‘å¬mVideoView.setOnInfoListener(this);//è§†å±ç¼“å†²çš„ç›‘å¬mVideoView.setOnBufferingUpdateListener(this);//è§†å±OKmVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() &#123; @Override public void onPrepared(MediaPlayer mediaPlayer) &#123; //è®¾ç½®æ’­æ”¾é€Ÿåº¦ mediaPlayer.setPlaybackSpeed(1.0f); &#125; &#125;); &#125; è¡¥å……ä»£ç å—1123456&gt; RelativeLayout.LayoutParams fl_lp = new RelativeLayout.LayoutParams(displayheight, displayWidth); fl_controller.setLayoutParams(fl_lp);//è®¾ç½®æ¨ªå± setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); //è¿™æ ·mVideoViewä¼šè‡ªå·±å……æ»¡å…¨å± mVideoView.setVideoLayout(VideoView.VIDEO_LAYOUT_SCALE, 0); isPortrait = false;&gt; ä»£ç å—212345678&gt; RelativeLayout.LayoutParams fl_lp = new RelativeLayout.LayoutParams( LinearLayout.LayoutParams.MATCH_PARENT, DensityUtils.dip2px(ClassRoomActivity.this,200) ); fl_controller.setLayoutParams(fl_lp); setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); isPortrait = true;&gt; 1234567891011121314151617181920/* * æ¨ªç«–å±åˆ‡æ¢çš„æ—¶å€™å›èµ°è¿™ä¸ªå›è°ƒ * */@Overridepublic void onConfigurationChanged(Configuration newConfig) &#123; //å±å¹•åˆ‡æ¢æ—¶ï¼Œè®¾ç½®å…¨å± if (this.getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) &#123; //éšè—ä¸‹é¢çš„å¸ƒå±€å’Œæ ‡é¢˜ tLBelow.setVisibility(View.GONE); mTitlebar.setVisibility(View.GONE); &#125; if (this.getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) &#123; //æ˜¾ç¤ºä¸‹é¢çš„å¸ƒå±€å’Œæ ‡é¢˜ tLBelow.setVisibility(View.VISIBLE); mTitlebar.setVisibility(View.VISIBLE); &#125; super.onConfigurationChanged(newConfig); &#125; ####C.ä¸¤ä¸ªé‡è¦çš„ç›‘å¬(ä¸Šé¢å·²ç»æ³¨å†Œè¿‡äº†)123456//ç¼“å†²çš„ç›‘å¬@Override public void onBufferingUpdate(MediaPlayer mp, int percent) &#123; //æ˜¾ç¤ºç¼“å†²è¿›åº¦ loadRateView.setText(percent + &quot;%&quot;); &#125; 1234567891011121314151617181920212223242526272829//è§†å±ä¿¡æ¯ç›‘å¬@Override public boolean onInfo(MediaPlayer mp, int what, int extra) &#123; switch (what) &#123; //å¼€å§‹ç¼“å†² case MediaPlayer.MEDIA_INFO_BUFFERING_START: if (mVideoView.isPlaying()) &#123; mVideoView.pause(); pb.setVisibility(View.VISIBLE); downloadRateView.setText(&quot;&quot;); loadRateView.setText(&quot;&quot;); downloadRateView.setVisibility(View.VISIBLE); loadRateView.setVisibility(View.VISIBLE); &#125; break; //åœæ­¢ç¼“å†²,è¿™é‡Œè‡ªåŠ¨å¼€å§‹æ’­æ”¾ case MediaPlayer.MEDIA_INFO_BUFFERING_END: mVideoView.start(); pb.setVisibility(View.GONE); downloadRateView.setVisibility(View.GONE); loadRateView.setVisibility(View.GONE); break; case MediaPlayer.MEDIA_INFO_DOWNLOAD_RATE_CHANGED: //ç¼“å†²çš„...é‚£ä¸ªå•¥ change downloadRateView.setText(&quot;&quot; + extra + &quot;kb/s&quot; + &quot; &quot;); break; &#125; return true; &#125; ###4.å°±è¿™æ · å¯¹äº†,å®Œäº‹è®°å¾—12345@Override protected void onDestroy() &#123; mVideoView.stopPlayback(); super.onDestroy(); &#125; åŸºæœ¬å°±æ˜¯è¿™æ ·äº†,å…¶ä»–çš„é—®é¢˜è‡ªå·±è§£å†³ä¸€ä¸‹å°±å¥½äº†â€¦","categories":[{"name":"Android Studio","slug":"Android-Studio","permalink":"http://www.wangzhumo.com/categories/Android-Studio/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"},{"name":"Android Studio","slug":"Android-Studio","permalink":"http://www.wangzhumo.com/tags/Android-Studio/"}]},{"title":"Linux å­¦ä¹ ç¬”è®°","slug":"Linux-å­¦ä¹ ç¬”è®°","date":"2017-12-24T15:50:59.000Z","updated":"2017-12-25T05:40:28.004Z","comments":true,"path":"Server/Linux-å­¦ä¹ ç¬”è®°/","link":"","permalink":"http://www.wangzhumo.com/Server/Linux-å­¦ä¹ ç¬”è®°/","excerpt":"","text":"netstat -an 1æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œè¿æ¥ moreå‘½ä»¤ 123456789101112131415é€‰é¡¹-num æŒ‡å®šå±å¹•çš„è¡Œæ•°ï¼ˆä»¥æ•´æ•°è¡¨ç¤ºï¼‰+num ä»è¡Œå·numå¼€å§‹æ˜¾ç¤º-d è®©moreç»™ç”¨æˆ·æ˜¾ç¤ºä¿¡æ¯[Press space to continue, &apos;q&apos; to quit.]-f ä½¿moreè®¡æ•°é€»è¾‘è¡Œï¼Œè€Œä¸æ˜¯å±å¹•è¡Œï¼ˆé•¿è¡Œä¸ä¼šæ–­åˆ°ä¸‹ä¸€è¡Œï¼‰-s æŠŠé‡å¤çš„ç©ºè¡Œå‹ç¼©æˆä¸€ä¸ªç©ºè¡Œ-u é˜²æ­¢ä¸‹åˆ’çº¿äº¤äº’åŸºäºVIM å­—ç¬¦ç•Œé¢ 1.å­—ç¬¦ç•Œé¢å ç”¨èµ„æºå°‘ 2.å‡å°‘äº†å‡ºé”™,åˆ«æ”»å‡»çš„å¯èƒ½ ä¸€åˆ‡çš†æ–‡ä»¶ ç”¨æˆ· ç¡¬ä»¶ æ–‡ä»¶â€¦. åˆ†åŒº swap å†…å­˜çš„ä¸¤å€ / æ ¹åˆ†åŒº /boot bootåˆ†åŒº 200må³å¯ (ä½œä¸ºå¯åŠ¨ç›˜ä½¿ç”¨,å¯åŠ¨éœ€è¦ç©ºé—´) /home /etc â€¦ å®‰è£…æ—¥å¿— /root/install.log è®°å½•äº†å®‰è£…åœ¨ç³»ç»Ÿä¸­çš„è½¯ä»¶åŒ…å’Œç‰ˆæœ¬ä¿¡æ¯ /root/install.log.syslog å®‰è£…è¿‡ç¨‹çš„è®°å½• /root/anaconda-ks.cfg è®°å½•å®‰è£…è¿‡ç¨‹ä¸­çš„é…ç½®ä¿¡æ¯(ç”¨äºç½‘ç»œæ‰¹é‡å®‰è£…) linuxèµ·å§‹ç¬¦ 123456[root@hadoop ~]#root ç”¨æˆ·åhadoop å½“å‰ç”¨æˆ·çš„ä¸»æœºå\"~\" å½“å‰çš„ç›®å½•, \"~\"è¡¨ç¤ºå®¶ç›®å½•\"#\" è¶…çº§ç”¨æˆ·çš„æç¤ºç¬¦\"$\" æ™®é€šç”¨æˆ·çš„æç¤ºç¬¦ 12 -rw-râ€“râ€“ 12345678910111213drwxr-xr-x. 2 wzm wzm 4096 6æœˆ 21 16:19 Desktop#ä¸€å…±10ä½ drwxr-xr-x#dç¬¬ä¸€ä½ æ–‡ä»¶ç±»å‹( -æ–‡ä»¶ dç›®å½• |è½¯é“¾æ¥æ–‡ä»¶ c b )#rwx r-x r-xåé¢çš„æ¯ä¸‰ä½æ˜¯ä¸€ç»„ç¬¬ä¸€ä¸ªä¸‰ä½ æ‰€å±è€…uç¬¬äºŒä¸ªä¸‰ä½ æ‰€å±ç»„gç¬¬ä¸‰ä¸ªä¸‰ä½ å…¶ä»–äººo#acfæƒé™rè¯»wå†™xæ‰§è¡Œ ç›®å½• 1234567891011121314151617/ æ ¹ç›®å½•/etc é…ç½®æ–‡ä»¶ç›®å½•/bin ç³»ç»Ÿå‘½ä»¤çš„ç›®å½• (æ™®é€šç”¨æˆ·å³å¯è¯»å–)/sbin ç³»ç»Ÿå‘½ä»¤çš„ç›®å½• (è¶…çº§ç”¨æˆ·å³å¯è¯»å–)/usr/bin ç³»ç»Ÿå‘½ä»¤çš„ç›®å½• (æ™®é€šç”¨æˆ·å³å¯è¯»å–)/usr/sbinç³»ç»Ÿå‘½ä»¤çš„ç›®å½• (è¶…çº§ç”¨æˆ·å³å¯è¯»å–)/home æ™®é€šç”¨æˆ·çš„å®¶ç›®å½•/root è¶…çº§ç”¨æˆ·çš„å®¶ç›®å½•/usr ç³»ç»Ÿè½¯ä»¶èµ„æºç›®å½•/boot å¯åŠ¨ç›®å½•/var ç³»ç»Ÿç›¸å…³æ–‡æ¡£/sys ç›´æ¥å†™å…¥å†…å­˜/proc ç›´æ¥å†™å…¥å†…å­˜/dev è®¾å¤‡æ–‡ä»¶ç›®å½•/lib ç³»ç»Ÿåº“ ä¿å­˜ç›®å½•/mnt ç³»ç»ŸæŒ‚è½½ç›®å½•/media æŒ‚è½½ç›®å½• linux å¸¸ç”¨å‘½ä»¤ control + L æ¸…å± æ–‡ä»¶å‘½ä»¤ åŸºæœ¬å‘½ä»¤æ ¼å¼ 12345678910å‘½ä»¤ [é€‰é¡¹] [å‚æ•°]#lsls -a æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ -l æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯,ç›®å½•ä¸‹æ‰€æœ‰å†…å®¹ -d æŸ¥çœ‹ç›®å½•å±æ€§,ç›®å½•æœ¬èº« -h äººæ€§åŒ–æ˜¾ç¤ºæ–‡ä»¶å¤§å° -i æ˜¾ç¤ºinode æ–‡ä»¶çš„idå·ll ll -l# â€‹ ç›®å½•æ–‡ä»¶å¤„ç† 12345678910111213141516171819202122232425262728#mkdir åˆ›å»ºç›®å½•mkdir -p é€’å½’åˆ›å»º,åˆ›å»ºå¤šçº§ç›®å½• #cd åˆ‡æ¢ç›®å½•cd ~ å½“å‰ç”¨æˆ·çš„å®¶ç›®å½• - è¿›å…¥ä¸Šæ¬¡è¿›å…¥çš„ç›®å½• .. è¿›å…¥ä¸Šçº§ç›®å½• . è¿›å…¥å½“å‰ç›®å½• #pwdpwd æ˜¾ç¤ºå½“å‰ç›®å½•å…¨è·¯å¾„#rm -rf [æ–‡ä»¶æˆ–ç›®å½•]rm -f å¼ºåˆ¶åˆ é™¤ -r åˆ é™¤ç›®å½• #cpcp -r å¤åˆ¶ç›®å½• -p è¿å¸¦æ–‡ä»¶çš„å±æ€§ä¸€èµ·å¤åˆ¶ -d å¦‚æœæ–‡ä»¶ä¸ºé“¾æ¥æ–‡ä»¶,åˆ™å¤åˆ¶é“¾æ¥å±æ€§ -a ç›¸å½“äº-pdr#mvmv [æºåœ°å€] [ç›®æ ‡åœ°å€] â€‹ è½¯é“¾æ¥å‘½ä»¤(æºæ–‡ä»¶ä¸€å®šå†™å·¨ç»å¯¹è·¯å¾„) 12345678910#ln [æº] [ç›®æ ‡]lnä¸èƒ½è·¨åˆ†åŒº,ä¸èƒ½æ˜¯ä¸€ä¸ªç›®å½•ç›¸å½“äºä¸€ä¸ªæ–‡ä»¶ æ–‡ä»¶idå·ç›¸åŒ -s è½¯é“¾æ¥ ç±»ä¼¼windowsé‡Œé¢çš„å¿«æ·æ–¹å¼ æœ‰è‡ªå·±çš„idå· å…¶å®æ˜¯å»æŸ¥çœ‹è‡ªå·±çš„å­˜å‚¨ç‚¹, å­˜å‚¨ç‚¹é‡Œé¢æ˜¯æºæ–‡ä»¶çš„idå·, ç„¶ååˆç”¨æºæ–‡ä»¶idå·å»æ‰¾æºæ–‡ä»¶çš„å­˜å‚¨ç‚¹ â€‹ æœç´¢å‘½ä»¤ 1234locate æ–‡ä»¶æœç´¢å‘½ä»¤whereis ä¸ whichfind æ–‡ä»¶æœç´¢å‘½ä»¤grep å­—ç¬¦ä¸²æœç´¢å‘½ä»¤ locate 123456789#locatelocate [æ–‡ä»¶å]åœ¨åå°æ•°æ®åº“ä¸­æŒ‰æ–‡ä»¶åæœç´¢ä½ç½®åœ¨:/var/lib/mlocate#updatedbupdatedb æ›´æ–°æ•°æ®åº“ whereis 1234#whereiswhereis [å‘½ä»¤å] -b ä¹‹æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶ -m åªæŸ¥æ‰¾å¸®åŠ©æ–‡ä»¶ which 1234æŸ¥çœ‹#whichwhich [æ–‡ä»¶å]æœç´¢å‘½ä»¤æ‰€åœ¨ç›®å½•è·¯å¾„å·²ç»åˆ«å find 1234567891011121314151617181920212223242526272829303132333435363738394041#find#é¿å¤§èŒƒå›´æœç´¢,ä¼šéå¸¸æ¶ˆè€—ç³»ç»Ÿèµ„æº#å¦‚æœä¸ç”¨é€šé…ç¬¦,åˆ™ä¼šæœç´¢ä¸æ–‡ä»¶åå®Œå…¨ä¸€è‡´çš„æ–‡ä»¶find [æœç´ èŒƒå›´] [æœç´¢æ¡ä»¶]find [æœç´ èŒƒå›´] -name [åå­—] -iname [åå­—] ä¸åŒºåˆ†å¤§å°å†™ -user [æ‰€æœ‰è€…] æŒ‰æ‰€æœ‰è€…æœç´¢ -nouser æŸ¥æ‰¾æ²¡æœ‰æ‰€æœ‰è€…çš„æ–‡ä»¶ -mtime [] ä¿®æ”¹æ–‡ä»¶å†…å®¹çš„æ—¶é—´ -atime [] æ–‡ä»¶è®¿é—®æ—¶é—´ -ctime [] æ”¹å˜æ–‡ä»¶å±æ€§çš„æ—¶é—´ [-10 10 +10 10å¤©å†… 10å¤©å½“å¤© +10å¤©å‰] -size [å¤§å°] å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾å¤§å°æ˜¯ 25kçš„æ–‡ä»¶ [-25k 25k +25k] [-2M 2M +2M] -inum [idå·] -a and é€»è¾‘ä¸,åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ eg find /etc -size +25k -a -size -50k -o or é€»è¾‘æˆ–,ä¸¤ä¸ªæ¡ä»¶æ»¡è¶³ä¸€ä¸ªæ¡ä»¶å³å¯ -exec [ä¸€ä¸ªå‘½ä»¤] &#123;&#125; \\; æœç´¢å‡ºæ¥çš„ç»“æœå†æ‰§è¡Œä¸€æ¬¡å‘½ä»¤ eg find /etc -size +25k -a -size -50k -exec ls -lh &#123;&#125; \\;#é€šé…ç¬¦* åŒ¹é…ä»»ä½•å†…å®¹? åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦[] åŒ¹é…ä»»æ„ä¸€ä¸ªä¸­å£å·å†…çš„å­—ç¬¦ eg: abc abd find /home -name ab[cd] â€‹ grep 1234#grepgrep \"size\" system.loggrepæ˜¯åŒ…å«åŒ¹é… åœ¨ system.log ä¸­æŸ¥æ‰¾\"size\" â€‹ å¸®åŠ©å‘½ä»¤ 123456789101112131415man [å‘½ä»¤]whatis [å‘½ä»¤] man -f [å‘½ä»¤] å‘½ä»¤çš„å¸®åŠ©çº§åˆ«man -k [å‘½ä»¤] æ¨¡ç³ŠåŒ¹é… apropos [å‘½ä»¤] æ¨¡ç³ŠåŒ¹é…[å‘½ä»¤] --helpå†…æ ¸çš„å‘½ä»¤æŸ¥çœ‹å¸®åŠ©help [å‘½ä»¤] â€‹ å‹ç¼©ä¸è§£å‹ç¼© 1å¸¸ç”¨å‹ç¼©æ ¼å¼ .zip .gz .bz2 .tar.gz .tar.bz2 zip 123456zip [å‹ç¼©æ–‡ä»¶åå­—] [æºæ–‡ä»¶]zip -r [å‹ç¼©æ–‡ä»¶åå­—] [æºç›®å½•]#è§£å‹ç¼©unzip [zipæ–‡ä»¶] gz 123456789101112131415gzip [æºæ–‡ä»¶] #å‹ç¼©ä¸º.gzæ ¼å¼çš„å‹ç¼©æ–‡ä»¶,æºæ–‡ä»¶ä¼šæ¶ˆå¤±gzip -c [æºæ–‡ä»¶] &gt; å‹ç¼©æ–‡ä»¶#å‹ç¼©ä¸º.gzæ ¼å¼ ,æºæ–‡ä»¶ä¿ç•™gzip -r [æºç›®å½•] #å‹ç¼©ç›®å½•ä¸‹æ‰€æœ‰çš„å­æ–‡ä»¶,ä½†æ˜¯ä¸èƒ½å‹ç¼©ç›®å½•#è§£å‹ç¼©gzip -d [å‹ç¼©æ–‡ä»¶]gunzip [å‹ç¼©æ–‡ä»¶]gzp -d -r [ç›®å½•] è§£å‹ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ tar 123456789#tartar -cvf [æ‰“åŒ…æ–‡ä»¶å] [æºæ–‡ä»¶] -c æ‰“åŒ… -v æ˜¾ç¤ºè¿‡ç¨‹ -f æŒ‡å®šæ‰“åŒ…åçš„æ–‡ä»¶å eg tar -cvf jp.tar jp#è§£å‹ç¼©tar -xvf [å‹ç¼©æ–‡ä»¶] - .tar.gz 1234tar -zcvf [å‹ç¼©æ–‡ä»¶å] [æºæ–‡ä»¶]#è§£å‹ç¼©tar -zxvf [å‹ç¼©åŒ…å.tar.gz] å…³æœºå’Œé‡å¯ 123456shutdown [é€‰é¡¹] æ—¶é—´ -c å–æ¶ˆå‰ä¸€ä¸ªå…³æœºå‘½ä»¤ -h å…³æœº -r é‡å¯ logout é€€å‡ºç™»å½• å…¶ä»–çš„å‘½ä»¤ 123w æ˜¾ç¤ºæ‰€æœ‰çš„ç™»å½•ç”¨æˆ·last æ‰€æœ‰ç™»å½•ä¿¡æ¯lastlog æ‰€æœ‰ç”¨æˆ·ç™»å½•ä¿¡æ¯ å…¶ä»–å¿«æ·é”® 1234567control + c å¼ºåˆ¶ç»ˆæ­¢å½“å‰å‘½ä»¤control + l æ¸…å±control + a å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦–control + e å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾control + u ä»å…‰æ ‡ä½ç½®åˆ é™¤åˆ°è¡Œé¦–control + z æŠŠå‘½ä»¤æ”¾å…¥åˆ°åå°control + r åœ¨å†å²è®°å½•ä¸­æœç´¢ è¾“å‡ºé‡å®šå‘ 1234567891011121314151617#æ ‡å‡†çš„è¾“å‡ºé‡å®šå‘å‘½ä»¤ &gt; æ–‡ä»¶ è¦†ç›–çš„æ–¹å¼å†™å…¥å‘½ä»¤ &gt;&gt; æ–‡ä»¶ è¿½åŠ çš„æ–¹å¼å†™å…¥#é”™è¯¯è¾“å‡ºé‡å®šå‘é”™è¯¯å‘½ä»¤ 2&gt; æ–‡ä»¶ è¦†ç›–çš„æ–¹å¼å†™å…¥é”™è¯¯æç¤ºé”™è¯¯å‘½ä»¤ 2&gt;&gt; æ–‡ä»¶ è¿½åŠ çš„æ–¹å¼å†™å…¥é”™è¯¯æç¤º#æ­£ç¡®å’Œé”™è¯¯çš„åŒæ—¶è¾“å‡ºå‘½ä»¤ &gt;&gt; æ–‡ä»¶ 2&gt;&amp;1å‘½ä»¤ &amp;&gt;&gt; æ–‡ä»¶#æ­£ç¡®é”™è¯¯åˆ†å¼€è¾“å‡ºå‘½ä»¤ &gt;&gt; æ–‡ä»¶ 2&gt;&gt; æ–‡ä»¶ -è¾“å…¥é‡å®šå‘ 123456789101112wc [é€‰é¡¹] [æ–‡ä»¶å] -c ç»Ÿè®¡å­—èŠ‚æ•° -w ç»Ÿè®¡å•è¯æ•° -l ç»Ÿè®¡è¡Œæ•° wcåœ¨ç»ˆç«¯è¾“å…¥æ–‡å­— control + D ç»Ÿè®¡ç»“æœwc [æ–‡ä»¶å] æ–‡ä»¶å†…å®¹è¾“å…¥åˆ°ç»ˆç«¯ ç®¡é“ç¬¦ å¤šå‘½ä»¤æ‰§è¡Œ(å‰ä¸€æ¡å‘½ä»¤çš„ç»“æœä¸ä¼šä¼ å…¥) 123456789[å‘½ä»¤1] ; [å‘½ä»¤2] é¡ºåºæ‰§è¡Œ[å‘½ä»¤1] &amp;&amp; [å‘½ä»¤2] å‘½ä»¤1æ‰§è¡Œæ­£ç¡® å‘½ä»¤2æ‰§è¡Œ å‘½ä»¤1æ‰§è¡Œé”™è¯¯ å‘½ä»¤2ä¸ä¼šæ‰§è¡Œ[å‘½ä»¤1] || [å‘½ä»¤2] å½“å‘½ä»¤1æ‰§è¡Œä¸æ­£ç¡® å‘½ä»¤2æ‰§è¡Œ å‘½ä»¤1æ‰§è¡Œæ­£ç¡® å‘½ä»¤2å°±ä¸ä¼šæ‰§è¡Œ - ç®¡é“ç¬¦(å‰ä¸€æ¡å‘½ä»¤çš„ç»“æœä¼ å…¥ä¸‹ä¸€ä¸ªå‘½ä»¤) 123 # |[å‘½ä»¤1] | [å‘½ä»¤2] å‘½ä»¤2ä¼šå»æ“ä½œå‘½ä»¤1æ‰§è¡Œçš„ç»“æœ é€šé…ç¬¦ 1234567891011121314? ä»»æ„ä¸€ä¸ªå­—ç¬¦* ä»»æ„å†…å®¹[] åŒ¹é…æ‹¬å·ä¸­çš„æŸä¸€ä¸ªå­—ç¬¦[-] åŒ¹é…æ‹¬å·ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ - ä»£è¡¨ä¸€ä¸ªèŒƒå›´ [a-z] [1-3][^] è¡¨ç¤ºåŒ¹é…ä¸æ˜¯æ‹¬å·ä¸­çš„å­—ç¬¦ æ¯”å¦‚[^0-9] æŒ‡åŒ¹é…ä¸æ˜¯æ•°å­—çš„å­—ç¬¦&apos;&apos; å•å¼•å· åœ¨å•å¼•å·ä¸­æ‰€æœ‰å­—ç¬¦éƒ½æ²¡æœ‰ç‰¹æ®Šå«ä¹‰&quot;&quot; åŒå¼•å· é™¤äº†&quot;$&quot; å’Œ &quot;`&quot; &quot;\\&quot; å…¶ä»–å­—ç¬¦éƒ½æ²¡æœ‰ç‰¹æ®Šæ„ä¹‰`` åå¼•å· æ˜¯ç³»ç»Ÿå‘½ä»¤å†…å®¹$() ç”¨æ¥å¼•ç”¨ç³»ç»Ÿå‘½ä»¤# shellä¸­è¡¨ç¤ºæ³¨é‡Š$ è°ƒç”¨å˜é‡çš„å€¼\\ è½¬ä¹‰ç¬¦","categories":[{"name":"Server","slug":"Server","permalink":"http://www.wangzhumo.com/categories/Server/"}],"tags":[{"name":"Server","slug":"Server","permalink":"http://www.wangzhumo.com/tags/Server/"},{"name":"Linux","slug":"Linux","permalink":"http://www.wangzhumo.com/tags/Linux/"}]},{"title":"Facebook/Stethoâ€”â€”Androidå¼€å‘è°ƒè¯•ç¥å™¨","slug":"Facebook-Stethoâ€”â€”Androidå¼€å‘è°ƒè¯•ç¥å™¨","date":"2017-12-24T15:47:55.000Z","updated":"2017-12-24T15:49:36.000Z","comments":true,"path":"Android/Facebook-Stethoâ€”â€”Androidå¼€å‘è°ƒè¯•ç¥å™¨/","link":"","permalink":"http://www.wangzhumo.com/Android/Facebook-Stethoâ€”â€”Androidå¼€å‘è°ƒè¯•ç¥å™¨/","excerpt":"","text":"####ä¸€ã€ç®€ä»‹ Stethoæ˜¯ä¸€ä¸ªAndroidåº”ç”¨è°ƒè¯•å·¥å…·ã€‚é›†æˆåï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡Chromeçš„å¼€å‘å·¥å…·æŸ¥çœ‹Appç›¸å…³çš„ä¿¡æ¯å’Œè°ƒè¯•ï¼›å¯è§†åŒ–æ“ä½œï¼Œä¸éœ€è¦è‡ªå·±ä½¿ç”¨adbä¹Ÿä¸éœ€è¦rootæƒé™ã€‚ ####äºŒã€APPé›†æˆ 1.ä¸‹è½½æœ€æ–°çš„jarï¼Œæˆ–è€…é€šè¿‡Gradleå¼•å…¥stethoçš„libraay 1compile &apos;com.facebook.stetho:stetho:1.3.1&apos; 2.åªéœ€è¦åœ¨ Applicationçš„ onCreate æ–¹æ³•ä¸­è°ƒç”¨ 123456public class MyApplication extends Application &#123; public void onCreate() &#123; super.onCreate(); Stetho.initializeWithDefaults(this); &#125; &#125; 3.å¦‚æœè¿˜æƒ³æŸ¥çœ‹ç½‘ç»œè¯·æ±‚çš„è¯ï¼Œéœ€è¦å¼•å…¥å¦å¤–çš„Library 1compile &apos;com.facebook.stetho:stetho-okhttp3:1.3.1&apos; 4.ä½¿ç”¨okhttp è¿˜éœ€è¦æ·»åŠ  StethoInterceptor 123OkHttpClient client = new OkHttpClient.Builder() .addNetworkInterceptor(new StethoInterceptor()) .build(); ####ä¸‰ã€ä½¿ç”¨é…ç½®å®Œæˆä¹‹åï¼Œåœ¨Chromeåœ°å€æ è¾“å…¥chrome://inspect chrome://inspect/#devices chromeä¼šæ£€æµ‹åˆ°æˆ‘ä»¬çš„appï¼Œç‚¹å‡» inspect è¿›å…¥æŸ¥çœ‹é¡µé¢","categories":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"String.formatçš„å‚æ•°è¡¨","slug":"String-formatçš„å‚æ•°è¡¨","date":"2017-12-23T02:56:53.000Z","updated":"2018-07-05T05:14:25.930Z","comments":true,"path":"Java/String-formatçš„å‚æ•°è¡¨/","link":"","permalink":"http://www.wangzhumo.com/Java/String-formatçš„å‚æ•°è¡¨/","excerpt":"","text":"####String.format() 1234567891011121314%s å­—ç¬¦ä¸²ç±»å‹ &quot;mingrisoft&quot;%c å­—ç¬¦ç±»å‹ &apos;m&apos;%b å¸ƒå°”ç±»å‹ true%d æ•´æ•°ç±»å‹ï¼ˆåè¿›åˆ¶ï¼‰ 99%x æ•´æ•°ç±»å‹ï¼ˆåå…­è¿›åˆ¶ï¼‰ FF%o æ•´æ•°ç±»å‹ï¼ˆå…«è¿›åˆ¶ï¼‰ 77%f æµ®ç‚¹ç±»å‹ 99.99%a åå…­è¿›åˆ¶æµ®ç‚¹ç±»å‹ FF.35AE%e æŒ‡æ•°ç±»å‹ 9.38e+5%g é€šç”¨æµ®ç‚¹ç±»å‹ï¼ˆfå’Œeç±»å‹ä¸­è¾ƒçŸ­çš„ï¼‰%h æ•£åˆ—ç  %% ç™¾åˆ†æ¯”ç±»å‹ ï¼…%n æ¢è¡Œç¬¦%tx æ—¥æœŸä¸æ—¶é—´ç±»å‹ï¼ˆxä»£è¡¨ä¸åŒçš„æ—¥æœŸä¸æ—¶é—´è½¬æ¢ç¬¦","categories":[{"name":"Java","slug":"Java","permalink":"http://www.wangzhumo.com/categories/Java/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]},{"title":"é€æ˜åº¦å¯¹ç…§è¡¨","slug":"é€æ˜åº¦å¯¹ç…§è¡¨","date":"2017-12-23T02:55:00.000Z","updated":"2018-02-28T16:33:07.972Z","comments":true,"path":"Tools/é€æ˜åº¦å¯¹ç…§è¡¨/","link":"","permalink":"http://www.wangzhumo.com/Tools/é€æ˜åº¦å¯¹ç…§è¡¨/","excerpt":"","text":"####é€æ˜åº¦å¯¹ç…§è¡¨ 1234567891011121314151617181920212223242526272829303132333435363738394041100% â€” FF95% â€” F290% â€” E685% â€” D980% â€” CC75% â€” BF70% â€” B365% â€” A660% â€” 9955% â€” 8C50% â€” 8045% â€” 7340% â€” 6635% â€” 5930% â€” 4D25% â€” 4020% â€” 3315% â€” 2610% â€” 1A5% â€” 0D0% â€” 00","categories":[{"name":"Tools","slug":"Tools","permalink":"http://www.wangzhumo.com/categories/Tools/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://www.wangzhumo.com/tags/Android/"}]}]}