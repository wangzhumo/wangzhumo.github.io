<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[Androidéé™æ€å†…éƒ¨ç±»ä¸åŒ¿åå†…éƒ¨ç±»å¼•èµ·çš„å†…å­˜æ³„æ¼]]></title>
      <url>/Android/Android%E9%9D%9E%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB%E4%B8%8E%E5%8C%BF%E5%90%8D%E5%86%85%E9%83%A8%E7%B1%BB%E5%BC%95%E8%B5%B7%E7%9A%84%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F/</url>
      <content type="html"><![CDATA[<h3 id="å†…å­˜"><a href="#å†…å­˜" class="headerlink" title="å†…å­˜"></a>å†…å­˜</h3><h4 id="å†…å­˜æ³„æ¼"><a href="#å†…å­˜æ³„æ¼" class="headerlink" title="å†…å­˜æ³„æ¼"></a>å†…å­˜æ³„æ¼</h4><p>ç®€å•çš„è¯´ï¼Œå½“æˆ‘ä»¬çš„å¯¹è±¡åˆ›å»ºæ—¶ï¼Œå°±å ç”¨äº†ä¸€éƒ¨åˆ†å†…å­˜ï¼Œè€Œåœ¨è¿™ä¸ªå¯¹è±¡æ²¡æœ‰è¢«å¼•ç”¨åä¼šè¿›è¡Œå›æ”¶é”€æ¯ï¼Œ</p>
<p>ä»¥é‡Šæ”¾æ‰å ç”¨çš„å†…å­˜ã€‚ä½†æ˜¯å¦‚æœjvmæ²¡æœ‰æˆåŠŸå›æ”¶è¿™ä¸ªå¯¹è±¡ï¼Œå°±ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚</p>
<h4 id="å†…å­˜æº¢å‡º"><a href="#å†…å­˜æº¢å‡º" class="headerlink" title="å†…å­˜æº¢å‡º"></a>å†…å­˜æº¢å‡º</h4><p>Androidä¸­çš„OOMï¼Œç³»ç»Ÿä¼šç»™æ¯ä¸€ä¸ªAndroidç¨‹åºåˆ†é…ä¸€å®šçš„å†…å­˜ã€‚æˆ‘çš„çš„Appå¯èƒ½ä¼šå› ä¸ºå¤§é‡çš„å†…å­˜æ³„æ¼è€Œå¯¼è‡´å†…å­˜è€—å°½ï¼Œå¼•å‘OOMå¯¼è‡´æ•´ä¸ªAppçš„å´©æºƒã€‚</p>
<p>å°±ç®—å†…å­˜æ²¡æœ‰è€—å°½è€Œå´©æºƒï¼Œä¹Ÿä¼šå¯¼è‡´Appå†…å­˜ä¸è¶³ã€‚æ­¤æ—¶æˆ‘ä»¬åˆ›å»ºæ–°çš„å¯¹è±¡æˆ–è€…å…¶ä»–æ–¹å¼éœ€è¦ä½¿ç”¨å†…å­˜æ—¶ï¼ŒGCå°±ä¼šä¸»åŠ¨è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä¸ºä½ çš„æ“ä½œå‡†å¤‡å¥½å†…å­˜ç©ºé—´ï¼Œæ¯æ¬¡GCéƒ½æ˜¯é˜»å¡æ“ä½œï¼Œè¿™å°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„Appå¡é¡¿ã€‚</p>
<blockquote>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¼˜åŒ–Appå¡é¡¿æ—¶ï¼Œæœ‰ä¸€ç‚¹å°±æ˜¯è¦å…³æ³¨â€œå†…å­˜æŠ–åŠ¨â€ã€‚</p>
</blockquote>
<h3 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h3><h4 id="handlerçš„å†…éƒ¨ç±»"><a href="#handlerçš„å†…éƒ¨ç±»" class="headerlink" title="handlerçš„å†…éƒ¨ç±»"></a>handlerçš„å†…éƒ¨ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> Handler mHandler = <span class="keyword">new</span> Handler() &#123;</span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// å»¶æ—¶60s</span></span><br><span class="line">		mHandler.postDelayed(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">       		<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123; </span><br><span class="line">           		<span class="comment">//run </span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, <span class="number">6000</span>);</span><br><span class="line">        </span><br><span class="line">        finish();</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çŸ¥é“åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºçš„Handlerä¼šè¢«å…³è”åˆ° Looperï¼ˆä¸»çº¿ç¨‹çš„ï¼‰ä¸­å»ï¼Œè€Œä¸»çº¿ç¨‹çš„Looperåœ¨åº”ç”¨ç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­å­˜åœ¨ ï¼Œæ­¤æ—¶çš„Messageä¼šæŒæœ‰Handlerå¯¹è±¡ï¼Œç”¨æ¥æœ€åå¤„ç†æ¶ˆæ¯ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è°ƒç”¨<code>Handler#handleMessage(Message msg)</code></p>
<p><strong>å½“æˆ‘ä»¬è°ƒç”¨<code>test1()</code>æ–¹æ³•</strong></p>
<ul>
<li>å»¶æ—¶60sæ‰§è¡Œï¼ˆä½†å®é™…ä¸Šï¼Œè¿™ä¸ªmessageå·²ç»å‘é€ï¼Œåœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­äº†ï¼Œåªæ˜¯60såæ‰ handleMessageï¼‰</li>
<li>finish()æ‰è¿™MainActivity</li>
<li><code>new Runnable</code>æ˜¯ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œä¼šæŒæœ‰éšå¼çš„å¤–éƒ¨ç±»å¼•ç”¨ </li>
</ul>
<p>è¿™ä¸‹å°±å¾®å¦™äº†ï¼ŒMainActivityå·²ç»è¢«finishäº†ï¼Œä½†æ˜¯å»¶æ—¶Messageå´è¿˜å­˜åœ¨äºæ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç›´åˆ°å®ƒè¢«å¤„ç†</p>
<p>å»¶æ—¶Message æŒæœ‰ MainActivityçš„Handler(ç”¨æ¥å¤„ç†è¿™ä¸ªæ¶ˆæ¯)ï¼Œè€Œæˆ‘ä»¬çŸ¥é“åœ¨Javaä¸­ï¼Œéé™æ€å†…éƒ¨ç±»å’ŒåŒ¿åç±»ä¼šéšå¼æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»çš„å¼•ç”¨ ï¼Œåœ¨è¿™é‡Œå°±æ˜¯Handleréšå¼æŒæœ‰MainActivity</p>
<p>è¿™ä¸‹å°±å¯¼è‡´ï¼ŒMainActivity æ²¡æœ‰è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ </p>
<p>è¿˜æœ‰ä¸ªRunnableé‚£â€¦</p>
<h4 id="è§£å†³æ€è·¯"><a href="#è§£å†³æ€è·¯" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h4><ol>
<li>å»é™¤éšå¼å¼•ç”¨ï¼Œå¯ä»¥æŠŠéé™æ€å†…éƒ¨ç±»è½¬åŒ–æˆé™æ€çš„</li>
<li>æ‰‹åŠ¨ç®¡ç†å¤–éƒ¨ç±»ä¾èµ–ï¼Œå¦‚æœä¸€å®šè¦ä½¿ç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨ä¼ å…¥å¤–éƒ¨ç±»ï¼ˆåƒContextè¿™æ ·çš„å®Œå…¨å¯ä»¥ä½¿ç”¨ApplicationContextæ›¿ä»£ï¼‰</li>
</ol>
<h4 id="æ¡ˆä¾‹å°ç»“"><a href="#æ¡ˆä¾‹å°ç»“" class="headerlink" title="æ¡ˆä¾‹å°ç»“"></a>æ¡ˆä¾‹å°ç»“</h4><p>éé™æ€çš„å†…éƒ¨ç±»ï¼Œç”±äºå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½åŒå¤–éƒ¨ç±»ä¸€è‡´ï¼Œå®ƒçš„ç”Ÿå­˜å‘¨æœŸå·²ç»è¶…è¿‡äº†å®ƒçš„å¤–éƒ¨ç±»ã€‚</p>
<p>æ‰€ä»¥åœ¨å®ƒçš„å¤–éƒ¨ç±»è¢«å›æ”¶æ—¶ï¼Œè¢«å®ƒæ‰“æ–­äº†è¿™ä¸ªæ“ä½œï¼Œå¯¼è‡´å†…å­˜æ³„æ¼äº§ç”Ÿ</p>
<h3 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a>å†…éƒ¨ç±»</h3><p>Javaä¸­å†…éƒ¨ç±»åˆ†ä¸ºå››ç§ </p>
<ol>
<li>é™æ€å†…éƒ¨ç±»</li>
<li>é™æ€åŒ¿åå†…éƒ¨ç±»</li>
<li>éé™æ€å†…éƒ¨ç±»</li>
<li>éé™æ€å†…éƒ¨åŒ¿åç±»</li>
</ol>
<table>
<thead>
<tr>
<th>è¯´æ˜</th>
<th>æˆå‘˜å†…éƒ¨ç±»</th>
<th>é™æ€å†…éƒ¨ç±»</th>
</tr>
</thead>
<tbody>
<tr>
<td>é™æ€æˆå‘˜</td>
<td>é™æ€æˆå‘˜éœ€åŒæ—¶æœ‰finalå…³é”®è¯ä¿®é¥°</td>
<td>å¯ä»¥</td>
</tr>
<tr>
<td>é™æ€æ–¹æ³•</td>
<td>ä¸å¯å®šä¹‰</td>
<td>å¯ä»¥</td>
</tr>
<tr>
<td>è®¿é—®å¤–éƒ¨ç±»éstaticå±æ€§/æ–¹æ³•</td>
<td>å¤–éƒ¨ç±»å.this.æˆå‘˜æ–¹æ³•/å±æ€§</td>
<td>ä¸å¯ä»¥</td>
</tr>
<tr>
<td>å¤–éƒ¨ç±»è®¿é—®å†…éƒ¨ç±»</td>
<td>éœ€è¦é€šè¿‡å†…éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹æ¥è®¿é—®</td>
<td>éœ€è¦é€šè¿‡å†…éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹æ¥è®¿é—®</td>
</tr>
<tr>
<td>åˆ›å»ºå®ä¾‹</td>
<td>å¤–éƒ¨ç±»å.å†…éƒ¨ç±»å å®ä¾‹å = å¤–éƒ¨ç±»å®ä¾‹å.new å†…éƒ¨ç±»æ„é€ æ–¹æ³•(å‚æ•°)</td>
<td>å¤–éƒ¨ç±»å.å†…éƒ¨ç±»å å®ä¾‹å = new å¤–éƒ¨ç±»å.å†…éƒ¨ç±»å(å‚æ•°)</td>
</tr>
<tr>
<td>ç¼–è¯‘åçš„classæ–‡ä»¶</td>
<td>å•ç‹¬çš„classæ–‡ä»¶(soå†…éƒ¨ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡å¯ä»¥è·Ÿçˆ¶ç±»çš„æ–¹æ³•å’Œå˜é‡åŒå)ï¼Œå¤–éƒ¨ç±»$å†…éƒ¨ç±».class</td>
<td>å•ç‹¬çš„classæ–‡ä»¶(soå†…éƒ¨ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡å¯ä»¥è·Ÿçˆ¶ç±»çš„æ–¹æ³•å’Œå˜é‡åŒå)ï¼Œå¤–éƒ¨ç±»$å†…éƒ¨ç±».class</td>
</tr>
<tr>
<td>å…¶ä»–</td>
<td>ä¸å¤–éƒ¨ç±»å¹³çº§çš„ç±»ç»§æ‰¿å†…éƒ¨ç±»æ—¶ï¼Œå…¶æ„é€ æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥çˆ¶ç±»çš„å®ä¾‹å¯¹è±¡ã€‚ä¸”åœ¨æ„é€ æ–¹æ³•çš„ç¬¬ä¸€å¥è°ƒç”¨â€œå¤–éƒ¨ç±»å®ä¾‹å.super(å†…éƒ¨ç±»å‚æ•°)â€</td>
<td>æ— </td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong>è¯´æ˜</strong></th>
<th style="text-align:left"><strong>æˆå‘˜å†…éƒ¨ç±»</strong></th>
<th><strong>åŒ¿åå†…éƒ¨ç±»</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>é™æ€æˆå‘˜</td>
<td style="text-align:left">é™æ€æˆå‘˜éœ€åŒæ—¶æœ‰finalå…³é”®è¯ä¿®é¥°</td>
<td>ä¸å¯å®šä¹‰</td>
</tr>
<tr>
<td>é™æ€æ–¹æ³•</td>
<td style="text-align:left">ä¸å¯å®šä¹‰</td>
<td>ä¸å¯å®šä¹‰</td>
</tr>
<tr>
<td>è®¿é—®å¤–éƒ¨ç±»éstaticå±æ€§/æ–¹æ³•</td>
<td style="text-align:left">å¤–éƒ¨ç±»å.this.æˆå‘˜æ–¹æ³•/å±æ€§</td>
<td>å¤–éƒ¨ç±»å.this.æˆå‘˜æ–¹æ³•/å±æ€§</td>
</tr>
<tr>
<td>å¤–éƒ¨ç±»è®¿é—®å†…éƒ¨ç±»</td>
<td style="text-align:left">éœ€è¦é€šè¿‡å†…éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹æ¥è®¿é—®</td>
<td>éœ€è¦é€šè¿‡å†…éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹æ¥è®¿é—®</td>
</tr>
<tr>
<td>åˆ›å»ºå®ä¾‹</td>
<td style="text-align:left">å¤–éƒ¨ç±»å.å†…éƒ¨ç±»å å®ä¾‹å = å¤–éƒ¨ç±»å®ä¾‹å.new å†…éƒ¨ç±»æ„é€ æ–¹æ³•(å‚æ•°)</td>
<td>å¦‚ä¸Šï¼šçˆ¶ç±» å®ä¾‹å = new çˆ¶ç±»ï¼ˆï¼‰{}</td>
</tr>
<tr>
<td>ç¼–è¯‘åçš„classæ–‡ä»¶</td>
<td style="text-align:left">å•ç‹¬çš„classæ–‡ä»¶(soå†…éƒ¨ç±»ä¸­çš„æ–¹æ³•å’Œå˜é‡å¯ä»¥è·Ÿçˆ¶ç±»çš„æ–¹æ³•å’Œå˜é‡åŒå)ï¼Œå¤–éƒ¨ç±»$å†…éƒ¨ç±».class</td>
<td>å•ç‹¬çš„classæ–‡ä»¶ï¼Œä½¿ç”¨ç±»$æ•°å­—.class</td>
</tr>
<tr>
<td>å…¶ä»–</td>
<td style="text-align:left">ä¸å¤–éƒ¨ç±»å¹³çº§çš„ç±»ç»§æ‰¿å†…éƒ¨ç±»æ—¶ï¼Œå…¶æ„é€ æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥çˆ¶ç±»çš„å®ä¾‹å¯¹è±¡ã€‚ä¸”åœ¨æ„é€ æ–¹æ³•çš„ç¬¬ä¸€å¥è°ƒç”¨â€œå¤–éƒ¨ç±»å®ä¾‹å.super(å†…éƒ¨ç±»å‚æ•°)â€</td>
<td>æ— </td>
</tr>
</tbody>
</table>
<blockquote>
<p><a href="https://www.cnblogs.com/dorothychai/p/6007709.html" target="_blank" rel="noopener">https://www.cnblogs.com/dorothychai/p/6007709.html</a></p>
</blockquote>
<h3 id="å¯ç¤º"><a href="#å¯ç¤º" class="headerlink" title="å¯ç¤º"></a>å¯ç¤º</h3><ol>
<li><p>éé™æ€å†…éƒ¨ç±» æ”¹ä¸º é™æ€éåŒ¿åå†…éƒ¨ç±» </p>
</li>
<li><p>ä½¿ç”¨å¼±å¼•ç”¨</p>
</li>
<li><p>åœ¨é€‚å½“çš„æ—¶æœºæ‰‹åŠ¨é”€æ¯ï¼Œåœ¨onDestoryä¸­æ‰‹åŠ¨é”€æ¯</p>
<p>å…»æˆè‰¯å¥½çš„ä¹ æƒ¯ï¼ŒContextã€Handlerã€Timerã€Thread  ã€å¹¿æ’­ ã€ IO ç­‰éƒ½è¦æ³¨æ„é”€æ¯</p>
</li>
</ol>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Java </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä»¿å†™UCæµè§ˆå™¨è§†é¢‘ç±»æ–°é—»ç‚¹èµæ•ˆæœ]]></title>
      <url>/View/%E4%BB%BF%E5%86%99UC%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%86%E9%A2%91%E7%B1%BB%E6%96%B0%E9%97%BB%E7%82%B9%E8%B5%9E%E6%95%88%E6%9E%9C/</url>
      <content type="html"><![CDATA[<h3 id="ç›®æ ‡æ•ˆæœ"><a href="#ç›®æ ‡æ•ˆæœ" class="headerlink" title="ç›®æ ‡æ•ˆæœ"></a>ç›®æ ‡æ•ˆæœ</h3><p><img src="../images/ucbrows_favour.gif" alt="ç›®æ ‡"></p>
<p>ğŸ‘ æ•ˆæœ</p>
<ul>
<li>å°ç‰©ä»¶çš„æŠ›ç‰©çº¿</li>
<li>å°ç‰©ä»¶çš„åˆé€Ÿåº¦</li>
<li>å°ç‰©ä»¶çš„å–·å°„è§’åº¦</li>
<li>å°ç‰©ä»¶å¹¶ä¸æ˜¯ç›´æ¥æ¶ˆå¤±çš„,è€Œæ˜¯é€æ˜åº¦</li>
</ul>
<p>åˆ†æUCæµè§ˆå™¨çš„apkæ–‡ä»¶,çœ‹åˆ°äº†ä¸€ä¸ªlottieâ€¦ç„¶è€Œ</p>
<p>è¿™ä¸ªç‚¹èµ,æ¯æ¬¡çš„æ•ˆæœéƒ½ä¸ä¸€æ ·,åº”è¯¥è€ƒè™‘ä½¿ç”¨å±æ€§åŠ¨ç”»å»å®ç°</p>
<p>ä½¿ç”¨å·®å€¼å™¨å¯ä»¥æ¨¡ä»¿æŠ›ç‰©çº¿çš„æ•ˆæœæ¥ä½¿ç”¨,gogogo</p>
]]></content>
      
        <categories>
            
            <category> View </category>
            
        </categories>
        
        
        <tags>
            
            <tag> View </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Git Submodule å­æ¨¡å—çš„ä½¿ç”¨]]></title>
      <url>/Tools/Git-Submodule-%E5%AD%90%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p><em>Git</em>æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ,å¤§å®¶å…¬å¸å¯èƒ½éƒ½æ˜¯ä½¿ç”¨çš„Gitæ¥è¿›è¡Œç‰ˆæœ¬æ§åˆ¶.</p>
<p>å¯¹äºæˆ‘ä¸ªäºº,æœ¬åœ°é¡¹ç›®ä¹Ÿå–œæ¬¢ä½¿ç”¨git,ä¸‡ä¸€å“ªå¤©æƒ³å›é€€ä¸€ä¸‹,æ²¡æœ‰gitå¯å°±çœŸè´¹åŠ²äº†.</p>
<p>å¯¹äºgitçš„å¸¸è§„æ“ä½œä¸ç”¨å¤šè¯´,ä»Šå¤©è´´ä¸€ä¸ªsubmoduleçš„çœŸå®ä½¿ç”¨è¿‡ç¨‹</p>
<p><img src="../images/git_all_project.png" alt="project"></p>
<p>é¡¹ç›®ç»“æ„å¦‚ä¸Š.</p>
<p>ä¸ºäº†æ–¹ä¾¿æˆ‘è‡ªå·±ç©,æˆ‘å¼€äº†ä¸€ä¸ªplaygroundçš„é¡¹ç›®</p>
<p>playground</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ app              #ä¸»é¡¹ç›®</span><br><span class="line">â”œâ”€â”€ lib_common		 #å­é¡¹ç›®,å…¶ä¸­ä¸»è¦æä¾›ä¸‰æ–¹çš„ä¾èµ–,ä»¥åŠæ•´ä¸ªé¡¹ç›®çš„å…¬å…±ä»£ç éƒ¨åˆ†</span><br><span class="line">                     #å› ä¸ºè¿™ä¸ªé¡¹ç›®éœ€è¦åŠæ—¶æ›´æ–°,æ–¹ä¾¿æ¯ä¸ªäººä½¿ç”¨,æ‰€ä»¥æ˜¯ä¸€ä¸ªsubmoduleæ¥ç®¡ç† </span><br><span class="line">â”œâ”€â”€ lib_player   </span><br><span class="line">â”œâ”€â”€ module_views     #ä»Šå¤©è¦æ¼”ç¤ºçš„å­æ¨¡å—</span><br></pre></td></tr></table></figure>
<p>å…¶å®Submodule å’ŒAndroidçš„ç»„ä»¶åŒ–æ›´é…å“¦,å±äºå¼ºå¼ºè”åˆ</p>
<h4 id="åˆ›å»ºmodule-viewsæ¨¡å—"><a href="#åˆ›å»ºmodule-viewsæ¨¡å—" class="headerlink" title="åˆ›å»ºmodule_viewsæ¨¡å—"></a>åˆ›å»ºmodule_viewsæ¨¡å—</h4><h5 id="å»ºç«‹module"><a href="#å»ºç«‹module" class="headerlink" title="å»ºç«‹module"></a>å»ºç«‹module</h5><p>åœ¨æˆ‘ä»¬playgroundçš„é¡¹ç›®ä¸Š,åˆ›å»ºä¸€ä¸ªæ–°æ¨¡å—,æ€ä¹ˆæ“ä½œå°±ä¸è¯´äº†</p>
<h5 id="åœ¨module-viewsä¸­åˆå§‹åŒ–Git"><a href="#åœ¨module-viewsä¸­åˆå§‹åŒ–Git" class="headerlink" title="åœ¨module_viewsä¸­åˆå§‹åŒ–Git"></a>åœ¨module_viewsä¸­åˆå§‹åŒ–Git</h5><blockquote>
<p>æ³¨æ„,å½“module_viewsè¿™ä¸ªæ¨¡å—åˆ›å»ºæ—¶,ä¸€å®šä¸è¦æ‰‹å¿«æŠŠè¿™ä¸ªæ¨¡å—æ·»åŠ åˆ°playgroundæ•´ä¸ªé¡¹ç›®çš„ç‰ˆæœ¬æ§åˆ¶ä¸­</p>
<p>è®°å¾—<strong>å¿½ç•¥module_viewsæ•´ä¸ªmodule</strong></p>
</blockquote>
<p>ç›´æ¥è´´æ“ä½œäº†</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> phyooos @ wangzhumo in ~ [16:38:01]</span><br><span class="line"><span class="meta">$</span> cd ~/workspace/playground</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:58:48]</span><br><span class="line"><span class="meta">$</span> ll | grep 'module_views'</span><br><span class="line">drwxr-xr-x  11 phyooos  staff   352B  7  2 16:31 module_views</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:59:03]</span><br><span class="line"><span class="meta">$</span> cd module_views</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> phyooos @ wangzhumo in ~/workspace/playground/module_views  [16:59:19]</span><br><span class="line"><span class="meta">$</span> git init</span><br><span class="line">Reinitialized existing Git repository in /Users/phyooos/workspace/playground/module_views/.git/</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºæˆ‘çš„module_viewså·²ç»åˆ›å»ºgitä»“åº“äº†,æ‰€ä»¥æœ€åä¸€æ­¥æç¤º <code>Reinitialized existing Git repository</code></p>
<h5 id="å…³è”è¿œç¨‹ä»“åº“"><a href="#å…³è”è¿œç¨‹ä»“åº“" class="headerlink" title="å…³è”è¿œç¨‹ä»“åº“"></a>å…³è”è¿œç¨‹ä»“åº“</h5><p>è¿™ä¸€æ­¥éšæ„,æˆ‘æœ¬äººæ˜¯åœ¨githubä¸Šåˆ›å»ºäº†ä¸€ä¸ªåä¸º<a href="https://github.com/wangzhumo/module_views" target="_blank" rel="noopener">module_views</a>çš„åº“</p>
<p>æ‹¿åˆ°è¿œç¨‹ä»“åº“åœ°å€ git@github.com:wangzhumo/module_views.git</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> phyooos @ wangzhumo in ~/workspace/playground/module_views  [16:59:30]</span><br><span class="line"><span class="meta">$</span> git remote add origin git@github.com:wangzhumo/module_views.git</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> phyooos @ wangzhumo in ~/workspace/playground/module_views on git:master o [16:59:30]</span><br><span class="line"><span class="meta">$</span> git push</span><br><span class="line">Everything up-to-date</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> phyooos @ wangzhumo in ~/workspace/playground/module_views on git:master o [17:06:51]</span><br><span class="line"><span class="meta">$</span> git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up to date with 'origin/master'.</span><br><span class="line"></span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ è¿œç¨‹ä»“åº“,å¹¶push,æŠŠæœ¬åœ°ä»£ç æäº¤åˆ°githubä¸Šå»,å› ä¸ºæˆ‘è‡ªå·±å·²ç»æäº¤è¿‡äº†,æ‰€ä»¥å¯ä»¥çœ‹åˆ°</p>
<p><code>Everything up-to-date</code></p>
<h4 id="æ·»åŠ å­æ¨¡å—åˆ°playgroundä¸­"><a href="#æ·»åŠ å­æ¨¡å—åˆ°playgroundä¸­" class="headerlink" title="æ·»åŠ å­æ¨¡å—åˆ°playgroundä¸­"></a>æ·»åŠ å­æ¨¡å—åˆ°playgroundä¸­</h4><p>è´´æ“ä½œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:38:12]</span><br><span class="line"><span class="meta">$</span> git submodule add git@github.com:wangzhumo/module_views.git ./module_views</span><br><span class="line">The following path is ignored by one of your .gitignore files:</span><br><span class="line">module_views</span><br><span class="line">Use -f if you really want to add it.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:38:59] C:1</span><br><span class="line"><span class="meta">$</span> git submodule add -f git@github.com:wangzhumo/module_views.git ./module_views</span><br><span class="line">Adding existing repo at 'module_views' to the index</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:39:21]</span><br><span class="line"><span class="meta">$</span> git submodule</span><br><span class="line"> 1616423ab118e2154bcf018c825f6ed3a57cf59b lib_common (heads/master)</span><br><span class="line"> 55ae43eb327207a456624c69e3c01868f8cf43e3 module_views (heads/master)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> phyooos @ wangzhumo in ~/workspace/playground on git:master x [16:39:48]</span><br><span class="line"><span class="meta">$</span> git submodule foreach git pull</span><br><span class="line">Entering 'lib_common'</span><br><span class="line">Already up to date.</span><br><span class="line">Entering 'module_views'</span><br><span class="line">Already up to date.</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢è§£é‡Šæ¯ä¸€æ¡å‘½ä»¤</p>
<ol>
<li><p><code>git submodule add git@github.com:wangzhumo/module_views.git ./module_views</code></p>
<p>æ·»åŠ å­æ¨¡å— <code>git submodule add &lt;repository&gt; &lt;path&gt; æ·»åŠ å­æ¨¡å—</code></p>
<p>æç¤ºå¦‚ä¸‹:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The following path is ignored by one of your .gitignore files:</span><br><span class="line">module_views</span><br><span class="line">Use -f if you really want to add it.</span><br></pre></td></tr></table></figure>
<p>è¯´æˆ‘å·²ç»æŠŠ<code>module_views</code>æ·»åŠ åˆ°å¿½ç•¥æ–‡ä»¶ä¸­äº†,å¦‚æœç¡®å®æƒ³è¿™æ ·æ“ä½œ,åŠ ä¸Š<code>-f</code>å¼ºåˆ¶æ“ä½œ</p>
</li>
</ol>
<ol>
<li><p><code>git submodule add -f git@github.com:wangzhumo/module_views.git ./module_views</code></p>
<p>å¯ä»¥çœ‹åˆ°æç¤º,æˆ‘å·²ç»æˆåŠŸçš„æŠŠ<code>module_views</code>ä½œä¸ºå­é¡¹ç›®æ·»åŠ åˆ°<code>playground</code>ä¸­äº†</p>
</li>
</ol>
<ol>
<li><p><code>git submodule</code></p>
<p>ä¸€å…±çœ‹åˆ°ä¸¤ä¸ªå­æ¨¡å—,ä¸€ä¸ªæ˜¯åˆšæ·»åŠ çš„<code>module_views</code>,ä¸€ä¸ªæ˜¯æˆ‘ä¹‹å‰æ·»åŠ çš„</p>
</li>
</ol>
<ol>
<li><p><code>git submodule foreach git pull</code></p>
<p>æ‹‰å–æœ€æ–°ä»£ç </p>
</li>
</ol>
<h4 id="å…¶ä»–submoduleæ“ä½œ"><a href="#å…¶ä»–submoduleæ“ä½œ" class="headerlink" title="å…¶ä»–submoduleæ“ä½œ"></a>å…¶ä»–submoduleæ“ä½œ</h4><p>æ–‡æ¡£</p>
]]></content>
      
        <categories>
            
            <category> Tools </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Git </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ServiceLoader ä¸ è´£ä»»é“¾è®¾è®¡æ¨¡å¼]]></title>
      <url>/Java/ServiceLoader-%E4%B8%8E-%E8%B4%A3%E4%BB%BB%E9%93%BE%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h3 id="å‰å› "><a href="#å‰å› " class="headerlink" title="å‰å› "></a>å‰å› </h3><p>æœ€è¿‘åœ¨åšäººè„¸è¯†åˆ«çš„ä¸€äº›ä¸œè¥¿</p>
<p>ä¸»è¦æ˜¯ä½¿ç”¨ç™¾åº¦çš„SDKæ¥å®Œæˆé‡‡é›†, è¯†åˆ«.</p>
<p>è¿™ä¸ªåŠŸèƒ½æ˜¯ä½¿ç”¨ç™¾åº¦äº‘çš„Apiæ¥å¯¹äººè„¸è¿›è¡Œåˆ†æ,æ‹¿åˆ°å¹´é¾„ é¢œå€¼ ç­‰ç­‰ä¿¡æ¯</p>
<p><strong>ç¬¬ä¸€ç‰ˆè®¾è®¡ç¨¿:</strong></p>
<p><img src="../images/face_value.png" alt="ä¹‹å‰çš„æ•ˆæœ"></p>
<p>é‚£æˆ‘å°±ç›´æ¥æŠŠè¯·æ±‚åˆ°çš„æ•°æ®å±•ç¤ºäº†ä¸€ä¸‹,ç„¶è€Œ</p>
<p><strong>ç¬¬äºŒç‰ˆè®¾è®¡ç¨¿:</strong></p>
<p><img src="../images/face_text.png" alt="ç¬¬äºŒç‰ˆ"></p>
<p>è¿™ä¸€ç‰ˆå°±æ˜¯éœ€è¦æŠŠæ‹¿åˆ°çš„æ•°å€¼æŒ‰ç…§åŒºé—´æ¥å±•ç¤ºæˆæ–‡å­—æè¿°</p>
<p>é‚£ä¹ˆ,åº”è¯¥å°±æ˜¯å„ç§switch    if else </p>
<p>â€¦.</p>
<p>æœ¬æ¥ä¹Ÿæ˜¯åšDemo,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é«˜ç‚¹å…¶ä»–çš„ä¸œè¥¿,äºæ˜¯æˆ‘å°±æƒ³èµ·äº†è´£ä»»é“¾æ¨¡å¼,å‹‰å¼ºå¯ä»¥åšåšä¹ˆ</p>
<h3 id="å®ç°è´£ä»»é“¾"><a href="#å®ç°è´£ä»»é“¾" class="headerlink" title="å®ç°è´£ä»»é“¾"></a>å®ç°è´£ä»»é“¾</h3><h4 id="å®šä¹‰æŠ½è±¡ç±»"><a href="#å®šä¹‰æŠ½è±¡ç±»" class="headerlink" title="å®šä¹‰æŠ½è±¡ç±»"></a>å®šä¹‰æŠ½è±¡ç±»</h4><p>com.baidu.aip.fl.func.service.HandlerFace.java  æ¥å£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HandlerFace</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> HandlerFace nextHandler;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¥æ”¶ä¸€ä¸ªå®ä½“ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> ResultBean <span class="title">process</span><span class="params">(ResultBean bean)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›ä¸‹ä¸€ä¸ªå¤„ç†ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HandlerFace <span class="title">nextHandler</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nextHandler;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//è®¾ç½®ä¸‹ä¸€ä¸ªå¤„ç†ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHandler</span><span class="params">(HandlerFace handler)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nextHandler = handler;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h4><p><code>com.baidu.aip.fl.func.service.AgeHandlerFace.java</code>  å®ç°ç±»,å¤„ç†å¹´é¾„ä¿¡æ¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AgeHandlerFace</span> <span class="keyword">extends</span> <span class="title">HandlerFace</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResultBean <span class="title">process</span><span class="params">(ResultBean bean)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1.å¤„ç†è‡ªå·±çš„äº‹æƒ…</span></span><br><span class="line">        <span class="keyword">if</span> (bean != <span class="keyword">null</span> &amp;&amp; bean.getIntAge() == <span class="number">0</span> )&#123;</span><br><span class="line">            bean.setResultAge(<span class="string">"-"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (bean != <span class="keyword">null</span> &amp;&amp; bean.getIntAge() &lt;= <span class="number">5</span>)&#123;</span><br><span class="line">            bean.setResultAge(<span class="string">"å°æœ‹å‹"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (bean != <span class="keyword">null</span> &amp;&amp; bean.getIntAge() &lt;= <span class="number">10</span>)&#123;</span><br><span class="line">            bean.setResultAge(<span class="string">"ä¸­ç­‰æœ‹å‹"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (bean != <span class="keyword">null</span> &amp;&amp; bean.getIntAge() &lt;= <span class="number">15</span>)&#123;</span><br><span class="line">            bean.setResultAge(<span class="string">"å¤§æœ‹å‹"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (bean != <span class="keyword">null</span> &amp;&amp; bean.getIntAge() &lt;= <span class="number">20</span>)&#123;</span><br><span class="line">            bean.setResultAge(<span class="string">"æˆå¹´äºº"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (bean != <span class="keyword">null</span> &amp;&amp; bean.getIntAge() &lt;= <span class="number">40</span>)&#123;</span><br><span class="line">            bean.setResultAge(<span class="string">"ä¸­å¹´äºº"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (bean != <span class="keyword">null</span> &amp;&amp; bean.getIntAge() &lt;= <span class="number">60</span>)&#123;</span><br><span class="line">            bean.setResultAge(<span class="string">"è€å¹´äºº"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (bean != <span class="keyword">null</span> &amp;&amp; bean.getIntAge() &lt;= <span class="number">100</span>)&#123;</span><br><span class="line">            bean.setResultAge(<span class="string">"å¹´çºªå¥½å¤§"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªäººæ¥å¤„ç†</span></span><br><span class="line">        <span class="keyword">if</span> (nextHandler() != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//2.1.å¦‚æœæœ‰ä¸‹ä¸€ä¸ªå¤„ç†ç±»,åˆ™æŠŠä¿¡æ¯äº¤ç»™ä»–ç»§ç»­å¤„ç†</span></span><br><span class="line">            <span class="keyword">return</span> nextHandler().process(bean);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3.æ²¡æœ‰ä¸‹ä¸€ä¸ªå¤„ç†ç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AgeHandlerFaceç±»åªå¤„ç†å¹´çºªç›¸å…³çš„ä¸œè¥¿</p>
<p><code>com.baidu.aip.fl.func.service.BeautyHandlerFace.java</code></p>
<p><code>com.baidu.aip.fl.func.service.GenderHandlerFace.java</code></p>
<p>åŒæ ·å®ç°HandlerFace,åˆ†åˆ«å¤„ç†é¢œå€¼å’Œæ€§åˆ«</p>
<h3 id="ServiceLoader"><a href="#ServiceLoader" class="headerlink" title="ServiceLoader"></a>ServiceLoader</h3><p>ä¸Šé¢çš„è´£ä»»é“¾å…¶å®å·²ç»å¯ä»¥ä½¿ç”¨,ä½†æ˜¯éœ€è¦æ‰‹åŠ¨æ¥åˆå§‹åŒ–æ¯ä¸ªå…·ä½“å®ç°ç±»,</p>
<p>å¹¶ä¸”ä¸€ä¸ªä¸€ä¸ªè®¾ç½® nextHandler ,æœ€åè°ƒç”¨å¤„ç†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RealProcessFace</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//ä¿å­˜HandlerFaceçš„æ¯ä¸€ä¸ªå®ç°ç±»</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ArrayList&lt;HandlerFace&gt; arraylist;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        arraylist = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        <span class="comment">//é€šè¿‡ServiceLoaderæ¥åŠ è½½æ‰€æœ‰HandlerFaceçš„å®ç°ç±»</span></span><br><span class="line">        ServiceLoader&lt;HandlerFace&gt; processors = ServiceLoader.load(HandlerFace.class);</span><br><span class="line">        Iterator iterator = processors.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">        	<span class="comment">//iterator.next() è¿™é‡Œå…·ä½“å®ç°ç±»æ‰çœŸæ­£çš„åˆå§‹åŒ–äº†</span></span><br><span class="line">            arraylist.add((HandlerFace) iterator.next());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç»„åˆçŸ­è¯­</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> task äººè„¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç»„åˆçŸ­è¯­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">process</span><span class="params">(ResultBean task)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arraylist.size() - <span class="number">1</span> ; i++) &#123;</span><br><span class="line">            <span class="comment">//ä¾æ¬¡è®¾ç½®setHandler </span></span><br><span class="line">            <span class="comment">//å› ä¸ºæˆ‘å¹¶ä¸éœ€è¦ä»–ä»¬ä¾æ¬¡å¤„ç†,æ‰€ä»¥æˆ‘å¹¶ä¸å…³ç³»ä»–ä»¬å¤„ç†çš„é¡ºåº</span></span><br><span class="line">            <span class="comment">//å¦‚æœæ˜¯éœ€è¦é¡ºåºæ‰§è¡Œçš„è¯,å»ºè®®è¿˜æ˜¯æ‰‹åŠ¨å¤„ç†</span></span><br><span class="line">            arraylist.get(i).setHandler(arraylist.get(i+<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è°ƒç”¨ç¬¬ä¸€ä¸ªå¤„ç†ç±»,å°±ä¼šä¾æ¬¡è°ƒç”¨åé¢çš„å¤„ç†ç±»</span></span><br><span class="line">        ResultBean resultBean = arraylist.get(<span class="number">0</span>).process(task);</span><br><span class="line">        <span class="comment">//è¿”å›å¤„ç†ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> resultBean.format();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h4><p><img src="../images/service_info.png" alt="info"></p>
<p>1.åˆ›å»ºä¸€ä¸ªbaseç±»,å°±æ˜¯æˆ‘ä¸Šé¢å†™è¿‡çš„,å¯ä»¥æ˜¯æ¥å£å’ŒæŠ½è±¡ç±»</p>
<p><code>com.baidu.aip.fl.func.service.HandlerFace</code></p>
<p>2.ä¸€ä¸ªæˆ–å¤šä¸ªå®ç°ç±»</p>
<p><code>com.baidu.aip.fl.func.service.AgeHandlerFace.java</code></p>
<p><code>com.baidu.aip.fl.func.service.BeautyHandlerFace.java</code></p>
<p><code>com.baidu.aip.fl.func.service.GenderHandlerFace.java</code></p>
<p>è¿™é‡Œä¸€å…±æ˜¯3ä¸ª</p>
<p>3.å®šä¹‰resources/META-INF/ â€¦. æ–‡ä»¶</p>
<ul>
<li><p>è¯¥æ–‡ä»¶æ— æ‹“å±•å</p>
</li>
<li><p>æ–‡ä»¶åå°±æ˜¯ baseç±» æˆ–è€…æ¥å£ çš„å…¨è·¯å¾„( åŒ…å + Filename )</p>
</li>
<li><p>æ–‡ä»¶ä¸­æ¯ä¸€è¡Œå†™ä¸€ä¸ªå®ç°ç±»çš„å…¨è·¯å¾„å( åŒ…å + Filename )</p>
<p>src/main/resources/META-INF/services/com.baidu.aip.fl.func.service.HandlerFace</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">com.baidu.aip.fl.func.service.GenderHandlerFace</span><br><span class="line">com.baidu.aip.fl.func.service.AgeHandlerFace</span><br><span class="line">com.baidu.aip.fl.func.service.BeautyHandlerFace</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>4.è·å–æ‰€æœ‰å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ServiceLoader&lt;HandlerFace&gt; processors = ServiceLoader.load(HandlerFace.class);</span><br><span class="line"><span class="comment">//æ³¨æ„æ­¤æ—¶å®ç°ç±»éƒ½æ²¡æœ‰å®ä¾‹åŒ–</span></span><br><span class="line">Iterator iterator = processors.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    <span class="comment">//iterator.next() è¿™é‡Œå…·ä½“å®ç°ç±»æ‰çœŸæ­£çš„åˆå§‹åŒ–äº†</span></span><br><span class="line">    arraylist.add((HandlerFace) iterator.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·çš„æ‡’åŠ è½½è¿‡ç¨‹æ˜¯ç”±ServiceLoaderå®ç°çš„</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><h4 id="è´£ä»»é“¾"><a href="#è´£ä»»é“¾" class="headerlink" title="è´£ä»»é“¾"></a>è´£ä»»é“¾</h4><p>è¿™æ ·çš„å½¢å¼,ä¸ºåæœŸçš„æ‰©å±•æä¾›äº†å¾ˆå¤§çš„ä¾¿åˆ©</p>
<p>AgeHandlerFace ä¸­,æˆ‘å¯ä»¥åˆ†æ›´ç»†çš„ç²’åº¦,ä¹Ÿå¯ä»¥åˆå¹¶.</p>
<p>eg:  50 ä»¥ä¸‹éƒ½æ˜¯å¹´è½»äºº</p>
<p>â€‹       100 - 50 æ˜¯è€å¹´äºº</p>
<p>è´£ä»»é“¾è™½ç„¶Androidç«¯æœ€æ˜¾è‘—çš„ç®—æ˜¯ <strong>äº‹ä»¶åˆ†å‘æœºåˆ¶</strong>  ,å¾ˆå¤šæ¡†æ¶ä¸­ä¹Ÿéƒ½æœ‰ä½¿ç”¨,filterè¿™æ ·çš„ä¸œè¥¿</p>
<h4 id="ServiceLoader-1"><a href="#ServiceLoader-1" class="headerlink" title="ServiceLoader"></a>ServiceLoader</h4><p>è¿™ä¸ªä¸œè¥¿,å¾ˆå¼ºå¤§</p>
<p>åœ¨æ’ä»¶åŒ–,ä»¥åŠ æœåŠ¡æä¾›ç­‰æ–¹é¢éƒ½æœ‰åº”ç”¨</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> -Java -è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Androidè‡ªå·±å°è£…ä¸€ä¸ªVideoPlayer]]></title>
      <url>/Video/Android%E8%87%AA%E5%B7%B1%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AAVideoPlayer/</url>
      <content type="html"><![CDATA[<h4 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h4><p>å®šä¹‰:</p>
<ol>
<li>æ’­æ”¾å™¨ - TextureView .. </li>
<li>æ’­æ”¾æ§åˆ¶å™¨ - MeadiaPlayer   Ijk</li>
<li>æ§åˆ¶å™¨ - å³æ§åˆ¶æ’­æ”¾çš„UIéƒ¨åˆ†,å¿«è¿›ç­‰ç­‰</li>
</ol>
<p>éœ€æ±‚:</p>
<ul>
<li>æ’­æ”¾å™¨ , æ’­æ”¾æ§åˆ¶å™¨  , æ§åˆ¶å™¨UI åˆ†ç¦»,æ–¹ä¾¿éšæ—¶æ›¿æ¢</li>
<li>å¯¹MeadiaPlayer ç®¡ç†,è¾¾åˆ°æ— ç¼åˆ‡æ¢æ’­æ”¾å™¨</li>
</ul>
<p>å‚è€ƒ:</p>
<p>JiaoZiVideoPlayer</p>
<p>GSYVideoPlayer</p>
<p>è¿›ä¸€æ­¥åˆ†æ:</p>
<p>ç°åœ¨éœ€è¦å®ç°:</p>
<ul>
<li>æ— ä»»ä½•æ§åˆ¶å™¨çš„æ’­æ”¾,ä½†æ˜¯ä¿è¯å…¶åœ¨RecyclerViewä¸­çš„æ’­æ”¾<ul>
<li>åªå¯ä»¥ç‚¹å‡»æ’­æ”¾</li>
<li>æ»‘åŠ¨åˆ°ç¬¬ä¸€ä¸ªè‡ªåŠ¨æ’­æ”¾è§†é¢‘</li>
</ul>
</li>
<li>è¯¦æƒ…é¡µæ’­æ”¾å™¨<ul>
<li>æ—¶é•¿</li>
<li>æ’­æ”¾è¿›åº¦</li>
<li>å…¨å±æ’­æ”¾</li>
</ul>
</li>
</ul>
<h4 id="ç»“æ„åˆ†æ"><a href="#ç»“æ„åˆ†æ" class="headerlink" title="ç»“æ„åˆ†æ"></a>ç»“æ„åˆ†æ</h4><ul>
<li>ç”±äºä¸€èˆ¬é€šè¿‡æ’­æ”¾å™¨æ¥æ§åˆ¶æ•´ä¸ªæ’­æ”¾è¿‡ç¨‹,æ‰€ä»¥éƒ½åº”è¯¥é›†ä¸­åˆ°æ’­æ”¾å™¨ä¸­å»</li>
</ul>
<h5 id="æ’­æ”¾æ§åˆ¶å™¨"><a href="#æ’­æ”¾æ§åˆ¶å™¨" class="headerlink" title="æ’­æ”¾æ§åˆ¶å™¨"></a>æ’­æ”¾æ§åˆ¶å™¨</h5><ol>
<li>å®šä¹‰ä¸€ä¸ªæ’­æ”¾æ§åˆ¶å™¨çš„æŠ½è±¡ç±»,è¯¥ç±»åº”è¯¥åŒ…å«ä¸€ä¸ªæ’­æ”¾æ§åˆ¶å™¨åº”è¯¥æœ‰çš„åŠŸèƒ½</li>
</ol>
]]></content>
      
        <categories>
            
            <category> Video </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Video </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Androidè‡ªå®šä¹‰ä¸€ä¸ªé®ç½©å¼•å¯¼å±‚]]></title>
      <url>/uncategorized/Android%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E9%81%AE%E7%BD%A9%E5%BC%95%E5%AF%BC%E5%B1%82/</url>
      <content type="html"><![CDATA[<h4 id="åˆ†æéœ€æ±‚"><a href="#åˆ†æéœ€æ±‚" class="headerlink" title="åˆ†æéœ€æ±‚"></a>åˆ†æéœ€æ±‚</h4><p>é«˜äº®æ˜¾ç¤ºæŒ‡å®šçš„æ§ä»¶(1ä¸ªæˆ–è€…å¤šä¸ª)</p>
<ul>
<li>åªæœ‰ä¸€ä¸ªé«˜äº®æ§ä»¶,åˆ™ç›´æ¥ç»˜åˆ¶å³å¯</li>
<li>å¤šä¸ªé«˜äº®æ§ä»¶,åˆ™åˆ†ä¸¤ç§æ•ˆæœå±•ç¤º<ul>
<li>é¡ºåºå±•ç¤ºæ¯ä¸€ä¸ªæ§ä»¶</li>
<li>å±•ç¤ºæ‰€æœ‰æ§ä»¶</li>
</ul>
</li>
<li>é«˜äº®éƒ¨åˆ†çš„å½¢çŠ¶<ul>
<li>æ–¹å½¢</li>
<li>åœ†å½¢</li>
</ul>
</li>
</ul>
<p>å±•ç¤ºä¸æ¶ˆå¤±</p>
<ul>
<li>è‡ªåŠ¨å±•ç¤º,è‡ªåŠ¨æ¶ˆå¤±</li>
<li>ç‚¹å‡»æ¶ˆå¤±</li>
<li>ç‚¹å‡»æŒ‡å®šéƒ¨åˆ†æ¶ˆå¤±</li>
</ul>
<h4 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h4><h5 id="é®ç½©å±‚"><a href="#é®ç½©å±‚" class="headerlink" title="é®ç½©å±‚"></a>é®ç½©å±‚</h5><ol>
<li>ç›´æ¥åœ¨æœ¬æ¥çš„é¡µé¢æ˜¯æ·»åŠ ,ä¸ç”¨æ—¶æ¶ˆå¤±</li>
<li>ä½¿ç”¨DecorViewçš„æ–¹å¼,æ·»åŠ viewå³å¯</li>
<li>ä½¿ç”¨é€æ˜Activityè¦†ç›–</li>
</ol>
<p>é€‰æ‹©ç¬¬äºŒç§æ–¹å¼æ¥å®ç°</p>
<p>ç¬¬ä¸€ç§æ–¹ä¾¿ä½†æ˜¯è€—æ—¶è€—åŠ›,å¹¶ä¸”ä¸èƒ½é€šç”¨</p>
<p>ç¬¬äºŒç§æ˜¯å¤§å®¶éƒ½è®¤å¯çš„ä¸€ç§æ–¹å¼,è€Œä¸”æ”¯æŒé…ç½®</p>
<p>ç¬¬ä¸‰ç§,å¯¹åŸç•Œé¢ç”Ÿå‘½å‘¨æœŸé€ æˆå½±å“,ä¸å¤ªå¥½</p>
<h5 id="é«˜äº®çš„å®ç°"><a href="#é«˜äº®çš„å®ç°" class="headerlink" title="é«˜äº®çš„å®ç°"></a>é«˜äº®çš„å®ç°</h5><p><strong>PorterDuffXfermode</strong>      :: PorterDuff.Mode.XOR)</p>
<h4 id="ä»£ç è®¾è®¡"><a href="#ä»£ç è®¾è®¡" class="headerlink" title="ä»£ç è®¾è®¡"></a>ä»£ç è®¾è®¡</h4><ul>
<li>mask layer View   ç”¨æ¥å®ç°é®ç½©å±‚<ul>
<li>é«˜äº®æ˜¾ç¤ºç»˜åˆ¶</li>
<li>æŒ‡ç¤ºè¯­ä½ç½®</li>
</ul>
</li>
<li>mask layer Manager  ç”¨æ¥ç®¡ç†  é®ç½©å±‚ <ul>
<li>addView</li>
<li>Show / hide </li>
<li>DecorView æ“ä½œ</li>
<li>å…¶ä»–é…ç½®ä¿¡æ¯</li>
</ul>
</li>
<li>mask bean  ç”¨æ¥å­˜æ”¾éœ€è¦é«˜äº®çš„Viewä¿¡æ¯(é«˜åº¦,å®½åº¦..)</li>
</ul>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><p>mask:</p>
<p>MaskGuideView   é®ç½©å±‚å®¹å™¨</p>
<p>MaskLayout   é«˜äº®æ§ä»¶ä¸æŒ‡ç¤ºè¯­çš„ä½ç½®,ä»¥åŠæ’åˆ—å±•ç¤º</p>
<p>MaskManager      åŠ è½½ç®¡ç†æ•´ä¸ªé®ç½©å±‚</p>
<p>MaskType      é«˜äº®æ§ä»¶çš„å½¢çŠ¶, åœ† æ–¹</p>
<p>TargetInfo      é«˜äº®æ§ä»¶çš„ä½ç½®ä¿¡æ¯</p>
<p>TargetInfo.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ç‹è¯›é­” 2018/5/21 ä¸‹åˆ7:20</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * é«˜äº®åŒºåŸŸä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TargetInfo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * é«˜äº®åŒºåŸŸèµ·å§‹Xåæ ‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> startX;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * é«˜äº®åŒºåŸŸèµ·å§‹Yåæ ‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> startY;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * é«˜äº®åŒºåŸŸå®½åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> width;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * é«˜äº®åŒºåŸŸé«˜åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> height;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * åç§»é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> offset = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–åŠå¾„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getRadius</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Math.max(width, height) / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>MaskType.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ç‹è¯›é­” 2018/5/21 ä¸‹åˆ7:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> MaskType &#123;</span><br><span class="line">    Rect,Circle</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ç‹è¯›é­” 2018/5/21 ä¸‹åˆ11:35</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * è´Ÿè´£ç®¡ç†,å‡†å¤‡,æ“ä½œMaskGuideView</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MaskManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MaskManager"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ViewGroup mRootView;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MaskGuideView mMaskGuideView;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Context mContext;</span><br><span class="line">    <span class="keyword">private</span> List&lt;TargetInfo&gt; mTargetInfoList;</span><br><span class="line">    <span class="keyword">private</span> List&lt;View&gt; mTargetViewList;</span><br><span class="line">    <span class="keyword">private</span> List&lt;MaskLayout&gt; mMaskLayoutList;</span><br><span class="line">    <span class="keyword">private</span> MaskType mMaskType;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isShowAll;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mPadding;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¡ç®—targetInfo</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> targetView view</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> TargetInfo</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> TargetInfo <span class="title">generateTargetInfo</span><span class="params">(View targetView)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] location = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="comment">//æˆ‘ä»¬éœ€è¦çš„æ˜¯,è¿™ä¸ªtargetViewåœ¨æ•´ä¸ªå±å¹•ä¸Šçš„ä½ç½®</span></span><br><span class="line">        targetView.getLocationOnScreen(location);</span><br><span class="line">        TargetInfo targetInfo = <span class="keyword">new</span> TargetInfo();</span><br><span class="line">        <span class="comment">//è®¡ç®—startX width ...</span></span><br><span class="line">        <span class="keyword">switch</span> (mMaskType) &#123;</span><br><span class="line">            <span class="keyword">case</span> Rect:</span><br><span class="line">                targetInfo.startX = location[<span class="number">0</span>] - mPadding;</span><br><span class="line">                targetInfo.startY = location[<span class="number">1</span>] - mPadding;</span><br><span class="line">                targetInfo.width = targetView.getWidth() + <span class="number">2</span> * mPadding;</span><br><span class="line">                targetInfo.height = targetView.getHeight() + <span class="number">2</span> * mPadding;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Circle:</span><br><span class="line">                <span class="keyword">int</span> diameter = Math.max(targetView.getWidth() + <span class="number">2</span> * mPadding, targetView.getHeight() + <span class="number">2</span> * mPadding);</span><br><span class="line">                targetInfo.startX = location[<span class="number">0</span>] - mPadding;</span><br><span class="line">                targetInfo.startY = location[<span class="number">1</span>] - mPadding - (diameter / <span class="number">2</span> - targetView.getHeight() / <span class="number">2</span> - mPadding);</span><br><span class="line">                targetInfo.width = diameter;</span><br><span class="line">                targetInfo.height = diameter;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Log.e(TAG, <span class="string">"generateTargetInfo: "</span> + targetInfo.toString() );</span><br><span class="line">        <span class="keyword">return</span> targetInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * builderæ¨¡å¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> ViewGroup mRootView;</span><br><span class="line">        <span class="keyword">private</span> MaskGuideView mMaskGuideView;</span><br><span class="line">        <span class="keyword">private</span> Context mContext;</span><br><span class="line">        <span class="keyword">private</span> List&lt;TargetInfo&gt; mTargetInfoList;</span><br><span class="line">        <span class="keyword">private</span> List&lt;MaskLayout&gt; mMaskLayoutList;</span><br><span class="line">        <span class="keyword">private</span> List&lt;View&gt; mTargetViewList;</span><br><span class="line">        <span class="keyword">private</span> MaskType mMaskType = MaskType.Circle;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> mPadding = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> mGravity = Gravity.TOP;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">boolean</span> isShowAll;</span><br><span class="line">        </span><br><span class="line">        ...çœç•¥</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> MaskManager <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.mMaskGuideView.setOnClickListener(<span class="keyword">this</span>.mMaskGuideView);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> MaskManager(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¢,ä»£ç ä¼ gitå¥½äº†</p>
]]></content>
      
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> View </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android Binderæœºåˆ¶(ä¸€)]]></title>
      <url>/Source-Code/Android-Binder%E6%9C%BA%E5%88%B6-%E4%B8%80/</url>
      <content type="html"><![CDATA[<h3 id="ServiceManager"><a href="#ServiceManager" class="headerlink" title="ServiceManager"></a>ServiceManager</h3><p>é¦–å…ˆæˆ‘ä»¬è¦äº†è§£ä¸€ä¸‹ServiceManager.</p>
<p>ServiceManagerçš„åŠŸèƒ½ä¸»è¦å°±æ˜¯æ³¨å†Œ,æŸ¥è¯¢æœåŠ¡,ä½œä¸ºä¸€ä¸ªå¤§ç®¡å®¶çš„è§’è‰²å‡ºç°.</p>
<ul>
<li>æ³¨å†ŒæœåŠ¡ï¼šè®°å½•æœåŠ¡åå’Œä¿¡æ¯ï¼Œæ”¾åˆ°æœåŠ¡åˆ—è¡¨</li>
<li>æŸ¥è¯¢æœåŠ¡ï¼šæ ¹æ®æœåŠ¡åæŸ¥è¯¢ç›¸åº”çš„çš„ä¿¡æ¯</li>
</ul>
<p>ServiceManageræ˜¯æœ‰æƒé™æ§åˆ¶çš„ï¼Œåªæœ‰å…·æœ‰ç›¸åº”æƒé™çš„è¿›ç¨‹æ‰èƒ½æ³¨å†Œ,æŸ¥è¯¢æœåŠ¡</p>
<p><a href="http://gityuan.com/2015/11/08/binder-get-sm/" target="_blank" rel="noopener">http://gityuan.com/2015/11/08/binder-get-sm/</a></p>
<h3 id="Linuxå†…å­˜"><a href="#Linuxå†…å­˜" class="headerlink" title="Linuxå†…å­˜"></a>Linuxå†…å­˜</h3><h4 id="å†…æ ¸ç©ºé—´"><a href="#å†…æ ¸ç©ºé—´" class="headerlink" title="å†…æ ¸ç©ºé—´"></a>å†…æ ¸ç©ºé—´</h4><p>ä¸ºä»€ä¹ˆè¿›ç¨‹é—´ä¸å¯ä»¥ç›´æ¥é€šè®¯é‚£?</p>
<p>å› ä¸ºæ¯ä¸ªè¿›ç¨‹çš„å†…å­˜ç©ºé—´éƒ½æ˜¯éš”ç¦»èµ·æ¥çš„,ä¸å¯èƒ½éšæ„å»è®¿é—®å…¶ä»–è¿›ç¨‹çš„å†…å­˜.</p>
<p>åœ¨32ä½ç³»ç»Ÿä¸­,å¯»å€ç©ºé—´æœ€å¤§ä¸º4G,é‚£ä¹ˆè¿™4Gå†…å­˜,ä¸€èˆ¬å°†1Gåˆ†é…ç»™å†…æ ¸ç©ºé—´,3Gç”¨æˆ·ç©ºé—´,Linuxå†…æ ¸ç”±ç³»ç»Ÿå†…çš„æ‰€æœ‰è¿›ç¨‹å…±äº«.</p>
<p><img src="/images/linux_memory.png" alt=""></p>
<p>è¿™ä¹ˆä¸€æ¥,æˆ‘ä»¬å°±å¯ä»¥åœ¨å†…æ ¸ç©ºé—´ä¸ºæ‰€æ¬²ä¸ºäº†,ä¸,å¹¶ä¸èƒ½.ç”¨æˆ·è¿›ç¨‹ä¸èƒ½ç›´æ¥æ“ä½œå†…æ ¸.</p>
<p>Androidæ˜¯åœ¨Linuxçš„å†…æ ¸ä¸Šè·‘çš„,é‚£ä¹ˆä¸ºä»€ä¹ˆAndroidè¦è‡ªå·±åšä¸€ä¸ªBinderæ¥å®ç°è¿›ç¨‹é—´çš„é€šè®¯é‚£?</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“Linuxä¸ŠSocket/ç®¡é“/æ¶ˆæ¯é˜Ÿåˆ—éƒ½å¯ä»¥åšåˆ°è¿›ç¨‹é—´çš„é€šè®¯,ä½†æ˜¯é€šè¿‡è¿™äº›éƒ½éœ€è¦2æ¬¡å†…å­˜æ‹·è´,</p>
<p>è€ŒBinderåªéœ€è¦ä¸€æ¬¡å°±å¯ä»¥å®Œæˆ,å¤§å¤§çš„æé«˜æ•ˆç‡</p>
<h4 id="BINDER-MMAP"><a href="#BINDER-MMAP" class="headerlink" title="BINDER_MMAP"></a>BINDER_MMAP</h4><p>mmapå¯ä»¥å°†ä¸€ä¸ªæ–‡ä»¶æˆ–è€…å…¶å®ƒå¯¹è±¡æ˜ å°„è¿›å†…å­˜</p>
<p>åœ¨Binderä¸­,é€šè¿‡åœ¨ç”¨æˆ·ç©ºé—´(å½“å‰è¿›ç¨‹çš„ç”¨æˆ·ç©ºé—´)åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿåœ°å€ç©ºé—´,å¹¶åœ¨å†…æ ¸ç©ºé—´åˆ›å»ºç›¸åŒå¤§å°çš„è™šæ‹Ÿåœ°å€ç©ºé—´.</p>
<p>æ¥ç€ç”³è¯·ä¸€å—ç‰©ç†å†…å­˜,å°†ç‰©ç†å†…å­˜æ˜ å°„åˆ°å†…æ ¸è™šæ‹Ÿåœ°å€ç©ºé—´å’Œç”¨æˆ·è™šæ‹Ÿå†…å­˜ç©ºé—´,è¿™æ ·å°±å®ç°äº†ç”¨æˆ·æ§ä»¶å’Œå†…æ ¸ç©ºé—´çš„åŒæ­¥.</p>
<p><img src="/images/binder_physical_memory.jpg" alt="æ¥è‡ªGityuanå¤§ä½¬"></p>
<h4 id="å¤§æ¦‚æµç¨‹"><a href="#å¤§æ¦‚æµç¨‹" class="headerlink" title="å¤§æ¦‚æµç¨‹"></a>å¤§æ¦‚æµç¨‹</h4><ol>
<li>copy_from_user é¦–å…ˆæ˜¯è¦å‘å‡ºæ¶ˆæ¯çš„,é‚£ä¹ˆå…ˆä»ç”¨æˆ·æ§ä»¶from æ‹·è´æ•°æ®</li>
<li>binder_thread_write ç¬¬äºŒæ­¥å°±æ˜¯æŠŠåˆšæ‰æ‹·è´çš„æ•°æ®å†™å…¥åˆ°å†…æ ¸ç©ºé—´</li>
<li>binder_thread_read ç¬¬ä¸‰æ­¥å†æ¬¡è¯»å–åˆšæ‰ä»ç”¨æˆ·æ§ä»¶fromè¯»å–å¹¶å†™å…¥å†…æ ¸ç©ºé—´çš„æ•°æ®</li>
<li>copy_to_user æœ€åå½“ç„¶æ˜¯ä»å†…æ ¸ç©ºé—´æ‹·è´æ•°æ®åˆ°ç”¨æˆ·ç©ºé—´to(å³ç›®æ ‡)</li>
</ol>
<p>PS:ä»¥ä¸Šå‡å»ºç«‹åœ¨æ¯ä¸€æ¬¡æ“ä½œéƒ½æˆåŠŸçš„åŸºç¡€ä¸Š</p>
<p>æ¥è‡ªGityuanå¤§ç¥çš„åˆ†äº«<a href="http://gityuan.com/2015/11/01/binder-driver/" target="_blank" rel="noopener">http://gityuan.com/2015/11/01/binder-driver/</a></p>
<p><img src="/images/binder_memory_map.jpg" alt="binder_memory"></p>
<p>è§£é‡Šè¯´æ˜:</p>
<p>é¦–å…ˆClientç«¯å‘é€æ¶ˆæ¯,é€šè¿‡copy_from_userä»Clientç«¯<strong>æ‹·è´æ•°æ®</strong>åˆ°å†…æ ¸ç©ºé—´å»</p>
<p>è€Œåè¿˜è®°å¾—<strong>BINDER_MMAP</strong>ä¸­çš„æ“ä½œä¹ˆ,å†…æ ¸ç©ºé—´çš„åœ°å€ä¸Serveræ˜¯åŒä¸€å—ç‰©ç†å†…å­˜,</p>
<p>Serverå°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼,ç›´æ¥åŒæ­¥åˆ°Clientå‘é€çš„æ•°æ®.</p>
<blockquote>
<ul>
<li>binder_initï¼šåˆå§‹åŒ–å­—ç¬¦è®¾å¤‡ï¼›</li>
<li>binder_openï¼šæ‰“å¼€é©±åŠ¨è®¾å¤‡ï¼Œè¿‡ç¨‹éœ€è¦æŒæœ‰binder_main_lockåŒæ­¥é”ï¼›</li>
<li>binder_mmapï¼šç”³è¯·å†…å­˜ç©ºé—´ï¼Œè¯¥è¿‡ç¨‹éœ€è¦æŒæœ‰binder_mmap_lockåŒæ­¥é”ï¼›</li>
<li>binder_ioctlï¼šæ‰§è¡Œç›¸åº”çš„ioctlæ“ä½œï¼Œè¯¥è¿‡ç¨‹éœ€è¦æŒæœ‰binder_main_lockåŒæ­¥é”ï¼›<ul>
<li>å½“å¤„äºbinder_thread_readè¿‡ç¨‹ï¼Œread_bufferæ— æ•°æ®åˆ™é‡Šæ”¾åŒæ­¥é”ï¼Œå¹¶å¤„äºwait_event_freezableè¿‡ç¨‹ï¼Œç­‰æœ‰æ•°æ®åˆ°æ¥åˆ™å”¤é†’å¹¶å°è¯•æŒæœ‰åŒæ­¥é”ã€‚</li>
</ul>
</li>
</ul>
</blockquote>
]]></content>
      
        <categories>
            
            <category> Source Code </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Source Code </tag>
            
            <tag> Binder </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[çº¿ç¨‹ä¸è¿›ç¨‹çš„å¼‚åŒä»¥åŠAndroidä¸­çš„IPCæœºåˆ¶]]></title>
      <url>/Java/%E7%BA%BF%E7%A8%8B%E4%B8%8E%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%BC%82%E5%90%8C%E4%BB%A5%E5%8F%8AAndroid%E4%B8%AD%E7%9A%84IPC%E6%9C%BA%E5%88%B6/</url>
      <content type="html"><![CDATA[<h3 id="çº¿ç¨‹ä¸è¿›ç¨‹"><a href="#çº¿ç¨‹ä¸è¿›ç¨‹" class="headerlink" title="çº¿ç¨‹ä¸è¿›ç¨‹"></a>çº¿ç¨‹ä¸è¿›ç¨‹</h3><p>Google  Doc (<a href="https://developer.android.com/guide/components/processes-and-threads" target="_blank" rel="noopener">https://developer.android.com/guide/components/processes-and-threads</a>)</p>
<ul>
<li><p>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯cpuè°ƒåº¦çš„æœ€å°å•ä½.</p>
</li>
<li><p>è¿›ç¨‹æ˜¯åº”ç”¨ç¨‹åºçš„æ‰§è¡Œå®ä¾‹,ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹,</p>
<p>è€Œä¸€ä¸ªè¿›ç¨‹çš„åˆ›å»ºåˆ†é…æ˜¯è¦æ¶ˆè€—è¾ƒå¤§çš„æ€§èƒ½çš„,ç›¸æ¯”æ¥è¯´çº¿ç¨‹å°±è¦æ¯”è¿›ç¨‹çš„å¼€é”€å°.</p>
</li>
<li><p>å¯¹äºè¿›ç¨‹æ¥è¯´ä¸å…±äº«èµ„æº,å†…å­˜æ˜¯ç‹¬ç«‹çš„.è€Œçº¿ç¨‹å…±äº«å®ƒæ‰€åœ¨çš„çº¿ç¨‹çš„èµ„æº,å†…å­˜.</p>
</li>
<li><p>è¿›ç¨‹é—´çš„é€šä¿¡å°±è¦æ›´åŠ éº»çƒ¦,éœ€è¦ä½¿ç”¨IPC( Inter-Proscess Communication)è¿›ç¨‹é—´çš„é€šè®¯</p>
<p>çº¿ç¨‹æ–¹ä¾¿å¾ˆå¤š,ä½†æ˜¯çº¿ç¨‹é—´çš„åŒæ­¥åˆæ˜¯ä¸€ä¸ªè¾ƒä¸ºå¤§çš„è¯¾é¢˜äº†.</p>
<p>â€‹</p>
<blockquote>
<p>æƒ³å¼ºè°ƒçš„æ˜¯ï¼Œçº¿ç¨‹å…³æ³¨çš„æ˜¯ä¸­å¤®å¤„ç†å™¨çš„è¿è¡Œï¼Œè€Œä¸æ˜¯è¿›ç¨‹é‚£æ ·å…³æ³¨å†…å­˜ç­‰èµ„æºçš„ç®¡ç†ã€‚</p>
</blockquote>
</li>
</ul>
<h3 id="Androidä¸­çš„IPCæœºåˆ¶"><a href="#Androidä¸­çš„IPCæœºåˆ¶" class="headerlink" title="Androidä¸­çš„IPCæœºåˆ¶"></a>Androidä¸­çš„IPCæœºåˆ¶</h3><p>å¦‚ä¸‹å›¾æ‰€ç¤º:(å·²ç»ä¸çŸ¥é“å“ªé‡Œçš„é…å›¾äº†â€¦æ„Ÿè°¢åˆ†äº«)</p>
<p><img src="/images/android_ipc.png" alt=""></p>
<h4 id="IPCç®€ä»‹"><a href="#IPCç®€ä»‹" class="headerlink" title="IPCç®€ä»‹"></a>IPCç®€ä»‹</h4><p>IPC(Inter-Process Communication) è¿›ç¨‹é—´é€šä¿¡</p>
<p>ä½¿ç”¨åœºæ™¯:</p>
<p>åœ¨Androidç¨‹åºä¸­ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸€ä¸ªç¨‹åºå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹</p>
<ol>
<li><p>Appé—´çš„é€šä¿¡,å¸¸è§çš„å¦‚éœ€è¦ä½¿ç”¨å…¶ä»–Appçš„æ•°æ®</p>
</li>
<li><p>ä¸€ä¸ªAppä½¿ç”¨å¤šè¿›ç¨‹,æ¯”å¦‚æŒ‡å®šè¿è¡Œçº¿ç¨‹<code>android:process=&quot;:name&quot;</code></p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯,å¦‚æœä¸€ä¸ªAppä½¿ç”¨å¤šè¿›ç¨‹,Applicationä¹Ÿä¼šå¤šæ¬¡åˆ›å»º</p>
</blockquote>
</li>
</ol>
<h4 id="Bundle"><a href="#Bundle" class="headerlink" title="Bundle"></a>Bundle</h4><p>å¸¸è§äºActivity,serviceä¸­ä¼ é€’æ•°æ®</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯,bundleä¸­çš„æ•°æ®å¿…é¡»æ”¯æŒåºåˆ—åŒ–(Serializable,Parcelable)</p>
<h4 id="æ–‡ä»¶å…±äº«"><a href="#æ–‡ä»¶å…±äº«" class="headerlink" title="æ–‡ä»¶å…±äº«"></a>æ–‡ä»¶å…±äº«</h4><p>SharedPreferenceå°±æ˜¯è¿™ç§å®ç°çš„.</p>
<p>é€‚åˆå¯¹åŒæ­¥è¦æ±‚ä¸é«˜çš„ä½¿ç”¨æ–¹å¼,éœ€è¦æ³¨æ„å¤„ç†å¥½å¹¶å‘çš„é—®é¢˜.</p>
<h4 id="Messenger"><a href="#Messenger" class="headerlink" title="Messenger"></a>Messenger</h4><p>Messenger å¯¹ AIDL è¿›è¡Œäº†å°è£…ï¼Œå®ƒå®ç°äº†ä¸€ç§åŸºäºæ¶ˆæ¯çš„è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼</p>
<p><code>frameworks/base/core/java/android/os/IMessenger.aidl</code></p>
<p>å®ƒçš„AIDLæ–‡ä»¶å°±åœ¨è¿™é‡Œä¿å­˜ç€!</p>
<h4 id="AIDL"><a href="#AIDL" class="headerlink" title="AIDL"></a>AIDL</h4><p>AIDLï¼ˆAndroid Interface definition languageï¼‰ æ˜¯ Android æä¾›çš„ä¸€ç§è¿›ç¨‹é—´é€šä¿¡ (IPC) æœºåˆ¶</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯AIDLæ”¯æŒçš„æ•°æ®ç±»å‹ä¸Javaæ¥å£æ”¯æŒçš„æ•°æ®ç±»å‹æœ‰äº›ä¸åŒ:</p>
<ol>
<li>æ‰€æœ‰åŸºç¡€ç±»å‹ï¼ˆint, charâ€¦ï¼‰</li>
<li>Stringï¼ŒListï¼ŒMap</li>
<li>æ‰€æœ‰Parcelableçš„ç±»</li>
</ol>
<p>å¹¶ä¸”è¦æ ¹æ®éœ€è¦æ·»åŠ  in out çš„å…³é”®è¯</p>
<h4 id="ContentProvider"><a href="#ContentProvider" class="headerlink" title="ContentProvider"></a>ContentProvider</h4><p>ä¸»è¦æ˜¯é’ˆå¯¹æ•°æ®åº“ä½¿ç”¨çš„,æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯Androidä¸­æœ‰å¾ˆå¤šå·²ç»å®šä¹‰å¥½çš„ContentProvider</p>
<h4 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h4><p>è¯´åˆ°è¿™é‡Œ,å°±ä¸å¾—ä¸æä¸€ä¸‹<strong>Binder</strong>äº†</p>
<p><a href="http://www.wangzhumo.com/Source-Code/Android-Binder%E6%9C%BA%E5%88%B6-%E4%B8%80/">http://www.wangzhumo.com/Source-Code/Android-Binder%E6%9C%BA%E5%88%B6-%E4%B8%80/</a></p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Java </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaä¸­çš„å†…å­˜æ¨¡å‹]]></title>
      <url>/Java/Java%E4%B8%AD%E7%9A%84%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/</url>
      <content type="html"><![CDATA[<p><img src="/images/java_heap_stack.png" alt="java_heap_stack"></p>
<h4 id="1-å †"><a href="#1-å †" class="headerlink" title="1. å †"></a>1. å †</h4><p>åœ¨JVMä¸­åªæœ‰ä¸€ä¸ª,javaå›æ”¶æœºåˆ¶ä¸»è¦å°±æ˜¯ä½œç”¨äºè¿™ä¸€å—</p>
<p>å †ä¸»è¦æ˜¯ç”¨æ¥å­˜æ”¾å­˜å‚¨å¯¹è±¡çš„å†…å®¹åŠå…¶æœ¬èº«çš„.</p>
<h4 id="2-æ–¹æ³•åŒº"><a href="#2-æ–¹æ³•åŒº" class="headerlink" title="2. æ–¹æ³•åŒº"></a>2. æ–¹æ³•åŒº</h4><p>æ–¹æ³•åŒºä¹Ÿå’Œå †ä¸€æ ·,æ˜¯è¢«çº¿ç¨‹å…±äº«çš„.</p>
<p>å­˜æ”¾äº†ç±»çš„ä¿¡æ¯(æ–¹æ³•,å­—æ®µ,åç§°),é™æ€å˜é‡,å¸¸é‡</p>
<p>Java1.7ä¹‹å‰,å­—ç¬¦ä¸²å¸¸é‡æ± ä¹Ÿæ˜¯æ”¾åœ¨è¿™é‡Œçš„,ä½†æ˜¯1.7ä»¥åç§»åŠ¨åˆ°å †é‡Œé¢å»äº†</p>
<h4 id="3-è™šæ‹Ÿæœºæ ˆ"><a href="#3-è™šæ‹Ÿæœºæ ˆ" class="headerlink" title="3. è™šæ‹Ÿæœºæ ˆ"></a>3. è™šæ‹Ÿæœºæ ˆ</h4><p><img src="/images/java_stack.png" alt="java_stack"></p>
<p>æ¯ä¸€ä¸ªæ ˆå¸§çš„å‡ºå…¥æ ˆéƒ½æ˜¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒèµ·ç›´åˆ°ç»“æŸè¿”å›çš„è¿‡ç¨‹.</p>
<p>æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„Javaæ ˆï¼Œæ ˆå¸§ä¸­åŒ…æ‹¬</p>
<ul>
<li><p>å±€éƒ¨å˜é‡è¡¨(Local Variables)</p>
<p>æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡,å‡½æ•°çš„å‚æ•°ç­‰.å¯¹äºåŸºç¡€ç±»å‹çš„å˜é‡ç›´æ¥å­˜å‚¨ä»–çš„å€¼,è€Œå¼•ç”¨ç±»å‹çš„å˜é‡</p>
<p>åˆ™å­˜å‚¨çš„æ˜¯æŒ‡å‘å¯¹è±¡çš„å¼•ç”¨</p>
</li>
<li><p>æ“ä½œæ•°æ ˆ(Operand Stack)</p>
</li>
<li><p>æŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± çš„å¼•ç”¨(Reference to runtime constant pool)</p>
<p>ä¿è¯æ–¹æ³•å¯ä»¥ä½¿ç”¨å½“å‰ç±»çš„å¸¸é‡</p>
</li>
<li><p>æ–¹æ³•è¿”å›åœ°å€(Return Address)</p>
<p>æ‰§è¡Œä¸€ä¸ªæ–¹æ³•å®Œæˆåéœ€è¦è¿”å›è°ƒç”¨å®ƒçš„åœ°æ–¹</p>
</li>
<li><p>é™„åŠ ä¿¡æ¯</p>
</li>
</ul>
<h4 id="4-ç¨‹åºè®¡æ•°å™¨"><a href="#4-ç¨‹åºè®¡æ•°å™¨" class="headerlink" title="4. ç¨‹åºè®¡æ•°å™¨"></a>4. ç¨‹åºè®¡æ•°å™¨</h4><p>Program Counter Register ä¹Ÿç§°ä½œä¸ºPCå¯„å­˜å™¨,ä¿å­˜çš„æ˜¯ç¨‹åºå½“å‰æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€</p>
<h4 id="5-æœ¬åœ°æ–¹æ³•æ ˆ"><a href="#5-æœ¬åœ°æ–¹æ³•æ ˆ" class="headerlink" title="5.æœ¬åœ°æ–¹æ³•æ ˆ"></a>5.æœ¬åœ°æ–¹æ³•æ ˆ</h4><p>æœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºæ‰§è¡Œæœ¬åœ°æ–¹æ³•ï¼ˆNative Methodï¼‰æœåŠ¡çš„</p>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Java </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Androidçš„å¯åŠ¨æµç¨‹]]></title>
      <url>/Source-Code/Android%E7%9A%84%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/</url>
      <content type="html"><![CDATA[<h5 id="ç³»ç»Ÿç»“æ„"><a href="#ç³»ç»Ÿç»“æ„" class="headerlink" title="ç³»ç»Ÿç»“æ„"></a>ç³»ç»Ÿç»“æ„</h5><ul>
<li><p>åº”ç”¨å±‚</p>
<p>å³ä¸ºå¼€å‘å‡ºæ¥çš„ä¸€äº›app,å½“ç„¶è¿˜åŒ…æ‹¬äº†ä¸€äº›ç³»ç»ŸApp</p>
</li>
<li><p>åº”ç”¨æ¡†æ¶å±‚(Java API Framework)</p>
<p>è¿™ä¸€å±‚ç”±javaç¼–å†™,æä¾›ç»™æˆ‘ä»¬å¹³æ—¶å¼€å‘ä½¿ç”¨çš„API,ä¸»è¦çš„ä¸€äº›ç»„ä»¶:</p>
<ul>
<li><p>Manager</p>
<p>Activity Manager , Window Manager , Package Manager ,Location Manager </p>
<p>Notification Manager,Resource Manager,Telephony Manager</p>
</li>
<li><p>Content Providers</p>
</li>
<li><p>View System</p>
</li>
</ul>
</li>
<li><p>ç³»ç»Ÿè¿è¡Œåº“å±‚</p>
<p>C/C++ç¨‹åºåº“å’ŒAndroidè¿è¡Œæ—¶åº“</p>
</li>
<li><p>ç¡¬ä»¶æŠ½è±¡å±‚(<strong>HAL</strong>)</p>
</li>
<li><p>Linuxå†…æ ¸å±‚</p>
</li>
</ul>
<p><img src="/images/android_boot_process.png" alt="boot"></p>
<h5 id="Androidçš„å¯åŠ¨ä¸»è¦è¿‡ç¨‹"><a href="#Androidçš„å¯åŠ¨ä¸»è¦è¿‡ç¨‹" class="headerlink" title="Androidçš„å¯åŠ¨ä¸»è¦è¿‡ç¨‹"></a>Androidçš„å¯åŠ¨ä¸»è¦è¿‡ç¨‹</h5><ol>
<li><p><strong>initè¿›ç¨‹</strong></p>
<p>initè¿›ç¨‹æ˜¯ç”±å†…æ ¸å¯åŠ¨çš„,æ˜¯ç”¨æˆ·ç©ºé—´çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹,å¯ä»¥è¯´æ˜¯ä¸€ä¸ªrootè¿›ç¨‹</p>
<ul>
<li>å½“initè¿›ç¨‹å¯åŠ¨åä¼šåˆ›å»ºæŒ‚è½½ç³»ç»Ÿç›®å½•,è®¾å¤‡èŠ‚ç‚¹,</li>
<li>è§£æinit.rc å’Œ init.hardware.rc,å¯åŠ¨å±æ€§æœåŠ¡ï¼Œä»¥åŠä¸€ç³»åˆ—çš„æœåŠ¡å’Œè¿›ç¨‹</li>
</ul>
</li>
</ol>
<ol>
<li><p><strong>æœ¬åœ°å®ˆæŠ¤è¿›ç¨‹</strong></p>
<p>å¯åŠ¨</p>
<blockquote>
<p>servicemanager  ç®¡ç†binderçš„é€šè®¯</p>
<p>surfaceflinger  UI</p>
<p>mediaserver  éŸ³è§†é¢‘,ç›¸æœº</p>
<p>netd  è“ç‰™ã€wifiã€usbç­‰</p>
<p>adbd</p>
<p>rild</p>
<p>installd </p>
</blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯è¿™äº›éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„Linuxè¿›ç¨‹</p>
</li>
<li><p><strong>Nativeç³»ç»ŸæœåŠ¡</strong></p>
<p>è¿è¡Œåœ¨æœ¬åœ°å®ˆæŠ¤è¿›ç¨‹ä¸­,æ‰€å±è¿›ç¨‹åˆå§‹åŒ–çš„æ—¶å€™ä¼šå°†Nativeç³»ç»ŸæœåŠ¡æ³¨å†Œåˆ°ServiceManagerä¸­,æ–¹ä¾¿æˆ‘ä»¬é€šè¿‡Binderæœºåˆ¶è°ƒç”¨Nativeç³»ç»ŸæœåŠ¡</p>
</li>
<li><p><strong>JavaæœåŠ¡</strong></p>
<p>å†åˆ›å»ºæœ¬åœ°æœåŠ¡çš„åŒæ—¶,initè¿›ç¨‹è¿˜ä¼šåˆ›å»ºZygoteè¿›ç¨‹</p>
<p>Zygoteä¹Ÿæ˜¯Androidä¸­ç›¸å½“é‡è¦çš„ä¸€ä¸ªè¿›ç¨‹äº†,Zygoteè¿›ç¨‹ä¼šå»ºç«‹ä¸€ä¸ªDalvik VMå¹¶ä¸”å¯åŠ¨</p>
<p>System Serverç³»ç»ŸæœåŠ¡</p>
<p>System Serverå°†å¯åŠ¨Android Service</p>
<blockquote>
<p>AccessibilityManagerService æˆªè·ç”¨æˆ·è¾“å…¥ï¼Œå¹¶æ ¹æ®è¾“å…¥ç»™ç”¨æˆ·ä¸€äº›é¢å¤–çš„åé¦ˆï¼Œèµ·åˆ°è¾…åŠ©æ•ˆæœçš„æœåŠ¡<br>AccountManagerService ç®¡ç†è®¾å¤‡ä¸­æ‰€æœ‰è´¦å·çš„æœåŠ¡ï¼ŒåŒ…æ‹¬è´¦å·ã€å¯†ç ã€æˆæƒç®¡ç†åŠŸèƒ½<br>ActivityManagerService ç®¡ç†æ‰€æœ‰ç»„ä»¶çš„æœåŠ¡ï¼Œå®‰å“ç³»ç»Ÿçš„æ ¸å¿ƒæœåŠ¡ AlarmManagerService ç®¡ç†é—¹é’Ÿçš„æœåŠ¡<br>AppWidgetService ç®¡ç†APP widgetsçš„å·¥ä½œï¼ŒåŒ…æ‹¬åŠ è½½ã€åˆ é™¤ã€å¸ƒå±€ç­‰<br>AssetAtlasService å°†ä¸€äº›ç³»ç»Ÿå›¾ç‰‡èµ„æºåˆå¹¶æˆä¸€ä¸ªçº¹ç†å›¾ä¼ ç»™GPUè¾¾åˆ°ç¡¬ä»¶åŠ é€Ÿçš„æ•ˆæœçš„æœåŠ¡<br>AudioService ç®¡ç†éŸ³é¢‘çš„æœåŠ¡<br>BackupManagerService ç®¡ç†å¤‡ä»½å’Œåº”ç”¨æ•°æ®çš„æœåŠ¡<br>BatteryService ç®¡ç†ç”µæ± çš„æœåŠ¡<br>BluetoothManagerService ç®¡ç†ç³»ç»Ÿè“ç‰™çš„æœåŠ¡<br>CertBlacklister æ›´æ–°ç³»ç»ŸSSLè¯ä¹¦çš„å…¬å…±ç§˜é’¥å’Œåºåˆ—å·é»‘åå•çš„æœåŠ¡<br>ClipboardService ç®¡ç†ç³»ç»Ÿå‰ªè´´æ¿çš„æœåŠ¡<br>CommonTimeManagementService ç®¡ç†å…¬å…±æ—¶é—´é…ç½®çš„æœåŠ¡<br>ConnectivityService ç®¡ç†ç½‘ç»œè¿æ¥çš„æœåŠ¡<br>ContentService ç®¡ç†ç³»ç»Ÿæ•°æ®æ›´æ–°é€šçŸ¥çš„æœåŠ¡ï¼Œå’ŒContentProviderå¯†åˆ‡ç›¸å…³<br>CountryDetectorService æ£€æµ‹å½“å‰ç³»ç»Ÿæ‰€å±å›½å®¶çš„æœåŠ¡<br>DevicePolicyManagerService ç®¡ç†ç³»ç»Ÿè®¾å¤‡é…ç½®çš„æœåŠ¡<br>DeviceStorageMonitorService ç®¡ç†ç³»ç»Ÿå­˜å‚¨ç©ºé—´çš„æœåŠ¡ï¼Œå½“å­˜å‚¨ç©ºé—´å°äºæŸä¸ªé˜ˆå€¼æ—¶ï¼Œä¼šå‘å‡ºè­¦å‘Šå¹¿æ’­<br>DiskStateService ç®¡ç†ç³»ç»Ÿå­˜å‚¨ç©ºé—´ç»Ÿè®¡çš„æœåŠ¡<br>DisplayManagerService ç®¡ç†æ˜¾ç¤ºè®¾å¤‡çš„æœåŠ¡<br>DreamManagerService ç®¡ç†å±å¹•ä¿æŠ¤çš„æœåŠ¡<br>DropBoxManagerService ç”Ÿæˆå’Œç®¡ç†ç³»ç»Ÿè¿è¡Œä¸­æ—¥å¿—æ–‡ä»¶çš„æœåŠ¡<br>EntropyMixer åŠ è½½å’Œä¿å­˜éšæœºä¿¡æ¯çš„æœåŠ¡<br>IdleMaintenanceService ç®¡ç†ç³»ç»Ÿåœ¨ç©ºé—²æ—¶æ‰§è¡Œç»´æŠ¤ä»»åŠ¡çš„æœåŠ¡<br>InputManagerService ç®¡ç†è§¦å±è¾“å…¥çš„æœåŠ¡<br>InputMethodManagerService ç®¡ç†ç³»ç»Ÿè¾“å…¥æ³•çš„æœåŠ¡<br>LightsService ç®¡ç†å…‰ä¼ æ„Ÿå™¨çš„æœåŠ¡<br>LocationManagerService ç®¡ç†å®šä½å’Œä½ç½®çš„æœåŠ¡<br>LockSettingsService ç®¡ç†ç³»ç»Ÿé”å±è®¾ç½®çš„æœåŠ¡<br>MountService ç®¡ç†ç³»ç»Ÿå­˜å‚¨è®¾å¤‡æŒ‚è½½å’Œå¸è½½çš„æœåŠ¡<br>NetWorkManagementService ç®¡ç†ç³»ç»Ÿç½‘ç»œçš„æœåŠ¡<br>NetWorkPolicyManagerService ç®¡ç†ç½‘ç»œè¿æ¥ç­–ç•¥çš„æœåŠ¡<br>NetWorkStatsService ç®¡ç†ç½‘ç»œè¿æ¥çŠ¶æ€çš„æœåŠ¡<br>NetWorkTimeUpdateService æ ¹æ®ç½‘ç»œæ—¶é—´æ›´æ–°æœ¬åœ°æ—¶é—´çš„æœåŠ¡<br>NotificationManagerService ç®¡ç†ç³»ç»Ÿé€šçŸ¥çš„æœåŠ¡<br>PackageManagerService ç®¡ç†åº”ç”¨åŒ…çš„æœåŠ¡<br>PowerManagerService ç®¡ç†ç³»ç»Ÿç”µæºçš„æœåŠ¡<br>PrintManagerService ç®¡ç†æ‰“å°çš„æœåŠ¡<br>RecognitionManagerService ç®¡ç†èº«ä»½è¯†åˆ«çš„æœåŠ¡<br>SamplingProfilerService è®°å½•å’Œåˆ†æç³»ç»Ÿå¯åŠ¨æ€§èƒ½çš„æœåŠ¡<br>SchedulingPolicyService ç®¡ç†ç³»ç»Ÿè°ƒåº¦ç­–ç•¥çš„æœåŠ¡<br>SearchManagerServcie ç®¡ç†ç³»ç»Ÿæœç´¢åŠŸèƒ½çš„æœåŠ¡<br>SerialServie ç®¡ç†ç³»ç»Ÿä¸²å£è®¾å¤‡çš„æœåŠ¡<br>StatusBarManagerService ç®¡ç†ç³»ç»ŸçŠ¶æ€æ çš„æœåŠ¡<br>TelephonyRegistry ç›‘å¬å’Œç®¡ç†é€šè¯äº‹ä»¶å’ŒçŠ¶æ€çš„æœåŠ¡<br>TextServicesManagerService æ–‡æœ¬æ‹¼å†™æ£€æŸ¥çš„æœåŠ¡<br>UiModeManagerService è®¾ç½®å’Œç®¡ç†ç³»ç»ŸUIæ¨¡å¼çš„æœåŠ¡<br>UsbService ç®¡ç†USBè¿æ¥çš„æœåŠ¡<br>UserManagerService ç®¡ç†ç³»ç»Ÿç”¨æˆ·èº«ä»½ä¿¡æ¯çš„æœåŠ¡<br>VibratorService ç®¡ç†ç³»ç»ŸæŒ¯åŠ¨å™¨çš„æœåŠ¡<br>ï¼·allpaperManagerService ç®¡ç†ç³»ç»Ÿæ¡Œé¢èƒŒæ™¯å¢™çº¸çš„æœåŠ¡<br>WifiP2pService ç®¡ç†Wifiç‚¹å¯¹ç‚¹è¿æ¥çš„æœåŠ¡<br>WifiService ç®¡ç†ç³»ç»ŸWifiè®¾å¤‡çš„æœåŠ¡<br>WindowManagerService ç®¡ç†çª—å£çš„æœåŠ¡ï¼Œå®‰å“ç³»ç»Ÿçš„æ ¸å¿ƒæœåŠ¡</p>
</blockquote>
<p>è¿™äº›æœåŠ¡éƒ½ä¼šæ³¨å†Œåˆ°Service Managerä¸­å»,å®ŒæˆServcieManagerå¯¹æœåŠ¡çš„ç®¡ç†</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯,ç”±System Serveråˆ›å»ºçš„è¿™äº›æœåŠ¡,éƒ½æ˜¯å­˜åœ¨äºSystem Serverè¿›ç¨‹ä¸­çš„çº¿ç¨‹</p>
<p>ä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹</p>
<blockquote>
<p>servicemanageræ˜¯initçš„å­è¿›ç¨‹</p>
<p>Zygoteæ˜¯initçš„å­è¿›ç¨‹ï¼Œforkå‡ºæ¥æ‰€æœ‰çš„è™šæ‹Ÿæœº</p>
<p>system serveræ˜¯Zygoteçš„å­è¿›ç¨‹</p>
</blockquote>
</li>
</ol>
<ol>
<li><p><strong>Homeå¯åŠ¨</strong></p>
<p>å½“æ‰€æœ‰çš„ä»»åŠ¡å¯åŠ¨å,ä¼šé€šè¿‡ActivityManagerå¯åŠ¨Homeç•Œé¢</p>
<p>åŒæ—¶å‘é€ACTION_BOOT_COMPLETEDå¹¿æ’­</p>
</li>
</ol>
]]></content>
      
        <categories>
            
            <category> Source Code </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Source Code </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Androidé€šè®¯æœºåˆ¶åˆ†æ-Handler]]></title>
      <url>/Source-Code/Handler%E9%80%9A%E8%AE%AF%E6%9C%BA%E5%88%B6%E5%88%86%E6%9E%90/</url>
      <content type="html"><![CDATA[<p>Handleråœ¨Androidä¸–ç•Œä¸­çš„åœ°ä½ä¸è¨€è€Œå–».è¿™ç¯‡ç¬”è®°ç®—æ˜¯ç®€å•çš„è®°å½•ä¸€ä¸‹æˆ‘å¯¹äºHandlerçš„ç†è§£.</p>
<p>å½“æ—¶ç¬¬ä¸€æ¬¡å¯¹Handleräº§ç”Ÿå…´è¶£æ˜¯æˆ‘åœ¨çŸ¥ä¹ä¸Šçœ‹åˆ°ä¸€ä¸ªé—®é¢˜:</p>
<p><strong>Androidä¸­ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ä¸ä¼šå› ä¸ºLooper.loop()é‡Œçš„æ­»å¾ªç¯å¡æ­»</strong></p>
<h4 id="Handleræ¶ˆæ¯æœºåˆ¶çš„æ„æˆ"><a href="#Handleræ¶ˆæ¯æœºåˆ¶çš„æ„æˆ" class="headerlink" title="Handleræ¶ˆæ¯æœºåˆ¶çš„æ„æˆ"></a>Handleræ¶ˆæ¯æœºåˆ¶çš„æ„æˆ</h4><ul>
<li><p>Handler</p>
<p>ä¸»è¦å°±æ˜¯å‘é€å„ç§æ¶ˆæ¯<code>sendMessage</code>ç­‰,ä»¥åŠå¤„ç†æ¶ˆæ¯<code>handleMessage</code></p>
</li>
<li><p>Message</p>
<p>å³æ˜¯ä¼ é€’æ¶ˆæ¯çš„è½½ä½“,æœ‰æ—¶å€™ä¹Ÿä¼šæ‰¿è½½ç¡¬ä»¶å‘å‡ºçš„æ¶ˆæ¯.</p>
</li>
<li><p>Looper</p>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ªç¯<code>Looper.loop</code>,å¹¶è´Ÿè´£å°†æ¶ˆæ¯å‘é€ç»™ç›®æ ‡.</p>
</li>
<li><p>MessageQueue</p>
<p>æ¶ˆæ¯é˜Ÿè´Ÿè´£å°†æ¶ˆæ¯å‘é€éƒ½æ¶ˆæ¯æ± ä»¥åŠåœ¨æ¶ˆæ¯æ± ä¸­æ‹¿èµ°æ¶ˆæ¯</p>
<p>â€‹</p>
</li>
</ul>
<p><img src="/images/handler_class.png" alt="handler"></p>
<h4 id="Messageç±»åˆ†æ"><a href="#Messageç±»åˆ†æ" class="headerlink" title="Messageç±»åˆ†æ"></a>Messageç±»åˆ†æ</h4><p>é¦–å…ˆæˆ‘ä»¬è¦çœ‹åˆ°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">private static Message sPool;</span><br><span class="line"></span><br><span class="line">// sometimes we store linked lists of these things</span><br><span class="line">/*package*/ Message next;</span><br></pre></td></tr></table></figure>
<p><code>sPool</code>å£°æ˜ä¸ºstatic ä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰çš„Messageå®ä¾‹å…±äº«</p>
<p><code>next</code>åˆ™ä¸ºæ¯ä¸€ä¸ªå®ä¾‹éƒ½æœ‰çš„</p>
<p>Messageç±»ä¸­,ä¸€ç³»åˆ—çš„obtain,å¦‚ä¸‹:</p>
<p>obtain(Handler h)</p>
<p>obtain(Handler h, int what)</p>
<p>obtain(Handler h, Runnable callback)</p>
<p>â€¦</p>
<p>obtain()</p>
<ul>
<li><p>å¤ç”¨æœºåˆ¶</p>
<p>æˆ‘ä»¬æŸ¥çœ‹æºç å¯çŸ¥,ä»–ä»¬æœ€åéƒ½è°ƒç”¨obtain()è·å¾—ä¸€ä¸ªMessageå®ä½“</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">android.os.Message#obtain()</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Return a new Message instance from the global pool. Allows us to</span></span><br><span class="line"><span class="comment">    * avoid allocating new objects in many cases.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Message <span class="title">obtain</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">synchronized</span> (sPoolSync) &#123;</span><br><span class="line">           <span class="keyword">if</span> (sPool != <span class="keyword">null</span>) &#123;</span><br><span class="line">               Message m = sPool;</span><br><span class="line">               sPool = m.next;</span><br><span class="line">               m.next = <span class="keyword">null</span>;</span><br><span class="line">               m.flags = <span class="number">0</span>; <span class="comment">// clear in-use flag</span></span><br><span class="line">               sPoolSize--;</span><br><span class="line">               <span class="keyword">return</span> m;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> Message();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°,å½“<code>sPool</code>ä¸º<code>null</code>æ—¶æ‰ä¼š<code>new Message();</code></p>
<p>å¦‚æœä¸ä¸º<code>null</code>åˆ™æŠŠå½“å‰çš„<code>sPool</code>èµ‹å€¼ç»™<code>Message m</code>  è€ŒåæŠŠ<code>sPool</code>èµ‹å€¼ä¸º<code>m.next()</code>(ä¹Ÿå°±æ˜¯sPoolæ²¡æœ‰èµ‹å€¼å‰å®ƒçš„ä¸‹ä¸€ä¸ªMessageå¯¹è±¡)</p>
<p>æŸ¥çœ‹æºç åˆ†æå¯çŸ¥,æœ‰ä¸€ä¸ªMessageçš„æ¶ˆæ¯æ± ,é‡‡ç”¨çš„æ˜¯å•é“¾è¡¨å¤´æ’æ³•,nextæ°¸è¿œæŒ‡å‘çš„æ˜¯ä¸‹ä¸€ä¸ªå¯å¤ç”¨çš„å®ä¾‹åœ°å€</p>
<p>æ‰€ä»¥,å¦‚æœæˆ‘ä»¬åœ¨ä»£ç ä¸­è¦ä½¿ç”¨Messageå®ä¾‹,å°±å°½é‡ä½¿ç”¨<code>obtain()</code>è¿™ä¸€ç³»åˆ—æ–¹æ³•,è€Œä¸è¦ç›´æ¥New</p>
<ul>
<li><p>åŠ å…¥æ¶ˆæ¯æ± </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">android.os.Message#recycleUnchecked</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Recycles a Message that may be in-use.</span></span><br><span class="line"><span class="comment">    * Used internally by the MessageQueue and Looper when disposing of queued Messages.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">recycleUnchecked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="comment">// Mark the message as in use while it remains in the recycled object pool.</span></span><br><span class="line">       <span class="comment">// Clear out all other details.</span></span><br><span class="line">       flags = FLAG_IN_USE;</span><br><span class="line">       what = <span class="number">0</span>;</span><br><span class="line">       arg1 = <span class="number">0</span>;</span><br><span class="line">       arg2 = <span class="number">0</span>;</span><br><span class="line">       obj = <span class="keyword">null</span>;</span><br><span class="line">       replyTo = <span class="keyword">null</span>;</span><br><span class="line">       sendingUid = -<span class="number">1</span>;</span><br><span class="line">       when = <span class="number">0</span>;</span><br><span class="line">       target = <span class="keyword">null</span>;</span><br><span class="line">       callback = <span class="keyword">null</span>;</span><br><span class="line">       data = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">synchronized</span> (sPoolSync) &#123;</span><br><span class="line">           <span class="keyword">if</span> (sPoolSize &lt; MAX_POOL_SIZE) &#123;</span><br><span class="line">               next = sPool;</span><br><span class="line">               sPool = <span class="keyword">this</span>;</span><br><span class="line">               sPoolSize++;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå…¶å®å°±æ˜¯æŠŠæ— ç”¨çš„Messageå®ä¾‹,åŠ å…¥æ¶ˆæ¯æ± çš„åœ°æ–¹.</p>
<p><code>sPoolSize &lt; MAX_POOL_SIZE</code>åªè¦å½“å‰æ¶ˆæ¯æ± æ²¡æœ‰åˆ°æé™,å°±<code>next = sPool;</code>ä¸”<code>sPool = this;</code></p>
<p>å¯ä»¥ç®€å•ç†è§£ä¸ºæŠŠä¹‹å‰çš„<code>sPool</code>å¯å¤ç”¨å¯¹è±¡å‘åç§»åŠ¨ä¸€ä½,æŠŠå½“å‰è¿™ä¸ªè¦å›æ”¶çš„Messageç½®ä¸ºç¬¬ä¸€ä¸ªå¯å¤ç”¨å¯¹è±¡</p>
</li>
</ul>
<p><strong>æ‰€ä»¥,Messageä¸»è¦å°±æ˜¯è£…è½½æ•°æ®,å¹¶ä¸”å®ç°äº†Messageçš„å¤ç”¨æœºåˆ¶</strong></p>
<h4 id="MessageQueueç±»åˆ†æ"><a href="#MessageQueueç±»åˆ†æ" class="headerlink" title="MessageQueueç±»åˆ†æ"></a>MessageQueueç±»åˆ†æ</h4>]]></content>
      
        <categories>
            
            <category> Source Code </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Handler </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[RelativeLayoutä¸­Buttonè¦†ç›–å…¶ä»–View]]></title>
      <url>/Bug/RelativeLayout%E4%B8%ADButton%E8%A6%86%E7%9B%96%E5%85%B6%E4%BB%96View/</url>
      <content type="html"><![CDATA[<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>å¸ƒå±€æ–‡ä»¶ä¸­,RelativeLayoutåŒ…è£¹æ—¶,åœ¨RelativeLayoutä¸­çš„View,åº”è¯¥æ˜¯â€å±‚å±‚å‹ä¸Šâ€çš„.</p>
<p>è¶Šå¾€åº•ä¸‹å†™çš„Viwe,åœ¨è§†å›¾ä¸Šè¶Šåœ¨ä¸Šå±‚.</p>
<h4 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h4><h5 id="activity-main-xml"><a href="#activity-main-xml" class="headerlink" title="activity_main.xml"></a><em>activity_main.xml</em></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;layout</span><br><span class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;</span><br><span class="line">    &lt;data&gt;</span><br><span class="line">        &lt;variable</span><br><span class="line">            name=&quot;click&quot;</span><br><span class="line">            type=&quot;com.wangzhumo.app.single.MainActivity.ClickFunc&quot;/&gt;</span><br><span class="line">    &lt;/data&gt;</span><br><span class="line">    &lt;RelativeLayout</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;</span><br><span class="line">        tools:context=&quot;com.wangzhumo.app.single.MainActivity&quot;&gt;</span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:layout_width=&quot;match_parent&quot;</span><br><span class="line">            android:layout_height=&quot;match_parent&quot;</span><br><span class="line">            android:layout_marginBottom=&quot;50dp&quot;</span><br><span class="line">            tools:background=&quot;@tools:sample/backgrounds/scenic&quot;/&gt;</span><br><span class="line">        &lt;Button</span><br><span class="line">            android:id=&quot;@+id/button_finsh&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_alignParentTop=&quot;true&quot;</span><br><span class="line">            android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">            android:onClick=&quot;@&#123;(v) -&gt; click.onFinshAct(v)&#125;&quot;</span><br><span class="line">            android:text=&quot;Finsh&quot; /&gt;</span><br><span class="line">        &lt;Button</span><br><span class="line">            android:id=&quot;@+id/button_dis&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_alignParentEnd=&quot;true&quot;</span><br><span class="line">            android:layout_alignParentTop=&quot;true&quot;</span><br><span class="line">            android:onClick=&quot;@&#123;(v) -&gt; click.onStartAct(v)&#125;&quot;</span><br><span class="line">            android:text=&quot;Start&quot;</span><br><span class="line">            tools:ignore=&quot;MissingConstraints&quot;</span><br><span class="line">            tools:layout_editor_absoluteX=&quot;88dp&quot;</span><br><span class="line">            tools:layout_editor_absoluteY=&quot;0dp&quot; /&gt;</span><br><span class="line">        &lt;Button</span><br><span class="line">            android:id=&quot;@+id/button_start&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:onClick=&quot;@&#123;(v) -&gt; click.onShowDialog(v)&#125;&quot;</span><br><span class="line">            android:text=&quot;Dialog&quot;</span><br><span class="line">            tools:ignore=&quot;MissingConstraints&quot;</span><br><span class="line">            tools:layout_editor_absoluteX=&quot;176dp&quot;</span><br><span class="line">            tools:layout_editor_absoluteY=&quot;0dp&quot; /&gt;</span><br><span class="line">        &lt;Button</span><br><span class="line">            android:id=&quot;@+id/button2&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_alignParentStart=&quot;true&quot;</span><br><span class="line">            android:onClick=&quot;@&#123;(v) -&gt; click.onPxActivity(v)&#125;&quot;</span><br><span class="line">            android:layout_below=&quot;@+id/button_start&quot;</span><br><span class="line">            android:layout_marginTop=&quot;22dp&quot;</span><br><span class="line">            android:text=&quot;Pixe&quot; /&gt;</span><br><span class="line">        &lt;Button</span><br><span class="line">            android:id=&quot;@+id/button3&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:onClick=&quot;@&#123;(v) -&gt; click.onTralActivity(v)&#125;&quot;</span><br><span class="line">            android:layout_alignStart=&quot;@+id/button_finsh&quot;</span><br><span class="line">            android:layout_alignTop=&quot;@+id/button2&quot;</span><br><span class="line">            android:text=&quot;Tranl&quot;</span><br><span class="line">            tools:text=&quot;@tools:sample/lorem/random&quot;/&gt;</span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:layout_marginBottom=&quot;100dp&quot;</span><br><span class="line">            android:layout_width=&quot;match_parent&quot;</span><br><span class="line">            android:layout_height=&quot;match_parent&quot;</span><br><span class="line">            tools:background=&quot;@tools:sample/backgrounds/scenic&quot;/&gt;</span><br><span class="line">    &lt;/RelativeLayout&gt;</span><br><span class="line">&lt;/layout&gt;</span><br></pre></td></tr></table></figure>
<h5 id="Viewçš„ç»“æ„å¦‚ä¸‹"><a href="#Viewçš„ç»“æ„å¦‚ä¸‹" class="headerlink" title="Viewçš„ç»“æ„å¦‚ä¸‹:"></a>Viewçš„ç»“æ„å¦‚ä¸‹:</h5><p><img src="/images/button_tree.png" alt="tree"></p>
<h5 id="ç„¶è€Œå®é™…æ•ˆæœå¦‚ä¸‹"><a href="#ç„¶è€Œå®é™…æ•ˆæœå¦‚ä¸‹" class="headerlink" title="ç„¶è€Œå®é™…æ•ˆæœå¦‚ä¸‹:"></a>ç„¶è€Œå®é™…æ•ˆæœå¦‚ä¸‹:</h5><p><img src="/images/button_show.png" alt="views"></p>
<h5 id="åˆ†æå¦‚ä¸‹"><a href="#åˆ†æå¦‚ä¸‹" class="headerlink" title="åˆ†æå¦‚ä¸‹:"></a>åˆ†æå¦‚ä¸‹:</h5><p>é€ æˆè¿™æ ·æ•ˆæœ,æ˜¯Buttonçš„åŸå› </p>
<p>åˆ†æ:æ•´ä¸ªé¡µé¢é™¤äº† 2,3,4,5 è¿™5ä¸ªButtonä¹‹å¤–,å…¶ä»–çš„Viewéƒ½ä¾æ—§éµå¾ªRelativeLayoutçš„è§„åˆ™</p>
<h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>åœ¨stackoverflowä¸Šæˆ‘æ‰¾åˆ°äº†Buttoné€ æˆè¿™ä¸ªæ•ˆæœçš„åŸå› </p>
<blockquote>
<p><a href="https://stackoverflow.com/questions/27080338/android-5-0-androidelevation-works-for-view-but-not-button/27112143#27112143" target="_blank" rel="noopener">https://stackoverflow.com/questions/27080338/android-5-0-androidelevation-works-for-view-but-not-button/27112143#27112143</a></p>
</blockquote>
<p>æ˜¯å› ä¸ºAndroid5.0ä¹‹å,Buttoné»˜è®¤æ·»åŠ äº†<a href="https://developer.android.com/reference/android/animation/StateListAnimator.html" target="_blank" rel="noopener">StateListAnimator</a>,å…·ä½“å°±æ˜¯å¯¹</p>
<p> <code>android:elevation</code> </p>
<p> <code>android:translationZ</code> </p>
<p>ä¸¤ä¸ªå±æ€§è¿›è¡Œäº†ä¿®æ”¹,æˆ‘ä»¬å¦‚ä½•å»æ‰è¿™ä¸ªé»˜è®¤çš„æ•ˆæœé‚£?</p>
<p>##### </p>
<p><strong>android:stateListAnimatorè®¾ç½®ä¸ºnullå³å¯</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    ...</span><br><span class="line">    android:stateListAnimator=&quot;@null&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ éœ€è¦æ·»åŠ stateListAnimatoræ•ˆæœçš„è¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    ...</span><br><span class="line">    android:stateListAnimator=&quot;@anim/you_animator&quot; /&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Bug </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Bug </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ConfigChangesçš„å±æ€§å€¼]]></title>
      <url>/Android/ConfigChanges%E7%9A%84%E5%B1%9E%E6%80%A7%E5%80%BC/</url>
      <content type="html"><![CDATA[<p><strong>é€šè¿‡è®¾ç½®è¿™ä¸ªå±æ€§å¯ä»¥ä½¿Activityæ•æ‰è®¾å¤‡çŠ¶æ€å˜åŒ–</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&quot;mcc&quot; å›½é™…ç§»åŠ¨ç”¨æˆ·è¯†åˆ«ç æ‰€å±å›½å®¶ä»£å·æ˜¯æ”¹å˜äº†----- simè¢«ä¾¦æµ‹åˆ°äº†ï¼Œå»æ›´æ–°mcc mccæ˜¯ç§»åŠ¨ç”¨æˆ·æ‰€å±å›½å®¶ä»£å·</span><br><span class="line">&quot;mnc&quot; å›½é™…ç§»åŠ¨ç”¨æˆ·è¯†åˆ«ç çš„ç§»åŠ¨ç½‘å·ç æ˜¯æ”¹å˜äº†------ simè¢«ä¾¦æµ‹åˆ°äº†ï¼Œå»æ›´æ–°mnc MNCæ˜¯ç§»åŠ¨ç½‘å·ç ï¼Œæœ€å¤šç”±ä¸¤ä½æ•°å­—ç»„æˆï¼Œç”¨äºè¯†åˆ«ç§»åŠ¨ç”¨æˆ·æ‰€å½’å±çš„ç§»åŠ¨é€šä¿¡ç½‘</span><br><span class="line">&quot;locale&quot; åœ°å€æ”¹å˜äº†-----ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªæ–°çš„è¯­è¨€ä¼šæ˜¾ç¤ºå‡ºæ¥</span><br><span class="line">&quot;touchscreen&quot; è§¦æ‘¸å±æ˜¯æ”¹å˜äº†------é€šå¸¸æ˜¯ä¸ä¼šå‘ç”Ÿçš„</span><br><span class="line">&quot;keyboard&quot; é”®ç›˜å‘ç”Ÿäº†æ”¹å˜----ä¾‹å¦‚ç”¨æˆ·ç”¨äº†å¤–éƒ¨çš„é”®ç›˜</span><br><span class="line">&quot;keyboardHidden&quot; é”®ç›˜çš„å¯ç”¨æ€§å‘ç”Ÿäº†æ”¹å˜</span><br><span class="line">&quot;navigation&quot; å¯¼èˆªå‘ç”Ÿäº†å˜åŒ–-----é€šå¸¸ä¹Ÿä¸ä¼šå‘ç”Ÿ</span><br><span class="line">&quot;screenLayout&quot; å±å¹•çš„æ˜¾ç¤ºå‘ç”Ÿäº†å˜åŒ–------ä¸åŒçš„æ˜¾ç¤ºè¢«æ¿€æ´»</span><br><span class="line">&quot;fontScale&quot; å­—ä½“æ¯”ä¾‹å‘ç”Ÿäº†å˜åŒ–----é€‰æ‹©äº†ä¸åŒçš„å…¨å±€å­—ä½“</span><br><span class="line">&quot;uiMode&quot; ç”¨æˆ·çš„æ¨¡å¼å‘ç”Ÿäº†å˜åŒ–</span><br><span class="line">&quot;orientation&quot; å±å¹•æ–¹å‘æ”¹å˜äº†</span><br><span class="line">&quot;screenSize&quot; å±å¹•å¤§å°æ”¹å˜äº†</span><br><span class="line">&quot;smallestScreenSize&quot; å±å¹•çš„ç‰©ç†å¤§å°æ”¹å˜äº†ï¼Œå¦‚ï¼šè¿æ¥åˆ°ä¸€ä¸ªå¤–éƒ¨çš„å±å¹•ä¸Š</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="http://www.cnblogs.com/carlo/p/4311010.html" target="_blank" rel="noopener">http://www.cnblogs.com/carlo/p/4311010.html</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Activityä¸Fragmentçš„ç”Ÿå‘½å‘¨æœŸ]]></title>
      <url>/Android/Activity%E4%B8%8EFragment%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      <content type="html"><![CDATA[<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>åšAndroidå¼€å‘å¥½äº›å¹´äº†,è¿™äº›åŸºç¡€çš„çŸ¥è¯†,å®Œå®Œæ•´æ•´çš„åœ¨åšå®¢ä¸Šå†™ä¸€æ¬¡.</p>
<h4 id="Activityç”Ÿå‘½å‘¨æœŸ"><a href="#Activityç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Activityç”Ÿå‘½å‘¨æœŸ"></a>Activityç”Ÿå‘½å‘¨æœŸ</h4><p>å¿…ä¸å¯å°‘çš„ä¸€å¼ å›¾,æ¥è‡ªGoogle Android developer çš„æ–‡æ¡£ä¸Š</p>
<p><img src="/images/activity_lifecycle.png" alt="activity_liferycle"></p>
<h5 id="å›è°ƒæ–¹æ³•ç®€è¿°"><a href="#å›è°ƒæ–¹æ³•ç®€è¿°" class="headerlink" title="å›è°ƒæ–¹æ³•ç®€è¿°"></a>å›è°ƒæ–¹æ³•ç®€è¿°</h5><ul>
<li><p>onCreate()  </p>
<p>å½“Activityåˆ›å»ºæ—¶,ä¼šå›è°ƒè¯¥æ–¹æ³•,å¸¸ç”¨äºåˆå§‹åŒ–View æˆ–å…¶ä»–çš„ä¸€äº›åŠŸèƒ½çš„åˆå§‹åŒ–</p>
</li>
<li><p>onStart()</p>
<p>Activityå·²ç»åˆå§‹åŒ–å®Œæ¯•,æ­¤æ—¶çš„é¡µé¢æ˜¯å¯è§çŠ¶æ€,åˆ™å›è°ƒonStart();æ–¹æ³•</p>
<p>Activityå¯åŠ¨ï¼šonCreate() -&gt; onStart() -&gt; onResume()</p>
</li>
<li><p>onResume()</p>
<p>å½“Activityå¯è§,å¹¶ä¸”è·å¾—ç„¦ç‚¹,å¯ä»¥ä¸ç”¨æˆ·äº¤äº’æ—¶å›è°ƒ</p>
<p>åœ¨æˆ‘ä»¬å¤„ç†ä¸€äº›è§†å±æ“ä½œ,æˆ–è€…æ˜¯Fragmentæ‡’åŠ è½½ç­‰éƒ½å¯ä»¥ç”¨åˆ°</p>
</li>
<li><p>onPause()</p>
<p>å½“è°ƒç”¨onPause()æ—¶,è¯´æ˜Activityè¢«é˜»æŒ¡,éƒ¨åˆ†UIå·²ç»ä¸å¯è§äº†,ä½†æ˜¯Activityçš„UIå¹¶æ²¡æœ‰å®Œå…¨æ¶ˆå¤±.</p>
</li>
<li><p>onStop()</p>
<p>å½“Activityå®Œå…¨ä¸å¯è§,ä¸”åˆ°äº†åå°ä¹‹å,å¦‚æœç³»ç»Ÿå†…å­˜ä¸è¶³,ç³»ç»Ÿå¯èƒ½ä¼šæ€æ­»å½“å‰Activity</p>
<p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥å–æ¶ˆä¸€äº›åŠ¨ç”»æ•ˆæœç­‰</p>
</li>
<li><p>onDestory()</p>
<p>Activityé€€å‡º,é”€æ¯</p>
<p>å¸¸ç”¨äºé”€æ¯,å›æ”¶èµ„æº</p>
</li>
</ul>
<h5 id="ç»å…¸åœºæ™¯"><a href="#ç»å…¸åœºæ™¯" class="headerlink" title="ç»å…¸åœºæ™¯"></a>ç»å…¸åœºæ™¯</h5><p>1.æ­£å¸¸å¯åŠ¨</p>
<p>ç³»ç»Ÿè°ƒç”¨onCreateæ–¹æ³• , ç„¶åè°ƒç”¨onStart() , æœ€åè°ƒç”¨ onResume() ,ç”¨æˆ·å¯æ“ä½œ.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E/MainActivity: ---- onCreate ----</span><br><span class="line">E/MainActivity: ---- onStart ----</span><br><span class="line">E/MainActivity: ---- onResume ----</span><br></pre></td></tr></table></figure>
<p>2.æ­£å¸¸é€€å‡º</p>
<p>Activityå…ˆå¤±å»ç„¦ç‚¹ä¸å¯äº¤äº’</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E/MainActivity: ---- onPause ----</span><br><span class="line">E/MainActivity: ---- onStop ----</span><br><span class="line">E/MainActivity: ---- onDestroy ----</span><br></pre></td></tr></table></figure>
<p>2.å¼¹å‡ºDialog</p>
<p>MainActivityä»€ä¹ˆlogä¹Ÿæ²¡æœ‰æ‰“å°,è¯´æ˜ä¸å¯¹Activityé€ æˆå½±å“</p>
<p>3.è·³è½¬ä¸€ä¸ªé€æ˜çš„Activityé¡µé¢(1åƒç´ çš„åŒç†)</p>
<p>MainActivityåªè°ƒç”¨äº†onPause()  å› ä¸ºMainActivityçš„UIè¢«é®æŒ¡äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E/MainActivity: ---- onPause ----</span><br></pre></td></tr></table></figure>
<p>4.ä»è¢«é®æŒ¡çŠ¶æ€æ¢å¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E/MainActivity: ---- onResume ----</span><br></pre></td></tr></table></figure>
<p>6.é”å±</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E/MainActivity: ---- onPause ----</span><br><span class="line">E/MainActivity: ---- onStop ----</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶,MainActivityå·²ç»åœ¨åå°äº†.</p>
<p>7.ä»é”å±æ¢å¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E/MainActivity: ---- onStart ----</span><br><span class="line">E/MainActivity: ---- onResume ----</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°,ä¸ä»…ä»…èµ°äº†onResume() ,è¿˜èµ°äº†ä¸€æ¬¡onStart()</p>
<p>8.æ¨ªç«–å±åˆ‡æ¢</p>
<ul>
<li><p>æ­£å¸¸åˆ‡æ¢</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">E/MainActivity: ---- onPause ----</span><br><span class="line">E/MainActivity: ---- onStop ----</span><br><span class="line">E/MainActivity: ---- onDestroy ----</span><br><span class="line"></span><br><span class="line">E/MainActivity: ---- onCreate ----</span><br><span class="line">E/MainActivity: ---- onStart ----</span><br><span class="line">E/MainActivity: ---- onResume ----</span><br><span class="line"></span><br><span class="line">å¦‚æœä½ ä»€ä¹ˆéƒ½ä¸è®¾ç½®,ç›´æ¥åˆ‡æ¢æ˜¯è¿™æ ·çš„.</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿ç•™Activityçš„åˆ‡æ¢</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘åœ¨manifest.xmlæ–‡ä»¶ä¸­,æ·»åŠ äº†</span><br><span class="line"></span><br><span class="line">&lt;activity</span><br><span class="line">	android:name=&quot;.MainActivity&quot;</span><br><span class="line">	android:configChanges=&quot;orientation|screenSize&quot;&gt;</span><br><span class="line">	&lt;intent-filter&gt;</span><br><span class="line">		&lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;</span><br><span class="line">	&lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;</span><br><span class="line">&lt;/intent-filter&gt;</span><br><span class="line">&lt;/activity&gt;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶:</p>
<p>Activityä¸ä¼šè¢«é”€æ¯,ä»è€Œé‡æ–°åˆ›å»º,è€Œæ˜¯è°ƒç”¨onConfigurationChanged</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">  public void onConfigurationChanged(Configuration newConfig) &#123;</span><br><span class="line">     super.onConfigurationChanged(newConfig);</span><br><span class="line">     //do somethings</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
</li>
</ul>
<h4 id="Fragmentç”Ÿå‘½å‘¨æœŸ"><a href="#Fragmentç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Fragmentç”Ÿå‘½å‘¨æœŸ"></a>Fragmentç”Ÿå‘½å‘¨æœŸ</h4><p>æƒ¯ä¾‹,å¦‚å›¾:</p>
<p><img src="/images/fragment_lifercycle.png" alt="fragment_lifecycle"></p>
<h5 id="å›è°ƒæ–¹æ³•ç®€è¿°-1"><a href="#å›è°ƒæ–¹æ³•ç®€è¿°-1" class="headerlink" title="å›è°ƒæ–¹æ³•ç®€è¿°"></a>å›è°ƒæ–¹æ³•ç®€è¿°</h5><p>å…¶ä¸­onAttach()  onCreateView() onActivityCreated()  onDestroy() onDetach() å’ŒActivityçš„ä¸ä¸€è‡´</p>
<ul>
<li><p>onAttach()</p>
<p>Fragmentä¸å®ƒæ‰€ä¾èµ–çš„Activityå»ºç«‹å…³è”</p>
</li>
<li><p>onCreateView()</p>
<p>è¿™é‡Œæ˜¯ç»™Fragmentåˆ›å»ºè§†å›¾ç”¨çš„,åœ¨onCreate()ä¸­åˆå§‹åŒ–Fragment,ä½†æ˜¯è§†å›¾ç­‰è¿˜æ˜¯æ²¡æœ‰åŠ è½½ä¸Šå»çš„</p>
</li>
<li><p>onActivityCreated()</p>
<p>å¦‚æœè°ƒç”¨è¯¥æ–¹æ³•,è¯´æ˜Fragmentä¾èµ–çš„Activityä¸­onCreate()å·²ç»æ‰§è¡Œå®Œæ¯•</p>
</li>
<li><p>onDestroyView()</p>
<p>Fragmentä¸­çš„å¸ƒå±€é”€æ¯,ç§»é™¤</p>
<p>è¦æ³¨æ„çš„æ˜¯,æ­¤æ—¶Fragmentä¸å®ƒæ‰€ä¾èµ–çš„Activityè¿˜æ˜¯å…³è”çš„</p>
</li>
<li><p>onDestroy()</p>
<p>æ­¤æ—¶,Fragmentè¢«é”€æ¯</p>
</li>
<li><p>onDetach()</p>
<p>è§£é™¤ä¸Activityçš„å…³è”</p>
</li>
</ul>
<p>PS: Fragmentä¸­çš„onResume()å¹¶ä¸ååˆ†å‡†ç¡®,æ‰€ä»¥å¦‚æœè¦åšæ‡’åŠ è½½,è¦åˆ¤æ–­fragmentä¸èƒ½ä½¿ç”¨onResumeåˆ¤æ–­</p>
<h5 id="ç»å…¸åœºæ™¯-1"><a href="#ç»å…¸åœºæ™¯-1" class="headerlink" title="ç»å…¸åœºæ™¯"></a>ç»å…¸åœºæ™¯</h5><p>1.æ­£å¸¸å¯åŠ¨</p>
<p>çœŸçš„æ˜¯è¶…çº§å¤šå•Š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">E/BlankFragment: ---- onAttach ----   			å…³è”Activity</span><br><span class="line">E/BlankFragment: ---- onCreate ----    			Fragmentåˆå§‹åŒ–</span><br><span class="line">E/BlankFragment: ---- onCreateView ----			åˆ›å»ºFragmentçš„å¸ƒå±€</span><br><span class="line">E/BlankFragment: ---- onViewCreated ----		onCreateViewæ‰§è¡Œå®Œåè¢«è§¦å‘</span><br><span class="line">E/BlankFragment: ---- onActivityCreated ----	å…³è”çš„Activity OnCreate()æ‰§è¡Œå®Œæ¯•åè§¦å‘</span><br><span class="line">E/BlankFragment: ---- onStart ----				Fragmentå¯è§</span><br><span class="line">E/BlankFragment: ---- onResume ----				Fragmentå¯äº¤äº’,ä¸€èˆ¬ä¸ä½¿ç”¨å®ƒæ¥åˆ¤æ–­</span><br></pre></td></tr></table></figure>
<p>2.æ­£å¸¸é€€å‡º(æˆ–è€…æ˜¯å®ƒå…³è”çš„Activityè¢«é”€æ¯äº†)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">E/BlankFragment: ---- onPause ----</span><br><span class="line">E/BlankFragment: ---- onStop ----</span><br><span class="line">E/BlankFragment: ---- onDestroyView ----</span><br><span class="line">E/BlankFragment: ---- onDestroy ----</span><br><span class="line">E/BlankFragment: ---- onDetach ----</span><br></pre></td></tr></table></figure>
<p>3.è¿›å…¥åå°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E/BlankFragment: ---- onPause ----</span><br><span class="line">E/BlankFragment: ---- onStop ----</span><br></pre></td></tr></table></figure>
<p>4.ä»é”å±åˆ°è§£é”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">E/BlankFragment: ---- onPause ----</span><br><span class="line">E/BlankFragment: ---- onSaveInstanceState ----</span><br><span class="line">E/BlankFragment: ---- onStop ----</span><br><span class="line"></span><br><span class="line">E/BlankFragment: ---- onStart ----</span><br><span class="line">E/BlankFragment: ---- onResume ----</span><br></pre></td></tr></table></figure>
<p>5.åˆ‡æ¢åˆ°OtherFragment</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E/BlankFragment: ---- onPause ----</span><br><span class="line">E/BlankFragment: ---- onStop ----</span><br><span class="line">E/BlankFragment: ---- onDestroyView ----</span><br></pre></td></tr></table></figure>
<p>6.ä»OtherFragmentåˆ‡æ¢å›æœ¬Fragment</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">E/BlankFragment: ---- onCreateView ----</span><br><span class="line">E/BlankFragment: ---- onActivityCreated ----</span><br><span class="line">E/BlankFragment: ---- onStart ----   </span><br><span class="line">E/BlankFragment: ---- onResume ----</span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Fragment </tag>
            
            <tag> Activity </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android å•å…ƒæµ‹è¯•(äºŒ)]]></title>
      <url>/Android-Test/Android-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95-%E4%BA%8C/</url>
      <content type="html"><![CDATA[<p>åè¡¥.</p>
]]></content>
      
        <categories>
            
            <category> Android Test </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Androidå•å…ƒæµ‹è¯• </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Flutterå®‰è£…æŒ‡å—MACç‰ˆ]]></title>
      <url>/Flutter/Flutter%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97MAC%E7%89%88/</url>
      <content type="html"><![CDATA[<h4 id="ä¸‹è½½Flutter-SDK"><a href="#ä¸‹è½½Flutter-SDK" class="headerlink" title="ä¸‹è½½Flutter SDK"></a>ä¸‹è½½Flutter SDK</h4><h5 id="ä½¿ç”¨Gitå®‰è£…"><a href="#ä½¿ç”¨Gitå®‰è£…" class="headerlink" title="ä½¿ç”¨Gitå®‰è£…"></a>ä½¿ç”¨Gitå®‰è£…</h5><p>å¦‚æœå·²ç»ä¸‹è½½è¿‡flutterçš„,åˆ‡æ¢åˆ°flutterç›®å½•å»ç›´æ¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git checkout beta</span><br><span class="line">git pull</span><br><span class="line">//å¯èƒ½ä¼šå¤±è´¥,å› ä¸ºè¿™ä¸ªç›®å½•ä¸­å¯èƒ½æœ‰ä¿®æ”¹è¿‡,è¦ç›®æ”¾å¼ƒä¿®æ”¹,è¦ä¹ˆæš‚å­˜å‡å¯</span><br><span class="line"></span><br><span class="line">(å¦‚æœå¤±è´¥,è¿™é‡Œé€‰æ‹©äº†æš‚å­˜) -- Start</span><br><span class="line">git checkout beta</span><br><span class="line">git stash</span><br><span class="line">git pull</span><br><span class="line">(å¦‚æœå¤±è´¥,è¿™é‡Œé€‰æ‹©äº†æš‚å­˜)  -- End</span><br></pre></td></tr></table></figure>
<p>æœªä¸‹è½½è¿‡,ç¬¬ä¸€æ¬¡å®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//å…‹éš†flutterçš„betaåˆ†æ”¯</span><br><span class="line">git clone -b beta https://github.com/flutter/flutter.git</span><br></pre></td></tr></table></figure>
<h5 id="é…ç½®â€ç¯å¢ƒå˜é‡â€"><a href="#é…ç½®â€ç¯å¢ƒå˜é‡â€" class="headerlink" title="é…ç½®â€ç¯å¢ƒå˜é‡â€"></a>é…ç½®â€ç¯å¢ƒå˜é‡â€</h5><p>ç†Ÿæ‚‰å‘½ä»¤çš„è‡ªå·±æä¸€ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æŠŠ         å®‰è£…ç›®å½•/flutter/bin</span><br><span class="line">export PATH=`pwd`/flutter/bin:$PATH</span><br></pre></td></tr></table></figure>
<p>ä¸ç†Ÿæ‚‰çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">~ âŒš 0:01:37</span><br><span class="line">$ vim ~/.bash_profile</span><br><span class="line"></span><br><span class="line">//ä¼šè¿›å…¥vimç¼–è¾‘,å¦‚ä¸‹é…ç½®å³å¯</span><br><span class="line">export FLUTTER_HOME=/Users/phyooos/develop/flutter</span><br><span class="line"></span><br><span class="line">export PATH=$PATH:$FLUTTER_HOME/bin:</span><br></pre></td></tr></table></figure>
<p>ä¸ä¼šçš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">open ~/.bash_profile</span><br><span class="line"></span><br><span class="line">//ç¼–è¾‘å™¨,æ€»å¯ä»¥äº†å§,å¦‚ä¸‹é…ç½®å³å¯</span><br><span class="line">export FLUTTER_HOME=/Users/phyooos/develop/flutter</span><br><span class="line"></span><br><span class="line">export PATH=$PATH:$FLUTTER_HOME/bin:</span><br></pre></td></tr></table></figure>
<p>æ”¾ä¸€ä¸‹æˆ‘è‡ªå·±çš„é…ç½®:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0/Contents/Home</span><br><span class="line">export ANDROID_HOME=/Users/phyooos/Library/Android/sdk</span><br><span class="line">export TOMCAT_HOME=/Users/phyooos/develop/apache-tomcat-7.0.77</span><br><span class="line">export GRADLE_USER_HOME=/Users/phyooos/develop/gradle</span><br><span class="line">export MYSQL_HOME=/usr/local/mysql-5.7.18-macos10.12-x86_64</span><br><span class="line">export GOROOT=/usr/local/go</span><br><span class="line">export GOPATH=/Users/phyooos/develop/workspace</span><br><span class="line">export GOBIN=$GOPATH/bin</span><br><span class="line">export SCALA_HOME=/Users/phyooos/develop/scala-2.11.8</span><br><span class="line">export MAVEN_HOME=/Users/phyooos/develop/apache-maven-3.5.0</span><br><span class="line">export FLUTTER_HOME=/Users/phyooos/develop/flutter</span><br><span class="line">export PATH=/usr/local/Cellar/git/2.15.0/bin:$PATH:$JAVA_HOME/bin:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools:$TOMCAT_HOME/bin:$GRADLE_HOME/bin:$MYSQL_HOME/bin:$GOROOT/bin:$GOPATH:$GOBIN:$GOPATH/bin:$FLUTTER_HOME/bin:$MAVEN_HOME/bin:$SCALA_HOME/bin</span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…Flutter"><a href="#å®‰è£…Flutter" class="headerlink" title="å®‰è£…Flutter"></a>å®‰è£…Flutter</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter doctor</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯,è¿™ä¸ªé…ç½®éœ€è¦â€è‰¯å¥½çš„ç½‘ç»œç¯å¢ƒâ€,æœ€å¥½ç¿»å¢™ä¸‹è½½ä¸ºå¦™,ä½†æ˜¯<strong>ç»ˆç«¯ä¸èµ°ä»£ç†</strong></p>
<p>æ‰€ä»¥,éœ€è¦æ‰‹åŠ¨ç»™ç»ˆç«¯é…ç½®ä¸€ä¸‹,è¯·çœ‹æˆ‘å¦ä¸€ç¯‡æ–‡ç« </p>
<p><a href="http://www.wangzhumo.com/Flutter/Flutter-%E5%AE%89%E8%A3%85/">Flutter å®‰è£…</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> Flutter </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Google </tag>
            
            <tag> Flutter </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android å•å…ƒæµ‹è¯•(ä¸€)]]></title>
      <url>/Android-Test/Android-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95-%E4%B8%80/</url>
      <content type="html"><![CDATA[<h4 id="åˆè¯†å•å…ƒæµ‹è¯•"><a href="#åˆè¯†å•å…ƒæµ‹è¯•" class="headerlink" title="åˆè¯†å•å…ƒæµ‹è¯•"></a>åˆè¯†å•å…ƒæµ‹è¯•</h4><p>å½“é¡¹ç›®è¶Šæ¥è¶Šå¤§çš„æ—¶å€™,æ‰“åŒ… &gt; æµ‹è¯• &gt; æ”¹ä»£ç  &gt; æ‰“åŒ… &gt; æµ‹è¯• â€¦.è¿™æ ·çš„æµç¨‹æ—¢è´¹æ—¶ä¹Ÿè´¹åŠ›.</p>
<p>æ‰€ä»¥,äº†è§£ä¸€ä¸‹å•å…ƒæµ‹è¯•,çœ‹çœ‹æ˜¯å¦èƒ½å¤Ÿè§£å†³è¿™ä¸ªé—®é¢˜.</p>
<p>(å¹³æ—¶å¤ªæ‡’äº†,å°±æ²¡æ­£ç»çš„äº†è§£è¿‡Androidè¿™è¾¹çš„å•å…ƒæµ‹è¯•,æ²¡æœ‰ä¸€ä¸ªç¡®åˆ‡çš„æ¦‚å¿µ)</p>
<p>é‚£ä¹ˆ,æˆ‘å­¦ä¹ å•å…ƒæµ‹è¯•çš„åŸå› ç«Ÿç„¶æ˜¯ <strong>å› ä¸ºæˆ‘æ‡’</strong></p>
<p>å½“æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™,Android Studioæ€»ä¼šå»è‡ªåŠ¨å¯¼å…¥ä¸€ä¸ªåŒ…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">testImplementation &apos;junit:junit:4.12&apos;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå°±æ˜¯ä¼ è¯´ä¸­çš„   Junit äº†,è¿™ç©æ„é’ˆå¯¹Javaçš„,æ‰€ä»¥ä¸æ¶‰åŠåˆ°Androidéƒ¨åˆ†çš„æµ‹è¯•å¯ä»¥ä½¿ç”¨</p>
<p>è·Ÿç€ä»‹ç»ä¹Ÿæ‰“äº†ä¸€ä¸ªä¾‹å­:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨commonlibä¸­å†™äº†ä¸€ä¸ªCalculator,é‡Œé¢ç®€å•çš„åŠ æ³•</span></span><br><span class="line"><span class="keyword">package</span> com.wangzhumo.app.commonlib.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">verity</span><span class="params">(String phone)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (phone == <span class="keyword">null</span> || phone.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"phone cannot be empty"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ¨ä¸»é¡¹ç›®ä¸­</span></span><br><span class="line"><span class="comment">//testç›®å½•ä¸‹</span></span><br><span class="line"><span class="keyword">package</span> com.wangzhumo.app.test;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CalculatorTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Calculator calculator;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initCalculator</span><span class="params">()</span></span>&#123;</span><br><span class="line">        calculator = <span class="keyword">new</span> Calculator();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCalculator</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = calculator.add(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line">        Assert.assertEquals(<span class="number">6</span>,sum);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŠ å…¥æç¤ºä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCalculatorWithMessage</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = calculator.add(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//assertEquals æ–¹æ³•å‰é¢åŠ ä¸€ä¸ª string å½“æŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™ä¼šè¾“å‡ºè¿™ä¸ªmessage</span></span><br><span class="line">        <span class="comment">//å¯ä»¥è®©æˆ‘ä»¬æ›´æ¸…æ¥šçš„æ˜ç™½æ˜¯ä»€ä¹ˆé—®é¢˜</span></span><br><span class="line">        Assert.assertEquals(<span class="string">"ä½ çš„æ•°å­¦å¤ªçƒ‚äº†"</span>,<span class="number">5</span>,sum);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœæŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸æ‰ç®—é€šè¿‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span>(expected = IllegalArgumentException.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testVerity</span><span class="params">()</span></span>&#123;</span><br><span class="line">        calculator.verity(<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åé€‰ä¸­æ–¹æ³•ç›´æ¥æ‰§è¡Œæ¯”å¦‚ : testCalculatorWithMessage()</p>
<p>é€‰ä¸­Run â€˜testCalculatorWithMessage()â€™ å°±å¯ä»¥çœ‹åˆ°è¾“å‡º (æ§åˆ¶å°ä¸­  Run é¢æ¿)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java.lang.AssertionError: ä½ çš„æ•°å­¦å¤ªçƒ‚äº† </span><br><span class="line">Expected :5</span><br><span class="line">Actual   :6</span><br><span class="line"> &lt;Click to see difference&gt;</span><br></pre></td></tr></table></figure>
<h4 id="Android-ä¸­çš„å•å…ƒæµ‹è¯•"><a href="#Android-ä¸­çš„å•å…ƒæµ‹è¯•" class="headerlink" title="Android ä¸­çš„å•å…ƒæµ‹è¯•"></a>Android ä¸­çš„å•å…ƒæµ‹è¯•</h4><p>ä¸Šé¢ç®€å•çš„ä½¿ç”¨ Junit å°±å¯ä»¥æµ‹è¯•Javaä¸­çš„æ–¹æ³•,ä½†æ˜¯ä¸æˆ‘çš„éœ€æ±‚å¹¶ä¸ç¬¦åˆ,æ‰€ä»¥ç»§ç»­çœ‹</p>
<p>ä½¿ç”¨<strong>robolectric</strong></p>
<blockquote>
<p><a href="https://github.com/robolectric/robolectric" target="_blank" rel="noopener">https://github.com/robolectric/robolectric</a></p>
<p><a href="http://robolectric.org/" target="_blank" rel="noopener">http://robolectric.org</a></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> Android Test </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Androidå•å…ƒæµ‹è¯• </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android Studio ä¸­ä½¿ç”¨tools:sample]]></title>
      <url>/Android-Studio/Android-Studio-%E4%B8%AD%E4%BD%BF%E7%94%A8tools-sample/</url>
      <content type="html"><![CDATA[<blockquote>
<p>Google å®˜æ–¹æ–‡æ¡£</p>
<p><a href="https://developer.android.com/studio/write/tool-attributes.html#toolssample_resources" target="_blank" rel="noopener">https://developer.android.com/studio/write/tool-attributes.html#toolssample_resources</a></p>
</blockquote>
<p>ä»–æ‰€èƒ½è¾¾åˆ°çš„æ•ˆæœå°±æ˜¯,æä¾›ç»™ä½ ä¸€äº›æ•°æ®,å¹¶ç›´æ¥åœ¨ Preview æˆ–è€… Designé¢æ¿ä¸­æŸ¥çœ‹æ ·å¼</p>
<h4 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h4><p>ä¸å¦‚æ”¾ä¸€ä¸ªå›¾æ¥çš„ç›´è§‚</p>
<p>itemä¸­ä½¿ç”¨ sampleèµ„æº</p>
<p><img src="/images/tools_item.png" alt="item"></p>
<p>å°†itemåŠ å…¥åˆ°listä¸­æŸ¥çœ‹æ•ˆæœ</p>
<p><img src="/images/tools_list.png" alt="list"></p>
<h4 id="å‡†å¤‡ä½¿ç”¨tools"><a href="#å‡†å¤‡ä½¿ç”¨tools" class="headerlink" title="å‡†å¤‡ä½¿ç”¨tools"></a>å‡†å¤‡ä½¿ç”¨tools</h4><h5 id="Android-Studio"><a href="#Android-Studio" class="headerlink" title="Android Studio"></a>Android Studio</h5><p>æ³¨æ„è¦ä½¿ç”¨Android Studio 3.0 + çš„ç‰ˆæœ¬</p>
<h5 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h5><p><code>xmlns:tools=&quot;http://schemas.android.com/tools&quot;</code></p>
<p>ç„¶åå°±å¯ä»¥ä½¿ç”¨toolsçš„ç›¸å…³å±æ€§äº†</p>
<p>åœ¨googleæ–‡æ¡£ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šå…¶ä»–å¯ç”¨çš„,å…·ä½“ä½¿ç”¨æ•ˆæœè¯·è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£.</p>
<p>å¦‚:</p>
<p><strong>context</strong>   <strong>showIn</strong>  <strong>layout</strong>   <strong>listitem</strong>   <strong>layoutManager</strong>     <strong>itemCount</strong></p>
<p>ä½¿ç”¨æ–¹å¼ä¸º:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">layout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:context</span>=<span class="string">"com.wangzhumo.app.tips.page.NearbyFragment"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.jcodecraeer.xrecyclerview.XRecyclerView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/recycleview"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">tools:layoutManager</span>=<span class="string">"GridLayoutManager"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">tools:itemCount</span>=<span class="string">"5"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">tools:spanCount</span>=<span class="string">"2"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">tools:listitem</span>=<span class="string">"@layout/nearby_list_item"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">com.jcodecraeer.xrecyclerview.XRecyclerView</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="å¯ç”¨èµ„æº"><a href="#å¯ç”¨èµ„æº" class="headerlink" title="å¯ç”¨èµ„æº"></a>å¯ç”¨èµ„æº</h4><h5 id="googleå·²æä¾›çš„èµ„æº"><a href="#googleå·²æä¾›çš„èµ„æº" class="headerlink" title="googleå·²æä¾›çš„èµ„æº"></a>googleå·²æä¾›çš„èµ„æº</h5><p><img src="/images/tools_google.png" alt="google"></p>
<p>è¿™äº›èµ„æºå¯ä»¥åœ¨xmlä¸­ç›´æ¥ä½¿ç”¨,ä¹Ÿå¯ä»¥åœ¨è‡ªå®šä¹‰çš„èµ„æºä¸­ä½¿ç”¨</p>
<p>ä½¿ç”¨æ–¹å¼ä¸º:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¿™é‡Œé¢çš„èµ„æºåœ¨</span></span><br><span class="line"><span class="comment">Android Studio/Applications/Android Studio.app/Contents/plugins/android/lib/sampleData/backgrounds/scenic--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:src</span>=<span class="string">"@tools:sample/backgrounds/scenic"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ImageView</span>&gt;</span>    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è¿™ä¸ªæ˜¯ä¸€æ®µå‡æ–‡ç«  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span>      </span></span><br><span class="line"><span class="tag">    <span class="attr">tools:text</span>=<span class="string">"@tools:sample/lorem/random"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">TextView</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="è‡ªå®šä¹‰çš„èµ„æº"><a href="#è‡ªå®šä¹‰çš„èµ„æº" class="headerlink" title="è‡ªå®šä¹‰çš„èµ„æº"></a>è‡ªå®šä¹‰çš„èµ„æº</h5><p><img src="/images/tools_new.png" alt="new"></p>
<p>åˆ›å»ºä¸€ä¸ª sampledata æ–‡ä»¶å¤¹</p>
<p><img src="/images/tools_files.png" alt="file"></p>
<ul>
<li><p><code>sampledata/images</code> æ–‡ä»¶ä¸­éƒ½æ˜¯äº›å›¾ç‰‡èµ„æº</p>
</li>
<li><p><code>description</code>æ–‡ä»¶ä¸­æ˜¯æè¿°æ€§æ–‡å­—, æ³¨æ„<strong>æ¯ä¸€è¡Œä¸ºä¸€é¡¹ä¸ªå…ƒç´ </strong></p>
</li>
<li><p><code>hotels</code> ä¹Ÿæ˜¯ä¸€äº›æ–‡å­—,ä¸è¿‡æ˜¯ä¸€äº›é…’åº—åå­—</p>
</li>
<li><p><code>hotel.json</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"data"</span>:[</span><br><span class="line">    &#123;  </span><br><span class="line">      "name":"@sample/hotels",    //è¿™é‡Œä½¿ç”¨çš„æ˜¯è‡ªå·±å®šä¹‰çš„  hotels æ–‡ä»¶ä¸­çš„å­—æ®µ</span><br><span class="line">      "img":"@tools:sample/backgrounds/scenic",</span><br><span class="line">      "desc":"@sample/description"   //è¿™é‡Œä½¿ç”¨çš„æ˜¯è‡ªå·±å®šä¹‰çš„  description æ–‡ä»¶ä¸­çš„å­—æ®µ</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>:<span class="string">"@sample/hotels"</span>,</span><br><span class="line">      "img":"@tools:sample/backgrounds/scenic",  //è¿™é‡Œçš„å°±æ˜¯è‡ªå¸¦çš„èµ„æºäº†</span><br><span class="line">      "desc":"@sample/description"</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>:<span class="string">"@sample/hotels"</span>,</span><br><span class="line">      "img":"@sample/images",  //è¿™ç§å°±æ˜¯/images æ–‡ä»¶ä¸­çš„èµ„æº</span><br><span class="line">      "desc":"@sample/description"</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>:<span class="string">"@sample/hotels"</span>,</span><br><span class="line">      <span class="attr">"img"</span>:<span class="string">"@tools:sample/backgrounds/scenic"</span>,</span><br><span class="line">      <span class="attr">"desc"</span>:<span class="string">"@sample/description"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>:<span class="string">"@sample/hotels"</span>,</span><br><span class="line">      <span class="attr">"img"</span>:<span class="string">"@tools:sample/backgrounds/scenic"</span>,</span><br><span class="line">      <span class="attr">"desc"</span>:<span class="string">"@sample/description"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>ä½¿ç”¨æ–¹å¼ä¸º:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">	<span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:text</span>=<span class="string">"@sample/hotels"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">	<span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:src</span>=<span class="string">"@sample/images"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Android Studio </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Android Studio </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Androidé¡¹ç›®ä¸­ä½¿ç”¨Timber + Loggeræ—¥å¿—è¾“å‡º]]></title>
      <url>/Android/Android%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8Timber-Logger%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/</url>
      <content type="html"><![CDATA[<p>ä¸å•°å—¦äº†,ç›´æ¥å¼€å§‹.</p>
<h4 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h4><blockquote>
<p>Logger   <a href="https://github.com/orhanobut/logger" target="_blank" rel="noopener">orhanobut/Logger</a></p>
<p>Timber  <a href="https://github.com/JakeWharton/timber" target="_blank" rel="noopener">JakeWharton/timber</a></p>
</blockquote>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//logger</span></span><br><span class="line">implementation <span class="string">'com.orhanobut:logger:2.1.1'</span></span><br><span class="line"><span class="comment">//timber</span></span><br><span class="line">implementation <span class="string">'com.jakewharton.timber:timber:4.6.0'</span></span><br></pre></td></tr></table></figure>
<h4 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h4><p>æˆ‘æ”¾åœ¨äº†æˆ‘çš„Application.javaä¸­åˆå§‹åŒ–çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * åˆå§‹åŒ–Timber</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initTimber</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     	<span class="comment">//é…ç½®Logger</span></span><br><span class="line">       FormatStrategy formatStrategy = PrettyFormatStrategy.newBuilder()</span><br><span class="line">               .showThreadInfo(<span class="keyword">true</span>)   </span><br><span class="line">               .methodCount(<span class="number">2</span>)</span><br><span class="line">               .methodOffset(<span class="number">7</span>)</span><br><span class="line">               .tag(<span class="string">"MY_LOG"</span>)</span><br><span class="line">               .build();</span><br><span class="line">     	<span class="comment">//é…ç½®Loggeråœ¨Debugæ—¶ä¸æ‰“å°</span></span><br><span class="line">       Logger.addLogAdapter(<span class="keyword">new</span> AndroidLogAdapter(formatStrategy)&#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isLoggable</span><span class="params">(<span class="keyword">int</span> priority, String tag)</span> </span>&#123;</span><br><span class="line">               <span class="keyword">return</span> BuildConfig.DEBUG;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">     	<span class="comment">//ç»™Timberä¸€ä¸ªæ ‘...å¤§ç¥è¿™ä¹ˆæ‰“æ¯”å–»çš„ ğŸ˜†</span></span><br><span class="line">       Timber.plant(<span class="keyword">new</span> Timber.DebugTree()&#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(<span class="keyword">int</span> priority, String tag, </span></span></span><br><span class="line"><span class="function"><span class="params">                              @NotNull String message, Throwable t)</span> </span>&#123;</span><br><span class="line">               Logger.log(priority,tag,message,t);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/orhanobut/logger/blob/master/art/logger_output.png" alt="logger"></p>
<p>å…¶ä¸­:</p>
<p><code>showThreadInfo(true)</code>  æ˜¯å¦æ˜¾ç¤ºThreadInfo</p>
<p><code>methodCount(2)</code>        æ—¥å¿—è¾“å‡ºæ—¶æ˜¾ç¤ºå‡ è¡Œ</p>
<p><code>methodOffset(7)</code>      æ–¹æ³•åç§»é‡,é»˜è®¤æ˜¯5,è¿™ä¸ªè‡ªå·±è°ƒå¤§,è°ƒå°çœ‹çœ‹å°±æ˜ç™½äº†</p>
<p><code>tag(&quot;MY_LOG&quot;)</code>          è‡ªå®šä¹‰çš„Tag,é»˜è®¤å€¼æ˜¯PRETTY_LOGGER</p>
<h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Timber.e(<span class="string">"ä¸‹è½½çŠ¶æ€å‘ç”Ÿæ”¹å˜ = %s"</span>, downLoadInfo.status )</span><br><span class="line">Timber.e(<span class="string">"ä¸‹è½½è¿›åº¦ = %d"</span>, mBindingView.progressBar.progress )</span><br></pre></td></tr></table></figure>
<p>loggerè´Ÿè´£ç”Ÿæˆmessageçš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">createMessage</span><span class="params">(String message, Object... args)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> args == <span class="keyword">null</span> || args.length == <span class="number">0</span> ? message : String.format(message, args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>String.format(message, args)</code>è¿™å°±èµ‹äºˆäº†æˆ‘ä»¬åœ¨å†™ä¿¡æ¯çš„æ—¶å€™ä½¿ç”¨å ä½ç¬¦.è®°å¾—è¦ç¬¦åˆformatçš„æ ¼å¼å“¦</p>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>å…¶å®æŒ‰æˆ‘ç°åœ¨çš„éœ€æ±‚,Loggerå®Œå…¨ç¬¦åˆæˆ‘,ä¸ºä»€ä¹ˆåŠ ä¸ŠTimberé‚£?</p>
<p>Timberå¯ä»¥åšåˆ°åˆ†å‘,åˆ°æ—¶å€™æˆ‘å¯ä»¥åŠ ä¸Š DiskFileTree  â€¦  ä»€ä¹ˆçš„,æ–¹ä¾¿åæœŸæœ‰å˜åŒ–çš„æ—¶å€™ä¿®æ”¹</p>
<p>ç„¶è€Œ,æˆ‘åœ¨Loggeré‡Œå‘ç°äº†ä¸€ä¸ªç±»</p>
<p><code>com.orhanobut.logger.DiskLogAdapter</code></p>
<p>åŸæ¥å®ƒå·²ç»æ”¯æŒå†™åˆ°æœ¬åœ°äº†.. å®å®å¿ƒé‡Œè‹¦</p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Jenkinsæ­å»ºAndroidè‡ªåŠ¨æ‰“åŒ…]]></title>
      <url>/Android/Jenkins%E6%90%AD%E5%BB%BAAndroid%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85/</url>
      <content type="html"><![CDATA[<h4 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h4><ul>
<li><p>Jenkinsçš„ä¸‹è½½ä¸å®‰è£…</p>
<p><strong>ä¸‹è½½</strong></p>
<blockquote>
<p> <a href="https://jenkins.io/download/" target="_blank" rel="noopener">https://jenkins.io/download/</a></p>
<p> ä¸‹è½½waråŒ…</p>
<p> <a href="http://mirrors.jenkins.io/war-stable/latest/jenkins.war" target="_blank" rel="noopener">Generic Java package (.war)</a></p>
</blockquote>
<p>å› ä¸ºæ‰“ç®—ä½¿ç”¨Tomcatæ¥éƒ¨ç½²,æ‰€ä»¥éœ€è¦ä¸‹è½½waråŒ…,ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹å¯¹åº”ç‰ˆæœ¬çš„å®‰è£…æ–‡ä»¶,ç›´æ¥å®‰è£…</p>
</li>
</ul>
<p>â€‹    <strong>å®‰è£…</strong></p>
<p>â€‹    waråŒ…æ”¾åˆ°<code>./apache-tomcat-7.0.77/webapps</code>    </p>
<p>â€‹    Tomcatçš„wabappsåŒ…ä¸‹å³å¯</p>
<ul>
<li><p>Tomcat (ç•¥)</p>
<p>è®°å¾—é…ç½®ä¸€ä¸‹ç¯å¢ƒå˜é‡,ç­‰ä¼šæ–¹ä¾¿å¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export TOMCAT_HOME=/Users/phyooos/develop/apache-tomcat-7.0.77</span><br><span class="line"></span><br><span class="line">export PATH.....:$TOMCAT/bin</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
</li>
</ul>
<h4 id="åˆå§‹åŒ–Jenkins"><a href="#åˆå§‹åŒ–Jenkins" class="headerlink" title="åˆå§‹åŒ–Jenkins"></a>åˆå§‹åŒ–Jenkins</h4><ul>
<li><p>å¯åŠ¨Jenkins,å³å¯åŠ¨tomcat</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> startup.sh</span><br><span class="line">Using CATALINA_BASE:   /Users/phyooos/develop/apache-tomcat-7.0.77</span><br><span class="line">Using CATALINA_HOME:   /Users/phyooos/develop/apache-tomcat-7.0.77</span><br><span class="line">Using CATALINA_TMPDIR: /Users/phyooos/develop/apache-tomcat-7.0.77/temp</span><br><span class="line">Using JRE_HOME:        /Library/Java/JavaVirtualMachines/jdk1.8.0/Contents/Home</span><br><span class="line">Using CLASSPATH:       /Users/phyooos/develop/apache-tomcat-7.0.77/bin/bootstrap.jar:/Users/phyooos/develop/apache-tomcat-7.0.77/bin/tomcat-juli.jar</span><br><span class="line">Tomcat started.</span><br></pre></td></tr></table></figure>
<p>çœ‹åˆ°è¿™ä¸ªå°±è¯´æ˜,å·²ç»æ­£å¸¸å¯åŠ¨</p>
</li>
<li><p>è®¿é—®<a href="http://localhost:8080/jenkins/" target="_blank" rel="noopener">http://localhost:8080/jenkins/</a></p>
<p>æ‰“å¼€åéœ€è¦è¾“å…¥ä¸€ä¸ªå¯†é’¥,macçš„åœ¨<code>jenkins/secrets/initialAdminPassword</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~ âŒš 10:11:03</span><br><span class="line"><span class="meta">$</span> cat ~/.jenkins/secrets/initialAdminPassword</span><br><span class="line">55ad44431f6d4ebdb53a7c1971d12df4</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥æ­¤å¯†é’¥å³å¯.</p>
</li>
<li><p>åˆ›å»ºç”¨æˆ·</p>
</li>
</ul>
<h4 id="é…ç½®Jenkins"><a href="#é…ç½®Jenkins" class="headerlink" title="é…ç½®Jenkins"></a>é…ç½®Jenkins</h4><h5 id="1-å®‰è£…æ’ä»¶"><a href="#1-å®‰è£…æ’ä»¶" class="headerlink" title="1.å®‰è£…æ’ä»¶"></a>1.å®‰è£…æ’ä»¶</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line">Build Timeout</span><br><span class="line"></span><br><span class="line">build-name-setter</span><br><span class="line"></span><br><span class="line">Credentials Binding Plugin</span><br><span class="line"></span><br><span class="line">description setter plugin</span><br><span class="line"></span><br><span class="line">Dynamic Parameter Plug-in(è¿™ä¸ªæ’ä»¶,æœä¸åˆ°äº†,å› ä¸ºå®‰å…¨é—®é¢˜è¢«å±è”½äº†)</span><br><span class="line"></span><br><span class="line">Environment Injector Plugin</span><br><span class="line"></span><br><span class="line">Git plugin</span><br><span class="line"></span><br><span class="line">GitHub Branch Source Plugin</span><br><span class="line">	</span><br><span class="line">Gitlab Authentication plugin</span><br><span class="line"></span><br><span class="line">GitLab Plugin</span><br><span class="line"></span><br><span class="line">Gradle Plugin</span><br><span class="line"></span><br><span class="line">Pipeline</span><br><span class="line"></span><br><span class="line">SSH Slaves plugin</span><br><span class="line">	</span><br><span class="line">SSH plugin</span><br><span class="line">	</span><br><span class="line">Timestamper</span><br><span class="line">	</span><br><span class="line">Upload to pgyer(ä¸Šä¼ åˆ°è’²å…¬è‹±,æ²¡æœ‰éœ€è¦çš„ä¸ç”¨å®‰è£…)</span><br><span class="line">	</span><br><span class="line">Workspace Cleanup Plugin</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ’ä»¶,æ˜¯å¸¸ç”¨çš„æ’ä»¶,å°½é‡å…¨éƒ¨å®‰è£…</p>
<h5 id="2-é…ç½®ç¯å¢ƒå˜é‡"><a href="#2-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="2.é…ç½®ç¯å¢ƒå˜é‡"></a>2.é…ç½®ç¯å¢ƒå˜é‡</h5><p><strong>ç³»ç»Ÿç®¡ç† - å…¨å±€å·¥å…·é…ç½®</strong></p>
<p>éœ€è¦é…ç½®</p>
<p>Java</p>
<p><img src="/images/jenkins_java.png" alt="Java"></p>
<p>Git</p>
<p><img src="/images/jenkins_git.png" alt="Git"></p>
<p>Gradle</p>
<p><img src="/images/jenkins_gradle.png" alt="Gradle"></p>
<p>é…ç½®å¥½ä¿å­˜å³å¯</p>
<p><strong>ç³»ç»Ÿç®¡ç† - ç³»ç»Ÿè®¾ç½®</strong></p>
<p>è®°å¾—é…ç½®gitlabæˆ–è€… githubè´¦å·</p>
<h5 id="3-åˆå§‹åŒ–é¡¹ç›®"><a href="#3-åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="3.åˆå§‹åŒ–é¡¹ç›®"></a>3.åˆå§‹åŒ–é¡¹ç›®</h5><p>åˆ›å»ºé¡¹ç›®</p>
<p><img src="/images/jenkins_init.png" alt="init"></p>
<hr>
<p><strong>General</strong></p>
<p>é€‰æ‹©å‚æ•°åŒ–æ„å»ºè¿‡ç¨‹</p>
<p>IS_JENKINS  æ˜¯å¦Jenkinsæ‰“åŒ…,è¿™é‡Œè‚¯å®šæ˜¯ä¸€ç›´trueçš„</p>
<p>PRODUCT_FLAVORS  ç¯å¢ƒ</p>
<p>BUILD_TYPE  æ„å»ºç‰ˆæœ¬</p>
<p>VERSION_NAME ç‰ˆæœ¬åå­—</p>
<p>JENKINS_OUTPUT Apkç”Ÿæˆç›®å½•</p>
<p>JENKINS_TIME  æ—¶é—´æˆ³</p>
<p><img src="/images/jenkins_init1.png" alt="General"></p>
<p><img src="/images/jenkins_init2.png" alt="General"></p>
<p><img src="/images/jenkins_init3.png" alt="General"></p>
<p>è¿™äº›å‚æ•°å®šä¹‰å®Œå°±å¯ä»¥ä½¿ç”¨äº† ${å‚æ•°å} çš„å½¢å¼,è¿™äº›å‚æ•°ä¼šå†™å…¥åˆ° Appé¡¹ç›®ä¸­çš„ gradle.propertiesæ–‡ä»¶</p>
<p>Appé¡¹ç›®ä¸­çš„ gradle.propertiesæ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># When configured, Gradle will run in incubating parallel mode.</span><br><span class="line"># This option should only be used with decoupled projects. More details, visit</span><br><span class="line"># http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects</span><br><span class="line"># org.gradle.parallel=true</span><br><span class="line">org.gradle.jvmargs=-Xmx4608M</span><br><span class="line"></span><br><span class="line">VERSION_NAME=<span class="number">1.4</span>.0</span><br><span class="line">VERSION_CODE=<span class="number">12</span></span><br><span class="line">IS_JENKINS=<span class="keyword">false</span></span><br><span class="line">JENKINS_OUTPUT=<span class="string">'output/'</span></span><br><span class="line">JENKINS_TIME=<span class="string">'201802021231'</span></span><br></pre></td></tr></table></figure>
<hr>
<p>è¿›å…¥ä¸‹ä¸€ä¸ªé…ç½®é¡µé¢,åˆ°<strong>æºç ç®¡ç†</strong>é‚£å—</p>
<p><img src="/images/jenkins_gitlab.png" alt="gitlab"></p>
<p>åªè¦ä½ èƒ½ä¸‹è½½åˆ°æºç å³å¯,æ— æ‰€è°“éè¦å’Œæˆ‘è¿™ä¸ªä¸€è‡´,branch  å°±æ˜¯æŒ‡å®šåˆ†æ”¯äº†,æˆ‘è¿™å„¿æ˜¯  dev åˆ†æ”¯</p>
<hr>
<p>ä¸‹ä¸€ä¸ªé…ç½®<strong>æ„å»º</strong></p>
<p><img src="/images/jenkins_build.png" alt="build"></p>
<p>é€‰æ‹© Invoke Gradle </p>
<p>Tasks é‡Œé¢çš„å‘½ä»¤,æˆ‘æ¥è§£é‡Šä¸€ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#æ¸…ç†</span><br><span class="line">clean  </span><br><span class="line">#æ‰“åŒ…</span><br><span class="line">assemble$&#123;PRODUCT_FLAVORS&#125;$&#123;BUILD_TYPE&#125;</span><br><span class="line">#è¿™é‡Œçš„æ„æ€æ˜¯ æ‰“åŒ…æŒ‡å®šçš„ä¸€ä¸ªFLAVORç‰ˆæœ¬(Release + ç‰ˆæœ¬)</span><br><span class="line">#å…³äºassemble ...  çš„,è¯·æœ gradle æ‰“åŒ…å‘½ä»¤</span><br><span class="line"></span><br><span class="line">#å…¶ä»–å‚æ•°</span><br><span class="line">-PVERSION_NAME=$&#123;VERSION_NAME&#125;</span><br><span class="line">-PVERSION_CODE=$&#123;VERSION_CODE&#125;</span><br><span class="line">-PJENKINS_OUTPUT=$&#123;JENKINS_OUTPUT&#125;</span><br><span class="line">-PJENKINS_TIME=$&#123;JENKINS_TIME&#125;</span><br><span class="line">-PIS_JENKINS=$&#123;IS_JENKINS&#125;</span><br><span class="line"></span><br><span class="line">#-Pæ„å‘³ç€å‚æ•°</span><br><span class="line">#-Påé¢æ˜¯å‚æ•°å</span><br><span class="line">#=$&#123;&#125; åˆ™ä¸ºå‚æ•°å€¼,å°±æ˜¯ä¸Šé¢Generalé‡Œé¢é…ç½®çš„</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>æ„å»ºåæ“ä½œ</strong></p>
<p><img src="/images/jenkins_pgy.png" alt="pgy"></p>
<blockquote>
<p>å‚è€ƒ <a href="https://www.pgyer.com/doc/view/jenkins_plugin" target="_blank" rel="noopener">https://www.pgyer.com/doc/view/jenkins_plugin</a></p>
</blockquote>
<p>ä¿å­˜å³å¯</p>
<h5 id="æ”¹é€ App"><a href="#æ”¹é€ App" class="headerlink" title="æ”¹é€ App"></a>æ”¹é€ App</h5><ul>
<li>./gradle.propertiesæ–‡ä»¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">VERSION_NAME=1.4.0</span><br><span class="line">VERSION_CODE=12</span><br><span class="line">IS_JENKINS=false</span><br><span class="line">JENKINS_OUTPUT=&apos;output/&apos;</span><br><span class="line">JENKINS_TIME=&apos;201802021231&apos;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ–‡ä»¶,å†™å®Œè¯·buildä¸€æ¬¡,ä¾¿äºbuild.gradleä¸­ä½¿ç”¨</p>
<p>ä½¿ç”¨jenkinsæ—¶,jenkinsä¼šæŠŠå®šä¹‰çš„å€¼æ³¨å…¥åˆ°è¿™é‡Œ,è¦†ç›–è¿™é‡Œå®šä¹‰çš„å€¼</p>
<ul>
<li>app/build.gradle</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">android&#123;</span><br><span class="line"></span><br><span class="line">	defaultConfig &#123;</span><br><span class="line">    	...</span><br><span class="line">    	<span class="comment">//æ­¤å¤„ä½¿ç”¨gradle.propertiesä¸­çš„å€¼   VERSION_CODEå’ŒVERSION_NAME</span></span><br><span class="line">    	versionCode VERSION_CODE <span class="keyword">as</span> Integer</span><br><span class="line">    	versionName VERSION_NAME</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//è‡ªå®šä¹‰apkåå­—</span></span><br><span class="line">    android.applicationVariants.all &#123; variant -&gt;</span><br><span class="line">    	<span class="comment">//è·å–æ—¶é—´æˆ³</span></span><br><span class="line">        <span class="keyword">def</span> timeNow = getDate()</span><br><span class="line">        <span class="comment">//å¦‚æœæ˜¯IS_JENKINSæ„å»º,åˆ™ä¿®æ”¹æ‰“åŒ…apkçš„ç›®å½•</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">'true'</span>.equals(IS_JENKINS)) &#123;</span><br><span class="line">        	<span class="comment">//ä½¿ç”¨JENKINS_OUTPUTçš„ç›®å½•</span></span><br><span class="line">            <span class="keyword">def</span> outputFile = JENKINS_OUTPUT</span><br><span class="line">            <span class="comment">//ä½¿ç”¨JENKINS_TIMEçš„æ—¶é—´æˆ³</span></span><br><span class="line">            timeNow = JENKINS_TIME</span><br><span class="line">            <span class="comment">//å®šä¹‰apkç›®å½•</span></span><br><span class="line">            variant.getPackageApplication().outputDirectory = <span class="keyword">new</span> File(outputFile)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        variant.getPackageApplication().outputScope.apkDatas.forEach &#123; apkData -&gt;</span><br><span class="line">            <span class="comment">//è¿™ä¸ªä¿®æ”¹è¾“å‡ºAPKçš„æ–‡ä»¶å</span></span><br><span class="line">            apkData.outputFileName = <span class="string">"ä¸€å·è½¦å¸‚_$&#123;variant.versionName&#125;_$&#123;timeNow&#125;.apk"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	flavorDimensions <span class="string">'env'</span></span><br><span class="line"></span><br><span class="line">    productFlavors &#123;</span><br><span class="line">        envapp &#123;</span><br><span class="line">            dimension <span class="string">'env'</span></span><br><span class="line">            <span class="comment">//æ­¤å¤„ä½¿ç”¨jenkinsä¼ çš„VERSION_NAME</span></span><br><span class="line">            versionName VERSION_NAME</span><br><span class="line">            manifestPlaceholders = [<span class="string">UMENG_CHANNEL_VALUE:</span> <span class="string">"app"</span>]</span><br><span class="line">            buildConfigField <span class="string">"String"</span>, <span class="string">"SERVER_HOST"</span>, <span class="string">'"https://app.wangzhumo.com/"'</span></span><br><span class="line">        &#125;</span><br><span class="line">        envtest &#123;</span><br><span class="line">            dimension <span class="string">'env'</span></span><br><span class="line">            <span class="comment">//ä¸ºäº†æ–¹ä¾¿æµ‹è¯•çœ‹å‡ºå½“å‰appç¯å¢ƒ,å°±ä¸ç”¨VERSION_NAMEäº†</span></span><br><span class="line">            versionName <span class="string">"Test"</span></span><br><span class="line">            manifestPlaceholders = [<span class="string">UMENG_CHANNEL_VALUE:</span> <span class="string">"app"</span>]</span><br><span class="line">            buildConfigField <span class="string">"String"</span>, <span class="string">"SERVER_HOST"</span>, <span class="string">'"http://app-test.wangzhumo.com/"'</span></span><br><span class="line">        &#125;</span><br><span class="line">        envpre &#123;</span><br><span class="line">            dimension <span class="string">'env'</span></span><br><span class="line">            versionName <span class="string">"Pre"</span></span><br><span class="line">            manifestPlaceholders = [<span class="string">UMENG_CHANNEL_VALUE:</span> <span class="string">"app"</span>]</span><br><span class="line">            buildConfigField <span class="string">"String"</span>, <span class="string">"SERVER_HOST"</span>, <span class="string">'"https://app-pre.wangzhumo.com/"'</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        envdev &#123;</span><br><span class="line">            dimension <span class="string">'env'</span></span><br><span class="line">            versionName <span class="string">"Dev"</span></span><br><span class="line">            manifestPlaceholders = [<span class="string">UMENG_CHANNEL_VALUE:</span> <span class="string">"app"</span>]</span><br><span class="line">            buildConfigField <span class="string">"String"</span>, <span class="string">"SERVER_HOST"</span>, <span class="string">'"http://192.168.1.16:8080/app2c/"'</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//å…¶å®UMENG_CHANNEL_VALUE    SERVER_HOST   ä¹Ÿéƒ½å¯ä»¥ä½¿ç”¨jenkinså®šä¹‰å‚æ•°,å¹¶ä½¿ç”¨</span></span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ä¸€ä¸ªè·å–æ—¶é—´æˆ³çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">def</span> getDate() &#123;</span><br><span class="line">    	<span class="keyword">def</span> date = <span class="keyword">new</span> Date()</span><br><span class="line">    	<span class="keyword">def</span> formattedDate = date.format(<span class="string">'yyyyMMddHHmm'</span>)</span><br><span class="line">    	<span class="keyword">return</span> formattedDate</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®°å¾—æ”¹å®Œapp,ä¸Šä¼ ä»£ç å“¦</p>
<h4 id="Jenkinsæ‰“åŒ…"><a href="#Jenkinsæ‰“åŒ…" class="headerlink" title="Jenkinsæ‰“åŒ…"></a>Jenkinsæ‰“åŒ…</h4><p><img src="/images/jenkins_go.png" alt="æ‰“åŒ…"></p>
<p>OKäº†,å¯ä»¥æ„‰å¿«çš„æ‰“åŒ…äº†,æ‰“åŒ…å®Œå°±ä¼šè‡ªåŠ¨ä¸Šä¼ åˆ°è’²å…¬è‹±.</p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Server </tag>
            
            <tag> Jenkins </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Javaä¸­String.format()çš„ä½¿ç”¨æŒ‡åŒ—]]></title>
      <url>/Java/Java%E4%B8%ADString-format-%E7%9A%84%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8C%97/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æœ¬æ–‡éåŸåˆ›,æ¥è‡ª<a href="http://blog.csdn.net/lonely_fireworks/article/details/7962171/" target="_blank" rel="noopener">http://blog.csdn.net/lonely_fireworks/article/details/7962171/</a></p>
<p>è¿™é‡Œåšä¸€ä¸ªå¤‡ä»½,æ–¹ä¾¿éšæ—¶æŸ¥è¯¢</p>
</blockquote>
<h4 id="å¸¸è§„ç±»å‹çš„æ ¼å¼åŒ–"><a href="#å¸¸è§„ç±»å‹çš„æ ¼å¼åŒ–" class="headerlink" title="å¸¸è§„ç±»å‹çš„æ ¼å¼åŒ–"></a>å¸¸è§„ç±»å‹çš„æ ¼å¼åŒ–</h4><p>Stringç±»çš„format()æ–¹æ³•ç”¨äºåˆ›å»ºæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ä»¥åŠè¿æ¥å¤šä¸ªå­—ç¬¦ä¸²å¯¹è±¡,format()æ–¹æ³•æœ‰ä¸¤ç§é‡è½½å½¢å¼ã€‚</p>
<ul>
<li><p>format(String format, Objectâ€¦ args) </p>
<p>æ–°å­—ç¬¦ä¸²ä½¿ç”¨æœ¬åœ°è¯­è¨€ç¯å¢ƒï¼Œåˆ¶å®šå­—ç¬¦ä¸²æ ¼å¼å’Œå‚æ•°ç”Ÿæˆæ ¼å¼åŒ–çš„æ–°å­—ç¬¦ä¸²ã€‚</p>
</li>
<li><p>format(Locale locale, String format, Objectâ€¦ args) </p>
<p>ä½¿ç”¨æŒ‡å®šçš„è¯­è¨€ç¯å¢ƒï¼Œåˆ¶å®šå­—ç¬¦ä¸²æ ¼å¼å’Œå‚æ•°ç”Ÿæˆæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ã€‚</p>
</li>
</ul>
<h5 id="æ˜¾ç¤ºä¸åŒè½¬æ¢ç¬¦å®ç°ä¸åŒæ•°æ®ç±»å‹åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚"><a href="#æ˜¾ç¤ºä¸åŒè½¬æ¢ç¬¦å®ç°ä¸åŒæ•°æ®ç±»å‹åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚" class="headerlink" title="æ˜¾ç¤ºä¸åŒè½¬æ¢ç¬¦å®ç°ä¸åŒæ•°æ®ç±»å‹åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚"></a>æ˜¾ç¤ºä¸åŒè½¬æ¢ç¬¦å®ç°ä¸åŒæ•°æ®ç±»å‹åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</h5><table>
<thead>
<tr>
<th>è½¬  æ¢  ç¬¦</th>
<th>è¯´    æ˜</th>
<th>ç¤º    ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>%s</td>
<td>å­—ç¬¦ä¸²ç±»å‹</td>
<td>â€œmingrisoftâ€</td>
</tr>
<tr>
<td>%c</td>
<td>å­—ç¬¦ç±»å‹</td>
<td>â€˜mâ€™</td>
</tr>
<tr>
<td>%b</td>
<td>å¸ƒå°”ç±»å‹</td>
<td>true</td>
</tr>
<tr>
<td>%d</td>
<td>æ•´æ•°ç±»å‹ï¼ˆåè¿›åˆ¶ï¼‰</td>
<td>99</td>
</tr>
<tr>
<td>%x</td>
<td>æ•´æ•°ç±»å‹ï¼ˆåå…­è¿›åˆ¶ï¼‰</td>
<td>FF</td>
</tr>
<tr>
<td>%o</td>
<td>æ•´æ•°ç±»å‹ï¼ˆå…«è¿›åˆ¶ï¼‰</td>
<td>77</td>
</tr>
<tr>
<td>%f</td>
<td>æµ®ç‚¹ç±»å‹</td>
<td>99.99</td>
</tr>
<tr>
<td>%a</td>
<td>åå…­è¿›åˆ¶æµ®ç‚¹ç±»å‹</td>
<td>FF.35AE</td>
</tr>
<tr>
<td>%e</td>
<td>æŒ‡æ•°ç±»å‹</td>
<td>9.38e+5</td>
</tr>
<tr>
<td>%g</td>
<td>é€šç”¨æµ®ç‚¹ç±»å‹ï¼ˆfå’Œeç±»å‹ä¸­è¾ƒçŸ­çš„ï¼‰</td>
<td></td>
</tr>
<tr>
<td>%h</td>
<td>æ•£åˆ—ç </td>
<td></td>
</tr>
<tr>
<td>%%</td>
<td>ç™¾åˆ†æ¯”ç±»å‹</td>
<td>ï¼…</td>
</tr>
<tr>
<td>%n</td>
<td>æ¢è¡Œç¬¦</td>
<td></td>
</tr>
<tr>
<td>%tx</td>
<td>æ—¥æœŸä¸æ—¶é—´ç±»å‹ï¼ˆxä»£è¡¨ä¸åŒçš„æ—¥æœŸä¸æ—¶é—´è½¬æ¢ç¬¦</td>
</tr>
</tbody>
</table>
<p>æµ‹è¯•ç”¨ä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String str=<span class="keyword">null</span>;</span><br><span class="line">    str=String.format(<span class="string">"Hi,%s"</span>, <span class="string">"ç‹åŠ›"</span>);</span><br><span class="line">    System.out.println(str);</span><br><span class="line">    str=String.format(<span class="string">"Hi,%s:%s.%s"</span>, <span class="string">"ç‹å—"</span>,<span class="string">"ç‹åŠ›"</span>,<span class="string">"ç‹å¼ "</span>);          </span><br><span class="line">    System.out.println(str);                         </span><br><span class="line">    System.out.printf(<span class="string">"å­—æ¯açš„å¤§å†™æ˜¯ï¼š%c %n"</span>, <span class="string">'A'</span>);</span><br><span class="line">    System.out.printf(<span class="string">"3&gt;7çš„ç»“æœæ˜¯ï¼š%b %n"</span>, <span class="number">3</span>&gt;<span class="number">7</span>);</span><br><span class="line">    System.out.printf(<span class="string">"100çš„ä¸€åŠæ˜¯ï¼š%d %n"</span>, <span class="number">100</span>/<span class="number">2</span>);</span><br><span class="line">    System.out.printf(<span class="string">"100çš„16è¿›åˆ¶æ•°æ˜¯ï¼š%x %n"</span>, <span class="number">100</span>);</span><br><span class="line">    System.out.printf(<span class="string">"100çš„8è¿›åˆ¶æ•°æ˜¯ï¼š%o %n"</span>, <span class="number">100</span>);</span><br><span class="line">    System.out.printf(<span class="string">"50å…ƒçš„ä¹¦æ‰“8.5æŠ˜æ‰£æ˜¯ï¼š%f å…ƒ%n"</span>, <span class="number">50</span>*<span class="number">0.85</span>);</span><br><span class="line">    System.out.printf(<span class="string">"ä¸Šé¢ä»·æ ¼çš„16è¿›åˆ¶æ•°æ˜¯ï¼š%a %n"</span>, <span class="number">50</span>*<span class="number">0.85</span>);</span><br><span class="line">    System.out.printf(<span class="string">"ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°è¡¨ç¤ºï¼š%e %n"</span>, <span class="number">50</span>*<span class="number">0.85</span>);</span><br><span class="line">    System.out.printf(<span class="string">"ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°å’Œæµ®ç‚¹æ•°ç»“æœçš„é•¿åº¦è¾ƒçŸ­çš„æ˜¯ï¼š%g %n"</span>, <span class="number">50</span>*<span class="number">0.85</span>);</span><br><span class="line">    System.out.printf(<span class="string">"ä¸Šé¢çš„æŠ˜æ‰£æ˜¯%d%% %n"</span>, <span class="number">85</span>);</span><br><span class="line">    System.out.printf(<span class="string">"å­—æ¯Açš„æ•£åˆ—ç æ˜¯ï¼š%h %n"</span>, <span class="string">'A'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Hi,ç‹åŠ›</span><br><span class="line">Hi,ç‹å—:ç‹åŠ›.ç‹å¼ </span><br><span class="line">å­—æ¯açš„å¤§å†™æ˜¯ï¼šA </span><br><span class="line"><span class="number">3</span>&gt;<span class="number">7</span>çš„ç»“æœæ˜¯ï¼š<span class="keyword">false</span> </span><br><span class="line"><span class="number">100</span>çš„ä¸€åŠæ˜¯ï¼š<span class="number">50</span> </span><br><span class="line"><span class="number">100</span>çš„<span class="number">16</span>è¿›åˆ¶æ•°æ˜¯ï¼š<span class="number">64</span> </span><br><span class="line"><span class="number">100</span>çš„<span class="number">8</span>è¿›åˆ¶æ•°æ˜¯ï¼š<span class="number">144</span> </span><br><span class="line"><span class="number">50</span>å…ƒçš„ä¹¦æ‰“<span class="number">8.5</span>æŠ˜æ‰£æ˜¯ï¼š<span class="number">42.500000</span> å…ƒ</span><br><span class="line">ä¸Šé¢ä»·æ ¼çš„<span class="number">16</span>è¿›åˆ¶æ•°æ˜¯ï¼š<span class="number">0x1</span>.54p5 </span><br><span class="line">ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°è¡¨ç¤ºï¼š<span class="number">4.250000e+01</span> </span><br><span class="line">ä¸Šé¢ä»·æ ¼çš„æŒ‡æ•°å’Œæµ®ç‚¹æ•°ç»“æœçš„é•¿åº¦è¾ƒçŸ­çš„æ˜¯ï¼š<span class="number">42.5000</span> </span><br><span class="line">ä¸Šé¢çš„æŠ˜æ‰£æ˜¯<span class="number">85</span>% </span><br><span class="line">å­—æ¯Açš„æ•£åˆ—ç æ˜¯ï¼š<span class="number">41</span></span><br></pre></td></tr></table></figure>
<h5 id="æ­é…è½¬æ¢ç¬¦çš„æ ‡å¿—"><a href="#æ­é…è½¬æ¢ç¬¦çš„æ ‡å¿—" class="headerlink" title="æ­é…è½¬æ¢ç¬¦çš„æ ‡å¿—"></a>æ­é…è½¬æ¢ç¬¦çš„æ ‡å¿—</h5><table>
<thead>
<tr>
<th>æ ‡    å¿—</th>
<th>è¯´    æ˜</th>
<th>ç¤º    ä¾‹</th>
<th>ç»“    æœ</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>ä¸ºæ­£æ•°æˆ–è€…è´Ÿæ•°æ·»åŠ ç¬¦å·</td>
<td>(â€œ%+dâ€,15)</td>
<td>+15</td>
</tr>
<tr>
<td>âˆ’</td>
<td>å·¦å¯¹é½</td>
<td>(â€œ%-5dâ€,15)</td>
<td>\</td>
<td>15   \</td>
<td></td>
</tr>
<tr>
<td>0</td>
<td>æ•°å­—å‰é¢è¡¥0</td>
<td>(â€œ%04dâ€, 99)</td>
<td>0099</td>
</tr>
<tr>
<td>ç©ºæ ¼</td>
<td>åœ¨æ•´æ•°ä¹‹å‰æ·»åŠ æŒ‡å®šæ•°é‡çš„ç©ºæ ¼</td>
<td>(â€œ% 4dâ€, 99)</td>
<td>\</td>
<td>99\</td>
<td></td>
</tr>
<tr>
<td>,</td>
<td>ä»¥â€œ,â€å¯¹æ•°å­—åˆ†ç»„</td>
<td>(â€œ%,fâ€, 9999.99)</td>
<td>9,999.990000</td>
</tr>
<tr>
<td>(</td>
<td>ä½¿ç”¨æ‹¬å·åŒ…å«è´Ÿæ•°</td>
<td>(â€œ%(fâ€, -99.99)</td>
<td>(99.990000)</td>
</tr>
<tr>
<td>#</td>
<td>å¦‚æœæ˜¯æµ®ç‚¹æ•°åˆ™åŒ…å«å°æ•°ç‚¹ï¼Œå¦‚æœæ˜¯16è¿›åˆ¶æˆ–8è¿›åˆ¶åˆ™æ·»åŠ 0xæˆ–0</td>
<td>(â€œ%#xâ€, 99)(â€œ%#oâ€, 99)</td>
<td>0x630143</td>
</tr>
<tr>
<td>&lt;</td>
<td>æ ¼å¼åŒ–å‰ä¸€ä¸ªè½¬æ¢ç¬¦æ‰€æè¿°çš„å‚æ•°</td>
<td>(â€œ%få’Œ%&lt;3.2fâ€, 99.45)</td>
<td>99.450000å’Œ99.45</td>
</tr>
<tr>
<td>$</td>
<td>è¢«æ ¼å¼åŒ–çš„å‚æ•°ç´¢å¼•</td>
<td>(â€œ%1$d,%2$sâ€, 99,â€abcâ€)</td>
<td>99,abc</td>
</tr>
</tbody>
</table>
<p>æµ‹è¯•ç”¨ä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  </span><br><span class="line"></span><br><span class="line">    String str=<span class="keyword">null</span>;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//$ä½¿ç”¨  </span></span><br><span class="line">    str=String.format(<span class="string">"æ ¼å¼å‚æ•°çš„ä½¿ç”¨ï¼š%1d,%2$s"</span>, <span class="number">99</span>,<span class="string">"abc"</span>);             </span><br><span class="line">    System.out.println(str);                       </span><br><span class="line">   	</span><br><span class="line">   	<span class="comment">//+ä½¿ç”¨  </span></span><br><span class="line">    System.out.printf(<span class="string">"æ˜¾ç¤ºæ­£è´Ÿæ•°çš„ç¬¦å·ï¼š%+dä¸%d%n"</span>, <span class="number">99</span>,-<span class="number">99</span>);  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¡¥Oä½¿ç”¨  </span></span><br><span class="line">    System.out.printf(<span class="string">"æœ€ç‰›çš„ç¼–å·æ˜¯ï¼š%03d%n"</span>, <span class="number">7</span>);  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç©ºæ ¼ä½¿ç”¨  </span></span><br><span class="line">    System.out.printf(<span class="string">"Tabé”®çš„æ•ˆæœæ˜¯ï¼š% 8d%n"</span>, <span class="number">7</span>);  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//.ä½¿ç”¨  </span></span><br><span class="line">    System.out.printf(<span class="string">"æ•´æ•°åˆ†ç»„çš„æ•ˆæœæ˜¯ï¼š%,d%n"</span>, <span class="number">9989997</span>);  </span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç©ºæ ¼å’Œå°æ•°ç‚¹åé¢ä¸ªæ•°  </span></span><br><span class="line">    System.out.printf(<span class="string">"ä¸€æœ¬ä¹¦çš„ä»·æ ¼æ˜¯ï¼š% 50.5få…ƒ%n"</span>, <span class="number">49.8</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ ¼å¼å‚æ•°$çš„ä½¿ç”¨ï¼š<span class="number">99</span>,abc</span><br><span class="line">æ˜¾ç¤ºæ­£è´Ÿæ•°çš„ç¬¦å·ï¼š+<span class="number">99</span>ä¸-<span class="number">99</span></span><br><span class="line">æœ€ç‰›çš„ç¼–å·æ˜¯ï¼š<span class="number">007</span></span><br><span class="line">Tabé”®çš„æ•ˆæœæ˜¯ï¼š       <span class="number">7</span></span><br><span class="line">æ•´æ•°åˆ†ç»„çš„æ•ˆæœæ˜¯ï¼š<span class="number">9</span>,<span class="number">989</span>,<span class="number">997</span></span><br><span class="line">ä¸€æœ¬ä¹¦çš„ä»·æ ¼æ˜¯ï¼š <span class="number">49.80000</span>å…ƒ</span><br></pre></td></tr></table></figure>
<h4 id="æ—¥æœŸå’Œäº‹ä»¶å­—ç¬¦ä¸²æ ¼å¼åŒ–"><a href="#æ—¥æœŸå’Œäº‹ä»¶å­—ç¬¦ä¸²æ ¼å¼åŒ–" class="headerlink" title="æ—¥æœŸå’Œäº‹ä»¶å­—ç¬¦ä¸²æ ¼å¼åŒ–"></a>æ—¥æœŸå’Œäº‹ä»¶å­—ç¬¦ä¸²æ ¼å¼åŒ–</h4><p>å­—ç¬¦ä¸²æ ¼å¼ä¸­è¿˜æœ‰%txè½¬æ¢ç¬¦æ²¡æœ‰è¯¦ç»†ä»‹ç»ï¼Œå®ƒæ˜¯ä¸“é—¨ç”¨æ¥æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶ é—´çš„ã€‚%txè½¬æ¢ç¬¦ä¸­çš„xä»£è¡¨å¦å¤–çš„å¤„ç†æ—¥æœŸå’Œæ—¶é—´æ ¼å¼çš„è½¬æ¢ç¬¦ï¼Œå®ƒä»¬çš„ç»„åˆèƒ½å¤Ÿå°†æ—¥æœŸå’Œæ—¶é—´æ ¼å¼åŒ–æˆå¤šç§æ ¼å¼ã€‚</p>
<h5 id="å¸¸è§æ—¥æœŸå’Œæ—¶é—´ç»„åˆçš„æ ¼å¼"><a href="#å¸¸è§æ—¥æœŸå’Œæ—¶é—´ç»„åˆçš„æ ¼å¼" class="headerlink" title="å¸¸è§æ—¥æœŸå’Œæ—¶é—´ç»„åˆçš„æ ¼å¼"></a>å¸¸è§æ—¥æœŸå’Œæ—¶é—´ç»„åˆçš„æ ¼å¼</h5><table>
<thead>
<tr>
<th>è½¬  æ¢  ç¬¦</th>
<th>è¯´    æ˜</th>
<th>ç¤º    ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>c</td>
<td>åŒ…æ‹¬å…¨éƒ¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯</td>
<td>æ˜ŸæœŸå…­ åæœˆ 27 14:21:20 CST 2007</td>
</tr>
<tr>
<td>F</td>
<td>â€œå¹´-æœˆ-æ—¥â€æ ¼å¼</td>
<td>2007-10-27</td>
</tr>
<tr>
<td>D</td>
<td>â€œæœˆ/æ—¥/å¹´â€æ ¼å¼</td>
<td>10/27/07</td>
</tr>
<tr>
<td>r</td>
<td>â€œHH:MM:SS PMâ€æ ¼å¼ï¼ˆ12æ—¶åˆ¶ï¼‰</td>
<td>02:25:51 ä¸‹åˆ</td>
</tr>
<tr>
<td>T</td>
<td>â€œHH:MM:SSâ€æ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰</td>
<td>14:28:16</td>
</tr>
<tr>
<td>R</td>
<td>â€œHH:MMâ€æ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰</td>
<td>14:28</td>
</tr>
</tbody>
</table>
<p>æµ‹è¯•ç”¨ä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	Date date=<span class="keyword">new</span> Date();                                </span><br><span class="line">	<span class="comment">//cçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"å…¨éƒ¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼š%tc%n"</span>,date);        </span><br><span class="line">	<span class="comment">//fçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"å¹´-æœˆ-æ—¥æ ¼å¼ï¼š%tF%n"</span>,date);</span><br><span class="line">	<span class="comment">//dçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"æœˆ/æ—¥/å¹´æ ¼å¼ï¼š%tD%n"</span>,date);</span><br><span class="line">	<span class="comment">//rçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"HH:MM:SS PMæ ¼å¼ï¼ˆ12æ—¶åˆ¶ï¼‰ï¼š%tr%n"</span>,date);</span><br><span class="line">	<span class="comment">//tçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"HH:MM:SSæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š%tT%n"</span>,date);</span><br><span class="line">	<span class="comment">//Rçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"HH:MMæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š%tR"</span>,date);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å…¨éƒ¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼šæ˜ŸæœŸä¸€ ä¹æœˆ 10 10:43:36 CST 2012</span><br><span class="line">å¹´-æœˆ-æ—¥æ ¼å¼ï¼š2012-09-10</span><br><span class="line">æœˆ/æ—¥/å¹´æ ¼å¼ï¼š09/10/12</span><br><span class="line">HH:MM:SS PMæ ¼å¼ï¼ˆ12æ—¶åˆ¶ï¼‰ï¼š10:43:36 ä¸Šåˆ</span><br><span class="line">HH:MM:SSæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š10:43:36</span><br><span class="line">HH:MMæ ¼å¼ï¼ˆ24æ—¶åˆ¶ï¼‰ï¼š10:43</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰æ—¥æœŸæ ¼å¼çš„è½¬æ¢ç¬¦å¯ä»¥ä½¿æ—¥æœŸé€šè¿‡æŒ‡å®šçš„è½¬æ¢ç¬¦ç”Ÿæˆæ–°å­—ç¬¦ä¸²ã€‚è¿™äº›æ—¥æœŸè½¬æ¢ç¬¦å¦‚å›¾æ‰€ç¤ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  Date date=<span class="keyword">new</span> Date();                                    </span><br><span class="line">  <span class="comment">//bçš„ä½¿ç”¨ï¼Œæœˆä»½ç®€ç§°</span></span><br><span class="line">  String str=String.format(Locale.US,<span class="string">"è‹±æ–‡æœˆä»½ç®€ç§°ï¼š%tb"</span>,date);     </span><br><span class="line">  System.out.println(str);                                                                            </span><br><span class="line">  System.out.printf(<span class="string">"æœ¬åœ°æœˆä»½ç®€ç§°ï¼š%tb%n"</span>,date);</span><br><span class="line">  <span class="comment">//Bçš„ä½¿ç”¨ï¼Œæœˆä»½å…¨ç§°</span></span><br><span class="line">  str=String.format(Locale.US,<span class="string">"è‹±æ–‡æœˆä»½å…¨ç§°ï¼š%tB"</span>,date);</span><br><span class="line">  System.out.println(str);</span><br><span class="line">  System.out.printf(<span class="string">"æœ¬åœ°æœˆä»½å…¨ç§°ï¼š%tB%n"</span>,date);</span><br><span class="line">  <span class="comment">//açš„ä½¿ç”¨ï¼Œæ˜ŸæœŸç®€ç§°</span></span><br><span class="line">  str=String.format(Locale.US,<span class="string">"è‹±æ–‡æ˜ŸæœŸçš„ç®€ç§°ï¼š%ta"</span>,date);</span><br><span class="line">  System.out.println(str);</span><br><span class="line">  <span class="comment">//Açš„ä½¿ç”¨ï¼Œæ˜ŸæœŸå…¨ç§°</span></span><br><span class="line">  System.out.printf(<span class="string">"æœ¬åœ°æ˜ŸæœŸçš„ç®€ç§°ï¼š%tA%n"</span>,date);</span><br><span class="line">  <span class="comment">//Cçš„ä½¿ç”¨ï¼Œå¹´å‰ä¸¤ä½</span></span><br><span class="line">  System.out.printf(<span class="string">"å¹´çš„å‰ä¸¤ä½æ•°å­—ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š%tC%n"</span>,date);</span><br><span class="line">  <span class="comment">//yçš„ä½¿ç”¨ï¼Œå¹´åä¸¤ä½</span></span><br><span class="line">  System.out.printf(<span class="string">"å¹´çš„åä¸¤ä½æ•°å­—ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š%ty%n"</span>,date);</span><br><span class="line">  <span class="comment">//jçš„ä½¿ç”¨ï¼Œä¸€å¹´çš„å¤©æ•°</span></span><br><span class="line">  System.out.printf(<span class="string">"ä¸€å¹´ä¸­çš„å¤©æ•°ï¼ˆå³å¹´çš„ç¬¬å‡ å¤©ï¼‰ï¼š%tj%n"</span>,date);</span><br><span class="line">  <span class="comment">//mçš„ä½¿ç”¨ï¼Œæœˆä»½</span></span><br><span class="line">  System.out.printf(<span class="string">"ä¸¤ä½æ•°å­—çš„æœˆä»½ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š%tm%n"</span>,date);</span><br><span class="line">  <span class="comment">//dçš„ä½¿ç”¨ï¼Œæ—¥ï¼ˆäºŒä½ï¼Œä¸å¤Ÿè¡¥é›¶ï¼‰</span></span><br><span class="line">  System.out.printf(<span class="string">"ä¸¤ä½æ•°å­—çš„æ—¥ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š%td%n"</span>,date);</span><br><span class="line">  <span class="comment">//eçš„ä½¿ç”¨ï¼Œæ—¥ï¼ˆä¸€ä½ä¸è¡¥é›¶ï¼‰</span></span><br><span class="line">  System.out.printf(<span class="string">"æœˆä»½çš„æ—¥ï¼ˆå‰é¢ä¸è¡¥0ï¼‰ï¼š%te"</span>,date);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">è‹±æ–‡æœˆä»½ç®€ç§°ï¼šSep</span><br><span class="line">æœ¬åœ°æœˆä»½ç®€ç§°ï¼šä¹æœˆ</span><br><span class="line">è‹±æ–‡æœˆä»½å…¨ç§°ï¼šSeptember</span><br><span class="line">æœ¬åœ°æœˆä»½å…¨ç§°ï¼šä¹æœˆ</span><br><span class="line">è‹±æ–‡æ˜ŸæœŸçš„ç®€ç§°ï¼šMon</span><br><span class="line">æœ¬åœ°æ˜ŸæœŸçš„ç®€ç§°ï¼šæ˜ŸæœŸä¸€</span><br><span class="line">å¹´çš„å‰ä¸¤ä½æ•°å­—ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š20</span><br><span class="line">å¹´çš„åä¸¤ä½æ•°å­—ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š12</span><br><span class="line">ä¸€å¹´ä¸­çš„å¤©æ•°ï¼ˆå³å¹´çš„ç¬¬å‡ å¤©ï¼‰ï¼š254</span><br><span class="line">ä¸¤ä½æ•°å­—çš„æœˆä»½ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š09</span><br><span class="line">ä¸¤ä½æ•°å­—çš„æ—¥ï¼ˆä¸è¶³ä¸¤ä½å‰é¢è¡¥0ï¼‰ï¼š10</span><br><span class="line">æœˆä»½çš„æ—¥ï¼ˆå‰é¢ä¸è¡¥0ï¼‰ï¼š10</span><br></pre></td></tr></table></figure>
<h5 id="å’Œæ—¥æœŸæ ¼å¼è½¬æ¢ç¬¦ç›¸æ¯”ï¼Œæ—¶é—´æ ¼å¼çš„è½¬æ¢ç¬¦è¦æ›´å¤šã€æ›´ç²¾ç¡®ã€‚å®ƒå¯ä»¥å°†æ—¶é—´æ ¼å¼åŒ–æˆæ—¶ã€åˆ†ã€ç§’ç”šè‡³æ—¶æ¯«ç§’ç­‰å•ä½ã€‚æ ¼å¼åŒ–æ—¶é—´å­—ç¬¦ä¸²çš„è½¬æ¢ç¬¦å¦‚å›¾æ‰€ç¤ºã€‚"><a href="#å’Œæ—¥æœŸæ ¼å¼è½¬æ¢ç¬¦ç›¸æ¯”ï¼Œæ—¶é—´æ ¼å¼çš„è½¬æ¢ç¬¦è¦æ›´å¤šã€æ›´ç²¾ç¡®ã€‚å®ƒå¯ä»¥å°†æ—¶é—´æ ¼å¼åŒ–æˆæ—¶ã€åˆ†ã€ç§’ç”šè‡³æ—¶æ¯«ç§’ç­‰å•ä½ã€‚æ ¼å¼åŒ–æ—¶é—´å­—ç¬¦ä¸²çš„è½¬æ¢ç¬¦å¦‚å›¾æ‰€ç¤ºã€‚" class="headerlink" title="å’Œæ—¥æœŸæ ¼å¼è½¬æ¢ç¬¦ç›¸æ¯”ï¼Œæ—¶é—´æ ¼å¼çš„è½¬æ¢ç¬¦è¦æ›´å¤šã€æ›´ç²¾ç¡®ã€‚å®ƒå¯ä»¥å°†æ—¶é—´æ ¼å¼åŒ–æˆæ—¶ã€åˆ†ã€ç§’ç”šè‡³æ—¶æ¯«ç§’ç­‰å•ä½ã€‚æ ¼å¼åŒ–æ—¶é—´å­—ç¬¦ä¸²çš„è½¬æ¢ç¬¦å¦‚å›¾æ‰€ç¤ºã€‚"></a>å’Œæ—¥æœŸæ ¼å¼è½¬æ¢ç¬¦ç›¸æ¯”ï¼Œæ—¶é—´æ ¼å¼çš„è½¬æ¢ç¬¦è¦æ›´å¤šã€æ›´ç²¾ç¡®ã€‚å®ƒå¯ä»¥å°†æ—¶é—´æ ¼å¼åŒ–æˆæ—¶ã€åˆ†ã€ç§’ç”šè‡³æ—¶æ¯«ç§’ç­‰å•ä½ã€‚æ ¼å¼åŒ–æ—¶é—´å­—ç¬¦ä¸²çš„è½¬æ¢ç¬¦å¦‚å›¾æ‰€ç¤ºã€‚</h5><table>
<thead>
<tr>
<th>è½¬  æ¢  ç¬¦</th>
<th>è¯´    æ˜</th>
<th>ç¤º    ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>H</td>
<td>2ä½æ•°å­—24æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰</td>
<td>15</td>
</tr>
<tr>
<td>I</td>
<td>2ä½æ•°å­—12æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰</td>
<td>03</td>
</tr>
<tr>
<td>k</td>
<td>2ä½æ•°å­—24æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥0ï¼‰</td>
<td>15</td>
</tr>
<tr>
<td>l</td>
<td>2ä½æ•°å­—12æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥0ï¼‰</td>
<td>3</td>
</tr>
<tr>
<td>M</td>
<td>2ä½æ•°å­—çš„åˆ†é’Ÿï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰</td>
<td>03</td>
</tr>
<tr>
<td>S</td>
<td>2ä½æ•°å­—çš„ç§’ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰</td>
<td>09</td>
</tr>
<tr>
<td>L</td>
<td>3ä½æ•°å­—çš„æ¯«ç§’ï¼ˆä¸è¶³3ä½å‰é¢è¡¥0ï¼‰</td>
<td>015</td>
</tr>
<tr>
<td>N</td>
<td>9ä½æ•°å­—çš„æ¯«ç§’æ•°ï¼ˆä¸è¶³9ä½å‰é¢è¡¥0ï¼‰</td>
<td>562000000</td>
</tr>
<tr>
<td>p</td>
<td>å°å†™å­—æ¯çš„ä¸Šåˆæˆ–ä¸‹åˆæ ‡è®°</td>
<td>ä¸­ï¼šä¸‹åˆè‹±ï¼špm</td>
</tr>
<tr>
<td>z</td>
<td>ç›¸å¯¹äºGMTçš„RFC822æ—¶åŒºçš„åç§»é‡</td>
<td>+0800</td>
</tr>
<tr>
<td>Z</td>
<td>æ—¶åŒºç¼©å†™å­—ç¬¦ä¸²</td>
<td>CST</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>s</th>
<th>1970-1-1 00:00:00 åˆ°ç°åœ¨æ‰€ç»è¿‡çš„ç§’æ•°</th>
<th>1193468128</th>
</tr>
</thead>
<tbody>
<tr>
<td>Q</td>
<td>1970-1-1 00:00:00 åˆ°ç°åœ¨æ‰€ç»è¿‡çš„æ¯«ç§’æ•°</td>
<td>1193468128984</td>
</tr>
</tbody>
</table>
<p>æµ‹è¯•ä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	Date date = <span class="keyword">new</span> Date();</span><br><span class="line">	<span class="comment">//Hçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"2ä½æ•°å­—24æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:%tH%n"</span>, date);</span><br><span class="line">	<span class="comment">//Içš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"2ä½æ•°å­—12æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:%tI%n"</span>, date);</span><br><span class="line">	<span class="comment">//kçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"2ä½æ•°å­—24æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥0ï¼‰:%tk%n"</span>, date);</span><br><span class="line">	<span class="comment">//lçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"2ä½æ•°å­—12æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥0ï¼‰:%tl%n"</span>, date);</span><br><span class="line">	<span class="comment">//Mçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"2ä½æ•°å­—çš„åˆ†é’Ÿï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:%tM%n"</span>, date);</span><br><span class="line">	<span class="comment">//Sçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"2ä½æ•°å­—çš„ç§’ï¼ˆä¸è¶³2ä½å‰é¢è¡¥0ï¼‰:%tS%n"</span>, date);</span><br><span class="line">	<span class="comment">//Lçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"3ä½æ•°å­—çš„æ¯«ç§’ï¼ˆä¸è¶³3ä½å‰é¢è¡¥0ï¼‰:%tL%n"</span>, date);</span><br><span class="line">	<span class="comment">//Nçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"9ä½æ•°å­—çš„æ¯«ç§’æ•°ï¼ˆä¸è¶³9ä½å‰é¢è¡¥0ï¼‰:%tN%n"</span>, date);</span><br><span class="line">	<span class="comment">//pçš„ä½¿ç”¨</span></span><br><span class="line">	String str = String.format(Locale.US, <span class="string">"å°å†™å­—æ¯çš„ä¸Šåˆæˆ–ä¸‹åˆæ ‡è®°(è‹±)ï¼š%tp"</span>, date);</span><br><span class="line">	System.out.println(str); </span><br><span class="line">	System.out.printf(<span class="string">"å°å†™å­—æ¯çš„ä¸Šåˆæˆ–ä¸‹åˆæ ‡è®°ï¼ˆä¸­ï¼‰ï¼š%tp%n"</span>, date);</span><br><span class="line">	<span class="comment">//zçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"ç›¸å¯¹äºGMTçš„RFC822æ—¶åŒºçš„åç§»é‡:%tz%n"</span>, date);</span><br><span class="line">	<span class="comment">//Zçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"æ—¶åŒºç¼©å†™å­—ç¬¦ä¸²:%tZ%n"</span>, date);</span><br><span class="line">	<span class="comment">//sçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"1970-1-1 00:00:00 åˆ°ç°åœ¨æ‰€ç»è¿‡çš„ç§’æ•°ï¼š%ts%n"</span>, date);</span><br><span class="line">	<span class="comment">//Qçš„ä½¿ç”¨</span></span><br><span class="line">	System.out.printf(<span class="string">"1970-1-1 00:00:00 åˆ°ç°åœ¨æ‰€ç»è¿‡çš„æ¯«ç§’æ•°ï¼š%tQ%n"</span>, date);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>ä½æ•°å­—<span class="number">24</span>æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³<span class="number">2</span>ä½å‰é¢è¡¥<span class="number">0</span>ï¼‰:<span class="number">11</span></span><br><span class="line"><span class="number">2</span>ä½æ•°å­—<span class="number">12</span>æ—¶åˆ¶çš„å°æ—¶ï¼ˆä¸è¶³<span class="number">2</span>ä½å‰é¢è¡¥<span class="number">0</span>ï¼‰:<span class="number">11</span></span><br><span class="line"><span class="number">2</span>ä½æ•°å­—<span class="number">24</span>æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥<span class="number">0</span>ï¼‰:<span class="number">11</span></span><br><span class="line"><span class="number">2</span>ä½æ•°å­—<span class="number">12</span>æ—¶åˆ¶çš„å°æ—¶ï¼ˆå‰é¢ä¸è¡¥<span class="number">0</span>ï¼‰:<span class="number">11</span></span><br><span class="line"><span class="number">2</span>ä½æ•°å­—çš„åˆ†é’Ÿï¼ˆä¸è¶³<span class="number">2</span>ä½å‰é¢è¡¥<span class="number">0</span>ï¼‰:<span class="number">03</span></span><br><span class="line"><span class="number">2</span>ä½æ•°å­—çš„ç§’ï¼ˆä¸è¶³<span class="number">2</span>ä½å‰é¢è¡¥<span class="number">0</span>ï¼‰:<span class="number">52</span></span><br><span class="line"><span class="number">3</span>ä½æ•°å­—çš„æ¯«ç§’ï¼ˆä¸è¶³<span class="number">3</span>ä½å‰é¢è¡¥<span class="number">0</span>ï¼‰:<span class="number">773</span></span><br><span class="line"><span class="number">9</span>ä½æ•°å­—çš„æ¯«ç§’æ•°ï¼ˆä¸è¶³<span class="number">9</span>ä½å‰é¢è¡¥<span class="number">0</span>ï¼‰:<span class="number">773000000</span></span><br><span class="line">å°å†™å­—æ¯çš„ä¸Šåˆæˆ–ä¸‹åˆæ ‡è®°(è‹±)ï¼šam</span><br><span class="line">å°å†™å­—æ¯çš„ä¸Šåˆæˆ–ä¸‹åˆæ ‡è®°ï¼ˆä¸­ï¼‰ï¼šä¸Šåˆ</span><br><span class="line">ç›¸å¯¹äºGMTçš„RFC822æ—¶åŒºçš„åç§»é‡:+<span class="number">0800</span></span><br><span class="line">æ—¶åŒºç¼©å†™å­—ç¬¦ä¸²:CST</span><br><span class="line"><span class="number">1970</span>-<span class="number">1</span>-<span class="number">1</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> åˆ°ç°åœ¨æ‰€ç»è¿‡çš„ç§’æ•°ï¼š<span class="number">1347246232</span></span><br><span class="line"><span class="number">1970</span>-<span class="number">1</span>-<span class="number">1</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> åˆ°ç°åœ¨æ‰€ç»è¿‡çš„æ¯«ç§’æ•°ï¼š<span class="number">1347246232773</span></span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Java </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Java </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Room --AppDatabase_Impl does not existçš„å¼‚å¸¸è§£å†³]]></title>
      <url>/Bug/Room-AppDatabase-Impl-does-not-exist%E7%9A%84%E5%BC%82%E5%B8%B8%E8%A7%A3%E5%86%B3/</url>
      <content type="html"><![CDATA[<p>Bugå¦‚ä¸‹:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Caused by: java.lang.RuntimeException: cannot find implementation for com.wangzhumo.app.datasource.database.AppDB. AppDB_Impl does not exist</span><br></pre></td></tr></table></figure></p>
<h4 id="å¯»æ‰¾åŸå› "><a href="#å¯»æ‰¾åŸå› " class="headerlink" title="å¯»æ‰¾åŸå› "></a>å¯»æ‰¾åŸå› </h4><p>debugä¾æ¬¡å‘ç°:</p>
<ul>
<li><p>getInstance()ä¸ºç©º</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> AppDB <span class="title">getInstance</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (sInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="keyword">synchronized</span> (AppDB.class) &#123;</span><br><span class="line">              <span class="keyword">if</span> (sInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">              </span><br><span class="line">              	<span class="comment">//æ­¤å¤„è¿”å›ä¸ºç©º</span></span><br><span class="line">                  sInstance = buildDatabase(context);</span><br><span class="line">                  sInstance.updateDatabaseCreated(context);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> sInstance;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>buildDatabase(context) è¿”å›ä¸ºç©º</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Build the database.</span></span><br><span class="line"><span class="comment"> * creates a new instance of the database.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> AppDB <span class="title">buildDatabase</span><span class="params">(<span class="keyword">final</span> Context appContext)</span> </span>&#123;</span><br><span class="line">     AppDB appDB = Room.databaseBuilder(appContext, AppDB.class, DATABASE_NAME)</span><br><span class="line">            .addCallback(<span class="keyword">new</span> Callback() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@NonNull SupportSQLiteDatabase db)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">super</span>.onCreate(db);</span><br><span class="line">                    AppDB database = AppDB.getInstance(appContext);</span><br><span class="line">                    database.setDatabaseCreated();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOpen</span><span class="params">(@NonNull SupportSQLiteDatabase db)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">super</span>.onOpen(db);</span><br><span class="line">                    Log.e(TAG, <span class="string">"onOpen: "</span> + db.getPath());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).build();</span><br><span class="line">    <span class="keyword">return</span> appDB;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>databaseBuilderæ˜¯åˆ›å»ºæ•°æ®åº“çš„æ–¹æ³•,ä½†æ˜¯å®ƒæ„å»ºå¤±è´¥äº†,é‚£ä¹ˆå‰©ä¸‹çš„å°±æ˜¯æºç äº†</p>
</li>
</ul>
<h4 id="Debugæºç "><a href="#Debugæºç " class="headerlink" title="Debugæºç "></a>Debugæºç </h4><ul>
<li>databaseBuilder æ–¹æ³•</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"WeakerAccess"</span>)</span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends RoomDatabase&gt; RoomDatabase.<span class="function">Builder&lt;T&gt; <span class="title">databaseBuilder</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            @NonNull Context context, @NonNull Class&lt;T&gt; klass, @NonNull String name)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//noinspection ConstantConditions</span></span><br><span class="line">        <span class="keyword">if</span> (name == <span class="keyword">null</span> || name.trim().length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException</span><br><span class="line">              (<span class="string">"Cannot build a database with null or empty name."</span></span><br><span class="line">                    + <span class="string">" If you are trying to create an in memory database, use Room"</span></span><br><span class="line">                    + <span class="string">".inMemoryDatabaseBuilder"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RoomDatabase.Builder&lt;&gt;(context, klass, name);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥æ˜æ˜¾çš„çœ‹å‡º,æ­¤å¤„æŠ›å‡ºçš„å¼‚å¸¸ä¸æ˜¯AppDB_Impl does not exist çš„æç¤º,å¯ä»¥è‚¯å®šå¹¶ä¸æ˜¯æ­¤å¤„çš„é—®é¢˜</p>
<p>åº”è¯¥æ˜¯æ­£å¸¸è¿”å›çš„ return new RoomDatabase.Builder&lt;&gt;(context, klass, name);</p>
<p><code>RoomDatabase.Builder</code></p>
<p>é‚£ä¹ˆå‡ºé—®é¢˜çš„å°±å¯ä»¥è‚¯å®šæ˜¯</p>
<ul>
<li><p>build()æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@NonNull</span><br><span class="line">        public T build() &#123;</span><br><span class="line">            //noinspection ConstantConditions</span><br><span class="line">            if (mContext == null) &#123;</span><br><span class="line">                throw new IllegalArgumentException</span><br><span class="line">                (&quot;Cannot provide null context for the database.&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            //noinspection ConstantConditions</span><br><span class="line">            if (mDatabaseClass == null) &#123;</span><br><span class="line">                throw new IllegalArgumentException</span><br><span class="line">                (&quot;Must provide an abstract class that&quot;</span><br><span class="line">                        + &quot; extends RoomDatabase&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            if (mFactory == null) &#123;</span><br><span class="line">                mFactory = new FrameworkSQLiteOpenHelperFactory();</span><br><span class="line">            &#125;</span><br><span class="line">            DatabaseConfiguration configuration =</span><br><span class="line">                    new DatabaseConfiguration(mContext, mName, mFactory, mMigrationContainer,</span><br><span class="line">                            mCallbacks, mAllowMainThreadQueries, mRequireMigration);</span><br><span class="line">            T db = Room.getGeneratedImplementation(mDatabaseClass, DB_IMPL_SUFFIX);</span><br><span class="line">            db.init(configuration);</span><br><span class="line">            return db;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤„,debugå‘ç°,æ˜¯åˆ°</p>
<p><code>T db = Room.getGeneratedImplementation(mDatabaseClass, DB_IMPL_SUFFIX);</code></p>
<p>æŠ›å‡ºå¼‚å¸¸çš„.</p>
</li>
</ul>
<h4 id="é”å®šé—®é¢˜"><a href="#é”å®šé—®é¢˜" class="headerlink" title="é”å®šé—®é¢˜"></a>é”å®šé—®é¢˜</h4><p><code>getGeneratedImplementation</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NonNull</span></span><br><span class="line">    <span class="keyword">static</span> &lt;T, C&gt; <span class="function">T <span class="title">getGeneratedImplementation</span><span class="params">(Class&lt;C&gt; klass, String suffix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> String fullPackage = klass.getPackage().getName();</span><br><span class="line">        String name = klass.getCanonicalName();</span><br><span class="line">        <span class="keyword">final</span> String postPackageName = fullPackage.isEmpty()</span><br><span class="line">                ? name</span><br><span class="line">                : (name.substring(fullPackage.length() + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">final</span> String implName = postPackageName.replace(<span class="string">'.'</span>, <span class="string">'_'</span>) + suffix;</span><br><span class="line">        <span class="comment">//noinspection TryWithIdenticalCatches</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">            <span class="keyword">final</span> Class&lt;T&gt; aClass = (Class&lt;T&gt;) Class.forName(</span><br><span class="line">                    fullPackage.isEmpty() ? implName : fullPackage + <span class="string">"."</span> + implName);</span><br><span class="line">            <span class="keyword">return</span> aClass.newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">        </span><br><span class="line">        	</span><br><span class="line">        	<span class="comment">//**å¾ˆæ˜æ˜¾,å°±æ˜¯è¿™ä¸ªåœ°æ–¹äº†**</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"cannot find implementation for "</span></span><br><span class="line">                    + klass.getCanonicalName() + <span class="string">". "</span> + implName + <span class="string">" does not exist"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Cannot access the constructor"</span></span><br><span class="line">                    + klass.getCanonicalName());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Failed to create an instance of "</span></span><br><span class="line">                    + klass.getCanonicalName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®å°±æ˜¯,ç”Ÿæˆç±»å¤±è´¥äº†</p>
<p>å…¶ä»–å‚æ•°éƒ½æ­£å¸¸,ååç”Ÿæˆå¤±è´¥,æ‰€ä»¥å°±æ€€ç–‘åˆ° </p>
<p> Java  -&gt;     <code>apt</code> çš„é—®é¢˜</p>
<p>Kotlin -&gt;  <code>kapt</code>çš„é—®é¢˜</p>
<p>è¿™ä¸¤ä¸ªå°±æ˜¯ç”¨æ¥ç”Ÿæˆä»£ç çš„,è¿™é‡Œçš„ç”Ÿæˆå¤±è´¥,æœ‰å¾ˆå¤§æ¦‚ç‡æ˜¯è¿™ä¸ªé—®é¢˜</p>
<h4 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h4><p>æŸ¥çœ‹é¡¹ç›®çš„ä¾èµ–  <code>lib_opensource  -&gt; build.gradle</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//arch</span><br><span class="line">api deps.archLibs.archExtensions</span><br><span class="line">api deps.archLibs.archLifecycleCommon</span><br><span class="line">api deps.archLibs.archRoomRuntime</span><br><span class="line">kapt deps.archLibs.archRoomCompiler</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹å‘ç°,æˆ‘å·²ç»æ·»åŠ äº†,é‚£ä¹ˆä»€ä¹ˆé¬¼é—®é¢˜å‘¢?</p>
<p><strong>æ€€ç–‘æ˜¯libraryçš„é—®é¢˜,æ‰“å¼€æˆ‘ä½¿ç”¨Roomçš„library</strong>    ,æŸ¥çœ‹ <code>lib_datasource -&gt; build.gradle</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;com.android.library&apos;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;])</span><br><span class="line">    api project(&apos;:lib_opensource&apos;)</span><br><span class="line"></span><br><span class="line">//    kapt deps.archLibs.archRoomCompiler</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœç„¶å¿˜äº†åŠ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;com.android.library&apos;</span><br><span class="line">apply plugin: &apos;kotlin-android&apos;</span><br><span class="line">apply plugin: &apos;kotlin-kapt&apos;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;])</span><br><span class="line">    api project(&apos;:lib_opensource&apos;)</span><br><span class="line"></span><br><span class="line">//    kapt deps.archLibs.archRoomCompiler</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°±Okäº†,æˆ‘åˆå¯ä»¥æ„‰å¿«çš„ç©è€äº†</p>
<h4 id="è®°å¾—-kapt"><a href="#è®°å¾—-kapt" class="headerlink" title="è®°å¾—:  kapt"></a>è®°å¾—:  kapt</h4>]]></content>
      
        <categories>
            
            <category> Bug </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Bug </tag>
            
            <tag> Room </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä½¿ç”¨CharlesæŠ“Httpsçš„æ•°æ®è¯·æ±‚]]></title>
      <url>/uncategorized/%E4%BD%BF%E7%94%A8Charles%E6%8A%93Https%E7%9A%84%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82/</url>
      <content type="html"><![CDATA[<p>ä¹‹å‰çš„æ–‡ç« ä¸­ç»™é¡¹ç›®ä¸­åŠ å…¥äº†Https,æ­¤æ—¶ä½¿ç”¨charlesç å®å°±æ˜¯ä¸€å †ä¹±ç ,</p>
<p>ä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦å¸¸å¸¸ä½¿ç”¨Charles,è°ƒè¯•æ¥å£,æŸ¥æ‰¾é—®é¢˜ç­‰.</p>
<h4 id="å¯¼å‡ºè¯ä¹¦"><a href="#å¯¼å‡ºè¯ä¹¦" class="headerlink" title="å¯¼å‡ºè¯ä¹¦"></a>å¯¼å‡ºè¯ä¹¦</h4><p>1.æ‰“å¼€Charles</p>
<p>2.Help -&gt; SSL Proxying -&gt; Save Charles Root Certificateâ€¦</p>
<p>3.ä¿å­˜åˆ°~/Downloads/charles-ssl-proxying-certificate.pem</p>
<h4 id="å®‰è£…è¯ä¹¦åˆ°è®¾å¤‡"><a href="#å®‰è£…è¯ä¹¦åˆ°è®¾å¤‡" class="headerlink" title="å®‰è£…è¯ä¹¦åˆ°è®¾å¤‡"></a>å®‰è£…è¯ä¹¦åˆ°è®¾å¤‡</h4><p>1.æŠŠè¯ä¹¦æ¨é€åˆ°è®¾å¤‡</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> adb push charles-ssl-proxying-certificate.pem /sdcard/Download/</span><br><span class="line">charles-ssl-proxying-certificate.pem: 1 file pushed. 0.1 MB/s (1921 bytes in 0.012s)</span><br></pre></td></tr></table></figure>
<p>2.å®‰è£…è¯ä¹¦</p>
<p>è®¾ç½® -&gt; å®‰å…¨ -&gt; è®¾å¤‡ç®¡ç†ä¸å‡­è¯ -&gt; ä»å­˜å‚¨å®‰è£… -&gt; charles-ssl-proxying-certificate.pemâ€™</p>
<h4 id="è®¾ç½®Charles"><a href="#è®¾ç½®Charles" class="headerlink" title="è®¾ç½®Charles"></a>è®¾ç½®Charles</h4><p>1.Proxy -&gt; SSL Proxying Settings</p>
<p>2.æ‰“å¼€æ‰‹æœº,å¼€å§‹è¯·æ±‚</p>
]]></content>
      
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Https </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Androidå¼€å‘ä¸­å¸¸ç”¨çš„Adbå‘½ä»¤]]></title>
      <url>/Android/Android%E5%BC%80%E5%8F%91%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84Adb%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<p>åœ¨åšè¿™äº›ä¹‹å‰,å…ˆé…ç½®å¥½adbç¯å¢ƒå˜é‡,ä»¥æˆ‘çš„é…ç½®ä¸ºä¾‹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> vim ~/.bash_profile</span><br><span class="line"></span><br><span class="line">export ANDROID_HOME=/Users/phyooos/Library/Android/sdk</span><br><span class="line">...</span><br><span class="line">export PATH=&#123;çœç•¥&#125;:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> source ~/.bas</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> adb</span><br><span class="line">Android Debug Bridge version 1.0.39</span><br><span class="line">Version 0.0.1-4500957</span><br><span class="line">Installed as /Users/phyooos/Library/Android/sdk/platform-tools/adb</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>è¡¥å……</p>
<blockquote>
<p>adb shell pm list packages   å½“å‰æ‰‹æœºå®‰è£…çš„æ‰€æœ‰appåŒ…å<br>adb shell pm list packages | grep â€˜googleâ€™  åœ¨æ‰€æœ‰åŒ…åä¸­æŸ¥æ‰¾å¸¦â€™googleâ€™çš„</p>
</blockquote>
<h4 id="è¿æ¥è®¾å¤‡"><a href="#è¿æ¥è®¾å¤‡" class="headerlink" title="è¿æ¥è®¾å¤‡"></a>è¿æ¥è®¾å¤‡</h4><p>æ‰“å¼€å¼€å‘è€… -&gt; æ‰“å¼€è°ƒè¯• -&gt; å…è®¸è°ƒè¯•</p>
<ul>
<li><p>é€šè¿‡usbè¿æ¥</p>
</li>
<li><p>é€šè¿‡wifiè¿æ¥</p>
<p>ä¿è¯Androidè®¾å¤‡ä¸ç”µè„‘åœ¨å±€åŸŸç½‘ä¸­,ç½‘æ®µå¥½åƒä¹Ÿè¦ä¸€è‡´ eg:  <code>192.168.2.98 , 192.168.2.111</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~ âŒš 9:44:55</span><br><span class="line"><span class="meta">$</span> adb connect 192.168.6.51</span><br><span class="line">unable to connect to 192.168.6.51:5555: Connection refused</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æ˜¯è¿æ¥ä¸ä¸Šçš„,è¦å…ˆtcpip 5555,å¦‚ä¸‹:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>ä½¿ç”¨Tcpå¹¶ç›‘å¬ç«¯å£5555</span><br><span class="line">adb tcpip 5555</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>è¿æ¥è®¾å¤‡</span><br><span class="line">adb connect 192.168.6.51</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æƒ³ç”¨usbè°ƒè¯•</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>ä½¿ç”¨usbè°ƒè¯•  </span><br><span class="line">adb usb</span><br></pre></td></tr></table></figure>
<p>PS:æœ‰çš„è®¾å¤‡ç›´æ¥adb connect  å³å¯,æ‰€ä»¥ä¸å¦¨å…ˆè¯•è¯•</p>
<p>â€‹</p>
</li>
</ul>
<h4 id="æŸ¥çœ‹è®¾å¤‡"><a href="#æŸ¥çœ‹è®¾å¤‡" class="headerlink" title="æŸ¥çœ‹è®¾å¤‡"></a>æŸ¥çœ‹è®¾å¤‡</h4><ul>
<li><p>æŸ¥çœ‹æ‰€æœ‰è¿æ¥çš„è®¾å¤‡</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> adb devices</span><br><span class="line">List of devices attached</span><br><span class="line">3080b82d	device</span><br><span class="line">860BCML228J8	device</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŒ‡å®šè®¾å¤‡(adb å‘½ä»¤å¿…é¡»æŒ‡å®šä¸€ä¸ªè®¾å¤‡ä½¿ç”¨)</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">abd -s ç¼–å· å‘½ä»¤</span><br><span class="line">æ¯”å¦‚æˆ‘è¦è¿æ¥3080b82d	device è¿™ä¸ªè®¾å¤‡,å®‰è£…ä¸€ä¸ªapk</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line"><span class="meta">$</span> adb -s 3080b82d install Test.apk</span><br><span class="line">Success</span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…-å¸è½½apk"><a href="#å®‰è£…-å¸è½½apk" class="headerlink" title="å®‰è£…,å¸è½½apk"></a>å®‰è£…,å¸è½½apk</h4><ul>
<li>å®‰è£…<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> adb -s 3080b82d install Users/phyooos/develop/Test.apk</span><br><span class="line">Success</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>install è·Ÿä¸Šapkçš„pathå³å¯</p>
<p>install å¯ä»¥æ­é…å‡ ä¸ªå‚æ•°ä½¿ç”¨,æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯</p>
<p><code>install -r</code>   æ›¿æ¢æ‰åŸæ¥çš„apk.(è¢«ç§°ä¸ºå¼ºåˆ¶å®‰è£…)    è‡³äºå…¶ä»–çš„å‚æ•°å»googleå®˜ç½‘çœ‹å§</p>
<p><code>install -t</code>  å¯ä»¥å®‰è£…æµ‹è¯•åŒ…</p>
<ul>
<li>å¸è½½</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb uninstall [è½¯ä»¶åŒ…å]</span><br><span class="line"></span><br><span class="line">adb uninstall -k [è½¯ä»¶åŒ…å]</span><br></pre></td></tr></table></figure>
<p>-k å‚æ•°,å¸è½½è½¯ä»¶ä½†æ˜¯ä¿ç•™é…ç½®å’Œç¼“å­˜æ–‡ä»¶.</p>
<p>åŒ…åä½¿ç”¨æ–‡ç« å¼€å§‹çš„å‘½ä»¤æŸ¥æ‰¾å³å¯(å½“å‰æœ‰ä¸¤ä¸ªæ‰‹æœº,è¿˜è¦æŒ‡å®šè®¾å¤‡)<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> adb -s 3080b82d shell pm list packages | grep 'miui'</span><br><span class="line">package:com.miui.screenrecorder</span><br><span class="line">package:com.miui.contentextension</span><br><span class="line">package:com.miui.powerkeeper</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<h4 id="æ‹‰å–-æ¨é€æ–‡ä»¶"><a href="#æ‹‰å–-æ¨é€æ–‡ä»¶" class="headerlink" title="æ‹‰å–,æ¨é€æ–‡ä»¶"></a>æ‹‰å–,æ¨é€æ–‡ä»¶</h4><ul>
<li>å‘é€æ–‡ä»¶åˆ°Androidè®¾å¤‡</li>
</ul>
<p>ã€€ã€€<code>adb push [æœ¬åœ°è·¯å¾„] [è¿œç¨‹è·¯å¾„]</code></p>
<ul>
<li>ä»Androidè®¾å¤‡ä¸­ä¸‹è½½æ–‡ä»¶</li>
</ul>
<p>ã€€ã€€<code>adb pull [è¿œç¨‹è·¯å¾„] [æœ¬åœ°è·¯å¾„]</code></p>
<h4 id="æˆªå›¾å½•å±"><a href="#æˆªå›¾å½•å±" class="headerlink" title="æˆªå›¾å½•å±"></a>æˆªå›¾å½•å±</h4><ul>
<li><p>æˆªå›¾<code>adb shell screencap [path]</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell screencap /sdcard/screen.png</span><br><span class="line">#æˆªå›¾å¹¶ä¿å­˜åˆ°/sdcard/screen.png</span><br></pre></td></tr></table></figure>
</li>
<li><p>å½•å±<code>adb shell screenrecord [path]</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell screenrecord /sdcard/demo.mp4</span><br><span class="line">#å½•å±</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„:   æŒ‰Ctrl-C ç»“æŸå½•åˆ¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">adb shell screenrecord --size &lt;WIDTHxHEIGHT&gt;</span><br><span class="line"></span><br><span class="line">adb shell screenrecord --bit-rate &lt;RATE&gt;</span><br><span class="line">adb shell screenrecord --bit-rate 5000000 /sdcard/demo.mp4</span><br><span class="line"></span><br><span class="line">adb shell screenrecord --time-limit &lt;TIME&gt;</span><br><span class="line"></span><br><span class="line">adb shell screenrecord --rotate</span><br><span class="line"></span><br><span class="line">adb shell screenrecord --verbose</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
</li>
</ul>
<h4 id="Package"><a href="#Package" class="headerlink" title="Package"></a>Package</h4><ul>
<li><p>æŸ¥çœ‹ç³»ç»Ÿå†…appä¿¡æ¯  <code>adb shell pm list packages</code></p>
<ul>
<li><p>æŸ¥çœ‹å½“å‰æ‰€æœ‰åŒ…</p>
<p><code>adb shell pm list packages</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> adb shell pm list packages</span><br><span class="line">package:com.flyme.roamingpay</span><br><span class="line">package:com.android.cts.priv.ctsshim</span><br><span class="line">package:com.meizu.pps</span><br><span class="line">package:com.meizu.net.pedometer</span><br><span class="line">package:com.android.providers.telephony</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç³»ç»Ÿåº”ç”¨</p>
<p><code>adb shell pm list packages -s</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> adb shell pm list packages -s</span><br><span class="line">package:com.miui.screenrecorder</span><br><span class="line">package:com.android.cts.priv.ctsshim</span><br><span class="line">package:com.qualcomm.qti.auth.sampleextauthservice</span><br><span class="line">package:com.qualcomm.qti.perfdump</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ™®é€šå¤–æ¥åº”ç”¨</p>
<p><code>adb shell pm list packages -3</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> adb shell pm list packages -3</span><br><span class="line">package:com.google.android.youtube</span><br><span class="line">package:com.hpbr.bosszhipin</span><br><span class="line">package:de.blinkt.openvpn</span><br><span class="line">package:org.iggymedia.periodtracker</span><br><span class="line">package:com.daimajia.gold</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…¶ä»–å‚æ•°</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>See their associated file.</span><br><span class="line">adb shell pm list packages -f </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>Filter to only show disabled packages.</span><br><span class="line">adb shell pm list packages -d </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>Filter to only show enabled packages.</span><br><span class="line">adb shell pm list packages -e </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>See the installer for the packages.</span><br><span class="line">adb shell pm list packages -i </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>Also include uninstalled packages.</span><br><span class="line">adb shell pm list packages -u</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>é€šè¿‡åŒ…åæŸ¥æ‰¾appä½ç½® <code>adb shell pm path [packagename]</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell pm path com.miui.screenrecorder</span><br><span class="line">package:/system/app/MiuiScreenRecorder/MiuiScreenRecorder.apk</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¸…é™¤ç¼“å­˜<code>adb shell pm clear  [packageName]</code></p>
<p>æ¸…é™¤äº†è¯¥appçš„  data  cache</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell pm clear com.yhcs.carmart</span><br><span class="line">Success</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
</li>
</ul>
<h4 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h4><p>æˆ‘ä»¬çŸ¥é“androidå…¶å®ç²¾ç®€äº†linuxçš„å‘½ä»¤,æœ‰ä¸€å¤§éƒ¨åˆ†linuxå‘½ä»¤æ²¡æ³•ç”¨çš„</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> adb shell</span><br><span class="line"><span class="meta">#</span>å³å¯è¿›å…¥</span><br><span class="line"></span><br><span class="line">å¦‚æœè¦rootæƒé™,å›½å†…æ‰‹æœºå¥½åƒä¸ä¸€è‡´,æˆ‘æ˜¯ç”¨è¿‡çš„ä¸º</span><br><span class="line"><span class="meta">$</span> adb root</span><br><span class="line"><span class="meta">$</span> adb shell</span><br><span class="line"></span><br><span class="line">æ­¤æ—¶æƒé™å°±æ˜¯root</span><br><span class="line"></span><br><span class="line">è¿›å…¥shellå,å°±å¯ä»¥ä¸ºæ‰€æ¬²ä¸º,ä¸€èˆ¬å’Œlinuxä¸€è‡´</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡è¿™äº›,è¿˜æ˜¯ç®¡ç”¨çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls , cd , rm , mkdir , touch , pwd ,cp , mv ,netstat , ping, ip</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¸€ä¸ªä¾‹å­,æˆ‘æƒ³æŸ¥çœ‹å½“å‰wifiçš„ipæ˜¯å¤šå°‘.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> adb shell</span><br><span class="line">sagit:/ $ ip -f inet addr show wlan0</span><br><span class="line">23: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 3000</span><br><span class="line">    inet 192.168.6.51/23 brd 192.168.7.255 scope global wlan0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">sagit:/ $</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>ip  inet 192.168.6.51  è¿™ä¸ªå°±æ˜¯</span><br></pre></td></tr></table></figure>
<h4 id="Logcat"><a href="#Logcat" class="headerlink" title="Logcat"></a>Logcat</h4><p><code>adb logcat [option] [filter]</code></p>
<ul>
<li><p>æŸ¥çœ‹log <code>adb logcat</code></p>
<p>é€šè¿‡  control + c  é€€å‡º</p>
<p>â€‹</p>
</li>
<li><p>æŸ¥çœ‹Debugçš„log <code>adb logcat *:D</code></p>
</li>
</ul>
<p>Logcat,è¿˜æ˜¯Android studio çœ‹èµ·æ¥æ–¹ä¾¿,æ‰€ä»¥æ²¡æœ‰ç»§ç»­å»çœ‹,ä¹Ÿå°±ä¸è¯´äº†</p>
<h4 id="dumpsys"><a href="#dumpsys" class="headerlink" title="dumpsys"></a>dumpsys</h4><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å‘½ä»¤</p>
<ul>
<li><p>ç”µé‡ <code>adb shell dumpsys battery</code></p>
<p>â€‹</p>
</li>
<li><p>æœåŠ¡åˆ—è¡¨ <code>adb shell dumpsys</code></p>
<p>ä¸‹é¢çš„å‘½ä»¤  <code>| more</code> æ˜¯ä¸ºäº†æ˜¾ç¤ºæ‰€æœ‰çš„æ•°æ® </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell dumpsys | more</span><br><span class="line">Currently running services:</span><br><span class="line">  DockObserver</span><br><span class="line">  MiuiBackup</span><br><span class="line">  MiuiInit</span><br><span class="line">  SurfaceFlinger</span><br><span class="line">  accessibility</span><br><span class="line">  account</span><br><span class="line">  activity</span><br><span class="line">  alarm</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªCurrently running services   æ‰€æœ‰çš„é¡¹ç›®,éƒ½å¯ä»¥è¯¦ç»†æŸ¥è¯¢</p>
</li>
<li><p>æŸ¥è¯¢å•ä¸ªservice  <code>adb shell dumpsys [service name]</code></p>
<p>æå‡ ä¸ªä¾‹å­çœ‹çœ‹:</p>
<ul>
<li>å±å¹•åˆ†è¾¨ç‡<code>adb shell dumpsys window displays</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell dumpsys window displays</span><br><span class="line"></span><br><span class="line">WINDOW MANAGER DISPLAY CONTENTS (dumpsys window displays)</span><br><span class="line">  Display: mDisplayId=0</span><br><span class="line">    init=1080x1920 480dpi cur=1080x1920 app=1080x1920 rng=1080x1020-1920x1860</span><br><span class="line">    deferred=false mLayoutNeeded=false</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­:</p>
<p>init=1080x1920  åˆ†è¾¨ç‡</p>
<p>480dpi   dpiå€¼</p>
<p>â€‹</p>
<ul>
<li><p>activityä¿¡æ¯<code>adb shell dumpsys activity</code></p>
<p>æ¯”å¦‚æˆ‘æƒ³çœ‹çœ‹æˆ‘activityçš„ä¿¡æ¯<code>adb shell dumpsys activity | grep &#39;com.yhcs.carmart&#39;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell dumpsys activity | grep &quot;com.yhcs.carmart&quot;</span><br><span class="line">  * com.yhcs.carmart: 2 items</span><br><span class="line">    #0: PendingIntentRecord&#123;c526be3 com.yhcs.carmart startService&#125;</span><br><span class="line">    #1: PendingIntentRecord&#123;8949e0 com.yhcs.carmart broadcastIntent&#125;</span><br><span class="line">      -&gt; 8161:com.yhcs.carmart/u0a460 s1/1 u0/0 +44s372ms</span><br><span class="line">      -&gt; 8556:com.yhcs.carmart:channel/u0a460 s1/1 u0/0 +33s684ms</span><br><span class="line">      </span><br><span class="line">      ...</span><br><span class="line">      </span><br><span class="line">  * Recent #0: TaskRecord&#123;6019b81 #14799 A=com.yhcs.carmart U=0 StackId=1 sz=1&#125;</span><br><span class="line">   packageName=com.yhcs.carmart processName=com.yhcs.carmart</span><br><span class="line">   launchedFromUid=10460 launchedFromPackage=com.yhcs.carmart userId=0</span><br><span class="line">   app=ProcessRecord&#123;3c52934 8161:com.yhcs.carmart/u0a460&#125;</span><br><span class="line">   Intent &#123; cmp=com.yhcs.carmart/.ui.main.MainActivity &#125;</span><br><span class="line">   frontOfTask=true task=TaskRecord&#123;6019b81 #14799 A=com.yhcs.carmart U=0 StackId=1 sz=1&#125;</span><br><span class="line">   taskAffinity=com.yhcs.carmart</span><br><span class="line">   realActivity=com.yhcs.carmart/.ui.main.MainActivity</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æŒ‡å®šæŸ¥çœ‹è¿™ä¸ªactivity</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell dumpsys activity com.yhcs.carmart/.ui.main.MainActivity</span><br><span class="line">TASK com.yhcs.carmart id=14799 userId=0</span><br><span class="line">  ACTIVITY com.yhcs.carmart/.ui.main.MainActivity a99200b pid=8161</span><br><span class="line">    Local Activity 90efa41 State:</span><br><span class="line">      mResumed=false mStopped=true mFinished=false</span><br><span class="line">      mChangingConfigurations=false</span><br><span class="line">      mCurrentConfig=&#123;1.0 460mcc11mnc [zh_CN] ldltr sw360dp w360dp h620dp 480dpi nrml long port finger -keyb/v/h -nav/h appBounds=Rect(0, 0 - 1080, 1920) s.12 themeChanged=0 themeChangedFlags=0&#125;</span><br><span class="line">      ...</span><br><span class="line">View Hierarchy:</span><br><span class="line">      DecorView@ce71c9e[MainActivity]</span><br><span class="line">        android.widget.LinearLayout&#123;6106377 V.E...... ......ID 0,0-1080,1920&#125;</span><br><span class="line">      ...</span><br><span class="line">Active Fragments </span><br><span class="line">	  ...</span><br></pre></td></tr></table></figure>
<p>é‡Œé¢æœ‰å¾ˆå¤šä¿¡æ¯</p>
<p>â€‹</p>
</li>
</ul>
</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[OkHttpä¸­æ·»åŠ httpsæ”¯æŒ]]></title>
      <url>/uncategorized/OkHttp%E4%B8%AD%E6%B7%BB%E5%8A%A0https%E6%94%AF%E6%8C%81/</url>
      <content type="html"><![CDATA[<p><strong>åŸºç¡€çŸ¥è¯†</strong></p>
<p>æ„Ÿè§‰å°±æ˜¯ä¸€å †æœ‰ä¿¡èª‰çš„æœºæ„,è¯´: æˆ‘ä»¬è¿™äº›æœºæ„çš„å…¬é’¥æ˜¯å¯ä¿¡çš„,æˆ‘ä»¬ä¸‹é¢çš„å°å¼Ÿå½“ç„¶ä¹Ÿæ˜¯å¯ä»¥ä¿¡ä»»çš„å•¦</p>
<p>ç„¶åå¤§å®¶å°±å»å½“äººå®¶å°å¼Ÿ,å°±æ˜¯å¯ä¿¡çš„äº†â€¦.</p>
<p>å½“ç„¶è¿™é‡Œé¢æœ‰çš„å¤§ä½¬ä¸é«˜å…´,å°±è‡ªå·±æä¸€å¥—è¯ä¹¦,æ¯”å¦‚12306</p>
<p>Httpsä¸­,å€¼å¾—æ³¨æ„çš„å¯†é’¥æœ‰:</p>
<ul>
<li>æœåŠ¡å™¨ç«¯çš„<code>å…¬é’¥</code>å’Œ<code>ç§é’¥</code></li>
</ul>
<ul>
<li>å®¢æˆ·ç«¯çš„<code>éšæœºå¯†é’¥</code></li>
</ul>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ä¸€ä¸ªHTTPSè¯·æ±‚å®é™…ä¸Šå°±æ˜¯ä¸¤æ¬¡HTTPä¼ è¾“.</p>
<p>1.å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘èµ·HTTPSè¯·æ±‚ï¼Œè¿æ¥åˆ°æœåŠ¡å™¨çš„443ç«¯å£ã€‚</p>
<p>2.æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚,å‘å®¢æˆ·ç«¯å‘é€è‡ªå·±çš„<code>å…¬é’¥</code></p>
<p>3.å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å…¬é’¥,å¼€å§‹éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§,æˆ‘ä»¬çŸ¥é“ç³»ç»Ÿå†…ç½®äº†ä¸€äº›è¯ä¹¦,åº”è¯¥æ˜¯å«é¡¶çº§è¯ä¹¦å§</p>
<p>æˆ‘ä»¬çš„è¯ä¹¦å¹¶ä¸æ˜¯å•¥å¤§æœºæ„å‘çš„,è‚¯å®šä¸åœ¨é‡Œé¢,é‚£ä¹ˆå°±æ²¡æ³•éªŒè¯åˆæ³•.</p>
<p>â€‹     åˆæ³• &gt; ç»§ç»­</p>
<p>â€‹     ä¸åˆæ³• &gt; æ­¤æ¬¡Httpsè¯·æ±‚ç»ˆæ­¢</p>
<p>4.å®¢æˆ·ç«¯éªŒè¯å…¬é’¥åˆæ ¼å(ä¹Ÿå°±æ˜¯ç»™ä½ å‘æ¶ˆæ¯çš„æœåŠ¡å™¨æ˜¯æ­£ç»æœåŠ¡å™¨)ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ä¼šç”Ÿæˆä¸€ä¸ª éšæœºå¯†ç ,å®¢æˆ·ç«¯ä¼šæ‹¿ç€è¿™ä¸ªéšæœºå¯†ç å’Œåˆšæ‰æ”¶åˆ°çš„æœåŠ¡å™¨å¯†é’¥åšéå¯¹ç§°åŠ å¯† &gt;&gt; å¾—åˆ°å¯†æ–‡çš„å¯†ç </p>
<p>â€”â€”â€“ä»¥ä¸Šç¬¬ä¸€æ¬¡httpè¯·æ±‚ç»“æŸäº†â€”â€”â€“</p>
<p>5.å®¢æˆ·ç«¯ä¼šå‘èµ·HTTPSä¸­çš„ç¬¬äºŒä¸ªHTTPè¯·æ±‚,å‘é€å®¢æˆ·ç«¯å¯†é’¥(å¯†æ–‡)ç»™æœåŠ¡å™¨ã€‚</p>
<p>6.æœåŠ¡å™¨æ”¶åˆ°å¯†æ–‡ï¼Œä¼šç”¨è‡ªå·±çš„ç§é’¥å¯¹å…¶è¿›è¡Œéå¯¹ç§°è§£å¯†,å¾—åˆ°å®¢æˆ·ç«¯åˆšæ‰ç”Ÿæˆçš„å®¢æˆ·ç«¯éšæœºå¯†ç .</p>
<p>æ­¤æ—¶æœåŠ¡å™¨ä½¿ç”¨å®¢æˆ·ç«¯éšæœºå¯†ç ,å¯¹æ•°æ®è¿›è¡Œå¯¹ç§°åŠ å¯†</p>
<p>7.æŠŠå¯¹ç§°åŠ å¯†åçš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯,å®¢æˆ·ç«¯å¯¹ç§°è§£å¯†,OK    æ­¤æ¬¡Httpså®Œç¾ç»“æŸ</p>
<p>â€”â€”â€“æ•´ä¸ªhttpsè¯·æ±‚ç»“æŸäº†â€”â€”â€“</p>
<p>å…¶ä¸­ , <code>å¯¹ç§°åŠ å¯†</code>å’Œ<code>éå¯¹ç§°åŠ å¯†</code>,  å„å¸å…¶èŒ,å…±åŒå®Œæˆæ•´ä¸ªè¯·æ±‚.</p>
<p>  å¯¹ç§°åŠ å¯†: æœ€å¿«é€Ÿ,æœ€ç®€å•</p>
<p>  éå¯¹ç§°åŠ å¯†:é€Ÿåº¦æ…¢,å¾ˆå®‰å…¨,ä¸éœ€è¦æŠŠç§˜é’¥åˆ†å‘,å®¢æˆ·ç«¯åˆ©ç”¨å…¬é’¥åŠ å¯†çš„æ•°æ®,åªèƒ½æ˜¯æ‹¥æœ‰ç§˜é’¥çš„æœåŠ¡å™¨è§£å¯†</p>
<p>åˆ©ç”¨éå¯¹ç§°åŠ å¯†çš„ç‰¹æ€§ä¼ é€’  å®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºå¯†é’¥ ,è¾¾åˆ°åªæœ‰æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯äº’ç›¸çŸ¥é“çš„å¯†é’¥,ä»è€Œä½¿ç”¨å¯†é’¥è¿›è¡Œ(é«˜é€Ÿç®€å•çš„)å¯¹ç§°åŠ å¯†æ•°æ®.</p>
<p><strong>ç¬¬ä¸€éƒ¨åˆ†:ä¿¡ä»»æ‰€æœ‰</strong></p>
<p>è¿™å°±æ˜¯,æˆ‘ä¸ç®¡æ˜¯è°ä¼ é€’çš„æ¶ˆæ¯,ä¸æ˜¯ä½ å®¶æœåŠ¡å™¨ä¼ é€’çš„æ¶ˆæ¯,ä½ ä¹Ÿä¼šä¿¡</p>
<p><strong>Api.java</strong> (æä¾›okhttpå®ä¾‹,å¹¶åˆ›å»ºRetroitæœåŠ¡)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">OkHttpClient okHttpClient = new OkHttpClient.Builder()</span><br><span class="line">               .hostnameVerifier(new HostnameVerifier() &#123;</span><br><span class="line">                   @Override</span><br><span class="line">                   public boolean verify(String hostname, SSLSession session) &#123;</span><br><span class="line">                       return true;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;)</span><br><span class="line">               .sslSocketFactory(createSSLSocketFactory())</span><br><span class="line">               .build();</span><br><span class="line">               </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">//è¿™é‡Œæ˜¯åˆ›å»ºä¸€ä¸ªSSLSocketFactory,æä¾›ç»™ä¸Šé¢çš„ .sslSocketFactory()</span><br><span class="line">private  SSLSocketFactory createSSLSocketFactory() &#123;</span><br><span class="line">       SSLSocketFactory ssfFactory = null;</span><br><span class="line">       try &#123;</span><br><span class="line">           SSLContext sc = SSLContext.getInstance(&quot;TLS&quot;);</span><br><span class="line">           sc.init(null, new TrustManager[]&#123;new TrustAllCerts()&#125;, new SecureRandom());</span><br><span class="line">           ssfFactory = sc.getSocketFactory();</span><br><span class="line">       &#125; catch (Exception e) &#123;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       return ssfFactory;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æ¶‰åŠåˆ°<strong>TrustAllCerts.java</strong>,å¯ä»¥çœ‹åˆ°åªæ˜¯å®ç°X509TrustManager,æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é»˜è®¤å®ç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2018/1/8 ä¸‹åˆ2:25</span><br><span class="line"> */</span><br><span class="line">public class TrustAllCerts implements X509TrustManager &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException &#123;&#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException &#123;&#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public X509Certificate[] getAcceptedIssuers() &#123;</span><br><span class="line">        return new X509Certificate[0];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå°±ä»¥åŠå¯ä»¥äº†,ä¿¡ä»»æ‰€æœ‰çš„è¿æ¥</p>
<hr>
<p><strong>ç¬¬äºŒéƒ¨åˆ†:(å¼ºéªŒè¯)</strong></p>
<p>æˆ‘åªä¿¡ä»»è¯ä¹¦åˆæ³•çš„æœåŠ¡å™¨ä¼ é€’çš„æ•°æ®.</p>
<ul>
<li>æŸ¥çœ‹Httpsçš„è¯ä¹¦</li>
</ul>
<p><img src="images/https_zhengshu.png" alt="httpsè¯ä¹¦"></p>
<p>åœ¨æµè§ˆå™¨ä¸Šçœ‹åˆ°è¿™ä¸ª,è¿™ä¸ªå·²ç»æ˜¯æˆ‘æŠŠè¯ä¹¦æ·»åŠ ä¸ºä¿¡ä»»äº†,æ‰€ä»¥ä»–æ˜¯ä¸€ä¸ª <code>å®‰å…¨</code> çš„æ ‡å¿—</p>
<ul>
<li>åˆ†æ</li>
</ul>
<p><img src="images/https_root.png" alt="httpsè¯ä¹¦"></p>
<p>è¿™é‡Œæ˜¯æˆ‘æŸ¥çœ‹å½“å‰ç½‘ç«™è¯ä¹¦çš„ç»“æ„</p>
<p>æœ€é¡¶â€”æ˜¯æ ¹è¯ä¹¦,åˆ°æœŸæ—¶é—´æ˜¯2028å¹´</p>
<p>æœ€åº•â€”æ˜¯æˆ‘å¸è¯ä¹¦,åˆ°æœŸæ—¶é—´æ˜¯2018.12.9æ—¥</p>
<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥å‘ç°,æˆ‘ä»¬ç½‘ç«™çš„è¯ä¹¦æ˜¯æœ‰æ—¶é—´é™åˆ¶çš„,é‚£ä¹ˆå°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜,åˆ°äº†2018.12.9è¿™ä¸€å¤©æ€ä¹ˆåŠ.</p>
<blockquote>
<p>æˆ‘ä¹Ÿä¸çŸ¥é“ä¼šæ€ä¹ˆæ ·,åº”è¯¥æ˜¯ç»­ç­¾å§!é‚£ä¹ˆä¸‡ä¸€è¿™ä¸ªè¯ä¹¦å˜åŒ–äº†æ€ä¹ˆåŠ?</p>
</blockquote>
<p>æ‰€ä»¥,æˆ‘ä»¬åº”è¯¥æŠŠæ ¹è¯ä¹¦ç½®ä¸ºä¿¡ä»».</p>
<ul>
<li>ä¸‹è½½ä¿å­˜</li>
</ul>
<p><img src="images/https_save.png" alt="httpsè¯ä¹¦"></p>
<p>Macçš„åœ¨  é’¥åŒ™ä¸²è®¿é—®  ä¸­</p>
<p>Windows æ²¡æ³•æ”¾å›¾,åœ¨chromeä¸ŠæŸ¥çœ‹è¯ä¹¦çš„æ—¶å€™åº”è¯¥å°±èƒ½ä¿å­˜.</p>
<p><strong>HttpsUtils.java </strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2018/1/10 ä¸‹åˆ5:07</span><br><span class="line"> * æ”¯æŒhttpsçš„å·¥å…·ç±»</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">public class HttpsUtils &#123;</span><br><span class="line">    private static final String TAG = &quot;OkHttp&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * åˆ›å»ºä¸€ä¸ªç©ºç™½çš„KeyStore</span><br><span class="line">     * @return KeyStore</span><br><span class="line">     * @throws GeneralSecurityException</span><br><span class="line">     */</span><br><span class="line">    private static KeyStore createEmptyKeyStore() throws GeneralSecurityException &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());</span><br><span class="line">            //æ­¤å¤„å¯†ç éšæ„,ä¸ä¼šäº§ç”Ÿé—®é¢˜</span><br><span class="line">            keystore.load(null, &quot;password&quot;.toCharArray());</span><br><span class="line">            return keystore;</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * TrustManager  ç”Ÿæˆ</span><br><span class="line">     * @return</span><br><span class="line">     * @throws GeneralSecurityException</span><br><span class="line">     */</span><br><span class="line">    private static TrustManager[] generateTrustManager() throws GeneralSecurityException &#123;</span><br><span class="line"></span><br><span class="line">        //åˆ›å»ºä¸€ä¸ªX.509æ ¼å¼çš„CertificateFactory</span><br><span class="line">        CertificateFactory certificateFactory = CertificateFactory.getInstance(&quot;X.509&quot;);</span><br><span class="line"></span><br><span class="line">        Certificate ca;</span><br><span class="line">        //è¯ä¹¦å·¥å‚æ ¹æ®è¯ä¹¦æ–‡ä»¶çš„æµç”Ÿæˆè¯ä¹¦Certificate</span><br><span class="line">        InputStream assets = App.getContext().getResources().openRawResource(R.raw.rootca);</span><br><span class="line">        ca = certificateFactory.generateCertificate(assets);</span><br><span class="line">        Log.e(TAG, &quot;trustManager: ca = &quot; + ((X509Certificate) ca).getSubjectDN() );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //åˆ›å»ºKeyStoreï¼Œç”¨æ¥å­˜å‚¨ä¿¡ä»»è¯ä¹¦</span><br><span class="line">        KeyStore keyStor = createEmptyKeyStore();</span><br><span class="line">        keyStor.setCertificateEntry(&quot;ca&quot;,ca);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //åˆ›å»ºä¸€ä¸ªé»˜è®¤ç±»å‹çš„TrustManagerFactory</span><br><span class="line">        String defaultAlgorithm = TrustManagerFactory.getDefaultAlgorithm();</span><br><span class="line">        TrustManagerFactory tmf = TrustManagerFactory.getInstance(defaultAlgorithm);</span><br><span class="line"></span><br><span class="line">        //ç”¨keyStoreå®ä¾‹åˆå§‹åŒ–TrustManagerFactory,æ­¤æ—¶TrustManagerFactoryä¼šä¿¡ä»»æˆ‘ä»¬ä¿å­˜çš„è¯ä¹¦</span><br><span class="line">        tmf.init(keyStor);</span><br><span class="line"></span><br><span class="line">        //é€šè¿‡tmfè·å–TrustManageræ•°ç»„ï¼ŒTrustManagerä¹Ÿä¼šä¿¡ä»»keyStorä¸­çš„è¯ä¹¦</span><br><span class="line"></span><br><span class="line">        return tmf.getTrustManagers();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æä¾›ä¸€ä¸ªä¸€ä¸ªSSLSocketFactory</span><br><span class="line">     * @return SSLSocketFactoryå®ä¾‹</span><br><span class="line">     */</span><br><span class="line">    public static SSLSocketFactory generateSSLSocketFactory()  &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            SSLContext sc = SSLContext.getInstance(&quot;TLS&quot;);</span><br><span class="line">            sc.init(null, generateTrustManager(), new SecureRandom());</span><br><span class="line">            Log.e(TAG, &quot;generateSSLSocketFactory &quot;);</span><br><span class="line">            return sc.getSocketFactory();</span><br><span class="line">        &#125; catch (GeneralSecurityException e) &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨é‡Šå¾ˆæ¸…æ¥šäº†.</p>
<p><strong>å…³é”®:</strong></p>
<p>1.æ‹¿åˆ°å¸§æ•°çš„æµ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">InputStream assets = App.getContext().getResources().openRawResource(R.raw.rootca);</span><br></pre></td></tr></table></figure>
<p>2.ä¿å­˜åˆ°keystore</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">KeyStore keyStor = createEmptyKeyStore();</span><br><span class="line">keyStor.setCertificateEntry(&quot;ca&quot;,ca);</span><br></pre></td></tr></table></figure>
<p>3.åˆå§‹åŒ–å¹¶æ‹¿åˆ°TrustManager[]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tmf.init(keyStor);</span><br><span class="line">tmf.getTrustManagers()</span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨å³å¯:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//è¿™æ ·å°±Ok</span><br><span class="line">OkHttpClient okHttpClient = new OkHttpClient.Builder()</span><br><span class="line">                .hostnameVerifier((hostname, session) -&gt; true)</span><br><span class="line">                .sslSocketFactory(HttpsUtils.generateSSLSocketFactory())</span><br><span class="line">                .build();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¶…å¥½çš„ä¸¤ç¯‡</p>
<p><a href="http://blog.csdn.net/lmj623565791/article/details/48129405" target="_blank" rel="noopener">http://blog.csdn.net/lmj623565791/article/details/48129405</a></p>
<p><a href="http://blog.csdn.net/iispring/article/details/51615631" target="_blank" rel="noopener">http://blog.csdn.net/iispring/article/details/51615631</a></p>
</blockquote>
]]></content>
      
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[WebViewæ’­æ”¾H5è§†å±æ²¡æœ‰ç”»é¢,åªæœ‰å£°éŸ³]]></title>
      <url>/Bug/WebView%E6%92%AD%E6%94%BEH5%E8%A7%86%E5%B1%8F%E6%B2%A1%E6%9C%89%E7%94%BB%E9%9D%A2-%E5%8F%AA%E6%9C%89%E5%A3%B0%E9%9F%B3/</url>
      <content type="html"><![CDATA[<p><strong>æè¿°:ç‚¹å‡»æ’­æ”¾æŒ‰é’®å,åªèƒ½å¬åˆ°å£°éŸ³,è€Œç”»é¢æ˜¯ç™½çš„â€¦.ä¸€ç›´ç™½â€¦æƒ³åˆ°åº”è¯¥æ˜¯ç¡¬ä»¶åŠ é€Ÿçš„é—®é¢˜</strong></p>
<p><strong>1.ç¡®è®¤ç¡¬ä»¶åŠ é€Ÿ(éæ­¤å› ç´ )</strong></p>
<p>åœ¨WebViewActivity.javaä¸­å‘ç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webView.setLayerType(View.LAYER_TYPE_HARDWARE, null);</span><br></pre></td></tr></table></figure>
<p><strong>2.ç¡®è®¤AndroidManifest.xml(éæ­¤å› ç´ )</strong></p>
<p>applicationèŠ‚ç‚¹ä¸‹å¹¶æ²¡æœ‰å‘ç°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:hardwareAccelerated=&quot;true&quot;</span><br></pre></td></tr></table></figure>
<p>åœ¨WebViewActivityä¸­,ä¹Ÿæ— è¯¥é…ç½®</p>
<ul>
<li>å°è¯•: WebViewActivity.javaä¸­,æ³¨é‡Š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#webView.setLayerType(View.LAYER_TYPE_HARDWARE, null);</span><br></pre></td></tr></table></figure>
<p>åœ¨AndroidManifest.xmlèŠ‚ç‚¹ä¸‹åŠ å…¥<code>android:hardwareAccelerated=&quot;true&quot;</code></p>
<ul>
<li>ç»“æœâ€¦â€¦æ²¡ç”¨</li>
</ul>
<p><strong>3.æ£€æŸ¥activity_web_view.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">WebView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/webView"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:scrollbars</span>=<span class="string">"none"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:visibility</span>=<span class="string">"@&#123;showError?View.GONE:View.VISIBLE&#125;"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ²¡é—®é¢˜.</p>
<p>BUTâ€¦.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layerType</span>=<span class="string">"software"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">layout</span>=<span class="string">"@layout/layout_toolbar"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ProgressBar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/web_load_progress"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"2dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:indeterminateOnly</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:max</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:progress</span>=<span class="string">"@&#123;progress&#125;"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:progressDrawable</span>=<span class="string">"@drawable/progress_bar_states"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:visibility</span>=<span class="string">"gone"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">WebView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/webView"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scrollbars</span>=<span class="string">"none"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:visibility</span>=<span class="string">"@&#123;showError?View.GONE:View.VISIBLE&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>####çˆ¶å¸ƒå±€ç«Ÿç„¶<code>android:layerType=&quot;software&quot;</code></p>
<ul>
<li>è§£å†³,åˆ æ‰è¯¥å±æ€§å³å¯</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Bug </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Bug </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Roomä¸­List<>ä½¿ç”¨è¯¦è§£]]></title>
      <url>/Android/Room%E4%B8%ADList-%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æ‰‹æ‘¸æ‰‹æ•™ä½ åœ¨Roomä¸­ä½¿ç”¨List<object>.</object></p>
</blockquote>
<p>å®é™…é¡¹ç›®æœ‰å¾ˆå¤šè¿™æ ·çš„ç»“æ„:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;id&quot;: &quot;001&quot;,</span><br><span class="line">  &quot;name&quot;: &quot;ç‹è¯›é­”&quot;,</span><br><span class="line">  &quot;age&quot;: 2018,</span><br><span class="line">  &quot;books&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;bookId&quot;: 10081,</span><br><span class="line">      &quot;userId&quot;: 1,</span><br><span class="line">      &quot;book&quot;: &quot;æ–­ç½ªå°å­¦&quot;,</span><br><span class="line">      &quot;desc&quot;: &quot;æ¼«ç”»è®²è¿°äº†ææ€ç¥ã€ç‹è¯›é­”å’Œåˆ˜æ–©ä»™ä¸‰ä½å°‘å¹´ï¼Œä¸ºäº†åä¸‡å°å­¦ç”Ÿçš„æœªæ¥ã€ä¸ºäº†æ”¹å˜è¢«è¯…å’’çš„å‘½è¿ï¼Œç›¸èšåœ¨ç‹¼ç‰™åŒºé£è™è·¯ç§ç«‹æ–­ç½ªå°å­¦ï¼Œèª“æ­»æ‰“è´¥å››å¹´çº§çš„é­”ç¥èµµæ—¥å¤©çš„æ•…äº‹ã€‚&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;bookId&quot;: 10088,</span><br><span class="line">      &quot;userId&quot;: 1,</span><br><span class="line">      &quot;book&quot;: &quot;ç‹‚éœ¸å¤©ä¸‹ä¹‹æ–­ç½ªå­¦å›­&quot;,</span><br><span class="line">      &quot;desc&quot;: &quot;ã€Šç‹‚éœ¸å¤©ä¸‹ä¹‹æ–­ç½ªå­¦å›­ã€‹ï¼Œåæ¥å› ä¸ºåå­—å¤ªé•¿ï¼Œè€Œä¸”â€œå­¦å›­â€å’Œâ€œå­¦é™¢â€å®¹æ˜“æ··æ·†çš„åŸå› è€Œæ”¹åã€‚&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå°±æ˜¯,ç±»ä¼¼booksè¿™æ ·çš„,List<object>ä½œä¸ºä¸€ä¸ªå…ƒç´ å­˜åœ¨.</object></p>
<blockquote>
<p>ä¸‹é¢å°±ä»¥ä¸Šé¢çš„ç»“æ„ä¸ºä¾‹,åšä¸€ä¸ªç®€å•çš„æ¼”ç¤º,æŒ‰ç…§æœ€ç®€ç­”çš„æ–¹æ³•å®ç°.</p>
</blockquote>
<p><strong>1.æ·»åŠ ä¾èµ–</strong></p>
<p><a href="https://developer.android.google.cn/topic/libraries/architecture/adding-components.html" target="_blank" rel="noopener">https://developer.android.google.cn/topic/libraries/architecture/adding-components.html</a></p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯,å¦‚æœä½ åœ¨kotlinä¸­ä½¿ç”¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">'kotlin-kapt'</span></span><br><span class="line">...</span><br><span class="line">dependencies&#123;</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line">  	<span class="comment">//è¿™ä¸ªæ— æ³•ç”Ÿæˆä»£ç ,è¦ç”¨ä¸‹é¢çš„é‚£ä¸€æ¡,ä¸è¦ç–å¿½å¿˜æ‰äº†.</span></span><br><span class="line">    <span class="comment">//annotationProcessor "android.arch.persistence.room:compiler:1.0.0"</span></span><br><span class="line">    </span><br><span class="line">    kapt <span class="string">"android.arch.persistence.room:compiler:1.0.0"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€å®šè®°å¾—ä½¿ç”¨kapt,è¦ä¸ç„¶å°±ä¼šé‡åˆ°è¿™ä¸ªBUG.</p>
<p><strong>2.åˆ›å»ºè¡¨</strong></p>
<ul>
<li><p>User.javaè¡¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ç‹è¯›é­” 2018/1/3 ä¸‹åˆ1:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Entity</span>(tableName = <span class="string">"users"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Entity ä¸­æŒ‡å®šäº†è¡¨å</p>
<p>@PrimaryKey ä¸»é”®</p>
<p>è¿™å¼ è¡¨users ç”¨äºä¿å­˜ç”¨æˆ·æ•°æ®</p>
</li>
</ul>
<ul>
<li><p>Book.javaè¡¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ç‹è¯›é­” 2018/1/3 ä¸‹åˆ1:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Entity</span>(foreignKeys = &#123;</span><br><span class="line">        <span class="meta">@ForeignKey</span>(</span><br><span class="line">                entity = User.class,</span><br><span class="line">                parentColumns =&#123;<span class="string">"id"</span>&#125;,</span><br><span class="line">                childColumns = &#123;<span class="string">"userId"</span>&#125;)</span><br><span class="line">&#125;,tableName = <span class="string">"books"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> bookId;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> userId;<span class="comment">//åŒUser.javaä¸­çš„id</span></span><br><span class="line">    <span class="keyword">public</span> String book;</span><br><span class="line">    <span class="keyword">public</span> String desc;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Entity ä¸­</p>
<ul>
<li>foreignKeys = {} ä¸­å¤–é”®,å¯ä»¥æ˜¯å¤šä¸ª,è¿™é‡Œåªå…³è”äº†Userè¡¨</li>
<li>tableName = â€œbooksâ€ æŒ‡å®šäº†è¡¨å</li>
</ul>
<p>@PrimaryKey è¯¥è¡¨ä¸»é”®</p>
<p>â€‹</p>
<p>â€‹</p>
</li>
<li><p>UserAndBook.javaè¡¨ â€”-UserAndBookåªæ˜¯è¾…åŠ©,ä¸ä½œä¸ºä¸€å¼ è¡¨å­˜åœ¨.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ç‹è¯›é­” 2018/1/3 ä¸‹åˆ1:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserAndBook</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Embedded</span>   <span class="comment">//è¯·çœ‹ä¹‹å‰çš„æ–‡ç« ,è¿™æ˜¯æŒ‡æŠŠUserä¸­æ‰€æœ‰å…ƒç´ å¸¦å…¥åˆ°è¿™é‡Œä½œä¸ºå…ƒç´ å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">public</span> User userEntity;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">//@Relation</span></span><br><span class="line">    <span class="meta">@Relation</span>(parentColumn = <span class="string">"id"</span>,entityColumn = <span class="string">"userId"</span>,entity = Book.class)</span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; books;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Embedded   è¯·çœ‹å¦ä¸€ç¯‡,æœ‰è§£é‡Š</p>
<p>â€‹</p>
<p>@Relation <a href="https://developer.android.google.cn/reference/android/arch/persistence/room/Relation.html" target="_blank" rel="noopener"> ç‚¹è¿™é‡Œå»çœ‹å®˜æ–¹æ–‡æ¡£  </a></p>
<blockquote>
<p>A convenience annotation which can be used in a Pojo to automatically fetch relation entities. When the Pojo is returned from a query, all of its relations are also fetched by Room.</p>
</blockquote>
<p>ä¸ªäººä»¥ä¸ºå°±æ˜¯ä¸€æ³¨è§£,æŒ‡æ˜å…³ç³»,å¯ä»¥æŠŠå®ä½“å…³è”èµ·æ¥,ç„¶åè‡ªåŠ¨ç»„è£…èµ·æ¥.   </p>
<p>â€‹</p>
<p>å¹¶ä¸”åœ¨æ–‡æ¡£ä¸­è¿˜å±•ç¤ºäº†ä¸€ç§é«˜ç«¯çš„åŠŸèƒ½,ç”¨ä¸Šé¢åšä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@Relation</span></span><br><span class="line">    <span class="meta">@Relation</span>(parentColumn = <span class="string">"id"</span>,entityColumn = <span class="string">"userId"</span>,</span><br><span class="line">              entity = Book.class ,projection = &#123;<span class="string">"book"</span>&#125;)</span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; bookNames;</span><br></pre></td></tr></table></figure>
<p>è§£é‡Šä¸€ä¸‹,projectionæŒ‡å®šäº†è¦å–å‡ºçš„å€¼,å½“å‰æŒ‡æ˜è¦åœ¨ booksè¡¨ä¸­å¯»æ‰¾ç¬¦åˆæ¡ä»¶parentColumn = â€œidâ€,entityColumn = â€œuserIdâ€   çš„é¡¹,æ‰¾åˆ°ä¹‹åä¼šæ‹¿åˆ°bookè¿™ä¸ªå€¼å¹¶è¿”å›.</p>
</li>
</ul>
<p><strong>3.Daoå®ç°</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ç‹è¯›é­” 2018/1/3 ä¸‹åˆ4:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Dao</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">UserAndBookDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert</span>(onConflict = OnConflictStrategy.REPLACE)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert</span>(onConflict = OnConflictStrategy.REPLACE)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(List&lt;Book&gt; books)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transaction</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(UserAndBook userAndBook)</span></span>&#123;</span><br><span class="line">        insert(userAndBook.userEntity);</span><br><span class="line">        insert(userAndBook.books);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Query</span>(<span class="string">"SELECT * FROM users"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> List&lt;UserAndBook&gt; <span class="title">getAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>insert(User user);</code>  ,<code>insert(List&lt;Book&gt; books);</code></p>
<p>ä¸¤ä¸ªæ–¹æ³•,ä¹Ÿå¯ä»¥ç§æœ‰åŒ–,åªå¯¹å¤–æä¾›<code>insert(UserAndBook userAndBook)</code></p>
<p>æœ€è¿‘æ¢å…¬å¸é¡¹ç›®çš„æ•°æ®åº“,ç”¨sql,çœŸçš„æœ‰æ„æ€,å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°å¾ˆå¤šåŠŸèƒ½</p>
<p><strong>4.å»ºç«‹æ•°æ®åº“</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ç‹è¯›é­” 2017/10/24 ä¸Šåˆ10:13</span></span><br><span class="line"><span class="comment"> * æ•°æ®åº“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Database</span>(entities = &#123;Book.class, User.class&#125;, </span><br><span class="line">          version = <span class="number">1</span>, exportSchema = <span class="keyword">false</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AppDB</span> <span class="keyword">extends</span> <span class="title">RoomDatabase</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"AppDB"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ•°æ®åº“å®ä¾‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> AppDB sInstance;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String DATABASE_NAME = <span class="string">"developer.db"</span>;</span><br><span class="line">    <span class="keyword">private</span> ObservableBoolean mIsDatabaseCreated = <span class="keyword">new</span> ObservableBoolean(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">  	</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> UserAndBookDao <span class="title">userbook</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å•ä¾‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> AppDB <span class="title">getInstance</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (AppDB.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (sInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    sInstance = buildDatabase(context);</span><br><span class="line">                    sInstance.updateDatabaseCreated(context);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sInstance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Build the database.</span></span><br><span class="line"><span class="comment">     * creates a new instance of the database.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> AppDB <span class="title">buildDatabase</span><span class="params">(Context appContext)</span> </span>&#123;</span><br><span class="line">         AppDB appDB = Room.databaseBuilder(appContext, AppDB.class, DATABASE_NAME)</span><br><span class="line">                .addCallback(<span class="keyword">new</span> Callback() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@NonNull SupportSQLiteDatabase db)</span> </span>&#123;</span><br><span class="line">                        <span class="keyword">super</span>.onCreate(db);</span><br><span class="line">                        AppDB database = AppDB.getInstance(appContext);</span><br><span class="line">                        database.setDatabaseCreated();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOpen</span><span class="params">(@NonNull SupportSQLiteDatabase db)</span> </span>&#123;</span><br><span class="line">                        <span class="keyword">super</span>.onOpen(db);</span><br><span class="line">                        Log.e(TAG, <span class="string">"onOpen: "</span> + db.getPath());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> appDB;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Check whether the database already exists and expose it via </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateDatabaseCreated</span><span class="params">(<span class="keyword">final</span> Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (context.getDatabasePath(DATABASE_NAME).exists()) &#123;</span><br><span class="line">            setDatabaseCreated();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setDatabaseCreated</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mIsDatabaseCreated.set(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ObservableBoolean <span class="title">getDatabaseCreated</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mIsDatabaseCreated;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨,åœ¨Applicationä¸­æ·»åŠ äº†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> AppDB <span class="title">getDatabase</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> AppDB.getInstance(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>5.ä½¿ç”¨</strong></p>
<p>è¿™é‡Œçš„ä½¿ç”¨æ–¹å¼,ä¸å»ºè®®ä½¿ç”¨,å¤ªç²—æš´äº†.</p>
<p>å¯ä»¥å­¦å­¦Demo,Googleå‡ºçš„<a href="https://github.com/googlesamples/android-architecture-components" target="_blank" rel="noopener">googlesamples/android-architecture-components</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">class RoomActivity : BindingActivity&lt;ActivityRoomBinding, RoomViewModel&gt;() &#123;</span><br><span class="line">    val gson = Gson()</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">getBundle</span><span class="params">(extras: Bundle)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">layoutID</span><span class="params">()</span>: Int </span>= R.layout.activity_room</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">initViews</span><span class="params">(savedInstanceState: Bundle?)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//ç‚¹å‡»äº‹ä»¶  ADDæŒ‰é’®,æ·»åŠ æ•°æ®åˆ°æ•°æ®åº“</span></span><br><span class="line">        mBindingView.button.setOnClickListener(&#123;</span><br><span class="line">            val userBook = UserAndBook()</span><br><span class="line">            val jsonStr = FileUtils.getJson(<span class="keyword">this</span>, <span class="string">"data.txt"</span>)</span><br><span class="line">            val objectJson = JsonParser().parse(jsonStr).asJsonObject</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è·å–ç”¨æˆ·</span></span><br><span class="line">            val user = objectJson.get(<span class="string">"user"</span>)</span><br><span class="line">            userBook.userEntity = gson.fromJson&lt;User&gt;(user, User::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">            //ä¿å­˜ç”¨æˆ·</span></span><br><span class="line"><span class="class">            <span class="title">Observable</span></span></span><br><span class="line"><span class="class">            	.<span class="title">empty</span>&lt;<span class="title">Any</span>&gt;()</span></span><br><span class="line"><span class="class">            	.<span class="title">observeOn</span>(<span class="title">Schedulers</span>.<span class="title">io</span>())</span></span><br><span class="line">            	.subscribe(object : EmptyObserver&lt;Any?&gt;() &#123;</span><br><span class="line">                	<span class="function">override fun <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    	App.getDatabase().userbook().insert(userBook.userEntity)</span><br><span class="line">                	&#125;</span><br><span class="line">            	&#125;)</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è·å–ä¹¦ç±</span></span><br><span class="line">            val books = objectJson.get(<span class="string">"books"</span>)</span><br><span class="line">            userBook.books = gson.fromJson&lt;ArrayList&lt;Book&gt;&gt;</span><br><span class="line">            					(books, object : TypeToken&lt;List&lt;Book&gt;&gt;() &#123;&#125;.type)</span><br><span class="line">            <span class="comment">//ä¿å­˜ä¹¦ç±</span></span><br><span class="line">            Observable</span><br><span class="line">            	.empty&lt;Any&gt;()</span><br><span class="line">            	.observeOn(Schedulers.io())</span><br><span class="line">            	.subscribe(object : EmptyObserver&lt;Any?&gt;() &#123;</span><br><span class="line">               		 <span class="function">override fun <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    	App.getDatabase().userbook().insert(userBook.books)</span><br><span class="line">                	&#125;</span><br><span class="line">            	&#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">//ç‚¹å‡»äº‹ä»¶,æŒ‰é’®QUERY   æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">        mBindingView.button2.setOnClickListener &#123;</span><br><span class="line">            Flowable.create(FlowableOnSubscribe&lt;List&lt;UserAndBook&gt;&gt; &#123; e -&gt;</span><br><span class="line">                val userBook = App.getDatabase().userbook().all</span><br><span class="line">                e.onNext(userBook)</span><br><span class="line">                e.onComplete()</span><br><span class="line">            &#125;, BackpressureStrategy.DROP)</span><br><span class="line">                    .compose(DatabaseTransformer())</span><br><span class="line">                    .subscribe(object : DatabaseSubscriber&lt;List&lt;UserAndBook&gt;&gt;() &#123;</span><br><span class="line">                        <span class="function">override fun <span class="title">onNext</span><span class="params">(userAndBooks: List&lt;UserAndBook&gt;)</span> </span>&#123;</span><br><span class="line">                            mBindingView.data = userAndBooks[<span class="number">0</span>]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">layout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">import</span> <span class="attr">type</span>=<span class="string">"com.wangzhumo.app.data.UserAndBook"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">import</span> <span class="attr">type</span>=<span class="string">"com.wangzhumo.app.data.User"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">import</span> <span class="attr">type</span>=<span class="string">"com.wangzhumo.app.data.Book"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">variable</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">"data"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"com.wangzhumo.app.data.UserAndBook"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/button"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignParentLeft</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignParentStart</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignParentTop</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">"57dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">"57dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">"125dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"Add"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/button2"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignBaseline</span>=<span class="string">"@+id/button"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignBottom</span>=<span class="string">"@+id/button"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignParentEnd</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignParentRight</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginEnd</span>=<span class="string">"56dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginRight</span>=<span class="string">"56dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"Query"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignParentLeft</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignParentStart</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_below</span>=<span class="string">"@+id/button"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">"68dp"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/textView"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignParentLeft</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignParentStart</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignParentTop</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"36dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginStart</span>=<span class="string">"36dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">"32dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">"@&#123;data.userEntity.name&#125;"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/textView2"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignLeft</span>=<span class="string">"@+id/textView"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignStart</span>=<span class="string">"@+id/textView"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_below</span>=<span class="string">"@+id/textView"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_marginTop</span>=<span class="string">"41dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">"@&#123;data.books.get(0).book&#125;"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/textView3"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignLeft</span>=<span class="string">"@+id/textView2"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignStart</span>=<span class="string">"@+id/textView2"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">"@&#123;data.books.get(0).desc&#125;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="images/room_shot.png" alt="å¦‚å›¾"></p>
<p>â€‹    </p>
<p>â€‹     </p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Room </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Androidå­—ä½“ä¸è·Ÿéšç³»ç»Ÿå˜åŒ–]]></title>
      <url>/Android/Android%E5%AD%97%E4%BD%93%E4%B8%8D%E8%B7%9F%E9%9A%8F%E7%B3%BB%E7%BB%9F%E5%8F%98%E5%8C%96/</url>
      <content type="html"><![CDATA[<p>å·²çŸ¥çš„æ–¹æ³•æœ‰ä¸¤ç§:</p>
<p><strong>ç¬¬ä¸€ç§</strong></p>
<p>ä¸ä½¿ç”¨sp è€Œä½¿ç”¨ dp</p>
<p><strong>ç¬¬äºŒç§</strong></p>
<p>åœ¨Applicationä¸­åŠ å…¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void onConfigurationChanged(Configuration newConfig) &#123;</span><br><span class="line">    if (newConfig.fontScale != 1)</span><br><span class="line">        getResources();</span><br><span class="line">    super.onConfigurationChanged(newConfig);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public Resources getResources() &#123;</span><br><span class="line">     Resources res = super.getResources();</span><br><span class="line">     if (res.getConfiguration().fontScale != 1) &#123;</span><br><span class="line">        Configuration newConfig = new Configuration();</span><br><span class="line">        newConfig.setToDefaults();</span><br><span class="line">        res.updateConfiguration(newConfig, res.getDisplayMetrics()); </span><br><span class="line">     &#125;</span><br><span class="line">     return res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Apk Install çš„å„ç§é—®é¢˜]]></title>
      <url>/Bug/Apk-Install-%E7%9A%84%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p><strong>[INSTALL_FAILED_TEST_ONLY: installPackageLI]</strong></p>
<ul>
<li><p>æ–¹æ³•1ï¼š<br>AndroidManifest.xml åŠ å…¥android:testOnly=â€falseâ€ã€‚</p>
</li>
<li><p>æ–¹æ³•2ï¼š<br>adb install -t *.apk</p>
</li>
</ul>
]]></content>
      
        <categories>
            
            <category> Bug </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Bug </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android StudioæŠ¥é”™Error Running app: cannot debug application]]></title>
      <url>/Bug/Android-Studio%E6%8A%A5%E9%94%99Error-Running-app-cannot-debug-application/</url>
      <content type="html"><![CDATA[<p>Android StudioæŠ¥é”™Error Running app: cannot debug application</p>
<p>è¿™é‡Œæœ‰ä¸€ä½ä»å…„å¸®å¿™ç¿»è¯‘äº†.</p>
<blockquote>
<p><a href="http://blog.csdn.net/yishichangan1/article/details/77451486" target="_blank" rel="noopener">http://blog.csdn.net/yishichangan1/article/details/77451486</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Cannot debug application xx.xxx.xxx.app on device lge_nexus_5x(æ­¤å¤„è¡¨ç¤ºä½ çš„æ‰‹æœºå‹å·).</span><br><span class="line">ä½ çš„xxxappä¸èƒ½åœ¨å‹å·ä¸ºNexus 5xçš„LGEæ‰‹æœºä¸Šè°ƒè¯•ã€‚</span><br><span class="line"></span><br><span class="line">This application does not have the debuggable attribute enabled in its manifest.</span><br><span class="line">è¿™ä¸ªé¡¹ç›®åœ¨æ¸…å•æ–‡ä»¶ï¼ˆAndroidManifest.xmlï¼‰ä¸­æ²¡æœ‰è®¾ç½®å¯ä»¥è°ƒè¯•çš„å‚æ•°ã€‚</span><br><span class="line"></span><br><span class="line">If you have manually set it in the manifest, then remove it and let the IDE automatically assign it.</span><br><span class="line">å¦‚æœä½ å·²ç»æ‰‹åŠ¨åœ¨æ¸…å•æ–‡ä»¶ç§è®¾ç½®äº†è¿™ä¸ªå±æ€§ï¼Œè¯·removeæ‰ï¼Œè®©IDEè‡ªåŠ¨ç”Ÿæˆã€‚</span><br><span class="line"></span><br><span class="line">If you are using Gradle, make sure that your current variant is debuggable.</span><br><span class="line">å¦‚æœä½ ä½¿ç”¨Gradleï¼Œç¡®è®¤ä½ ç°åœ¨çš„å˜ä½“æ˜¯å¯è°ƒè¯•çš„ã€‚</span><br></pre></td></tr></table></figure>
<p>####æˆ‘å°±çŸ¥é“æ˜¯æˆ‘è‡ªå·±é€‰äº†releaseâ€¦.æœç„¶</p>
<p><img src="/images/canot_debug.png" alt="cannotdebug"></p>
]]></content>
      
        <categories>
            
            <category> Bug </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Android Studio </tag>
            
            <tag> Bug </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Centos åˆ›å»ºç”¨æˆ·å¹¶å®ç°å…å¯†ç ç™»å½•]]></title>
      <url>/Server/Centos%20%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%B9%B6%E5%AE%9E%E7%8E%B0%E5%85%8D%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æ¯”å¦‚,åˆ›å»ºä¸€ä¸ªåä¸ºwzmçš„è´¦å·</p>
</blockquote>
<p>####åˆ›å»ºè´¦å·</p>
<p>1.åˆ›å»º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# adduser wzm</span><br><span class="line">[root@localhost ~]# passwd wzm</span><br><span class="line"></span><br><span class="line">#æ­¤æ—¶,è¾“å…¥ä¸¤æ¬¡å¯†ç å³å¯</span><br></pre></td></tr></table></figure>
<p>2.èµ‹äºˆsudo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#æ‰¾åˆ°sudoers</span><br><span class="line">[root@localhost ~]# whereis sudoers</span><br><span class="line"></span><br><span class="line">#ä¿®æ”¹sudoersçš„è¯»å†™æƒé™</span><br><span class="line">[root@localhost ~]# chmod -v u+w /etc/sudoers</span><br><span class="line"></span><br><span class="line">#åŠ å…¥æ–°ç”¨æˆ·</span><br><span class="line"></span><br><span class="line">## Allow root to run any commands anywher  </span><br><span class="line">root    ALL=(ALL)       ALL  </span><br><span class="line">linuxidc  ALL=(ALL)       ALL  #è¿™ä¸ªæ˜¯æ–°å¢çš„ç”¨æˆ·</span><br><span class="line"></span><br><span class="line">#æŠŠsudoersæƒé™è¿˜ç»™ä»–</span><br><span class="line">[root@localhost ~]# chmod -v u-w /etc/sudoers</span><br></pre></td></tr></table></figure>
<p>3.å°½æƒ…äº«ç”¨å§</p>
<p>####sshå…å¯†ç ç™»å½•</p>
<p>1.ä¿®æ”¹é…ç½®æ–‡ä»¶<br><code>sudo vim /etc/ssh/sshd_config</code></p>
<p>2.é‡å¯sshæœåŠ¡<br><code>service sshd restart</code></p>
<p>3.ç”Ÿæˆå¯†é’¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br><span class="line">     é»˜è®¤åœ¨ ~/.sshç›®å½•ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š</span><br><span class="line">    id_rsa      ï¼šç§é’¥</span><br><span class="line">    id_rsa.pub  ï¼šå…¬é’¥</span><br></pre></td></tr></table></figure></p>
<p>4.å¯¼å…¥æœ¬æœº<br><code>cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</code></p>
<p>5.ä¸‹è½½åˆ°å®¢æˆ·ç«¯å¹¶è®¾ç½®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">scp [-r] ç”¨æˆ·å@ip:æ–‡ä»¶è·¯å¾„ æœ¬åœ°è·¯å¾„</span><br><span class="line">#ä¸‹è½½æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">scp [-r] æœ¬åœ°æ–‡ä»¶ ç”¨æˆ·å@ip:ä¸Šä¼ è·¯å¾„ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">~/.ssh âŒš 16:27:33</span><br><span class="line">$ scp id_rsa.pub root@45.XX.XX.XX:/home/</span><br><span class="line">id_rsa.pub</span><br></pre></td></tr></table></figure></p>
<p>6.æ”¹æƒé™<br>å¦‚æœå¸Œæœ›sshå…¬é’¥ç”Ÿæ•ˆéœ€æ»¡è¶³è‡³å°‘ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼šã€€ã€€ã€€ã€€ã€€<br>1) .sshç›®å½•çš„æƒé™å¿…é¡»æ˜¯700<br>2) .ssh/authorized_keysæ–‡ä»¶æƒé™å¿…é¡»æ˜¯600</p>
<p>eg:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~ âŒš 16:33:21</span><br><span class="line">$ ssh wzm@45.XX.XX.XX</span><br><span class="line">Last login: Mon Dec 25 16:21:11 2017 from 118.102.XXX.XXX</span><br><span class="line">[wzm@wangzhumo ~]$</span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Server </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Server </tag>
            
            <tag> Linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Androidé¡¹ç›®ä¸­ä½¿ç”¨RxBusè¿›è¡Œé€šè®¯]]></title>
      <url>/Android/Android%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8RxBus%E8%BF%9B%E8%A1%8C%E9%80%9A%E8%AE%AF/</url>
      <content type="html"><![CDATA[<p>åŠ å…¥JakeWhartonå¤§ç¥çš„RxRelay</p>
<p><a href="https://github.com/JakeWharton/RxRelay" target="_blank" rel="noopener">JakeWharton/RxRelay</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &apos;com.jakewharton.rxrelay2:rxrelay:2.0.0&apos;</span><br></pre></td></tr></table></figure></p>
<p>RxBus.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2017/11/30 ä¸‹åˆ6:09</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class RxBus &#123;</span><br><span class="line"></span><br><span class="line">    private Relay&lt;Object&gt; mBus = null;</span><br><span class="line">    private static volatile RxBus mDefaultInstance;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public RxBus() &#123;</span><br><span class="line">        mBus = PublishRelay.create().toSerialized();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static RxBus getDefault() &#123;</span><br><span class="line">        if (mDefaultInstance == null) &#123;</span><br><span class="line">            synchronized (RxBus.class) &#123;</span><br><span class="line">                if (mDefaultInstance == null) &#123;</span><br><span class="line">                    mDefaultInstance = new RxBus();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return mDefaultInstance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å‘é€äº‹ä»¶</span><br><span class="line">     */</span><br><span class="line">    public void post(Object event) &#123;</span><br><span class="line">        mBus.accept(event);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ ¹æ®ä¼ é€’çš„ eventType ç±»å‹è¿”å›ç‰¹å®šç±»å‹(eventType)çš„ è¢«è§‚å¯Ÿè€…</span><br><span class="line">     */</span><br><span class="line">    public &lt;T&gt; Observable&lt;T&gt; toObservable(Class&lt;T&gt; eventType) &#123;</span><br><span class="line">        return mBus.ofType(eventType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * åˆ¤æ–­æ˜¯å¦æœ‰è®¢é˜…è€…</span><br><span class="line">     */</span><br><span class="line">    public boolean hasObservers() &#123;</span><br><span class="line">        return mBus.hasObservers();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å–æ¶ˆè®¢é˜…</span><br><span class="line">     * @param disposable</span><br><span class="line">     */</span><br><span class="line">    public void unregister(Disposable disposable) &#123;</span><br><span class="line">        if (disposable != null &amp;&amp; !disposable.isDisposed()) &#123;</span><br><span class="line">            disposable.dispose();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Scheduler scheduler, Consumer&lt;T&gt; onNext) &#123;</span><br><span class="line">        return toObservable(eventType).observeOn(scheduler).subscribe(onNext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Scheduler scheduler, Consumer&lt;T&gt; onNext, Consumer onError,</span><br><span class="line">                                   Action onComplete, Consumer onSubscribe) &#123;</span><br><span class="line">        return toObservable(eventType).observeOn(scheduler).subscribe(onNext, onError, onComplete, onSubscribe);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Scheduler scheduler, Consumer&lt;T&gt; onNext, Consumer onError,</span><br><span class="line">                                   Action onComplete) &#123;</span><br><span class="line">        return toObservable(eventType).observeOn(scheduler).subscribe(onNext, onError, onComplete);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Scheduler scheduler, Consumer&lt;T&gt; onNext, Consumer onError) &#123;</span><br><span class="line">        return toObservable(eventType).observeOn(scheduler).subscribe(onNext, onError);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Consumer&lt;T&gt; onNext) &#123;</span><br><span class="line">        return toObservable(eventType).observeOn(AndroidSchedulers.mainThread()).subscribe(onNext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Consumer&lt;T&gt; onNext, Consumer onError, Action onComplete, Consumer onSubscribe) &#123;</span><br><span class="line">        return toObservable(eventType).observeOn(AndroidSchedulers.mainThread()).subscribe(onNext, onError, onComplete, onSubscribe);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Consumer&lt;T&gt; onNext, Consumer onError, Action onComplete) &#123;</span><br><span class="line">        return toObservable(eventType).observeOn(AndroidSchedulers.mainThread()).subscribe(onNext, onError, onComplete);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public &lt;T&gt; Disposable register(Class&lt;T&gt; eventType, Consumer&lt;T&gt; onNext, Consumer onError) &#123;</span><br><span class="line">        return toObservable(eventType).observeOn(AndroidSchedulers.mainThread()).subscribe(onNext, onError);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸€ä¸ªé€šç”¨çš„Event.java<br>ä¾æ®è‡ªå·±çš„éœ€è¦åˆ¶å®šå³å¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2017/10/19 ä¸‹åˆ5:38</span><br><span class="line"> *</span><br><span class="line"> * å‘é€äº‹ä»¶åŒ…è£…ç±»</span><br><span class="line"> */</span><br><span class="line">public class Event&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	public static final int EVENT_CLOSE_ALL_ACTIVITY = 10001;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">	 * reserved data</span><br><span class="line">	 */</span><br><span class="line">	private T data;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * this code distinguish between different events</span><br><span class="line">	 */</span><br><span class="line">	private int eventCode = -1;</span><br><span class="line"></span><br><span class="line">	public Event(int eventCode) &#123;</span><br><span class="line">		this(eventCode, null);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Event(int eventCode, T data) &#123;</span><br><span class="line">		this.eventCode = eventCode;</span><br><span class="line">		this.data = data;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * get event code</span><br><span class="line">	 *</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public int getCode() &#123;</span><br><span class="line">		return this.eventCode;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * get event reserved data</span><br><span class="line">	 *</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public T getData() &#123;</span><br><span class="line">		return this.data;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>RxBusçš„ä½¿ç”¨</strong></p>
<p><strong>æ³¨å†Œ</strong></p>
<p>æœ€å¥½æ˜¯å†åŸºç±»ä¸­,åŠ ä¸Š.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">if (useEventBus()) &#123;</span><br><span class="line">            //æ³¨å†Œeventbus</span><br><span class="line">            Disposable disposable = RxBus.getDefault()</span><br><span class="line">                    .register(Event.class, new Consumer&lt;Event&gt;() &#123;</span><br><span class="line">                        @Override</span><br><span class="line">                        public void accept(Event event)  &#123;</span><br><span class="line">                            int eventCode = event.getCode();</span><br><span class="line">                            Log.e(&quot;RxBus&quot;, event.toString());</span><br><span class="line">                            switch (eventCode) &#123;</span><br><span class="line">                                case Event.EVENT_CLOSE_ALL_ACTIVITY:</span><br><span class="line"></span><br><span class="line">                                    break;</span><br><span class="line">                                default:</span><br><span class="line">                                    onEvent(event);</span><br><span class="line">                                    break;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">            addDispose(disposable);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­:</p>
<ul>
<li><p>useEventBus()<br>ç”±å­ç±»å®ç°,æ˜¯å¦å¼€å¯RxBus,é¿å…æµªè´¹</p>
</li>
<li><p>addDispose(disposable);<br>addDispose æ˜¯åŸºç±»çš„æ–¹æ³•</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * RxJava æ·»åŠ è®¢é˜…</span><br><span class="line"> */</span><br><span class="line">protected void addDispose(Disposable disposable) &#123;</span><br><span class="line">    if (mDisposables == null) &#123;</span><br><span class="line">        mDisposables = new CompositeDisposable();</span><br><span class="line">    &#125;</span><br><span class="line">    //å°†æ‰€æœ‰disposableæ”¾å…¥,é›†ä¸­å¤„ç†</span><br><span class="line">    mDisposables.add(disposable);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»Ÿä¸€ç®¡ç†,é”€æ¯æ—¶ä¸€èµ·é”€æ¯,é¿å…çˆ†å†…å­˜</p>
<ul>
<li>onEvent(event);<br>æ˜¯ä¸€ä¸ªç©ºæ–¹æ³•,å¦‚æœå­ç±»é‡å†™å°±æŠŠäº‹ä»¶äº¤ç»™å­ç±»å¤„ç†</li>
</ul>
<p><strong>å‘é€</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RxBus.getDefault().post(new Event(100,&quot;message&quot;))</span><br><span class="line"></span><br><span class="line">//codeæœ€å¥½åœ¨Event.javaä¸­ç»Ÿä¸€å®šä¹‰,æ–¹ä¾¿ç®¡ç†</span><br></pre></td></tr></table></figure>
<p><strong>å¤„ç†</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">override fun onEvent(event: Event&lt;*&gt;?) &#123;</span><br><span class="line">    super.onEvent(event)</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸€éƒ¨åˆ†,å…¶å®åœ¨ <strong>æ³¨å†Œ</strong> ä¸­å·²ç»å®Œæˆ,åªè¦å­ç±»è‡ªå·±é‡å†™æ–¹æ³•,å°±èƒ½å–åˆ°æ•°æ®</p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Rxjava </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Nginxå®‰è£…åŠå…¶ç®€å•é…ç½®]]></title>
      <url>/Server/Nginx%E5%AE%89%E8%A3%85%E5%8F%8A%E5%85%B6%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<p>ç¯å¢ƒ: centos7</p>
<p><strong>1.ä¸‹è½½å®‰è£…</strong></p>
<p>ä¸‹è½½nginx-1.12.0,å®˜ç½‘<br><code>sudo wget http://nginx.org/download/nginx-1.12.0.tar.gz</code></p>
<p>è§£å‹<br><code>sudo tar -zxvf nginx-1.12.0.tar.gz</code></p>
<p>å…¶ä»–çš„åº“,nginxä¾èµ–çš„åº“</p>
<ul>
<li>å®‰è£…gcc<br><code>yum -y install gcc</code></li>
<li>å®‰è£…pcre<br><code>yum -y install pcre pcre-devel</code></li>
<li>å®‰è£…zlib<br><code>yum -y install zlib zlib-devel</code></li>
<li>å®‰è£…openssl<br><code>yum -y install openssl openssl-devel</code></li>
</ul>
<p>å®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo ./configure</span><br><span class="line">  </span><br><span class="line">sudo make</span><br><span class="line">  </span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é»˜è®¤ä½ç½® /usr/local/nginx</p>
</blockquote>
<p>å¦‚æœå®‰è£…è¿‡ç¨‹ä¸­å‡ºç°æ–‡ä»¶ç›®å½•æƒé™é—®é¢˜,ç™¾åº¦å³å¯è§£å†³.</p>
<p><strong>2.ç³»ç»Ÿä¸­é…ç½®</strong></p>
<p>1.åœ¨ç³»ç»ŸæœåŠ¡ç›®å½•é‡Œåˆ›å»ºnginx.serviceæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /lib/systemd/system/nginx.service</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=nginx</span><br><span class="line">After=network.target</span><br><span class="line">  </span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/local/nginx/sbin/nginx</span><br><span class="line">ExecReload=/usr/local/nginx/sbin/nginx -s reload</span><br><span class="line">ExecStop=/usr/local/nginx/sbin/nginx -s quit</span><br><span class="line">PrivateTmp=true</span><br><span class="line">  </span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<p>2.è®¾ç½®å¼€æœºå¯åŠ¨</p>
<p><code>systemctl enable nginx.service</code></p>
<p>3.å…¶ä»–å‘½ä»¤</p>
<p>å¯åŠ¨nginxæœåŠ¡<code>systemctl start nginx.service</code></p>
<p>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨<code>systemctl enable nginx.service</code></p>
<p>åœæ­¢å¼€æœºè‡ªå¯åŠ¨<code>systemctl disable nginx.service</code></p>
<p>æŸ¥çœ‹æœåŠ¡å½“å‰çŠ¶æ€<code>systemctl status nginx.service</code></p>
<p>é‡æ–°å¯åŠ¨æœåŠ¡<code>systemctl restart nginx.service</code></p>
<p>æŸ¥çœ‹æ‰€æœ‰å·²å¯åŠ¨çš„æœåŠ¡ <code>systemctl list-units --type=service</code></p>
<p><strong>3.nginx.confçš„é…ç½®</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@wangzhumo hooks]# cd /usr/local/nginx/</span><br><span class="line">[root@wangzhumo nginx]# ll</span><br><span class="line">total 96</span><br><span class="line">drwx------ 2 root root  4096 Dec 24 20:57 client_body_temp</span><br><span class="line">drwxr-xr-x 3 root root  4096 Dec 24 23:24 conf</span><br><span class="line">drwx------ 2 root root  4096 Dec 24 20:57 fastcgi_temp</span><br><span class="line">drwxr-xr-x 2 root root  4096 Dec 23 10:38 html</span><br><span class="line">drwxr-xr-x 2 root root  4096 Dec 24 22:43 logs</span><br><span class="line">-rw-r--r-- 1 root root 53861 Dec 25 13:37 on</span><br><span class="line">drwx------ 2 root root  4096 Dec 24 20:57 proxy_temp</span><br><span class="line">drwxr-xr-x 2 root root  4096 Dec 23 10:38 sbin</span><br><span class="line">drwx------ 2 root root  4096 Dec 24 20:57 scgi_temp</span><br><span class="line">drwx------ 2 root root  4096 Dec 24 20:57 uwsgi_temp</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­/confå­˜æ”¾é…ç½®æ–‡ä»¶/conf/nginx.conf<br><code>vim /conf/nginx.conf</code></p>
<p>ä»€ä¹ˆéƒ½ä¸è¦åŠ¨,åœ¨nginx.confç¬¬ä¸€æ¡serveré…ç½®ä¸‹é¢å†™å…¥:<br><code>include vhost/*.conf;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br><span class="line">#æ­¤å¤„æ˜¯ç¬¬ä¸€æ¡å¯ç”¨çš„serverçš„ç»“æŸ</span><br><span class="line"></span><br><span class="line">   #åŠ å…¥è¿™å¥,å…¶å®æ˜¯æŠŠå…¶ä»–åœ°æ–¹é…ç½®çš„é…ç½®æ–‡ä»¶åŠ è½½åˆ°é‡Œé¢æ¥</span><br><span class="line">   #ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†,ä¿®æ”¹</span><br><span class="line">   include vhost/*.conf;</span><br><span class="line">   # another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">   #</span><br><span class="line">   #server &#123;</span><br><span class="line">   #    listen       8000;</span><br><span class="line">   #    listen       somename:8080;</span><br><span class="line">   #    server_name  somename  alias  another.alias;</span><br><span class="line"></span><br><span class="line">   #    location / &#123;</span><br><span class="line">   #        root   html;</span><br><span class="line">   #        index  index.html index.htm;</span><br><span class="line">   #    &#125;</span><br><span class="line">   #&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3.1 /vhost/*.confçš„é…ç½®</strong></p>
<p>å½“å‰ç›®å½•åˆ°<br><code>cd /usr/local/nginx/conf</code></p>
<p>åˆ›å»ºç›®å½•vhost<br><code>mkdir /usr/local/nginx/conf/vhost</code></p>
<p>åˆ›å»º.confæ–‡ä»¶(æˆ‘åªç”¨åˆ°hexoçš„é…ç½®,æ‰€ä»¥åªæœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶)<br><code>vim /usr/local/nginx/conf/vhost/hexo.conf</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">server</span><br><span class="line">&#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    #listen [::]:80;</span><br><span class="line">    server_name www.phyooos.top phyooos.top;</span><br><span class="line">    index index.html index.htm index.php default.html default.htm default.php;</span><br><span class="line">    #web root path</span><br><span class="line">    root  /home/wzm/hexo;</span><br><span class="line"></span><br><span class="line">    #error_page   404   /404.html;</span><br><span class="line">    location ~ .*\.(ico|gif|jpg|jpeg|png|bmp|swf)$</span><br><span class="line">    &#123;</span><br><span class="line">        access_log   on;</span><br><span class="line">        expires      1d;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ .*\.(js|css|txt|xml)?$</span><br><span class="line">    &#123;</span><br><span class="line">        access_log   on;</span><br><span class="line">        expires      12h;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        try_files $uri $uri/ =404;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    access_log  /usr/local/nginx/logs/hexo.log  combined;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4.é‡å¯</strong><br><code>systemctl reload nginx</code></p>
<p>åœ¨å¤–é¢è®¿é—®å³å¯</p>
]]></content>
      
        <categories>
            
            <category> Server </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Server </tag>
            
            <tag> Linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Roomæ•°æ®åº“ä½¿ç”¨æŒ‡åŒ—List<>çš„é—®é¢˜]]></title>
      <url>/Android/Room%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8C%97List%3C%3E%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p>Roomä¾èµ–</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">implementation &quot;android.arch.persistence.room:runtime:1.0.0&quot;</span><br><span class="line">annotationProcessor &quot;android.arch.persistence.room:compiler:1.0.0&quot;</span><br></pre></td></tr></table></figure>
<p><strong>æŸ¥æ‰¾</strong></p>
<ul>
<li>æŸ¥æ‰¾è¡¨ä¸­æ‰€æœ‰æ•°æ®</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">   * æŸ¥æ‰¾user</span><br><span class="line">   * @return</span><br><span class="line">   */</span><br><span class="line">  @Query(&quot;SELECT * FROM banners&quot;)</span><br><span class="line">  List&lt;BannerModel&gt; findBanners();</span><br></pre></td></tr></table></figure>
<ul>
<li>æŒ‰æ¡ä»¶æŸ¥æ‰¾</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * filters</span><br><span class="line"> * @return</span><br><span class="line"> * @param typeSort</span><br><span class="line"> */</span><br><span class="line">@Query(&quot;SELECT * FROM filters WHERE type != :typeSort&quot;)</span><br><span class="line">List&lt;FilterItemModel&gt; findFilters(String typeSort);</span><br></pre></td></tr></table></figure>
<ul>
<li>é™åˆ¶æ¡æ•°çš„æ¡ä»¶æŸ¥æ‰¾</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * è·å–æ’åº</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">@Query(&quot;SELECT * FROM filters WHERE type = :name LIMIT 0,1&quot;)</span><br><span class="line">FilterItemModel findSort(String name);</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨è·å–çš„æ˜¯ç¬¬ä¸€æ¡æ•°æ®</p>
<p>//æ–‡æ¡£ä¸­çš„ä¾‹å­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Dao</span><br><span class="line">public interface MyDao &#123;</span><br><span class="line">    @Query(&quot;SELECT first_name, last_name FROM user WHERE region IN (:regions)&quot;)</span><br><span class="line">    public List&lt;NameTuple&gt; loadUsersFromRegions(List&lt;String&gt; regions);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨userè¡¨ä¸­æŸ¥æ‰¾æ»¡è¶³é›†åˆList<string> regionsä¸­æ¡ä»¶çš„å…ƒç´ </string></p>
<ul>
<li>è·å–æ€»è¡Œæ•°</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * è·å–æ•°æ®åº“è¡¨ä¸­æ€»æ¡æ•°</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">@Query(&quot;SELECT count(*) FROM search_history&quot;)</span><br><span class="line">long findHistoryCount();</span><br></pre></td></tr></table></figure>
<ul>
<li>è·å–æŸä¸€åˆ—çš„å’Œ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ±‚å’Œ</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">@Query(&quot;SELECT sum(count) FROM status_stock&quot;)</span><br><span class="line">long findStatusStockCount();</span><br></pre></td></tr></table></figure>
<ul>
<li>æŒ‰ç…§é™åºæ’åˆ—(ASCå‡åº  DESCé™åº)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æŸ¥æ‰¾user</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">@Query(&quot;SELECT * FROM search_history ORDER BY time DESC&quot;)</span><br><span class="line">List&lt;SearchHistoryModel&gt; findSearchHistory();</span><br></pre></td></tr></table></figure>
<hr>
<p>æ–‡æ¡£ä¸­çš„ä¾‹å­:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@Dao</span><br><span class="line">public interface MyDao &#123;</span><br><span class="line"></span><br><span class="line">    //æ­£å¸¸çš„æŸ¥è¯¢</span><br><span class="line">    @Query(&quot;SELECT * FROM user WHERE age != :minAge&quot;)</span><br><span class="line">    public User[] loadAllUsersOlderThan(int minAge);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@Dao</span><br><span class="line">public interface MyDao &#123;</span><br><span class="line"></span><br><span class="line">    //åŒºé—´ä¸­çš„å€¼</span><br><span class="line">    @Query(&quot;SELECT * FROM user WHERE age BETWEEN :minAge AND :maxAge&quot;)</span><br><span class="line">    public User[] loadAllUsersBetweenAges(int minAge, int maxAge);</span><br><span class="line"></span><br><span class="line">    //æˆ–å…³ç³»çš„æŸ¥è¯¢</span><br><span class="line">    @Query(&quot;SELECT * FROM user WHERE first_name LIKE :search &quot;</span><br><span class="line">           + &quot;OR last_name LIKE :search&quot;)</span><br><span class="line">    public List&lt;User&gt; findUserWithName(String search);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¦‚æœ,ä½ ä¸æƒ³æŸ¥åˆ°è¡¨ è¡Œä¸­æ‰€æœ‰å­—æ®µ,åˆ™</strong><br>1.å®šä¹‰ä¸€ä¸ªå®ä½“<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class NameTuple &#123;</span><br><span class="line">    @ColumnInfo(name=&quot;first_name&quot;)</span><br><span class="line">    public String firstName;</span><br><span class="line"></span><br><span class="line">    @ColumnInfo(name=&quot;last_name&quot;)</span><br><span class="line">    public String lastName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.æŸ¥è¯¢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Dao</span><br><span class="line">public interface MyDao &#123;</span><br><span class="line">    @Query(&quot;SELECT first_name, last_name FROM user&quot;)</span><br><span class="line">    public List&lt;NameTuple&gt; loadFullName();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>å¤šè¡¨æŸ¥è¯¢Querying multiple tables</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@Dao</span><br><span class="line">public interface MyDao &#123;</span><br><span class="line">   @Query(&quot;SELECT user.name AS userName, pet.name AS petName &quot;</span><br><span class="line">          + &quot;FROM user, pet &quot;</span><br><span class="line">          + &quot;WHERE user.id = pet.user_id&quot;)</span><br><span class="line">   public LiveData&lt;List&lt;UserPet&gt;&gt; loadUserAndPetNames();</span><br><span class="line"></span><br><span class="line">   // You can also define this class in a separate file, as long as you add the</span><br><span class="line">   // &quot;public&quot; access modifier.</span><br><span class="line">   //æ³¨æ„ public</span><br><span class="line">   static class UserPet &#123;</span><br><span class="line">       public String userName;</span><br><span class="line">       public String petName;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ›´æ–°</strong></p>
<ul>
<li>æ›´æ–°æŒ‡å®šæ¡ç›®</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ›´æ–°æ—¶é—´</span><br><span class="line"> * @param time</span><br><span class="line"> */</span><br><span class="line">@Query(&quot;UPDATE search_history SET time = :time WHERE content = :content&quot;)</span><br><span class="line">void updateSearchHistory(String content,long time);</span><br></pre></td></tr></table></figure>
<p><strong>åˆ é™¤æ•°æ®</strong></p>
<ul>
<li>åˆ é™¤æ‰€æœ‰æ•°æ®</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * åˆ é™¤è¡¨</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">@Query(&quot;DELETE FROM filters&quot;)</span><br><span class="line">void delectFilters();</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ é™¤æœ€åä¸€æ¡</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * åˆ é™¤æœ€åä¸€ä¸ª</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">@Query(&quot;DELETE FROM search_history WHERE time in(SELECT time FROM search_history ORDER BY time ASC LIMIT 1 )&quot;)</span><br><span class="line">void delectLastHistory();</span><br></pre></td></tr></table></figure>
<ul>
<li>æŒ‰æ¡ä»¶åˆ é™¤</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * åˆ é™¤è¡¨by listtype</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">@Query(&quot;DELETE FROM vehicle_model WHERE listType = :type&quot;)</span><br><span class="line">void delectVehicleByType(String type);</span><br></pre></td></tr></table></figure>
<p>####è¡¥å……</p>
<p><strong><code>1.List&lt;String&gt;</code>è¿™æ ·çš„å…ƒç´ </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private ArrayList&lt;String&gt; tags;</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·çš„å…ƒç´ ,å¯ä»¥é€šè¿‡Converteræå®š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line">* If you have any questions, you can contact by email &#123; wangzhumoo@gmail.com&#125;</span><br><span class="line">*</span><br><span class="line">* @author ç‹è¯›é­” 2017/12/27 ä¸Šåˆ11:51</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">public class TagsConverter &#123;</span><br><span class="line">    @TypeConverter</span><br><span class="line">    public static ArrayList&lt;String&gt; fromString(String value) &#123;</span><br><span class="line">        Type listType = new TypeToken&lt;ArrayList&lt;String&gt;&gt;() &#123;&#125;.getType();</span><br><span class="line">        return new Gson().fromJson(value, listType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @TypeConverter</span><br><span class="line">    public static String fromArrayList(ArrayList&lt;String&gt; list) &#123;</span><br><span class="line">        Gson gson = new Gson();</span><br><span class="line">        String json = gson.toJson(list);</span><br><span class="line">        return json;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨dbä¸­,ä¼šå­˜ä¸º </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[&quot;ç²¾é€‰&quot;]</span><br><span class="line">[&quot;ç²¾é€‰&quot;,&quot;æ€¥å”®&quot;]</span><br><span class="line">[&quot;å‡†æ–°&quot;,&quot;SUV&quot;]</span><br></pre></td></tr></table></figure>
<p><strong>3.@Embedded</strong></p>
<p>ä½œç”¨æ˜¯,æŠŠå·²ç»å†™å¥½çš„æ™®é€šçš„ç±»æ·»åŠ åˆ°æ•°æ®è¡¨ä¸­.<br>ç”¨Roomçš„æ–‡æ¡£åšè¯´æ˜:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ•°æ®è¡¨</span><br><span class="line"></span><br><span class="line">@Entity</span><br><span class="line">class User &#123;</span><br><span class="line">    @PrimaryKey</span><br><span class="line">    public int id;</span><br><span class="line"></span><br><span class="line">    public String firstName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­åªæœ‰id , firstName</p>
<p>è€Œæˆ‘æƒ³æ·»åŠ <br>    street;<br>    state;<br>    city;<br>    postCode;<br>åˆšå¥½ä¹‹å‰å†™äº†ä¸€ä¸ªç±»å«Address</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Address &#123;</span><br><span class="line">    public String street;</span><br><span class="line">    public String state;</span><br><span class="line">    public String city;</span><br><span class="line">    @Ignore</span><br><span class="line">    public String nothing;</span><br><span class="line">    @ColumnInfo(name = &quot;post_code&quot;)</span><br><span class="line">    public int postCode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆæˆ‘é€šè¿‡ @Embedded</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">class User &#123;</span><br><span class="line">    @PrimaryKey</span><br><span class="line">    public int id;</span><br><span class="line"></span><br><span class="line">    public String firstName;</span><br><span class="line"></span><br><span class="line">    @Embedded</span><br><span class="line">    public Address address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¡¨ä¸­å°±ä¼šæœ‰:<br><code>names: id, firstName, street, state, city, and post_code</code></p>
<p>å¦‚æœä½ æƒ³ç»™@Embeddedçš„ç±»ä¸­æ‰€æœ‰å…ƒç´ å‰é¢åŠ ä¸Šç»Ÿä¸€çš„æ ‡å¿—</p>
<p><code>@Embedded(prefix = &quot;address_&quot;)</code></p>
<p>è¡¨ä¸­å°±ä¼šæœ‰:</p>
<p><code>names: id, firstName, address_street, address_state, address_city, and address_post_code</code></p>
<p><strong>3.<code>List&lt;Object&gt;</code>è¿™æ ·çš„æ•°æ®</strong></p>
<ul>
<li>è§£å†³æ–¹æ³•<br><a href="https://developer.android.com/reference/android/arch/persistence/room/Relation.html" target="_blank" rel="noopener">google developer</a></li>
</ul>
<p>çœŸçš„ç»™è°·æ­Œè·ªäº†,ä»€ä¹ˆé¬¼æ–‡æ¡£</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">public class User &#123;</span><br><span class="line"></span><br><span class="line">    // è¿™é‡Œæ˜¯ç”¨æˆ·çš„ Id</span><br><span class="line">    @PrimaryKey</span><br><span class="line">    public int id;</span><br><span class="line"></span><br><span class="line">    //çœç•¥</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@Entity</span><br><span class="line">public class Book &#123;</span><br><span class="line"></span><br><span class="line">    //ä¹¦çš„id</span><br><span class="line">    @PrimaryKey</span><br><span class="line">    public int bookId;</span><br><span class="line">    </span><br><span class="line">    //è¿™é‡Œå°±æ˜¯è¿™æœ¬ä¹¦ä¸ Userçš„å…³ç³»,è¿™é‡Œçš„æ˜¯User.id</span><br><span class="line">    public int userId;</span><br><span class="line">    public String name;</span><br><span class="line">    public String desc;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æ³¨æ„,ä»€ä¹ˆæ³¨è§£ä¹Ÿä¸è¦åŠ </span><br><span class="line">public class UserAndBooks &#123;</span><br><span class="line"></span><br><span class="line">    //åŠ å…¥æ‰€æœ‰çš„userçš„å±æ€§</span><br><span class="line">   @Embedded</span><br><span class="line">   public User user;</span><br><span class="line"></span><br><span class="line">    //è¿™é‡Œå®šä¹‰User å’Œ Bookçš„å…³ç³»</span><br><span class="line">   @Relation(parentColumn = &quot;id&quot;, entityColumn = &quot;userId&quot;, entity = Book.class)</span><br><span class="line">   public List&lt;Book&gt; books; </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æ–‡æ¡£ä¸Šè¿˜è®²äº†ä¸€ä¸ªæ¯”è¾ƒç‰›é€¼çš„åŠŸèƒ½,è¿™é‡Œä¸è®¨è®º</span><br><span class="line"></span><br><span class="line">public class UserAndAllPets &#123;</span><br><span class="line">   @Embedded</span><br><span class="line">   public User user;</span><br><span class="line">   @Relation(parentColumn = &quot;id&quot;, entityColumn = &quot;userId&quot;, entity = Book.class,</span><br><span class="line">           projection = &#123;&quot;name&quot;&#125;)</span><br><span class="line">   public List&lt;String&gt; bookNames;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//ç„¶å,daoæ˜¯è¿™æ ·çš„</span><br><span class="line"></span><br><span class="line">@Dao</span><br><span class="line">public interface UserDao &#123;</span><br><span class="line">    @Query(&quot;SELECT * FROM User&quot;)</span><br><span class="line">    public List&lt;UserAndBooks&gt; loadUserWithBooks();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PS:å½“ç„¶ä½ å­˜çš„æ—¶å€™,åˆ†è¾¨åˆ«å­˜User  å’Œ Book å³å¯</span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Room </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Retrofit2 + Okhttp3 + Rxjava2 ç½‘ç»œè¯·æ±‚å°è£…(ä¸‹)]]></title>
      <url>/Android/Retrofit2-Okhttp3-Rxjava2-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%B0%81%E8%A3%85-%E4%B8%8B/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//è¯·æ±‚:</span><br><span class="line"></span><br><span class="line">RetrofitApis.getNetworkApis().getFriendsCircle(userBean.token, String.valueOf(45),null,lastId)</span><br><span class="line">	.compose(new DefaultTransformer&lt;&gt;())</span><br><span class="line">	.subscribe(new Defaultubscriber&lt;List&lt;FriendItem&gt;&gt;() &#123;</span><br><span class="line">		@Override</span><br><span class="line">		protected void onError(ApiException ex) &#123;</span><br><span class="line">                //è¯·æ±‚é”™è¯¯,exä¸­å¯ä»¥æ‹¿åˆ°code å’Œ msg  ä¾¿äºå±•ç¤ºç»™ç”¨æˆ·</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		@Override</span><br><span class="line">		public void onNext(List&lt;FriendItem&gt; friends) &#123;</span><br><span class="line">		    //è¯·æ±‚æˆåŠŸ,friendså°±æ˜¯æ•°æ®</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		@Override</span><br><span class="line">		public void onComplete() &#123;</span><br><span class="line">                    //æ²¡æœ‰é”™è¯¯çš„è¯,æœ€åä¼šèµ°ç€</span><br><span class="line">		&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>compose()  è½¬åŒ–<br>subscribe() è®¢é˜…</p>
<p>DefaultTransformer.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2017/11/3 ä¸‹åˆ5:06</span><br><span class="line"> *</span><br><span class="line"> * é»˜è®¤çš„åˆ‡æ¢çº¿ç¨‹,å¹¶è¿”å›å®ä½“ç±»</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">public class DefaultTransformer&lt;T extends ResultResponse&lt;RP&gt;, RP&gt; implements FlowableTransformer&lt;T, RP&gt; &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Publisher&lt;RP&gt; apply(Flowable&lt;T&gt; upstream) &#123;</span><br><span class="line">        return upstream</span><br><span class="line">                .map(t -&gt; t.getResult())</span><br><span class="line">                .subscribeOn(Schedulers.io())</span><br><span class="line">                .observeOn(AndroidSchedulers.mainThread());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.map å°†è¿”å›çš„ResultResponse&lt;&gt;  è½¬åŒ–,ç›´æ¥å–ResultResponseçš„æ³›å‹å®ä½“<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;&quot;result&quot;:&#123;&#125;</span><br><span class="line">&quot;code&quot;:&quot;&quot;,</span><br><span class="line">&quot;msg&quot;:&quot;&quot;&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¸­çš„result</p>
<p>2.subscribeOn(Schedulers.io())  ç½‘ç»œè¯·æ±‚çš„è€—æ—¶æ“ä½œ,æ”¾åœ¨æ–¹ä¾¿ioæ“ä½œçš„çº¿ç¨‹é‡Œé¢<br>3.observeOn(AndroidSchedulers.mainThread())  åé¢çš„æ“ä½œ,éƒ½åœ¨ä¸»çº¿ç¨‹è¿›è¡Œ</p>
<p>Defaultubscriber.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2017/10/24 ä¸Šåˆ10:36</span><br><span class="line"> *</span><br><span class="line"> * ç”¨äºæ²¡æœ‰ç½‘ç»œæ—¶åœæ­¢ç½‘ç»œè¯·æ±‚</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">public abstract class Defaultubscriber&lt;T&gt; extends DisposableSubscriber&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @CallSuper</span><br><span class="line">    @Override</span><br><span class="line">    public void onError(Throwable e) &#123;</span><br><span class="line">        if (e instanceof ApiException) &#123;</span><br><span class="line">            onError((ApiException) e);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            onError(new ApiException(&quot;&quot;,&quot;&quot;));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onStart() &#123;</span><br><span class="line">        if (!SystemUtils.isNetworkConnected()) &#123;</span><br><span class="line">            onError(new ApiException(Utils.getString(R.string.net_error_title),&quot;999&quot;));</span><br><span class="line">            cancel();</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        super.onStart();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * é”™è¯¯å›è°ƒ</span><br><span class="line">     *</span><br><span class="line">     * @param ex å¼‚å¸¸ä¿¡æ¯</span><br><span class="line">     */</span><br><span class="line">    protected abstract void onError(ApiException ex);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.extends DisposableSubscriber  ä¾¿äºé€šè¿‡CompositeDisposableç®¡ç†è¯·æ±‚,æ­¤å¤„æ²¡æœ‰å±•ç¤º,ä¸ç”¨ç®¡<br>2.onStart()  ä¸­,åˆ¤æ–­æ˜¯å¦æœ‰ç½‘ç»œ</p>
<ul>
<li><p>æ²¡æœ‰ç½‘ç»œ<br>onError(new ApiException(Utils.getString(R.string.net_error), false));<br>æŠ›å‡ºæ²¡æœ‰ç½‘ç»œçš„é”™è¯¯,ç”±å„ä¸ªé¡µé¢è‡ªè¡Œå¤„ç†</p>
<p>cancel(); å–æ¶ˆ</p>
<ul>
<li>æœ‰ç½‘ç»œåˆ™ç»§ç»­</li>
</ul>
</li>
</ul>
<p>3.é‡å†™çš„ onError()ä¸­.<br>    æ˜¯ApiExceptionå®ä¾‹çš„,æ˜¯è‡ªå·±æŠ›å‡ºçš„å¼‚å¸¸,å·²ç»å¤„ç†è¿‡äº†,ç›´æ¥onErrorç»™å„ä¸ªé¡µé¢å¤„ç†<br>    ä¸æ˜¯çš„å†å¤„ç†ä¸€æ¬¡,åœ¨åˆ†å‘ç»™å„ä¸ªé¡µé¢å¤„ç†</p>
<p>####æœªå®Œå¾…ç»­â€¦</p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Rxjava </tag>
            
            <tag> Okhttp </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Retrofit2 + Okhttp3 + Rxjava2 ç½‘ç»œè¯·æ±‚å°è£…(ä¸Š)]]></title>
      <url>/Android/Retrofit2-Okhttp3-Rxjava2-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%B0%81%E8%A3%85(%E4%B8%8A)/</url>
      <content type="html"><![CDATA[<p>æœ€ç»ˆç»“æ„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">net</span><br><span class="line">â”œâ”€â”€ RequestBuilder.java</span><br><span class="line">â”œâ”€â”€ RetrofitApis.java</span><br><span class="line">â”œâ”€â”€ base</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ApiException.java</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ CustomGsonConverter.java</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ DefaultSubscriber.java</span><br><span class="line">â”‚Â Â  â””â”€â”€ DefaultTransformer.java</span><br><span class="line">â””â”€â”€ response</span><br><span class="line">    â”œâ”€â”€ BaseResponse.java</span><br><span class="line">    â””â”€â”€ ResultResponse.java</span><br><span class="line"></span><br><span class="line">NetworkApis.java</span><br></pre></td></tr></table></figure>
<p><strong>1.æ·»åŠ ä¾èµ–</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">implementation &quot;io.reactivex.rxjava2:rxjava:2.1.7&quot;</span><br><span class="line">implementation &quot;io.reactivex.rxjava2:rxandroid:2.0.1&quot;</span><br><span class="line">implementation &quot;com.squareup.okhttp3:okhttp:3.9.0&quot;</span><br><span class="line">implementation &quot;com.squareup.okhttp3:logging-interceptor:3.9.0&quot;</span><br><span class="line">implementation &quot;com.squareup.retrofit2:retrofit:2.3.0&quot;</span><br><span class="line">implementation &quot;com.squareup.retrofit2:converter-gson:2.3.0&quot;</span><br><span class="line">implementation &quot;com.squareup.retrofit2:adapter-rxjava2:2.3.0&quot;</span><br></pre></td></tr></table></figure>
<p><strong>2.è¯·æ±‚æœåŠ¡æ„å»º</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2017/11/1 ä¸‹åˆ11:13</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public class RetrofitApis &#123;</span><br><span class="line">    private static OkHttpClient okHttpClient = null;</span><br><span class="line">    private static NetworkApis networkApis = null;</span><br><span class="line">    private static Gson gson = new Gson();</span><br><span class="line">    private static final String TAG = &quot;RetrofitApis&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ä¸ºHOSTåˆ›å»ºä¸€ä¸ªè¯·æ±‚å®¢æˆ·ç«¯</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static NetworkApis getNetworkApis() &#123;</span><br><span class="line">        initOkhttp();</span><br><span class="line">        if (networkApis == null) &#123;</span><br><span class="line">            Retrofit retrofit = new Retrofit.Builder()</span><br><span class="line">                    .client(okHttpClient)</span><br><span class="line">                    .baseUrl(Constants.HOST)</span><br><span class="line">                    .addConverterFactory(CustomGsonConverter.create(gson))</span><br><span class="line">                    .addCallAdapterFactory(RxJava2CallAdapterFactory.create())</span><br><span class="line">                    .build();</span><br><span class="line">            networkApis = retrofit.create(NetworkApis.class);</span><br><span class="line">        &#125;</span><br><span class="line">        return networkApis;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * åˆå§‹åŒ–ä¸€ä¸ªOkHttpClient</span><br><span class="line">     */</span><br><span class="line">    private static void initOkhttp()&#123;</span><br><span class="line">        //æ²¡æœ‰åˆ›å»ºå°±å®ä¾‹ä¸€ä¸ª</span><br><span class="line">        if(okHttpClient == null)&#123;</span><br><span class="line">            final OkHttpClient.Builder builder = new OkHttpClient.Builder();</span><br><span class="line">            //è®¾ç½®logç­‰çº§</span><br><span class="line">            if(BuildConfig.DEBUG)&#123;</span><br><span class="line">                HttpLoggingInterceptor interceptor = new HttpLoggingInterceptor();</span><br><span class="line"></span><br><span class="line">                //BODY  åŒ…å«è¯·æ±‚url å‚æ•°  response ,ä¼šæ‰“å°åœ¨logcat</span><br><span class="line">                interceptor.setLevel(HttpLoggingInterceptor.Level.BODY);</span><br><span class="line">                builder.addInterceptor(interceptor);</span><br><span class="line">            &#125;</span><br><span class="line">            //æ‰“å¼€ä¸€ä¸ªFileç”¨äºç¼“å­˜</span><br><span class="line">            File cacheFile = new File(Constants.PATH_CACHE);</span><br><span class="line">            Cache cache = new Cache(cacheFile,1024*1024*50);</span><br><span class="line">            //ä¸€ä¸ªæ‹¦æˆªå™¨</span><br><span class="line">                Interceptor cacheInterceptor = new Interceptor() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public Response intercept(Chain chain) throws IOException &#123;</span><br><span class="line">                    Request.Builder builder = chain.request().newBuilder();</span><br><span class="line"></span><br><span class="line">                    if(SystemUtils.isNetworkConnected())&#123;</span><br><span class="line">                        int maxAge = 0 ;</span><br><span class="line">                        //æœ‰ç½‘ç»œ,ä¸ç¼“å­˜,æœ€é•¿ä¿å­˜æ—¶é—´ä¸º0</span><br><span class="line">                        builder.removeHeader(&quot;Pragma&quot;)</span><br><span class="line">                                .header(&quot;Cache-Control&quot;, &quot;public, max-age=&quot; + maxAge)</span><br><span class="line">                                .build();</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        // æ— ç½‘ç»œæ—¶ï¼Œè®¾ç½®è¶…æ—¶ä¸º2å‘¨</span><br><span class="line">                        int maxStale = 60 * 60 * 24 * 14;</span><br><span class="line">                        builder.removeHeader(&quot;Pragma&quot;)</span><br><span class="line">                                .header(&quot;Cache-Control&quot;, &quot;public, only-if-cached, max-stale=&quot; + maxStale)</span><br><span class="line">                                .build();</span><br><span class="line">                      throw new ApiException(false);</span><br><span class="line">                    &#125;</span><br><span class="line">                    return chain.proceed(builder.build());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            //è®¾ç½®ç¼“å­˜æ‹¦æˆªå™¨</span><br><span class="line">            builder.addInterceptor(cacheInterceptor);</span><br><span class="line">            builder.addNetworkInterceptor(cacheInterceptor);</span><br><span class="line"></span><br><span class="line">            //è¿™é‡Œé€šè¿‡Interceptor å¯ä»¥å®ç°æ·»åŠ å…¬å…±å‚æ•°,ä¸è¯¦ç»†è¯´æ˜äº†</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            //stetho,å¦‚æœä½¿ç”¨åˆ™éœ€è¦æ·»åŠ </span><br><span class="line">            //builder.addNetworkInterceptor(new StethoInterceptor());</span><br><span class="line"></span><br><span class="line">            builder.cache(cache);</span><br><span class="line">            //é”™è¯¯é‡è¿</span><br><span class="line">            builder.retryOnConnectionFailure(true);</span><br><span class="line">            //è®¾ç½®è¶…æ—¶</span><br><span class="line">            builder.connectTimeout(15, TimeUnit.SECONDS);</span><br><span class="line">            builder.readTimeout(15, TimeUnit.SECONDS);</span><br><span class="line">            builder.writeTimeout(15, TimeUnit.SECONDS);</span><br><span class="line">            okHttpClient = builder.build();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Š;</p>
<p>ä½¿ç”¨ <code>CustomGsonConverter.java / NetworkApis.java</code><br>é€šè¿‡getNetworkApis()æ–¹æ³•,å‘å¤–æä¾›äº†ä¸€ä¸ªè¯·æ±‚æœåŠ¡.<br>å…¶ä¸­ .addConverterFactory(CustomGsonConverter.create(gson))<br>æ˜¯ä½¿ç”¨è‡ªå®šä¹‰çš„Converteræ›¿ä»£äº†é»˜è®¤æä¾›çš„</p>
<p>CustomGsonConverter.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2017/10/24 ä¸Šåˆ10:31</span><br><span class="line"> *</span><br><span class="line"> * GsonConverter ç”¨äºåœ¨ä¸è§£æè¿”å›æ­£æ–‡çš„å‰æä¸‹è·å–è¯·æ±‚æˆåŠŸå¤±è´¥å’Œ è¿”å›ä¿¡æ¯</span><br><span class="line"> */</span><br><span class="line">public class CustomGsonConverter extends Converter.Factory &#123;</span><br><span class="line"></span><br><span class="line">    private final Gson gson;</span><br><span class="line"></span><br><span class="line">    private CustomGsonConverter(Gson gson) &#123;</span><br><span class="line">        if (gson == null) &#123;</span><br><span class="line">            throw new NullPointerException(&quot;gson == null&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        this.gson = gson;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static CustomGsonConverter create() &#123;</span><br><span class="line">        return create(new Gson());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static CustomGsonConverter create(Gson gson) &#123;</span><br><span class="line">        return new CustomGsonConverter(gson);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Converter&lt;ResponseBody, ?&gt; responseBodyConverter(Type type, Annotation[] annotations, Retrofit retrofit) &#123;</span><br><span class="line">        TypeAdapter&lt;?&gt; adapter = gson.getAdapter(TypeToken.get(type));</span><br><span class="line">        return new CustomGsonResponseBodyConverter&lt;&gt;(gson, adapter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private class CustomGsonResponseBodyConverter&lt;T&gt; implements Converter&lt;ResponseBody, T&gt; &#123;</span><br><span class="line">        private final Gson gson;</span><br><span class="line">        private final TypeAdapter&lt;T&gt; adapter;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        public CustomGsonResponseBodyConverter(Gson gson, TypeAdapter&lt;T&gt; adapter) &#123;</span><br><span class="line">            this.gson = gson;</span><br><span class="line">            this.adapter = adapter;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public T convert(ResponseBody value) throws IOException &#123;</span><br><span class="line">            String response = value.string();</span><br><span class="line">            BaseResponse baseResponse = gson.fromJson(response,BaseResponse.class);</span><br><span class="line">            if (!baseResponse.isCodeSuccess()) &#123;</span><br><span class="line">                value.close();</span><br><span class="line">                throw new ApiException(baseResponse.error);</span><br><span class="line">            &#125;</span><br><span class="line">            MediaType contentType = value.contentType();</span><br><span class="line">            Charset charset = contentType != null ? contentType.charset(UTF_8) : UTF_8;</span><br><span class="line">            InputStream inputStream = new ByteArrayInputStream(response.getBytes());</span><br><span class="line">            Reader reader = new InputStreamReader(inputStream, charset);</span><br><span class="line">            JsonReader jsonReader = gson.newJsonReader(reader);</span><br><span class="line"></span><br><span class="line">            try &#123;</span><br><span class="line">                return adapter.read(jsonReader);</span><br><span class="line">            &#125; finally &#123;</span><br><span class="line">                value.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Nullable</span><br><span class="line">    @Override</span><br><span class="line">    public Converter&lt;?, RequestBody&gt; requestBodyConverter(Type type, Annotation[] parameterAnnotations, Annotation[] methodAnnotations, Retrofit retrofit) &#123;</span><br><span class="line">        return super.requestBodyConverter(type,parameterAnnotations,methodAnnotations,retrofit);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>requestBodyConverteræ²¡æœ‰é‡å†™,åé¢å‘ç°äº†ä¸€ä¸ªbug,ä¸Šä¼ æ–‡ä»¶+æ–‡å­—å‚æ•°æ—¶,å¯èƒ½ä¼šé€ æˆ Lengthå‡ºé”™.<br>responseBodyConverter é‡å†™,å…ˆæŠŠresponseè§£æ,å¦‚æœæœ‰é—®é¢˜åˆ™<br><code>throw new ApiException(baseResponse.error);</code><br>ä¼šä¸»åŠ¨èµ°RxJavaçš„ onError()</p>
<p>å¦‚æœæ²¡æœ‰é—®é¢˜,åˆ™ç»§ç»­,å¥½åƒæœ‰ç‚¹å¤šä½™â€¦â€¦</p>
<p>ApiException.java  å°±æ˜¯ç”¨äºå°è£…å¼‚å¸¸</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2017/10/24 ä¸Šåˆ10:29</span><br><span class="line"> *</span><br><span class="line"> * æ­¤ç±»ä½œä¸ºç½‘ç»œè¯·æ±‚å¼‚å¸¸çš„åŸº</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">public class ApiException extends IOException &#123;</span><br><span class="line"></span><br><span class="line">    String code;</span><br><span class="line">    String msg;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public ApiException(String code)&#123;</span><br><span class="line">        this.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public ApiException(String msg, String code)&#123;</span><br><span class="line">        super(msg);</span><br><span class="line">        this.msg = msg;</span><br><span class="line">        this.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public boolean getCode() &#123;</span><br><span class="line">        return code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getMessage() &#123;</span><br><span class="line">        return msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3.Responseè¿”å›æ•°æ®çš„å°è£…</strong></p>
<blockquote>
<p>è¿™é‡Œæ ¹æ®åå°è¿”å›æ•°æ®ç»“æ„</p>
</blockquote>
<p>æˆ‘ä»¬çš„è¿”å›æ˜¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;result&quot;:&#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;msg&quot;:&quot;è¯·æ±‚æˆåŠŸ&quot;,</span><br><span class="line">    &quot;code&quot;:&quot;0000&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>BaseResponse.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2017/10/19 ä¸‹åˆ5:41</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">public class BaseResponse&#123;</span><br><span class="line"></span><br><span class="line">    public String code;</span><br><span class="line">    public String msg;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * APIæ˜¯å¦è¯·æ±‚å¤±è´¥</span><br><span class="line">     *</span><br><span class="line">     * @return å¤±è´¥è¿”å›true, æˆåŠŸè¿”å›false</span><br><span class="line">     */</span><br><span class="line">    public boolean isCodeSuccess() &#123;</span><br><span class="line">        return &quot;0000&quot;.equals(code);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€æœ‰çš„è¿”å›æ•°æ®ç±»,éƒ½è¦ç»§æ‰¿å®ƒ,ä¾¿äºCustomGsonConverter ä¸­åˆ¤æ–­è¿”å›æ•°æ®çš„æ­£ç¡®æ€§</p>
<p>ResultResponse.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2017/10/19 ä¸‹åˆ5:37</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">public class ResultResponse&lt;T&gt; extends BaseResponse &#123;</span><br><span class="line"></span><br><span class="line">    private T result;</span><br><span class="line"></span><br><span class="line">    public T getResult() &#123;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡Tæ³›å‹,æŒ‡å®šè¿”å›resultçš„ç»“æ„,è®©gsonè§£ææˆå®ä½“å¯¹è±¡</p>
<p>T å¯èƒ½æ˜¯ å®ä½“å¯¹è±¡  å¯èƒ½æ˜¯ List&lt;å®ä½“å¯¹è±¡&gt;  â€¦.</p>
<p><strong>4.è¯·æ±‚æ•°æ®</strong></p>
<p>NetworkApis.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * If you have any questions, you can contact by email &#123;wangzhumoo@gmail.com&#125;</span><br><span class="line"> * @author ç‹è¯›é­” 2017/10/19 ä¸‹åˆ5:40</span><br><span class="line"> *</span><br><span class="line"> * æ‰€æœ‰ç½‘ç»œè¯·æ±‚</span><br><span class="line"> */</span><br><span class="line">public interface NetworkApis &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è·å–æœ‹å‹åœˆåˆ—è¡¨</span><br><span class="line">     * @param token</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @POST(&quot;QCRL/qcrl?command=getFriendsCircle&quot;)</span><br><span class="line">    @FormUrlEncoded</span><br><span class="line">    Flowable&lt;ResultResponse&lt;List&lt;FriendItem&gt;&gt;&gt; getFriendsCircle(</span><br><span class="line">            @Field(&quot;token&quot;) String token,</span><br><span class="line">            @Field(&quot;number&quot;) String number,</span><br><span class="line">            @Field(&quot;userId&quot;) String userId,</span><br><span class="line">            @Field(&quot;lastDate&quot;) String lastId);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * åˆ é™¤</span><br><span class="line">     * @param token</span><br><span class="line">     * @param circleId</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @POST(&quot;QCRL/qcrl?command=updateFriendsCircle&quot;)</span><br><span class="line">    @FormUrlEncoded</span><br><span class="line">    Flowable&lt;ResultResponse&lt;String&gt;&gt; updateFriendsCircle(</span><br><span class="line">            @Field(&quot;token&quot;) String token,</span><br><span class="line">            @Field(&quot;circleId&quot;) String circleId);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * èµ</span><br><span class="line">     * @param token</span><br><span class="line">     * @param circleId</span><br><span class="line">     * @param userId</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @POST(&quot;QCRL/qcrl?command=addFavor&quot;)</span><br><span class="line">    @FormUrlEncoded</span><br><span class="line">    Flowable&lt;ResultResponse&lt;Object&gt;&gt; addFavor(</span><br><span class="line">            @Field(&quot;token&quot;) String token,</span><br><span class="line">            @Field(&quot;circleId&quot;) String circleId,</span><br><span class="line">            @Field(&quot;toId&quot;) String userId);</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®è‡ªå·±çš„æ¥å£ç¼–å†™å³å¯<br>@POST() æŒ‡è¯·æ±‚æ–¹å¼ä¸º POST  </p>
<blockquote>
<p>æ³¨æ„,æ‹¬å·ä¸­çš„ç½‘å€,å¼€å¤´ä¸å¯ä»¥ä½¿ç”¨/QCRL/â€¦<br>å¦åˆ™ä¼šç›´æ¥æ‹¼åˆ°HOSTåé¢,urlå¯èƒ½ä¼šé”™è¯¯ </p>
</blockquote>
<p>@FormUrlEncoded  è¡¨ç¤ºformè¡¨å•æäº¤,ä¼šEncodedç¼–ç å‚æ•°</p>
<p>@Field æ¯ä¸€ä¸ªå‚æ•°</p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Rxjava </tag>
            
            <tag> Okhttp </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Androidé¡¹ç›®çš„build.gradleé€šç”¨è®¾ç½®]]></title>
      <url>/Android/Android%E9%A1%B9%E7%9B%AE%E7%9A%84build-gradle%E9%80%9A%E7%94%A8%E8%AE%BE%E7%BD%AE/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;com.android.application&apos;</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line"></span><br><span class="line">    //å¼€å¯dataBinding</span><br><span class="line">    dataBinding&#123;</span><br><span class="line">        enabled = true</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        //å¼€å¯multiDex</span><br><span class="line">        multiDexEnabled true</span><br><span class="line"></span><br><span class="line">        //ä½¿ç”¨jni</span><br><span class="line">        ndk &#123;</span><br><span class="line">            //è®¾ç½®æ”¯æŒçš„SOåº“æ¶æ„,è¿™é‡Œçš„æ„æ€æ˜¯åªæ”¯æŒ&apos;armeabi&apos;, &apos;armeabi-v7a&apos;, &apos;x86&apos;</span><br><span class="line">            //è¿™ä¸‰ç§æ¶æ„</span><br><span class="line">            abiFilters &apos;armeabi&apos;, &apos;armeabi-v7a&apos;, &apos;x86&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //è®¾ç½®ä¸€ä¸ªç¼–è¯‘çš„é…ç½®</span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">        //åä¸ºreleaseçš„é…ç½®é¡¹</span><br><span class="line">        release &#123;</span><br><span class="line">            //ç­¾åæ–‡ä»¶çš„ä½ç½®,å½“å‰ä½ç½®æ˜¯æ ¹ç›®å½•</span><br><span class="line">            storeFile file(&quot;/keyfile.jks&quot;)</span><br><span class="line">            //storePassword</span><br><span class="line">            storePassword &quot;xxxxxxxx&quot;</span><br><span class="line">            //keyAlias</span><br><span class="line">            keyAlias &quot;wangzhumo&quot;</span><br><span class="line">            //keyPassword</span><br><span class="line">            keyPassword &quot;xxxxxxxx&quot;</span><br><span class="line">            //æ˜¯å¦ä½¿ç”¨v2Signing</span><br><span class="line">            v2SigningEnabled false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //ç¼–è¯‘çš„ç‰ˆæœ¬</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        //debugæ—¶çš„é…ç½®</span><br><span class="line">        debug &#123;</span><br><span class="line">            minifyEnabled false</span><br><span class="line">            //è¿™é‡Œä½¿ç”¨ä¸Šé¢é…ç½®çš„ç­¾å,å¯ä»¥åšåˆ°debugæ—¶,ä¹Ÿä½¿ç”¨çš„æ˜¯æ­£å¼ç­¾å,è€Œä¸æ˜¯debugçš„ keystore</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">            //buildConfig çš„ä¸€ä¸ªå‚æ•°,æ˜¯å¦å¼€å¯log</span><br><span class="line">            buildConfigField &quot;boolean&quot;, &quot;LOG_DEBUG&quot;, &quot;true&quot;</span><br><span class="line">            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        release &#123;</span><br><span class="line">            // æ˜¾ç¤ºLog</span><br><span class="line">            minifyEnabled false</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">            buildConfigField &quot;boolean&quot;, &quot;LOG_DEBUG&quot;, &quot;false&quot;</span><br><span class="line">            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //adbçš„é…ç½®é¡¹</span><br><span class="line">    adbOptions &#123;</span><br><span class="line">        //è¶…æ—¶æ—¶é—´</span><br><span class="line">        timeOutInMs = 5 * 1000</span><br><span class="line">        //adb install -r /path..apk</span><br><span class="line">        installOptions &apos;-r&apos;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    flavorDimensions &apos;env&apos;</span><br><span class="line"></span><br><span class="line">    productFlavors &#123;</span><br><span class="line">        //æ­£å¼ç‰ˆæœ¬</span><br><span class="line">        envydemo&#123;</span><br><span class="line">            dimension &apos;env&apos;</span><br><span class="line">            //æ­¤å¤„æ˜¯versionName</span><br><span class="line">            versionName &quot;V1.1&quot;</span><br><span class="line">            //manifestPlaceholders</span><br><span class="line">            //æ˜¯manifestå·²ç»å®šä¹‰çš„å‚æ•°,è¿™é‡Œç»™è¯¥å‚æ•°èµ‹å€¼</span><br><span class="line">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;wangzhumoo&quot;]</span><br><span class="line">            //buildConfig çš„å‚æ•°,Appå½“å‰çš„HOSTåœ°å€</span><br><span class="line">            buildConfigField &quot;String&quot;,&quot;SERVER_HOST&quot;,&apos;&quot;http://app....com/&quot;&apos;</span><br><span class="line">        &#125;</span><br><span class="line">        envtest &#123;</span><br><span class="line">            dimension &apos;env&apos;</span><br><span class="line">            versionName &quot;Test&quot;</span><br><span class="line">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;wangzhumoo&quot;]</span><br><span class="line">            buildConfigField &quot;String&quot;,&quot;SERVER_HOST&quot;,&apos;&quot;http://app.test....com/&quot;&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //è‡ªå®šä¹‰apkåå­—</span><br><span class="line">    android.applicationVariants.all &#123; variant -&gt;</span><br><span class="line">        variant.outputs.all &#123;</span><br><span class="line">            //apkçš„åå­—</span><br><span class="line">            outputFileName = &quot;App_$&#123;variant.versionName&#125;.apk&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    android &#123;</span><br><span class="line">         //æ’é™¤</span><br><span class="line">        configurations.all &#123;</span><br><span class="line">            resolutionStrategy.force &apos;com.google.code.findbugs:jsr305:1.3.9&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //ä½¿ç”¨java8 </span><br><span class="line">    compileOptions &#123;</span><br><span class="line">        sourceCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">        targetCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç ,åˆ é™¤äº†å¸¸è§çš„éƒ¨åˆ†.</p>
<ul>
<li>buildConfigField</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å¸¸é‡ç±»</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">public class Constants &#123;</span><br><span class="line">    //å–åˆ°åœ¨productFlavors.envyhcsé…ç½®çš„å‚æ•°</span><br><span class="line">    //buildConfigField &quot;String&quot;,&quot;SERVER_HOST&quot;,&apos;&quot;http://app....com/&quot;&apos;</span><br><span class="line">    public static final String BASE_URL = BuildConfig.SERVER_HOST;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>manifestPlaceholders</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;manifest&gt;</span><br><span class="line">    &lt;application&gt;</span><br><span class="line">        //å–åˆ°åœ¨productFlavors.envyhcsé…ç½®çš„å‚æ•°</span><br><span class="line">        //manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;wangzhumo&quot;]</span><br><span class="line">        &lt;meta-data</span><br><span class="line">            android:name=&quot;UMENG_CHANNEL&quot;</span><br><span class="line">            android:value=&quot;$&#123;UMENG_CHANNEL_VALUE&#125;&quot; /&gt;</span><br><span class="line">    &lt;/application&gt;</span><br><span class="line">&lt;/manifest&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>Build Variants<br>åœ¨build.gradleä¸­é…ç½®äº†productFlavors{  envdemo{} , envtest{}}</li>
</ul>
<p>å…¶ä¸­dimensionä¸€ä¸ªç»´åº¦<br>å…¶ä¸­buildTypesä¸€ä¸ªç»´åº¦</p>
<p>debug + evndemo<br>debug + evntest<br>release + evndeme<br>release + evntest</p>
<p>å…±4ç§,å…¶ä»–çš„å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°,æ‰€ä»¥ä¸åšè¯´æ˜</p>
<p><img src="/images/build_var.png" alt="Build Variants"></p>
<p>å¯ä»¥é€‰æ‹©debugé»˜è®¤çš„ç‰ˆæœ¬â€¦</p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Gradle </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android é¡¹ç›®ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬]]></title>
      <url>/Android/Android-%E9%A1%B9%E7%9B%AE%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86%E4%BE%9D%E8%B5%96%E7%89%88%E6%9C%AC/</url>
      <content type="html"><![CDATA[<p>å‡†å¤‡å¼•å…¥Arouter,åšä¸€ä¸ªç»„ä»¶çš„demo,å°±å¼€å§‹æ…¢æ…¢çš„æ”¹é€ é¡¹ç›®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">|-- app</span><br><span class="line">|   |-- build.gradle</span><br><span class="line">|   |-- libs</span><br><span class="line">|   |-- src</span><br><span class="line">|   |   |-- androidTest</span><br><span class="line">|   |   |-- main</span><br><span class="line">|   |   `-- test</span><br><span class="line">|</span><br><span class="line">|-- opensource</span><br><span class="line">|   |-- build.gradle</span><br><span class="line">|   |-- libs</span><br><span class="line">|   `-- src</span><br><span class="line">|       `-- main</span><br><span class="line">|-- build.gradle</span><br><span class="line">|-- settings.gradle</span><br><span class="line">`-- versions.gradle</span><br></pre></td></tr></table></figure>
<blockquote>
<p>app ä¸ºä¸»é¡¹ç›®<br>opensource ä½œä¸ºlibraryå­˜åœ¨,å°†æ¥ä¼šæˆä¸ºbaseLibçš„ä¾èµ–,å…¶ä¸­æ˜¯æ‰€æœ‰çš„ä¸‰æ–¹ä¾èµ–,å¼€æºä»£ç ç­‰ç­‰</p>
</blockquote>
<p><strong>1.æ ¹ç›®å½•åˆ›å»ºversions.gradle</strong></p>
<p><code>/versions.gradle</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ext.deps = [:]</span><br><span class="line">    def versions = [:]</span><br><span class="line">    versions.arch = &quot;1.0.0&quot;</span><br><span class="line">    versions.support = &quot;27.0.1&quot;</span><br><span class="line">    versions.dagger = &quot;2.13&quot;</span><br><span class="line">    versions.stetho = &quot;1.5.0&quot;</span><br><span class="line">    versions.dialogs = &quot;0.9.6.0&quot;</span><br><span class="line"></span><br><span class="line">    versions.glide = &quot;4.3.1&quot;</span><br><span class="line">    versions.gradle = &quot;3.0.1&quot;</span><br><span class="line"></span><br><span class="line">    versions.rxJava = &quot;2.1.7&quot;</span><br><span class="line">    versions.rxAndroid = &quot;2.0.1&quot;</span><br><span class="line">    versions.rxRelay = &quot;2.0.0&quot;</span><br><span class="line">    versions.rxBinding = &quot;2.0.0&quot;</span><br><span class="line"></span><br><span class="line">    versions.paging = &quot;1.0.0-alpha3&quot;</span><br><span class="line"></span><br><span class="line">    versions.okhttp = &quot;3.9.0&quot;</span><br><span class="line">    versions.retrofit = &quot;2.3.0&quot;</span><br><span class="line"></span><br><span class="line">    versions.kotlin = &quot;1.2.0&quot;</span><br><span class="line">    versions.kotlinBind = &quot;3.0.1&quot;</span><br><span class="line"></span><br><span class="line">    versions.gson = &quot;2.8.2&quot;</span><br><span class="line"></span><br><span class="line">    versions.arouterVersion = &quot;1.2.4&quot;</span><br><span class="line">    versions.arouterProcessor = &quot;1.1.4&quot;</span><br><span class="line">    versions.atslRunner = &quot;1.0.1&quot;</span><br><span class="line">    versions.atslRules = &quot;1.0.1&quot;</span><br><span class="line">    versions.hamcrest = &quot;1.3&quot;</span><br><span class="line">    versions.timber = &quot;4.5.1&quot;</span><br><span class="line">    versions.mockwebserver = &quot;3.8.1&quot;</span><br><span class="line">    versions.apache_commons = &quot;2.5&quot;</span><br><span class="line">    versions.mockito = &quot;2.7.19&quot;</span><br><span class="line">    versions.mockito_all = &quot;1.10.19&quot;</span><br><span class="line">    versions.dexmaker = &quot;2.2.0&quot;</span><br><span class="line">    versions.constraint = &quot;1.0.2&quot;</span><br><span class="line">    versions.junit = &quot;4.12&quot;</span><br><span class="line">    versions.espresso = &quot;3.0.1&quot;</span><br><span class="line">    def deps = [:]</span><br><span class="line"></span><br><span class="line">    def rxLib = [:]</span><br><span class="line">    rxLib.rxJava = &quot;io.reactivex.rxjava2:rxjava:$versions.rxJava&quot;</span><br><span class="line">    rxLib.rxAndroid = &quot;io.reactivex.rxjava2:rxandroid:$versions.rxAndroid&quot;</span><br><span class="line">    rxLib.rxBinding = &quot;com.jakewharton.rxbinding2:rxbinding:$versions.rxBinding&quot;</span><br><span class="line">    rxLib.rxBingingV4 = &quot;com.jakewharton.rxbinding2:rxbinding-support-v4:$versions.rxBinding&quot;</span><br><span class="line">    rxLib.rxBingingRecycler = &quot;com.jakewharton.rxbinding2:rxbinding-recyclerview-v7:$versions.rxBinding&quot;</span><br><span class="line">        rxLib.rxBingingV7 = &quot;com.jakewharton.rxbinding2:rxbinding-appcompat-v7:$versions.rxBinding&quot;</span><br><span class="line">    rxLib.rxBingingDesign = &quot;com.jakewharton.rxbinding2:rxbinding-design:$versions.rxBinding&quot;</span><br><span class="line">    rxLib.rxRelay = &quot;com.jakewharton.rxrelay2:rxrelay:$versions.rxRelay&quot;</span><br><span class="line">    deps.rxLibs = rxLib</span><br><span class="line"></span><br><span class="line">    def support = [:]</span><br><span class="line">    support.annotations = &quot;com.android.support:support-annotations:$versions.support&quot;</span><br><span class="line">    support.appCompat = &quot;com.android.support:appcompat-v7:$versions.support&quot;</span><br><span class="line">    support.recyclerview = &quot;com.android.support:recyclerview-v7:$versions.support&quot;</span><br><span class="line">    support.cardview = &quot;com.android.support:cardview-v7:$versions.support&quot;</span><br><span class="line">    support.design = &quot;com.android.support:design:$versions.support&quot;</span><br><span class="line">    support.v4 = &quot;com.android.support:support-v4:$versions.support&quot;</span><br><span class="line">    support.coreUtils = &quot;com.android.support:support-core-utils:$versions.support&quot;</span><br><span class="line">    deps.support = support</span><br><span class="line"></span><br><span class="line">    def archLib = [:]</span><br><span class="line">    archLib.archExtensions = &quot;android.arch.lifecycle:extensions:$versions.arch&quot;</span><br><span class="line">    archLib.archRoomRuntime = &quot;android.arch.persistence.room:runtime:$versions.arch&quot;</span><br><span class="line">    archLib.archRoomCompiler = &quot;android.arch.persistence.room:compiler:$versions.arch&quot;</span><br><span class="line">    archLib.archLifecycleCommon = &quot;android.arch.lifecycle:common-java8:$versions.arch&quot;</span><br><span class="line">    deps.archLibs = archLib</span><br><span class="line"></span><br><span class="line">    def glide = [:]</span><br><span class="line">    glide.glide = &quot;com.github.bumptech.glide:glide:$versions.glide&quot;</span><br><span class="line">    glide.glideCompiler = &quot;com.github.bumptech.glide:compiler:$versions.glide&quot;</span><br><span class="line">    deps.glide = glide</span><br><span class="line"></span><br><span class="line">    def stethos = [:]</span><br><span class="line">    stethos.stetho = &quot;com.facebook.stetho:stetho:$versions.stetho&quot;</span><br><span class="line">    stethos.stethoHttp = &quot;com.facebook.stetho:stetho-okhttp3:$versions.stetho&quot;</span><br><span class="line">    deps.stetho = stethos</span><br><span class="line"></span><br><span class="line">    def okhttp = [:]</span><br><span class="line">    okhttp.okhttp = &quot;com.squareup.okhttp3:okhttp:$versions.okhttp&quot;</span><br><span class="line">    okhttp.okhttpLogging = &quot;com.squareup.okhttp3:logging-interceptor:$versions.okhttp&quot;</span><br><span class="line">    deps.okhttp = okhttp</span><br><span class="line"></span><br><span class="line">    def retrofit = [:]</span><br><span class="line">    retrofit.retrofit = &quot;com.squareup.retrofit2:retrofit:$versions.retrofit&quot;</span><br><span class="line">    retrofit.converterGson = &quot;com.squareup.retrofit2:converter-gson:$versions.retrofit&quot;</span><br><span class="line">    retrofit.adapterRxjava = &quot;com.squareup.retrofit2:adapter-rxjava2:$versions.retrofit&quot;</span><br><span class="line">    deps.retrofit = retrofit</span><br><span class="line"></span><br><span class="line">    def arouter = [:]</span><br><span class="line">    arouter.runtime = &quot;com.alibaba:arouter-api:$versions.arouterVersion&quot;</span><br><span class="line">    arouter.compiler = &quot;com.alibaba:arouter-compiler:$versions.arouterProcessor&quot;</span><br><span class="line">    deps.arouter = arouter</span><br><span class="line"></span><br><span class="line">    def dagger = [:]</span><br><span class="line">    dagger.dagger = &quot;com.google.dagger:dagger:$versions.dagger&quot;</span><br><span class="line">    dagger.daggerAndroid = &quot;com.google.dagger:dagger-android:$versions.dagger&quot;</span><br><span class="line">    dagger.daggerAndroidSupport = &quot;com.google.dagger:dagger-android-support:$versions.dagger&quot;</span><br><span class="line">    dagger.daggerCompiler = &quot;com.google.dagger:dagger-compiler:$versions.dagger&quot;</span><br><span class="line">    dagger.daggerAndroidCompiler = &quot;com.google.dagger:dagger-android-processor:$versions.dagger&quot;</span><br><span class="line">    deps.dagger = dagger</span><br><span class="line"></span><br><span class="line">    def kotlin = [:]</span><br><span class="line">    kotlin.kotlinStdlib = &quot;org.jetbrains.kotlin:kotlin-stdlib-jre8:$versions.kotlin&quot;</span><br><span class="line">    kotlin.kotlinPlugin = &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$versions.kotlin&quot;</span><br><span class="line">    kotlin.kotlinDatabind = &quot;com.android.databinding:compiler:$versions.kotlinBind&quot;</span><br><span class="line">    deps.kotlin = kotlin</span><br><span class="line"></span><br><span class="line">    def espresso = [:]</span><br><span class="line">    espresso.core = &quot;com.android.support.test.espresso:espresso-core:$versions.espresso&quot;</span><br><span class="line">    espresso.contrib = &quot;com.android.support.test.espresso:espresso-contrib:$versions.espresso&quot;</span><br><span class="line">    espresso.intents = &quot;com.android.support.test.espresso:espresso-intents:$versions.espresso&quot;</span><br><span class="line">    deps.espresso = espresso</span><br><span class="line"></span><br><span class="line">    def atsl = [:]</span><br><span class="line">    atsl.runner = &quot;com.android.support.test:runner:$versions.atsl_runner&quot;</span><br><span class="line">    atsl.rules = &quot;com.android.support.test:rules:$versions.atsl_runner&quot;</span><br><span class="line">    deps.atsl = atsl</span><br><span class="line"></span><br><span class="line">    deps.multidex = &quot;com.android.support:multidex:1.0.1&quot;</span><br><span class="line">    deps.dialog =  &quot;com.afollestad.material-dialogs:core:$versions.dialogs&quot;</span><br><span class="line">    deps.gson = &quot;com.google.code.gson:gson:$versions.gson&quot;</span><br><span class="line">    deps.paging = &quot;android.arch.paging:runtime:$versions.paging&quot;</span><br><span class="line">    deps.dexmaker = &quot;com.linkedin.dexmaker:dexmaker-mockito:$versions.dexmaker&quot;</span><br><span class="line">    deps.constraint = &quot;com.android.support.constraint:constraint-layout:$versions.constraint&quot;</span><br><span class="line">    deps.timber = &quot;com.jakewharton.timber:timber:$versions.timber&quot;</span><br><span class="line">    deps.gradlePlugin = &quot;com.android.tools.build:gradle:$versions.gradle&quot;</span><br><span class="line">    deps.kotlinPlugin = &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$versions.kotlin&quot;</span><br><span class="line">    ext.deps = deps</span><br><span class="line"></span><br><span class="line">    def buildVersions = [:]</span><br><span class="line">    buildVersions.minSDK = 14</span><br><span class="line">    buildVersions.targetSDK = 26</span><br><span class="line">    buildVersions.compileSDK = 27</span><br><span class="line">    buildVersions.buildTools = &quot;26.0.2&quot;</span><br><span class="line">    ext.buildVersion = buildVersions</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def addRepos(RepositoryHandler handler) &#123;</span><br><span class="line">        handler.google()</span><br><span class="line">        handler.jcenter()</span><br><span class="line">        handler.mavenCentral()</span><br><span class="line">        handler.maven &#123; url &apos;https://oss.jfrog.org/libs-snapshot&apos; &#125;</span><br><span class="line">        handler.maven &#123; url &apos;https://jitpack.io&apos; &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ext.addRepos = this.&amp;addRepos</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­å£°æ˜äº†æ‰€æœ‰å·²ç»ç”¨åˆ°,æˆ–è€…å¯èƒ½ä½¿ç”¨çš„Libç‰ˆæœ¬,ä»¥åŠAndroid sdk tools çš„ç‰ˆæœ¬.</p>
<p><strong>2.å°†å£°æ˜çš„ç‰ˆæœ¬,æ·»åŠ åˆ°é¡¹ç›®ä¸­,æ–¹ä¾¿å¼•ç”¨</strong></p>
<p><code>/build.gradle</code></p>
<p>é¡¹ç›®çš„build.gradleä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    //åŠ å…¥å¼•ç”¨</span><br><span class="line">    apply from: &apos;versions.gradle&apos;</span><br><span class="line"></span><br><span class="line">    //æ·»åŠ rep</span><br><span class="line">    addRepos(repositories)</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        //ç”±versions.gradleç®¡ç†çš„ç‰ˆæœ¬</span><br><span class="line">        classpath deps.gradlePlugin</span><br><span class="line">        classpath deps.kotlinPlugin</span><br><span class="line">        // NOTE: Do not place your application dependencies here; they belong</span><br><span class="line">        // in the individual module build.gradle files</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">allprojects &#123;</span><br><span class="line">    //æ·»åŠ rep</span><br><span class="line">    addRepos(repositories)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3.å¯¹Android Tools,SDKç‰ˆæœ¬çš„æ§åˆ¶</strong><br>é¡¹ç›®/app/build.gradle</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    //sdkçš„ç‰ˆæœ¬</span><br><span class="line">    compileSdkVersion buildVersion.compileSDK</span><br><span class="line">    //toolsçš„ç‰ˆæœ¬</span><br><span class="line">    buildToolsVersion buildVersion.buildTools</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        //sdkç‰ˆæœ¬</span><br><span class="line">        minSdkVersion buildVersion.minSDK</span><br><span class="line">        targetSdkVersion buildVersion.targetSDK</span><br><span class="line">        versionCode 1  //ä¹Ÿå¯ä»¥ä½¿ç”¨</span><br><span class="line">        versionName &quot;1.0&quot;</span><br><span class="line">    &#125;</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4.å…¶ä»–Libçš„ä¾èµ–</strong><br>æŒ‰ç…§è¿™æ ·çš„æ ¼å¼å³å¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    //support</span><br><span class="line">    api deps.support.appCompat</span><br><span class="line">    api deps.support.recyclerview</span><br><span class="line">    api deps.support.cardview</span><br><span class="line">    api deps.support.design</span><br><span class="line">    api deps.multidex</span><br><span class="line">    api deps.constraint</span><br><span class="line">    //rxjava</span><br><span class="line">    api deps.rxLibs.rxJava</span><br><span class="line">    api deps.rxLibs.rxAndroid</span><br><span class="line">    api deps.rxLibs.rxRelay</span><br><span class="line">    //http</span><br><span class="line">    api deps.okhttp.okhttp</span><br><span class="line">    api deps.okhttp.okhttpLogging</span><br><span class="line">    api deps.retrofit.retrofit</span><br><span class="line">    api deps.retrofit.converterGson</span><br><span class="line">    api deps.retrofit.adapterRxjava</span><br><span class="line">    api deps.gson</span><br><span class="line">    //arch</span><br><span class="line">    api deps.archLibs.archExtensions</span><br><span class="line">    api deps.archLibs.archRoomRuntime</span><br><span class="line">    api deps.archLibs.archLifecycleCommon</span><br><span class="line">    annotationProcessor deps.archLibs.archRoomCompiler</span><br><span class="line">    //stetho</span><br><span class="line">    api deps.stetho.stetho</span><br><span class="line">    api deps.stetho.stethoHttp</span><br><span class="line">    //dialog</span><br><span class="line">    api deps.dialog</span><br><span class="line">    //glide</span><br><span class="line">    api deps.glide.glide</span><br><span class="line">    annotationProcessor deps.glide.glideCompiler</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Gradle </tag>
            
            <tag> ç»„ä»¶åŒ– </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¸¸ç”¨çš„Google Chrome æµè§ˆå™¨æ’ä»¶]]></title>
      <url>/Tools/%E5%B8%B8%E7%94%A8%E7%9A%84Google-Chrome-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/</url>
      <content type="html"><![CDATA[<p>###å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„Chromeæ’ä»¶</p>
<p><strong>1.<a href="https://chrome.google.com/webstore/detail/adblock/gighmmpiobklfepjocnamgkkbiglidom" target="_blank" rel="noopener">AdBlock</a></strong></p>
<p>æœ€å—æ¬¢è¿çš„Chromeæ‰©å±•ï¼Œæ‹¥æœ‰è¶…è¿‡4000ä¸‡ç”¨æˆ·ï¼å±è”½æ•´ä¸ªäº’è”ç½‘ä¸Šçš„å¹¿å‘Šã€‚</p>
<p><img src="/images/adblock.png" alt="adblock"></p>
<p>æ¨è: â˜…â˜…â˜…</p>
<p><strong>2.<a href="https://chrome.google.com/webstore/detail/insightio-for-github/pmhfgjjhhomfplgmbalncpcohgeijonh" target="_blank" rel="noopener">Insight.io for Github</a></strong></p>
<p>Improve GitHub code browsing experienc.<br>é€šè¿‡æ’ä»¶å¯ä»¥åœ¨githubçš„é¡¹ç›®é¡µé¢ä¸Š,ç»“æ„åŒ–çš„æŸ¥çœ‹ä»£ç ,ç”šè‡³è¿˜æœ‰â€å¼•ç”¨â€,â€æŸ¥æ‰¾â€ç­‰ç­‰åŠŸèƒ½.<br>å°±åƒæ˜¯æŠŠgithubé¡¹ç›®é¡µ,å˜æˆäº†ä¸€ä¸ªåªèƒ½æŸ¥çœ‹çš„ide.<br>å¯¹äº†,è¿˜èƒ½å¾ˆæ–¹ä¾¿çš„ä¸‹è½½å•ä¸ªæ–‡ä»¶</p>
<p><img src="/images/chrome_insight.io.png" alt="Insight.io for Github"></p>
<p>æ¨è: â˜…â˜…â˜…â˜…â˜…</p>
<p><strong>3.<a href="https://chrome.google.com/webstore/detail/infinity-new-tab/dbfmnekepjoapopniengjbcpnbljalfg" target="_blank" rel="noopener">Infinityæ–°æ ‡ç­¾é¡µ</a></strong></p>
<p>é‡æ–°å®šä¹‰äº†æ–°æ ‡ç­¾é¡µï¼Œä¸€ä¸ªè¿½æ±‚æç®€ç¾å­¦å’Œä¸€ç«™å¼æœåŠ¡ä½“éªŒæ›´å°‘çš„ä¸œè¥¿ä½“éªŒæ›´å¤šçš„åŠŸèƒ½ã€‚</p>
<p>ç®€æ´,æ–¹ä¾¿,å®ç”¨</p>
<p><img src="/images/chrome_infinity.png" alt="Infinityæ–°æ ‡ç­¾é¡µ"></p>
<p>æ¨è:â˜…â˜…â˜…â˜…</p>
<p><strong>4.<a href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop" target="_blank" rel="noopener">Postman</a></strong><br>Postman makes API development faster, easier, and better.</p>
<p>æ›´å¿«â€¦..å“ˆå“ˆ<br>è¶…çº§æ–¹ä¾¿,æ¨¡æ‹Ÿè¯·æ±‚çš„App,æ”¯æŒpost get,å¯ä»¥æµ‹è¯•æ–‡ä»¶ä¸Šä¼ ç­‰<br>è¿˜æœ‰æ¯”è¾ƒæ–¹ä¾¿çš„ä¸€ç‚¹æ˜¯,å¯ä»¥ç”Ÿæˆå½“å‰è¯·æ±‚çš„okhttpä»£ç ,è™½ç„¶åªèƒ½ä½œå‚è€ƒâ€¦..</p>
<p>æ¨è:â˜…â˜…â˜…â˜…â˜…</p>
<blockquote>
<p>å’Œå®ƒä¸€æ ·çš„è¿˜æœ‰<a href="https://chrome.google.com/webstore/detail/restlet-client-rest-api-t/aejoelaoggembcahagimdiliamlcdmfm" target="_blank" rel="noopener">Restlet Client - REST API Testing</a></p>
</blockquote>
<p><strong>5.<a href="https://github.com/acgotaku/BaiduExporter" target="_blank" rel="noopener">BaiduExporter</a></strong><br>å¯ä»¥æ–¹ä¾¿çš„æŠŠç½‘ç›˜çš„ä¸‹è½½åœ°å€å¯¼å‡ºåˆ°aria2/aria2-rpcï¼Œæ”¯æŒYAAWã€‚<br>é…åˆAria2GUI,å¯ä»¥é«˜é€Ÿä¸‹è½½ç™¾åº¦äº‘é™é€Ÿçš„æ–‡ä»¶..</p>
<p>è™½ç„¶è¿˜èƒ½ç”¨,ä½†æ˜¯ä½œè€…è¯´ä¸ç»´æŠ¤äº†,è¿˜æœ‰æ›¿ä»£å“:<a href="https://chrome.google.com/webstore/detail/aria2c-integration/edcakfpjaobkpdfpicldlccdffkhpbfk?hl=en-US" target="_blank" rel="noopener">Aria2c Integration</a>æ²¡æœ‰ç”¨è¿‡,ä¸çŸ¥é“æ˜¯å¦å¯ç”¨.</p>
<p><a href="https://aria2.github.io/" target="_blank" rel="noopener">Aria2GUI</a><br>Github : <a href="https://github.com/aria2/aria2" target="_blank" rel="noopener">https://github.com/aria2/aria2</a></p>
<p>æ¨è:â˜…â˜…â˜…â˜…â˜…</p>
<p><strong>å…¶ä»–</strong><br>æ¨è:â˜…â˜…â˜…</p>
<p><a href="https://chrome.google.com/webstore/detail/singlefile/mpiodijhokgodhhofbcjdecpffjipkle" target="_blank" rel="noopener">SingleFile</a><br>Archive a complete page into a single HTML file<br>å¯ä»¥å°†ç½‘é¡µä¿å­˜ä¸ºå•æ–‡ä»¶,æ–¹ä¾¿ä¿å­˜</p>
<p><a href="https://chrome.google.com/webstore/detail/evernote-web-clipper/pioclpoplcdbaefihamjohnefbikjilc" target="_blank" rel="noopener">å°è±¡ç¬”è®°Â·å‰ªè—</a><br>ä½¿ç”¨å°è±¡ç¬”è®°æ‰©å±•ç¨‹åºä¸€é”®ä¿å­˜ç²¾å½©ç½‘é¡µå†…å®¹åˆ°å°è±¡ç¬”è®°å¸æˆ·ã€‚</p>
<p><a href="https://github.com/callumlocke/json-formatter" target="_blank" rel="noopener">JSON Formatter</a><br>Chrome extension for printing JSON and JSONP nicely when you visit it â€˜directlyâ€™ in a browser tab.<br>Github : <a href="https://github.com/callumlocke/json-formatter" target="_blank" rel="noopener">https://github.com/callumlocke/json-formatter</a></p>
]]></content>
      
        <categories>
            
            <category> Tools </category>
            
        </categories>
        
        
        <tags>
            
            <tag> tools </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[jniä½¿ç”¨æŒ‡å—,å…³äº.soä½ åº”è¯¥çŸ¥é“çš„]]></title>
      <url>/uncategorized/jni%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-%E5%85%B3%E4%BA%8E-so%E4%BD%A0%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84/</url>
      <content type="html"><![CDATA[<p><strong>å…¶å®è¿™äº›éƒ½æ˜¯Androidè®¾å¤‡CPUçš„:</strong></p>
<blockquote>
<ul>
<li>armeabi: æ—©æœŸçš„æ‰‹æœºç”¨çš„æ¯”è¾ƒå¤š,é’ˆå¯¹æ™®é€šçš„æˆ–æ—§çš„arm v5 cpu,ã€‚</li>
<li>armeabiv-v7a:ç›®å‰ä¸»æµç‰ˆæœ¬ 2011å¹´ä»¥åçš„ç”Ÿäº§çš„å¤§éƒ¨åˆ†è®¾å¤‡,é’ˆå¯¹æœ‰æµ®ç‚¹è¿ç®—æˆ–é«˜çº§æ‰©å±•åŠŸèƒ½çš„arm v7 cpu.</li>
<li>arm64-v8a:  8ä»£ã€64ä½ARMå¤„ç†å™¨ï¼Œ64ä½æ”¯æŒ.</li>
<li>x86: æˆ‘ä»¬è§åˆ°çš„æ¨¡æ‹Ÿå™¨å¤§å¤šå°±æ˜¯è¿™ä¸ªã€‚</li>
<li>x86_64: 64ä½çš„å¹³æ¿ã€‚</li>
</ul>
</blockquote>
<p>ç„¶åç‰¹æ„è¯´ä¸€ä¸‹x86ç³»åˆ—çš„,æ˜¯å…¼å®¹armçš„,ä½†æ˜¯æ€§èƒ½æŸå¤±ç‰¹åˆ«å¤§.</p>
<p><strong>AndroidåŠ è½½.soçš„åŸåˆ™</strong><br>åŒä¸€ç›®å½•ä¸‹è¦ä¹ˆæ‰€æœ‰ä½¿ç”¨jniçš„é¡¹ç›®éƒ½ç»™åŠ ä¸Š.soæ–‡ä»¶,<br>è¦ä¹ˆä½ å°±åˆ«ç»™è¿™ä¸ªç›®å½•,ä¹Ÿå°±æ˜¯åªè¦ä¸é½å…¨å°±éƒ½å¹²æ‰<br>æ¯”å¦‚ä½ çš„libç»“æ„æ˜¯è¿™æ ·çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">libs</span><br><span class="line">  -armeabi</span><br><span class="line">      -aaa.so</span><br><span class="line">      -bbb.so</span><br><span class="line">  -arm64-v8a</span><br><span class="line">      -aaa.so</span><br></pre></td></tr></table></figure>
<p>å…¶å®è¿™ç§æƒ…å†µå°±æ˜¯å±äºåŒä¸€ç›®å½•ä¸‹,æä¾›çš„.soæ–‡ä»¶ä¸å…¨â€¦ç„¶è€Œå¾ˆå®¹æ˜“å‡ºç°,æ¯•ç«Ÿæœ‰äº›ä¸‰æ–¹å•Šä»€ä¹ˆçš„,æä¾›çš„.soæ–‡ä»¶å¹¶ä¸é½å…¨,è¿™æ ·çš„è¯åŒä¸€ä¸ªæ¶æ„ç›®å½•ä¸‹ä¼šç¼ºå°‘ä¸€ä¸ªæˆ–å¤šä¸ª.soæ–‡ä»¶.</p>
<p>Androidåœ¨åŠ è½½æŸä¸ªä½¿ç”¨jniçš„åŠŸèƒ½æ—¶,ä½ å¹¶æ²¡æœ‰æä¾›x86çš„.soæ–‡ä»¶,ä½†æ˜¯ä½ æœ‰x86è¿™ä¸ªç›®å½•,é‚£å°±ä¼šå»x86ç›®å½•ä¸‹å»æ‰¾,<strong>æ²¡æœ‰å•Š</strong>ç„¶åå°±å¼‚å¸¸äº†.</p>
<p><strong>AndroidåŠ è½½.soçš„ç›®å½•</strong><br>1.æˆ‘è‡ªå·±ç”¨çš„æ˜¯</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2520304-4f36025e8667df85.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Snip20170309_1.png"></p>
<p>ä¹Ÿå°±æ˜¯è‡ªå·±åœ¨app -&gt; src -&gt; main ä¸‹è‡ªå·±å»ºç«‹ä¸€ä¸ªç›®å½•: jniLibs<br>ç„¶åæ”¾è¿›å»å³å¯.</p>
<p>2.å°±æ˜¯é€šå¸¸æ”¾åœ¨libsç›®å½•ä¸‹äº†<br>åˆ«å¿˜äº†åœ¨build.gradleæ–‡ä»¶ä¸­è®¾ç½®   jniLibs.srcDir </p>
<p><strong>Androidæ’é™¤æŸæ¶æ„çš„.so</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;    </span><br><span class="line">        ...</span><br><span class="line">        ndk &#123;</span><br><span class="line">            // è®¾ç½®æ”¯æŒçš„ SO åº“æ„æ¶</span><br><span class="line">            abiFilters &apos;armeabi&apos;, &apos;armeabi-v7a&apos;     // &apos;arm64-v8a&apos;, &apos;x86&apos;, &apos;x86_64&apos;, &apos;mips&apos;, &apos;mips64&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç¼–è¯‘æŠ¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NDK integration is deprecated in the current plugin.</span><br></pre></td></tr></table></figure></p>
<p> gradle.properties æ–‡ä»¶ä¸­æ·»åŠ ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android.useDeprecatedNdk=true</span><br></pre></td></tr></table></figure></p>
<p>åº”è¯¥è¿˜æœ‰å…¶ä»–æ–¹æ³•æ’é™¤,æˆ‘ä¹Ÿå°±çŸ¥é“è¿™ä¸€ç§,å¦‚æœæœ‰çŸ¥é“å…¶ä»–æ–¹æ³•çš„,è¯·å‘ŠçŸ¥ä¸€ä¸‹,è°¢è°¢</p>
]]></content>
      
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[EditTextçš„è¾“å…¥å±æ€§InputTypeä»¥åŠimeOptions]]></title>
      <url>/Android/EditText%E7%9A%84%E8%BE%93%E5%85%A5%E5%B1%9E%E6%80%A7InputType%E4%BB%A5%E5%8F%8AimeOptions/</url>
      <content type="html"><![CDATA[<p><strong>EditTextçš„è¾“å…¥å±æ€§</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">android:imeOptions=&quot;flagNoExtractUi&quot;  //ä½¿è½¯é”®ç›˜ä¸å…¨å±æ˜¾ç¤ºï¼Œåªå ç”¨éƒ¨åˆ†å±å¹•</span><br><span class="line">android:imeOptions=&quot;actionNone&quot;  //è¾“å…¥æ¡†å³ä¾§ä¸å¸¦ä»»ä½•æç¤º</span><br><span class="line">android:imeOptions=&quot;actionGo&quot;    //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸º&apos;å¼€å§‹&apos;</span><br><span class="line">android:imeOptions=&quot;actionSearch&quot;  //å³ä¸‹è§’æŒ‰é”®ä¸ºæœç´¢</span><br><span class="line">android:imeOptions=&quot;actionSend&quot;    //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸º&apos;å‘é€&apos;</span><br><span class="line">android:imeOptions=&quot;actionNext&quot;   //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸º&apos;ä¸‹ä¸€æ­¥&apos;</span><br><span class="line">android:imeOptions=&quot;actionDone&quot;  //å³ä¸‹è§’æŒ‰é”®å†…å®¹ä¸º&apos;å®Œæˆ&apos;</span><br></pre></td></tr></table></figure></p>
<p><strong>EditTextçš„inputTypeå±æ€§</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;EditText</span><br><span class="line">    android:inputType=&quot;phone&quot; //ç”µè¯å·ç </span><br><span class="line">    android:inputType=&quot;none&quot; </span><br><span class="line">    android:inputType=&quot;text&quot;  //æ–‡æœ¬ç±»å‹</span><br><span class="line">    android:inputType=&quot;textCapCharacters&quot; //å­—æ¯å¤§å†™ </span><br><span class="line">    android:inputType=&quot;textCapWords&quot; //é¦–å­—æ¯å¤§å†™ </span><br><span class="line">    android:inputType=&quot;textCapSentences&quot; //ä»…ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ </span><br><span class="line">    android:inputType=&quot;textAutoCorrect&quot; //è‡ªåŠ¨å®Œæˆ </span><br><span class="line">    android:inputType=&quot;textAutoComplete&quot; //è‡ªåŠ¨å®Œæˆ </span><br><span class="line">    android:inputType=&quot;textMultiLine&quot; //å¤šè¡Œè¾“å…¥ </span><br><span class="line">    android:inputType=&quot;textImeMultiLine&quot; //è¾“å…¥æ³•å¤šè¡Œ</span><br><span class="line">    android:inputType=&quot;textNoSuggestions&quot; //ä¸æç¤º </span><br><span class="line">    android:inputType=&quot;textUri&quot; //ç½‘å€ </span><br><span class="line">    android:inputType=&quot;textEmailAddress&quot; //ç”µå­é‚®ä»¶åœ°å€ </span><br><span class="line">    android:inputType=&quot;textEmailSubject&quot; //é‚®ä»¶ä¸»é¢˜ </span><br><span class="line">    android:inputType=&quot;textShortMessage&quot; //çŸ­è®¯ </span><br><span class="line">    android:inputType=&quot;textLongMessage&quot; //é•¿ä¿¡æ¯ </span><br><span class="line">    android:inputType=&quot;textPersonName&quot; //äººå </span><br><span class="line">    android:inputType=&quot;textPostalAddress&quot; //åœ°å€</span><br><span class="line">    android:inputType=&quot;textPassword&quot; //å¯†ç  </span><br><span class="line">    android:inputType=&quot;textVisiblePassword&quot; //å¯è§å¯†ç </span><br><span class="line">    android:inputType=&quot;textWebEditText&quot; //ä½œä¸ºç½‘é¡µè¡¨å•çš„æ–‡æœ¬ </span><br><span class="line">    android:inputType=&quot;textFilter&quot; //æ–‡æœ¬ç­›é€‰è¿‡æ»¤ </span><br><span class="line">    android:inputType=&quot;textPhonetic&quot; //æ‹¼éŸ³è¾“å…¥ </span><br><span class="line">    android:inputType=&quot;number&quot; //æ•°å­— </span><br><span class="line">    android:inputType=&quot;numberSigned&quot; //å¸¦ç¬¦å·æ•°å­—æ ¼å¼ </span><br><span class="line">    android:inputType=&quot;numberDecimal&quot; //å¸¦å°æ•°ç‚¹çš„æµ®ç‚¹æ ¼å¼ </span><br><span class="line">    android:inputType=&quot;datetime&quot; //æ—¶é—´æ—¥æœŸ </span><br><span class="line">    android:inputType=&quot;date&quot; //æ—¥æœŸé”®ç›˜ </span><br><span class="line">    android:inputType=&quot;time&quot; //æ—¶é—´é”®ç›˜</span><br><span class="line">    /&gt;</span><br></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[TextViewä¸­çš„æ–‡å­—é¢œè‰²,ç‚¹å‡»,æ–œä½“ç­‰å®ç°--SpannableString]]></title>
      <url>/Android/TextView%E4%B8%AD%E7%9A%84%E6%96%87%E5%AD%97%E9%A2%9C%E8%89%B2-%E7%82%B9%E5%87%BB-%E6%96%9C%E4%BD%93%E7%AD%89%E5%AE%9E%E7%8E%B0-SpannableString/</url>
      <content type="html"><![CDATA[<p><strong>ä¸€èˆ¬å®ç°æ–¹å¼å¦‚ä¸‹</strong>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String html = &quot;æ–‡å­—&lt;font color=\&quot;red\&quot;&gt;å˜è‰²&lt;/font&gt;çš„æ•ˆæœ&quot;;</span><br><span class="line">tvMainShow.setText(Html.fromHtml(html));</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨Htmlçš„æ–¹å¼æ¥å®ç°,ç®€å•çš„è¿˜å¥½,å¤æ‚ä¸€ç‚¹çš„çœŸçš„å¾ˆä¸æ–¹ä¾¿</p>
<p>Googleæ˜¾ç„¶æ—©å°±å·²ç»æƒ³åˆ°äº†è¿™æ ·çš„é—®é¢˜,æ‰€ä»¥  </p>
<blockquote>
<p><a href="https://developer.android.com/reference/android/text/SpannedString.html" target="_blank" rel="noopener">SpannedString</a> &amp; <a href="https://developer.android.com/reference/android/text/SpannableStringBuilder.html" target="_blank" rel="noopener">SpannableStringBuilder</a> å°±æ˜¯å¹²è¿™ä¸ªçš„</p>
</blockquote>
<p>ä»–ä»¬éƒ½å®ç°äº† <a href="https://developer.android.com/reference/java/lang/CharSequence.html" target="_blank" rel="noopener">CharSequence</a>,çœ¼ç†Ÿä¹ˆ?  <figure class="highlight plain"><figcaption><span>text)```.ä¹Ÿå°±æ˜¯è¯´,ä½ å¯ä»¥ç›´æ¥èµ‹å€¼ç»™TextView</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ä»–ä»¬ä¸¤ä¸ªçš„åŒºåˆ«å°±æ˜¯    </span><br><span class="line">This is the class for text whose content is immutable but to which markup objects can be attached and detached. For mutable text, seeÂ SpannableStringBuilder</span><br><span class="line">æ–‡æ¡£è¯´çš„å¾ˆæ¸…æ¥šäº†,å°±æ˜¯CharSequenceæ˜¯å›ºå®šé•¿åº¦çš„,ä¸€æ—¦é€šè¿‡ new SpannableString(&quot;è®¾ç½®æ–‡å­—&quot;);åˆ™ä¸å¯ä»¥æ›´æ”¹æ–‡å­—å†…å®¹,è€ŒSpannableStringBuilderæ˜¯å¯ä»¥çš„,ä¸ªäººç†è§£æ¯”è¾ƒåƒString å’Œ StringBuilder çš„å…³ç³»</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">###ä¸å¤šè¯´äº†,å¼€æ:</span><br><span class="line">**1.è®¾ç½®æ–‡å­—**</span><br><span class="line">&gt;SpannableString spannableString = new SpannableString(&quot;æ–‡å­—çš„å‰æ™¯è‰²ä¸èƒŒæ™¯è‰²&quot;);</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">**2.é€šè¿‡setSpanæ¥ä¿®æ”¹æ–‡å­—çš„æ ·å¼**</span><br><span class="line">```setSpan [Object what, int start, int end, int flags)</span><br></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2520304-e821febbebd4f8dc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å…¥å‚.png"></p>
<p>flags:<br>Spannable.SPAN_EXCLUSIVE_EXCLUSIVEï¼šå‰åéƒ½ä¸åŒ…æ‹¬<br>Spannable.SPAN_EXCLUSIVE_INCLUSIVE    ï¼šå‰é¢ä¸åŒ…æ‹¬<br>Spannable.SPAN_INCLUSIVE_EXCLUSIVE    ï¼šå‰é¢åŒ…æ‹¬<br>Spannable.SPAN_INCLUSIVE_INCLUSIVE    ï¼šå‰åéƒ½åŒ…æ‹¬</p>
<p>ä¸ºäº†è¯´æ˜è¿™å››ä¸ªå‚æ•°,æœ‰ä¾‹å­å¦‚ä¸‹:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2520304-3784e1b0d6a15d73.gif?imageMogr2/auto-orient/strip" alt="flags.gif"><br>ä»£ç å¦‚ä¸‹:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> *</span><br><span class="line"> * @author ç‹è¯›é­” 2017/1/21 ä¸Šåˆ11:31</span><br><span class="line"> * @e-mail  phyooos@163.com</span><br><span class="line"> */</span><br><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line"></span><br><span class="line">    @BindView(R.id.edit_show)</span><br><span class="line">    EditText etMainShow;</span><br><span class="line">    @BindView(R.id.tab_view)</span><br><span class="line">    TabLayout tabLayout;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onCreate(@Nullable Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        ButterKnife.bind(this);</span><br><span class="line">        showText(Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);</span><br><span class="line">        tabLayout.setOnTabSelectedListener(new TabLayout.OnTabSelectedListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onTabSelected(TabLayout.Tab tab) &#123;</span><br><span class="line">                switch (tab.getPosition()) &#123;</span><br><span class="line">                    case 0:</span><br><span class="line">                        showText(Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);</span><br><span class="line">                        break;</span><br><span class="line">                    case 1:</span><br><span class="line">                        showText(Spannable.SPAN_EXCLUSIVE_INCLUSIVE);</span><br><span class="line">                        break;</span><br><span class="line">                    case 2:</span><br><span class="line">                        showText(Spannable.SPAN_INCLUSIVE_EXCLUSIVE);</span><br><span class="line">                        break;</span><br><span class="line">                    case 3:</span><br><span class="line">                        showText(Spannable.SPAN_INCLUSIVE_INCLUSIVE);</span><br><span class="line">                        break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onTabUnselected(TabLayout.Tab tab) &#123;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onTabReselected(TabLayout.Tab tab) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å±•ç¤ºæ–‡å­—</span><br><span class="line">     */</span><br><span class="line">    private void showText(int type) &#123;</span><br><span class="line">        //æ„é€ SpannableString</span><br><span class="line">        SpannableString spanString = new SpannableString(&quot;è¿™é‡Œæ˜¯ç‹è¯›é­”çš„ç®€ä¹¦æ–‡ç« &quot;);</span><br><span class="line">        //å­—ä½“é¢œè‰²çš„Span</span><br><span class="line">        ForegroundColorSpan span = new ForegroundColorSpan(Color.RED);</span><br><span class="line">        //æŒ‡å®šèŒƒå›´</span><br><span class="line">        spanString.setSpan(span, 3, 6, type);</span><br><span class="line">        //è®¾ç½®ç»™EditTextæ˜¾ç¤ºå‡ºæ¥</span><br><span class="line">        etMainShow.setText(spanString);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„ä»£ç ä¸­:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//å­—ä½“é¢œè‰²çš„Span</span><br><span class="line">ForegroundColorSpan span = new ForegroundColorSpan(Color.RED);</span><br><span class="line">ForegroundColorSpanå°±æ˜¯è®¾ç½®çš„æ–‡å­—æ ·å¼,,è¿™ä¸ªæ˜¯å‰æ™¯è‰²,,ä¹Ÿå°±æ˜¯å­—ä½“çš„é¢œè‰²</span><br><span class="line">//æŒ‡å®šèŒƒå›´</span><br><span class="line">spanString.setSpan(span, 3, 6, type);</span><br><span class="line">è¿™é‡Œçš„ä¸‰ä¸ªå‚æ•°å·²ç»åœ¨ä¸Šé¢è¯´è¿‡äº†,é€šè¿‡ä¸Šé¢çš„ä»£ç ä¹Ÿä¼šå‘ç°,å…¶å®3,6  å…¶ä¸­ä¸‹æ ‡3æ˜¯åŒ…å«çš„,è€Œä¸‹æ ‡6å°±ä¸ä¼šæ”¹å˜</span><br></pre></td></tr></table></figure></p>
<hr>
<p><strong>3.è‡³äºSpançš„è¿™äº›ä¸ªæ ·å¼åœ¨å“ªé‡Œæ‰¾,è¯·çœ‹æ–‡æ¡£:</strong><br><strong>å…³é”®è¯:<a href="https://developer.android.com/reference/android/text/style/CharacterStyle.html" target="_blank" rel="noopener">CharacterStyle</a></strong></p>
<blockquote>
<p><a href="https://developer.android.com/reference/android/text/style/CharacterStyle.html" target="_blank" rel="noopener">https://developer.android.com/reference/android/text/style/CharacterStyle.html</a></p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/2520304-50978874ad4c3a7f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Spançš„ä¸€äº›ç±»å‹.png"></p>
<p>è¯´å‡ ä¸ªå¸¸ç”¨çš„å§:</p>
<ul>
<li>ForegroundColorSpan  å­—ä½“é¢œè‰²</li>
<li>BackgroundColorSpan å­—ä½“èƒŒæ™¯è‰²è®¾ç½®</li>
<li>AbsoluteSizeSpan å­—ä½“å¤§å°</li>
<li>StyleSpan ç²—ä½“ç­‰<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//å­—ä½“ç”±Typefaceæ¥æ§åˆ¶</span><br><span class="line">StyleSpan span = new StyleSpan(Typeface.BOLD_ITALIC);</span><br><span class="line"></span><br><span class="line">- UnderlineSpan ä¸‹åˆ’çº¿</span><br><span class="line">- ImageSpan å›¾ç‰‡ç½®æ¢</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[ImageSpan https://developer.android.com/reference/android/text/style/ImageSpan.html](https://developer.android.com/reference/android/text/style/ImageSpan.html)</span><br><span class="line"></span><br><span class="line">è¿™ä¸ªæœ‰ä¸€ç‚¹ä¸åŒ,å®ƒæ˜¯å°†æ–‡å­—ä¸­çš„æŒ‡å®šéƒ¨åˆ†æ›¿æ¢ä¸ºä¸€ä¸ªå›¾ç‰‡,è‡³äºå¦‚ä½•æ„é€ è¯·å‚è€ƒæ–‡æ¡£</span><br><span class="line">è®©æˆ‘æƒ³èµ·æ¥äº†é‚£ä¸ªEmojiEditTextçš„åº“,å…¶å®å¯ä»¥ç”¨è¿™ä¸ªImageSpanå®ç°ä¸€ä¸ªç®€å•çš„å¯ä»¥æ˜¾ç¤ºè¡¨æƒ…çš„TextView</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ClickableSpan ç‚¹å‡»</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>//è¿™ä¸ªæœ‰äº›ä¸åŒ,éœ€è¦<br>class CustomClickable extends ClickableSpan {</p>
<pre><code>@Override
public void updateDrawState(TextPaint ds) {
    //è¿™é‡Œå…¶å®è¿˜å¯ä»¥å¯¹å¯ç‚¹å‡»éƒ¨åˆ†è®¾ç½®ä¸€äº›ä¸œè¥¿
}

@Override
public void onClick(View widget) {
      ...do something
}
</code></pre><p>}</p>
<p>//å¯¹äº†,åŠ ä¸Šè¿™è¡Œä»£ç <br>TextView.setMovementMethod(LinkMovementMethod.getInstance());<br>//è¦ä¸ç‚¹ä¸åŠ¨å“¦</p>
<p>```</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2520304-7ccd2161c4d5f5e7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2017-04-05_23-36-38.png"></p>
<ul>
<li>URLSpan è¿™ä¸ªå®Œå…¨å¯ä»¥ç”¨ClickableSpanå®ç°</li>
</ul>
<p><strong>SpannableStringBuilder</strong></p>
<p>SpannableStringéƒ½è¯´çš„è¿™ä¹ˆæ˜ç™½äº†,SpannableStringBuilderå°±çœäº†</p>
<p>####End</p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Flutter å®‰è£…]]></title>
      <url>/Flutter/Flutter-%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<blockquote>
<p>ä½¿ç”¨ç³»ç»ŸMac OS</p>
</blockquote>
<p>å·²ç»æ²¡åŠæ³•ç»™å¤§å®¶çœ‹é—®é¢˜äº†,æˆ‘åœ¨githubä¸Šæäº†é—®é¢˜.</p>
<p><a href="https://github.com/flutter/flutter/issues/11674" target="_blank" rel="noopener">github issue</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨å‘½ä»¤ command</span><br><span class="line"></span><br><span class="line">`flutter doctor`</span><br><span class="line"></span><br><span class="line">å¼‚å¸¸:</span><br><span class="line">exception</span><br><span class="line"></span><br><span class="line">SocketException: SocketException: Connection failed (OS Error: No route to host, errno = 65), address = android.googlesource.com, port = 443</span><br></pre></td></tr></table></figure>
<p>æ€»çš„æ¥è¯´å°±æ˜¯ä¸‹è½½ Downloading Gradle Wrapperâ€¦çš„æ—¶å€™è¿æ¥ä¸åˆ°å¤–ç½‘,ä»¥è‡³äºå¤±è´¥</p>
<p>githubä¸Šçš„è¿™ä½å°å“¥æé†’äº†æˆ‘<a href="https://github.com/lishuhao" target="_blank" rel="noopener">@lishuhao</a></p>
<blockquote>
<p><a href="https://github.com/eseidelgoogle" target="_blank" rel="noopener">@eseidelGoogle</a>itâ€™s reachable via https from Chrome<br>Maybe his chrome use proxy but terminal not use proxy.</p>
</blockquote>
<p>æˆ‘ç¡®å®å¼€äº†ss,ä½†æ˜¯ç»ˆç«¯ç¡®å®è¿æ¥ä¸åˆ°ä»£ç†çš„,ä¸èµ°ä»£ç†,é‚£å½“ç„¶æ— è§£</p>
<p>##è§£å†³:</p>
<p>####1.Macä¸‹ä½¿ç”¨Homebrewå®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install polipo</span><br></pre></td></tr></table></figure>
<p>####2.ä¿®æ”¹é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -sfv /usr/local/opt/polipo/*.plist ~/Library/LaunchAgents</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2520304-bfa92bf302955c0d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/opt/polipo/homebrew.mxcl.polipo.plist</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/2520304-b14154bf99746494.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ <br><code>&lt;string&gt;socksParentProxy=localhost:1086&lt;/string&gt;</code></p>
<p>å…¶ä¸­1086è¿™ä¸ªç«¯å£å·,è‡ªå·±å»çœ‹</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2520304-40564c01c67e3f13.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>####3.å¯åŠ¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launchctl load ~/Library/LaunchAgents/homebrew.mxcl.polipo.plist</span><br></pre></td></tr></table></figure>
<p>####4.ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ http_proxy=http://localhost:8123 curl ip.gs</span><br><span class="line">Current IP / å½“å‰ IP: 47.90.88.133</span><br><span class="line">ISP / è¿è¥å•†:  ALIYUN</span><br><span class="line">City / åŸå¸‚:  Hong Kong</span><br><span class="line">Country / å›½å®¶: China</span><br><span class="line">IP.GS is now IP.SB, please visit https://ip.sb/ for more IP information, ip.gs will only use for curl purpose. / IP.GS å·²æ›´æ–°è‡³ IP.SB è¯·è®¿é—® https://ip.sb/ è·å–æ›´å¤šä¿¡æ¯, ip.gs åŸŸåä»…ä½œ curl ä½¿ç”¨</span><br><span class="line">Please join Telegram group https://t.me/sbfans if you have any issues. / å¦‚æœ‰é—®é¢˜ï¼Œè¯·åŠ å…¥ Telegram ç¾¤ https://t.me/sbfans</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°,ç°åœ¨æˆ‘æ˜¯é¦™æ¸¯çš„IPäº†,http_proxy=<a href="http://localhost:8123è¿™ä¸ªæ˜¯æä¾›é»˜è®¤çš„,è‡³äºæ€ä¹ˆä¿®æ”¹æˆ‘æ²¡æœ‰çœ‹,ä¹Ÿä¸çŸ¥é“" target="_blank" rel="noopener">http://localhost:8123è¿™ä¸ªæ˜¯æä¾›é»˜è®¤çš„,è‡³äºæ€ä¹ˆä¿®æ”¹æˆ‘æ²¡æœ‰çœ‹,ä¹Ÿä¸çŸ¥é“</a></p>
<p><strong>æŠŠä»£ç†è®¾ç½®ä¸ºå…¨å±€çš„</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">~ âŒš 11:42:51</span><br><span class="line">$ export http_proxy=http://localhost:8123</span><br><span class="line"></span><br><span class="line">~ âŒš 11:43:02</span><br><span class="line">$ export https_proxy=http://localhost:8123</span><br><span class="line"></span><br><span class="line">~ âŒš 11:43:09</span><br><span class="line">$ curl https://www.google.com</span><br><span class="line">&lt;HTML&gt;&lt;HEAD&gt;&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;</span><br><span class="line">&lt;TITLE&gt;302 Moved&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;</span><br><span class="line">&lt;H1&gt;302 Moved&lt;/H1&gt;</span><br><span class="line">The document has moved</span><br><span class="line">&lt;A HREF=&quot;https://www.google.com.hk/?gfe_rd=cr&amp;ei=5FaaWZDNOMLU8Af_nriwDw&quot;&gt;here&lt;/A&gt;.</span><br><span class="line">&lt;/BODY&gt;&lt;/HTML&gt;</span><br><span class="line"></span><br><span class="line">~ âŒš 11:43:33</span><br><span class="line">$ curl www.google.com</span><br><span class="line">&lt;HTML&gt;&lt;HEAD&gt;&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;</span><br><span class="line">&lt;TITLE&gt;302 Moved&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;</span><br><span class="line">&lt;H1&gt;302 Moved&lt;/H1&gt;</span><br><span class="line">The document has moved</span><br><span class="line">&lt;A HREF=&quot;http://www.google.com.hk/?gfe_rd=cr&amp;ei=6laaWZqEO8_U8AeLlID4CA&quot;&gt;here&lt;/A&gt;.</span><br><span class="line">&lt;/BODY&gt;&lt;/HTML&gt;</span><br></pre></td></tr></table></figure></p>
<p>####5.End</p>
<p>##è§è¯å¥‡è¿¹çš„æ—¶åˆ»åˆ°äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">~/develop/flutter on î‚  alpha! âŒš 11:44:11</span><br><span class="line">$ flutter doctor</span><br><span class="line">Downloading Gradle Wrapper...                         1.3s</span><br><span class="line">[âœ“] Flutter (on Mac OS X 10.12.6 16G29, locale zh-Hans-CN, channel alpha)</span><br><span class="line">    â€¢ Flutter at /Users/phyooos/develop/flutter</span><br><span class="line">    â€¢ Framework revision b156a0f054 (9 days ago), 2017-08-11 22:01:40 -0700</span><br><span class="line">    â€¢ Engine revision fef7d827d6</span><br><span class="line">    â€¢ Tools Dart version 1.25.0-dev.9.0</span><br><span class="line"></span><br><span class="line">[âœ“] Android toolchain - develop for Android devices (Android SDK 26.0.1)</span><br><span class="line">    â€¢ Android SDK at /Users/phyooos/Library/Android/sdk</span><br><span class="line">    â€¢ Platform android-26, build-tools 26.0.1</span><br><span class="line">    â€¢ ANDROID_HOME = /Users/phyooos/Library/Android/sdk</span><br><span class="line">    â€¢ Java binary at: /Applications/Android Studio.app/Contents/jre/jdk/Contents/Home/bin/java</span><br><span class="line">    â€¢ Java version OpenJDK Runtime Environment (build 1.8.0_112-release-b06)</span><br><span class="line"></span><br><span class="line">[-] iOS toolchain - develop for iOS devices</span><br><span class="line">    âœ— Xcode installation is incomplete; a full installation is necessary for iOS development.</span><br><span class="line">      Download at: https://developer.apple.com/xcode/download/</span><br><span class="line">      Or install Xcode via the App Store.</span><br><span class="line">      Once installed, run:</span><br><span class="line">        sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer</span><br><span class="line">    âœ— libimobiledevice and ideviceinstaller are not installed or require updating. To update, run:</span><br><span class="line">        brew uninstall --ignore-dependencies libimobiledevice</span><br><span class="line">        brew install --HEAD libimobiledevice</span><br><span class="line">        brew install ideviceinstaller</span><br><span class="line">    âœ— ios-deploy not installed. To install:</span><br><span class="line">        brew install ios-deploy</span><br><span class="line">    âœ— CocoaPods not installed.</span><br><span class="line">        CocoaPods is used to retrieve the iOS platform side&apos;s plugin code that responds to your plugin usage on the Dart side.</span><br><span class="line">        Without resolving iOS dependencies with CocoaPods, plugins will not work on iOS.</span><br><span class="line">        For more info, see https://flutter.io/platform-plugins</span><br><span class="line">      To install:</span><br><span class="line">        brew install cocoapods</span><br><span class="line">        pod setup</span><br><span class="line"></span><br><span class="line">[âœ“] Android Studio (version 2.3)</span><br><span class="line">    â€¢ Android Studio at /Applications/Android Studio.app/Contents</span><br><span class="line">    â€¢ Java version OpenJDK Runtime Environment (build 1.8.0_112-release-b06)</span><br><span class="line"></span><br><span class="line">[âœ“] IntelliJ IDEA Ultimate Edition (version 2017.1.3)</span><br><span class="line">    â€¢ Flutter plugin version 16.0</span><br><span class="line">    â€¢ Dart plugin version 171.4424.63</span><br><span class="line"></span><br><span class="line">[âœ“] Connected devices</span><br><span class="line">    â€¢ None</span><br></pre></td></tr></table></figure>
<p>æˆ‘çš„Flutterå°±okäº†</p>
]]></content>
      
        <categories>
            
            <category> Flutter </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Google </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[BottomNavigationViewä½¿ç”¨æŒ‡å—]]></title>
      <url>/Android/BottomNavigationView%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</url>
      <content type="html"><![CDATA[<p><strong>æœ€ç»ˆæ•ˆæœ:</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2520304-f952921225e06fb8.gif?imageMogr2/auto-orient/strip" alt="æœ€åæ•ˆæœ.gif"></p>
<p>Android Support Library 25 ä»¥ä¸Šçš„supportåŒ…ä¸­å¢åŠ äº† BottomNavigationView<br>æ‰€ä»¥ä½ å¿…é¡»ä½¿ç”¨<code>com.android.support:design:25.0.0</code>ä»¥ä¸Šçš„ç‰ˆæœ¬æ‰èƒ½ç©</p>
<p>1.åœ¨ build.gradle æ–‡ä»¶ä¸­å¢åŠ ä¾èµ–ï¼š</p>
<blockquote>
<figure class="highlight plain"><figcaption><span>'com.android.support:design:25.0.0'```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2.åœ¨main_activity.xmlä¸­æ·»åŠ :</span><br></pre></td></tr></table></figure>
</blockquote>
<p><android.support.design.widget.bottomnavigationview android:id="@+id/bottom_nav" android:layout_width="match_parent" android:layout_height="@dimen/title_height" android:layout_alignparentbottom="true" app:menu="@menu/menu_tab_button" app:itemicontint="@color/nav_color_select" app:itemtextcolor="@color/nav_color_select" app:itembackground="@color/text_white_color"><br>    </android.support.design.widget.bottomnavigationview></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- å…¶ä¸­```app:menu=&quot;@menu/menu_tab_button&quot;```å†³å®šäº†å±•ç¤ºå‡ ä¸ªitem,éƒ½é•¿ä»€ä¹ˆæ ·</span><br><span class="line">- å…¶ä¸­,åˆ†åˆ«å†³å®š**å›¾æ ‡å’Œæ–‡å­—**é€‰ä¸­å’Œæœªé€‰ä¸­itemçš„çŠ¶æ€,é¢œè‰²</span><br></pre></td></tr></table></figure>
<p>app:itemIconTint=â€@color/nav_color_selectâ€<br>app:itemTextColor=â€@color/nav_color_selectâ€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- å…¶ä¸­```app:itemBackground=&quot;@color/text_white_color&quot;```åˆ™æ˜¯æ•´ä¸ªviewçš„èƒŒæ™¯é¢œè‰²</span><br><span class="line"></span><br><span class="line">3.menu_tab_button.xmlçš„ä»£ç å¦‚ä¸‹:</span><br></pre></td></tr></table></figure></p>
<p>&lt;?xml version=â€1.0â€ encoding=â€utf-8â€?&gt;</p>
<p><menu xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto"><br>    <item android:id="@+id/mian_tab_statistics" android:enabled="true" android:checked="true" é»˜è®¤é€‰ä¸­="" android:title="@string/nav_tongji" android:icon="@drawable/tongji"></item></menu></p>
<pre><code>&lt;item android:id=&quot;@+id/mian_tab_paidui&quot;
    android:enabled=&quot;true&quot;
    android:title=&quot;@string/nav_paidui&quot;   //æ–‡å­—å†…å®¹
    android:icon=&quot;@drawable/paidui&quot;/&gt;   //iconå›¾æ ‡

&lt;item android:id=&quot;@+id/mian_tab_find&quot;
    android:enabled=&quot;true&quot;
    android:title=&quot;@string/nav_faxiang&quot;
    android:icon=&quot;@drawable/faxian&quot;/&gt;

&lt;item android:id=&quot;@+id/mian_tab_more&quot;
    android:enabled=&quot;true&quot;
    android:title=&quot;@string/nav_more&quot;
    android:icon=&quot;@drawable/more&quot;/&gt;
</code></pre><p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">###ç„¶è€Œ,ä½ ä»¥ä¸ºä¼šè¿™ä¹ˆç®€å•?? shiftingModeæ•™ä½ åšäºº()</span><br><span class="line">###è¿™ä¸ªåªä¼šåœ¨itemä¸ªæ•°è¶…è¿‡3ä¸ªæ‰ä¼šå‡ºç°.</span><br><span class="line"></span><br><span class="line">![ç‰›é€¼çš„ç‰¹æ•ˆ(shiftingMode).gif](http://upload-images.jianshu.io/upload_images/2520304-464b090fa4c8919c.gif?imageMogr2/auto-orient/strip)</span><br><span class="line"></span><br><span class="line">4.è¿™è®©æˆ‘å¦‚ä½•æ˜¯å¥½?çœ‹äº†åŠå¤©,åœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€ä¸ªæ–¹æ³•.</span><br></pre></td></tr></table></figure></p>
<p>/**</p>
<ul>
<li>ä¸€ä¸ªå…³äºBottomNavigationViewçš„å¸®åŠ©ç±»,ç”¨æ¥å…³é—­shiftingMode</li>
<li>@author ç‹è¯›é­” 2017/2/10 ä¸‹åˆ6:35</li>
<li>@e-mail phyooos@163.com<br>*/</li>
</ul>
<p>public class BNVHelper {</p>
<pre><code>public static void disableShiftMode(BottomNavigationView navigationView) {
    BottomNavigationMenuView menuView = (BottomNavigationMenuView) navigationView.getChildAt(0);
    try {
        Field shiftingMode = menuView.getClass().getDeclaredField(&quot;mShiftingMode&quot;);
        shiftingMode.setAccessible(true);
        shiftingMode.setBoolean(menuView, false);
        shiftingMode.setAccessible(false);

        for (int i = 0; i &lt; menuView.getChildCount(); i++) {
            BottomNavigationItemView itemView = (BottomNavigationItemView) menuView.getChildAt(i);
            itemView.setShiftingMode(false);
            itemView.setChecked(itemView.getItemData().isChecked());
        }
    } catch (NoSuchFieldException e) {
        // Log
    } catch (IllegalAccessException e) {
        // Log
    }
}
</code></pre><p>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">åŸä½œè€…@[ChristmasJason](http://www.jianshu.com/u/4d132a94e6e8):http://www.jianshu.com/p/e2a8791e80d6</span><br><span class="line"></span><br><span class="line">ç„¶åæˆ‘çœ‹äº†ä¸€ä¸‹æºç **mShiftingMode** è¿™ä¸ªå¸ƒå°”å€¼å†³å®šäº†æ˜¯å¦å¯ç”¨shiftingMode,æ‰€ä»¥ä¸Šé¢çš„æ–¹æ³•å°±æ˜¯shiftingMode.setBoolean(menuView, false);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç„¶åå°±å¥½äº†......</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æç¤º:</span><br><span class="line">googleè¯´é€‰ä¸­å›¾æ ‡çš„é¢œè‰²æ˜¯è¿™ä¹ˆæ”¹çš„,ç„¶è€Œéƒ½æ˜¯éª—äººçš„,è¿™ä¸ªåº”è¯¥æ˜¯é»˜è®¤çš„è®¾ç½®,æˆ‘ä¹Ÿå·æ‡’æ²¡æœ‰éªŒè¯</span><br><span class="line"></span><br><span class="line">![2017-02-21_17-59-10.png](http://upload-images.jianshu.io/upload_images/2520304-c6c71ad14a9e0106.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br></pre></td></tr></table></figure></p>
<p>app:itemIconTint=â€@color/nav_color_selectâ€<br>app:itemTextColor=â€@color/nav_color_selectâ€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å…¶å®ä½ é…ç½®äº†ä¹‹å,å°±æ˜¯è¿™ä¸ªä¸œè¥¿æ¥å†³å®šçš„,è€Œä¸æ˜¯app&apos;s primary color</span><br><span class="line">nav_color_select.xmlè¿™å°±æ˜¯ä¸ªé€‰æ‹©å™¨,ä»£ç å¦‚ä¸‹:</span><br></pre></td></tr></table></figure></p>
<p>&lt;?xml version=â€1.0â€ encoding=â€utf-8â€?&gt;</p>
<p><selector xmlns:android="http://schemas.android.com/apk/res/android"><br>    <item android:state_checked="true" android:color="@color/colorPrimary"><br>    <item android:state_pressed="true" android:color="@color/colorPrimary"><br>    <item android:color="@color/gray_light"><br></item></item></item></selector><br>```</p>
<p>####End,åˆ°è¿™é‡Œä½ çš„å¯¼èˆªæ¡ä¹Ÿåº”è¯¥okäº†</p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android Studio ä½¿ç”¨æ­£å¼ç­¾ådebugè°ƒè¯•]]></title>
      <url>/Android-Studio/Android-Studio-%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%BC%8F%E7%AD%BE%E5%90%8Ddebug%E8%B0%83%E8%AF%95/</url>
      <content type="html"><![CDATA[<p>###è§£å†³é—®é¢˜:</p>
<blockquote>
<p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹ç™»å½•ä»€ä¹ˆçš„ä¸œè¥¿,éœ€è¦æˆ‘ä»¬æä¾›æ­£å¼ç­¾å,ä½†æ˜¯æˆ‘ä»¬æ€»æ˜¯éœ€è¦è°ƒè¯•çš„.<br>ä¸€èˆ¬æƒ…å†µ,æˆ‘ä»¬ä¸å¯èƒ½ä¸€æ¬¡æ€§OK,é‚£ä¹ˆæ¯ä¸€æ¬¡è°ƒè¯•éƒ½éœ€è¦æ­£å¼ç­¾åæ‰“åŒ…,å¹¶å®‰è£…,ç„¶åå†è°ƒè¯•,è¿™ä¹Ÿå¤ªéº»çƒ¦äº†,.</p>
</blockquote>
<p>æ‰€ä»¥,ç›´æ¥ä¸Šä»£ç :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">signingConfigs &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            keyAlias &apos;phyooos&apos;</span><br><span class="line">            keyPassword &apos;phyooos&apos;</span><br><span class="line">            storeFile file(&apos;phyooos.jks&apos;)</span><br><span class="line">            storePassword &apos;phyooos&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled false</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class="line">        &#125;</span><br><span class="line">        debug&#123;</span><br><span class="line">            minifyEnabled false</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£é‡Šä¸€ä¸‹:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">signingConfigs &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            keyAlias &apos;phyooos&apos;</span><br><span class="line">            keyPassword &apos;phyooos&apos;</span><br><span class="line">            storeFile file(&apos;phyooos.jks&apos;)</span><br><span class="line">            storePassword &apos;phyooos&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸€æ®µä»£ç å†™åœ¨é¡¹ç›®appç›®å½•ä¸‹&gt;gradleé…ç½®æ–‡ä»¶ä¸­&gt;androidèŠ‚ç‚¹ä¸‹,<br>æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ä¸€ä¸ªé…ç½®</p>
<ul>
<li>keyAlias â€˜phyooosâ€™  è¿™æ˜¯ç­¾åæ–‡ä»¶çš„Alias</li>
<li>keyPassword â€˜phyooosâ€™   è¿™æ˜¯ç­¾åæ–‡ä»¶çš„å¯†ç </li>
<li>storeFile file(â€˜phyooos.jksâ€™)  è¿™ä¸ªå°±æ˜¯ç­¾åæ–‡ä»¶çš„åœ°å€,æˆ‘æ”¾åœ¨appç›®å½•ä¸‹äº†</li>
<li>storePassword â€˜phyooosâ€™  è¿™æ˜¯storeå¯†ç </li>
</ul>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled false</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class="line">        &#125;</span><br><span class="line">        debug&#123;</span><br><span class="line">            minifyEnabled false</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸€æ®µçš„æ„æ€å°±æ˜¯debugè°ƒè¯•ä»¥åŠæ­£å¼æ‰“åŒ…éƒ½ä½¿ç”¨ä¸Šé¢è‡ªå®šä¹‰çš„é…ç½®</p>
<h4 id="The-End-å¥½äº†-æ„‰å¿«çš„ç©è€å§"><a href="#The-End-å¥½äº†-æ„‰å¿«çš„ç©è€å§" class="headerlink" title="The End   å¥½äº†,æ„‰å¿«çš„ç©è€å§"></a>The End   å¥½äº†,æ„‰å¿«çš„ç©è€å§</h4>]]></content>
      
        <categories>
            
            <category> Android Studio </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Android Studio </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä½åŠŸè€—è“ç‰™iBeaconçš„å¼€å‘ç¬”è®°]]></title>
      <url>/Android/%E4%BD%8E%E5%8A%9F%E8%80%97%E8%93%9D%E7%89%99iBeacon%E7%9A%84%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p>###1.æŒ£æ‰çš„å¼€å§‹<br>å„ç§ç™¾åº¦,google,å‘ç°å›½å†…èµ„æ–™å¾ˆå°‘,æœ‰çš„ä¹Ÿæ˜¯å•†ä¸šå…¬å¸æä¾›çš„sdk,è¿™å¹¶ä¸ç¬¦åˆæˆ‘éœ€è¦,<br>googleå€’æ˜¯ä¸å°‘,ç„¶è€Œä»¥æˆ‘çš„è‹±è¯­æ°´å¹³,æœ›æ´‹å…´å¹ç½¢äº†@<br>ä¸å‘ç‰¢éªšäº†:</p>
<blockquote>
<p>é¦–å…ˆä½ éœ€è¦äº†è§£è¿™äº›èµ„æ–™<br>1ã€profile<br> rofileå¯ä»¥ç†è§£ä¸ºä¸€ç§è§„èŒƒï¼Œä¸€ä¸ªæ ‡å‡†çš„é€šä¿¡åè®®ï¼Œå®ƒå­˜åœ¨äºä»æœºä¸­ã€‚è“ç‰™ç»„ç»‡è§„å®šäº†ä¸€äº›æ ‡å‡†çš„profileï¼Œä¾‹å¦‚ HID OVER GATT ï¼Œé˜²ä¸¢å™¨ ï¼Œå¿ƒç‡è®¡ç­‰ã€‚æ¯ä¸ªprofileä¸­ä¼šåŒ…å«å¤šä¸ªserviceï¼Œæ¯ä¸ªserviceä»£è¡¨ä»æœºçš„ä¸€ç§èƒ½åŠ›ã€‚</p>
<p>2ã€service<br>serviceå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæœåŠ¡ï¼Œåœ¨bleä»æœºä¸­ï¼Œé€šè¿‡æœ‰å¤šä¸ªæœåŠ¡ï¼Œä¾‹å¦‚ç”µé‡ä¿¡æ¯æœåŠ¡ã€ç³»ç»Ÿä¿¡æ¯æœåŠ¡ç­‰ï¼Œæ¯ä¸ªserviceä¸­åˆåŒ…å«å¤šä¸ªcharacteristicç‰¹å¾å€¼ã€‚æ¯ä¸ªå…·ä½“çš„characteristicç‰¹å¾å€¼æ‰æ˜¯bleé€šä¿¡çš„ä¸»é¢˜ã€‚æ¯”å¦‚å½“å‰çš„ç”µé‡æ˜¯80%ï¼Œæ‰€ä»¥ä¼šé€šè¿‡ç”µé‡çš„characteristicç‰¹å¾å€¼å­˜åœ¨ä»æœºçš„profileé‡Œï¼Œè¿™æ ·ä¸»æœºå°±å¯ä»¥é€šè¿‡è¿™ä¸ªcharacteristicæ¥è¯»å–80%è¿™ä¸ªæ•°æ®</p>
<p>3ã€characteristic<br>characteristicç‰¹å¾å€¼ï¼Œbleä¸»ä»æœºçš„é€šä¿¡å‡æ˜¯é€šè¿‡characteristicæ¥å®ç°ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ ‡ç­¾ï¼Œé€šè¿‡è¿™ä¸ªæ ‡ç­¾å¯ä»¥è·å–æˆ–è€…å†™å…¥æƒ³è¦çš„å†…å®¹ã€‚</p>
<p>4ã€UUID<br>UUIDï¼Œç»Ÿä¸€è¯†åˆ«ç ï¼Œæˆ‘ä»¬åˆšæ‰æåˆ°çš„serviceå’Œcharacteristicï¼Œéƒ½éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„uuidæ¥æ ‡è¯†<br> S: ç™¾åº¦åˆ°çš„,æˆ‘ä»¥ä¸€ä¸ªè¿‡æ¥äººçš„èº«ä»½ä¿è¯è¿™ä¸ªå¾ˆé‡è¦</p>
</blockquote>
<p>###2.èµ„æ–™,å‡†å¤‡<br>èµ„æ–™çœ‹è¿™é‡Œ:</p>
<ul>
<li>è¿™ä¹Ÿæ˜¯æœ€é‡è¦çš„èµ„æ–™æ¥æº,è°·æ­ŒSDKçš„ä¾‹å­é‡Œé¢æœ‰çš„é¡¹ç›®<br><img src="http://img.blog.csdn.net/20160710190336812" alt="Android SDK ä¸­çš„docæ–‡æ¡£"></li>
</ul>
<ul>
<li>æ¥ä¸Šæ–‡,è¯´å®Œèµ„æ–™,<blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„demo<br>sdk\samples\android-22\connectivity\BluetoothLeGatt</p>
</blockquote>
</li>
</ul>
<p>è¯¥ç›®å½•ä¸‹ä¸ºè°·æ­Œæä¾›çš„demo,æˆ‘çš„åº”ç”¨ä¹Ÿæ˜¯åœ¨å®ƒçš„åŸºç¡€ä¸Šæ”¹è¿›è€Œæˆçš„.<br>ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆ:<br>1.ä¸€ä¸ªæœåŠ¡ BluetoothLeService,ä¸»è´Ÿè´£ä¸è“ç‰™è®¾å¤‡è¿›è¡Œæ•°æ®äº¤æ¢</p>
<p>2.ä¸¤ä¸ªactivity:DeviceControlActivity,DeviceScanActivity<br>    è§åçŸ¥æ„,ä¸€ä¸ªè´Ÿè´£æ‰«æè®¾å¤‡,è€Œä¸¤å¤–ä¸€ä¸ªä¸è®¾å¤‡è¿›è¡Œäº¤äº’</p>
<p>3.ä¸€ä¸ªSampleGattAttributes<br>   ä¸»è¦æ˜¯å­˜å‚¨äº†ä¸€äº›UUID,æˆ‘å¯¹å®ƒè¿›è¡Œäº†åŠ å¼º</p>
<p>###3.BLEè®¾å¤‡çš„ä½¿ç”¨æ­¥éª¤æ¦‚å†µ<br>1.é¦–å…ˆè¦è¯´æ˜çš„ä¸€ç‚¹æ˜¯,è¦æ±‚Androidç‰ˆæœ¬ä¸º4.3åŠå…¶ä»¥ä¸Š<br>  æ¥ç€ç¡®è®¤è®¾å¤‡æ”¯æŒ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ”¯æŒBLE</span><br><span class="line"> *  check to determine whether BLE is supported on the device</span><br><span class="line"> */</span><br><span class="line">public void isSupported()&#123;</span><br><span class="line">     if (!getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH_LE)) &#123;</span><br><span class="line">            Toast.makeText(this, &quot;è®¾å¤‡ä¸æ”¯æŒBLEåŠŸèƒ½&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>2.ç¡®è®¤æ‰‹æœºæ”¯æŒå¹¶æ‰“å¼€è“ç‰™çš„çŠ¶æ€ä¸‹,ä½ å°±å¯ä»¥è¿›è¡Œè®¾å¤‡çš„æœç´¢äº†<br>   æœ‰ä¸¤ç§æ¨¡å¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//ç¬¬ä¸€ç§</span><br><span class="line">//serviceUuids   æŒ‡å®šè®¾å¤‡çš„UUID</span><br><span class="line">//callback       æœç´¢çš„å›è°ƒ</span><br><span class="line">startLeScan(final UUID[] serviceUuids, final LeScanCallback callback)</span><br><span class="line"></span><br><span class="line">//ç¬¬äºŒç§</span><br><span class="line">//å…¶å®å°±æ˜¯ä¸ä¼ å…¥serviceUuidsçš„,å°±æ˜¯è¯´æœç´¢èŒƒå›´å†…æ‰€æœ‰è“ç‰™è®¾å¤‡</span><br><span class="line">public boolean startLeScan(LeScanCallback callback) &#123;</span><br><span class="line">     return startLeScan(null, callback);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>3.åŒæ—¶è®°å¾—åœæ­¢æœç´¢,å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸€ç›´æœ<br>PSï¼šå…¶å®æˆ‘è§åˆ°çš„appå¤§éƒ¨åˆ†æ˜¯ä¸åœçš„æœç´¢ï¼Œè¿™æ ·çš„è¯ä¼šæœ‰ä¸€ä¸ªå¹¿æ’­æ•°æ®æŒç»­åˆ·æ–°çš„æ•ˆæœ,é‚£ä¹ˆå¾ˆå¤šçš„è·ç¦»åˆ¤æ–­ä»€ä¹ˆçš„éƒ½æ˜¯é€šè¿‡è¿™ç§ä¸åœæœç´¢çš„å½¢å¼æ¥å·¥ä½œçš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//mBluetoothAdapter   è¯·è‡ªè¡ŒæŸ¥çœ‹è°·æ­Œæ–‡æ¡£</span><br><span class="line">//mLeScanCallback     è¿™å°±æ˜¯ä¸Šé¢æè¿‡çš„LeScanCallbackçš„å®ä¾‹</span><br><span class="line">mBluetoothAdapter.stopLeScan(mLeScanCallback);</span><br></pre></td></tr></table></figure></p>
<p>æ¥ç€å°±æ˜¯åœ¨å›è°ƒä¸­æ‹¿åˆ°å„ä¸ªè®¾å¤‡æ•°æ®äº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æœç´¢è®¾å¤‡å›è°ƒ </span><br><span class="line"> */</span><br><span class="line">private BluetoothAdapter.LeScanCallback mLeScanCallback =</span><br><span class="line">            new BluetoothAdapter.LeScanCallback() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onLeScan(final BluetoothDevice device, int rssi, </span><br><span class="line">            byte[] scanRecord) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œæœ‰å‡ ä¸ªå€¼å¾—è¯´ä¸€ä¸‹çš„ä¸œè¥¿</p>
<ul>
<li><strong>1.BluetoothDevice device</strong><br><img src="http://img.blog.csdn.net/20160712000123059" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br>  è¯¥å¯ä»¥çœ‹çš„å¾ˆæ¸…æ¥š,    deviceä¸­åŒ…å«äº†è®¾å¤‡çš„åŸºæœ¬ä¿¡æ¯               </li>
</ul>
<ul>
<li><strong>2.rssiä¿¡å·è´¨é‡,ä¹Ÿæœ‰äººå‘Šè¯‰æˆ‘æ˜¯è´¨é‡</strong><br>ä¸è¿‡æˆ‘è¿™æ¬¡å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°</li>
</ul>
<ul>
<li><strong>3.byte[] scanRecord (é‡å¤´æˆ)</strong><br>å¹¿æ’­å“åº”åŒ…æ•°æ®<br>ä¸€èˆ¬åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†,æˆ‘ä½¿ç”¨çš„ä¸»è¦æ˜¯ServiceDataåŸŸ<br><strong>åœ¨è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªéƒ¨åˆ†éƒ½å­˜åœ¨äºå¹¿æ’­æ•°æ®ï¼Œè€Œä¸”å¹¶ä¸æ˜¯ä¸¤éƒ¨åˆ†éƒ½æœ‰ï¼Œæœ‰å¯èƒ½æ˜¯åªæœ‰ä¸€ä¸ªéƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸€å®šè¦çœ‹æƒ…è®¾å¤‡çš„ç¡¬ä»¶è§„èŒƒï¼Œå› ä¸ºè¿™æ¶‰åŠåˆ°åé¢è§£æå¹¿æ’­æ•°æ®</strong></li>
</ul>
<p>è¦çŸ¥é“ï¼Œæˆ‘ä»¬éƒ½æ˜¯æ‹¿byte[]æ•°ç»„ä¸­çš„æŸäº›éƒ¨åˆ†å¯¹åº”ç‰¹å®šå€¼,ä¸€æ—¦å¯¹åº”å…³ç³»æ‰“ä¹±ï¼Œé‚£ä¹ˆæ•°æ®è§£æå°±æ²¡ä»€ä¹ˆæ­£ç¡®æ€§å¯è¨€äº†<br>è¿™äº›å¹¿æ’­æ•°æ®éƒ½æ˜¯ä¾æ®ä¸€å®šçš„è§„åˆ™æŒ‡å®š çš„,æ‰€ä»¥è¿™æ—¶å€™ä½ éœ€è¦è®¾å¤‡å‚å•†çš„æ–‡æ¡£æ¥æŸ¥çœ‹å¯¹åº”çš„æ•°æ®,ä»¥åŠå…¶ç»“æ„<br>PS:éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯,è¿™äº›æ•°æ®éƒ½æ˜¯byte[],ä½ éœ€è¦å°†å®ƒä»¬è½¬åŒ–(ä¸€èˆ¬å¸¸ç”¨çš„åšæ³•æ˜¯,å…ˆè½¬åŒ–ä¸º16è¿›åˆ¶çš„å­—ç¬¦ä¸²,è€Œåå†è¿›è¡Œè¯»å–è§£æ)</p>
<p>###4.è¯»å–è“ç‰™è®¾å¤‡å†…éƒ¨æ•°æ®<br>è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ªé‡è¦éƒ¨åˆ†<br>service  ä»¥åŠ characteristic</p>
<p>ä¸€èˆ¬æ¥è¯´<br> ä¸€ä¸ªService  eg: FF01-XXXXXXXXXXX-XXXXX<br> ä¸‹é¢å¯èƒ½æœ‰å¾ˆå¤šçš„characteristic<br>Marjor : FF16 -XXXXXX<br>Power : FF17 - XXX<br>â€¦.ä¸€å †çš„characteristic </p>
<ul>
<li><strong>å¦‚æœéœ€è¦ç»™æŒ‡å®šçš„é¡¹ç›®å†™å…¥ä¸€ä¸ªæ•°æ®</strong><br> æ¡ä»¶ï¼š<pre><code>1.æ­¤ç‰¹å¾åœ¨å“ªä¸ªServiceä¸‹ï¼Œå³è¯¥serviceçš„UUID
2.è¯¥ç‰¹å¾çš„UUID
3.è¯¥ç‰¹å¾çš„å†™å…¥æ ¼å¼ï¼Œ16è¿›åˆ¶è¿˜æ˜¯å…¶ä»–çš„ä¸œè¥¿
</code></pre></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//ä»£ç ç‰‡æ®µ1</span><br><span class="line">//æ­¤æ–¹æ³•è·å–å¯¹åº”ç‰¹å¾å€¼çš„å¯¹è±¡BluetoothGattCharacteristicçš„å®ä½“</span><br><span class="line">    public BluetoothGattCharacteristic getCharacteristic(String service,String charact) &#123;</span><br><span class="line">        if (mBluetoothGatt == null) return null;</span><br><span class="line">        if(mBluetoothGatt.getService(UUID.fromString(service))==null)&#123;return null ;&#125;</span><br><span class="line">        return mBluetoothGatt.getService(UUID.fromString(service)).getCharacteristic(UUID.fromString(charact));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//ä»£ç ç‰‡æ®µ2</span><br><span class="line">if(!TextUtils.isEmpty(value))&#123;//è¾“å…¥éç©º</span><br><span class="line">      byte[] arrayOfByte= new byte[2];//ä¼ å…¥æ•°æ®è§„å®šä¸º2ä¸ªbyte</span><br><span class="line">      arrayOfByte[0] = ((byte)Integer.parseInt((value).substring(0, 2), 16));</span><br><span class="line">      arrayOfByte[1] = ((byte)Integer.parseInt((value).substring(2, 4), 16));</span><br><span class="line">      //ä¸Šé¢æ“ä½œï¼Œå…ˆåˆ‡ï¼Œå†è½¬ä¸º16è¿›åˆ¶</span><br><span class="line">      characteristic.setValue(arrayOfByte);</span><br><span class="line">      //characteristicå®ä½“å°±æ˜¯ç‰‡æ®µ1ä»£ç è·å–åˆ°çš„</span><br><span class="line">      gattServer.writeCharacteristic(characteristic);</span><br><span class="line">      //æ‰€æœ‰çš„æ“ä½œéƒ½å°è£…åœ¨ä¸€ä¸ªserviceä¸­ï¼ŒgattServerä¸ºå…¶å®ä½“å¯¹è±¡</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//ç‰‡æ®µ3å°±æ˜¯æœåŠ¡ä¸­çš„å†™å…¥æ–¹æ³•</span><br><span class="line">/**</span><br><span class="line">   * å†™å…¥ä¸€ä¸ªæ•°æ®</span><br><span class="line">   * @param characteristic</span><br><span class="line">   */</span><br><span class="line">  public void writeCharacteristic(BluetoothGattCharacteristic characteristic) &#123;</span><br><span class="line">      mBluetoothGatt.setCharacteristicNotification(characteristic, true);</span><br><span class="line">      mBluetoothGatt.writeCharacteristic(characteristic);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">//ä»£ç ç‰‡æ®µ4   è¿™æ˜¯å›è°ƒï¼Œ</span><br><span class="line">//åœ¨è¿æ¥æ—¶å°±ä½œä¸ºå‚æ•°ä¼ å…¥äº† mBluetoothGatt = device.connectGatt(this, false, mGattCallback);</span><br><span class="line">private final BluetoothGattCallback mGattCallback = new BluetoothGattCallback() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) &#123;</span><br><span class="line">            if (newState == BluetoothProfile.STATE_CONNECTED) &#123;            </span><br><span class="line">                Log.e(TAG, &quot;è¿æ¥è‡³ GATT server.&quot;);</span><br><span class="line">            &#125; else if (newState == BluetoothProfile.STATE_DISCONNECTED) &#123;</span><br><span class="line">                Log.e(TAG, &quot;æ–­å¼€ GATT server.&quot;);             </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void onServicesDiscovered(BluetoothGatt gatt, int status) &#123;</span><br><span class="line">            if (status == BluetoothGatt.GATT_SUCCESS) &#123;</span><br><span class="line">                Log.e(TAG, &quot;å»ºç«‹è¿æ¥æˆåŠŸ&quot;);              </span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                Log.e(TAG, &quot;è¿æ¥çŠ¶æ€å¼‚å¸¸: &quot; + status);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) &#123;</span><br><span class="line">            if (status == BluetoothGatt.GATT_SUCCESS) &#123;</span><br><span class="line">                  Log.e(TAG, &quot;å†™å…¥æ•°æ®æˆåŠŸ&quot;);   </span><br><span class="line">            &#125; </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void onCharacteristicRead(BluetoothGatt gatt, BluetoothGattCharacteristic</span><br><span class="line">                characteristic, int status) &#123;</span><br><span class="line">            if (status == BluetoothGatt.GATT_SUCCESS) &#123;</span><br><span class="line">               Log.e(TAG, &quot;è¯»å–æ•°æ®æˆåŠŸ&quot;);   </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void onCharacteristicChanged(BluetoothGatt gatt,</span><br><span class="line">                                            BluetoothGattCharacteristic characteristic) &#123;</span><br><span class="line">            Log.e(TAG, &quot;è¿æ¥çŠ¶æ€å‘ç”Ÿæ”¹å˜&quot;);      </span><br><span class="line">        &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>PS:<strong>è¿™é‡Œçš„ä¾‹å­æ˜¯å†™å…¥ï¼Œå…¶å®è¯»å–çš„æ“ä½œä¸æ­¤ç±»ä¼¼ï¼Œæ“ä½œå®Œæˆååœ¨å›è°ƒé‡Œé¢åˆ¤æ–­çŠ¶æ€ä»¥åŠè¯»å–æ•°æ®å³å¯</strong></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> è“ç‰™ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android Studio åŸºæœ¬è®¾ç½®]]></title>
      <url>/Android-Studio/Android-Studio-%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/</url>
      <content type="html"><![CDATA[<p>####1.å¸¸ç”¨çš„å¿«æ·é”®</p>
<ul>
<li>ALT + Enter è‡ªåŠ¨æç¤º</li>
<li><p>ALT + Ins<br><img src="http://img.blog.csdn.net/20160503215809984" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>get set æ„é€ æ–¹æ³•  é‡å†™æ–¹æ³•<br>ä»¥åŠä¸€äº›æ’ä»¶å¦‚è¿™é‡Œçš„ GsonFormat ä»¥åŠ Butterknife</p>
</blockquote>
</li>
<li><p>Ctrl + Alt + F  å…¨å±€å˜é‡</p>
</li>
<li><p>Ctrl +Shift + Enter   åŠ ; ä»¥åŠif çš„(){}</p>
</li>
<li><p>Ctrl + P  ä»¥åŠ  Ctrl + Q  æ–¹æ³•å‚æ•°ä»¥åŠæ–‡æ¡£</p>
</li>
<li><p>Ctrl +O ç»§æ‰¿é‡å†™çš„æ–¹æ³•</p>
</li>
<li><p>Ctrl + /   Ctrl +Shift + /    æ³¨é‡Š</p>
</li>
<li><p>Ctrl + Alt + L æ ¼å¼åŒ–</p>
</li>
<li><p>Ctrl + D  Ctrl + Y   å¤åˆ¶ åˆ é™¤è¡Œ</p>
</li>
<li><p>Ctrl + Shift + U å¤§å°å†™</p>
</li>
<li><p>Shift Shift     Ctrl + F  å…¨å±€  å½“å‰ æœç´¢ </p>
</li>
<li><p>Ctrl + U åˆ°çˆ¶ç±»</p>
</li>
<li><p>Ctrl + Alt + B æ‰¾åˆ°å­ç±»</p>
</li>
<li><p>Ctrl + H     ç±»ç»“æ„</p>
</li>
<li><p>Ctrl+Shift + H   æ–¹æ³•å±‚æ¬¡</p>
</li>
<li><p>Ctrl + Alt + H   è°ƒç”¨å±‚æ¬¡</p>
</li>
<li><p>Alt + F7  find use  éå¸¸å¥½ç”¨çš„åŠŸèƒ½</p>
</li>
<li><p>Shift + F6  é‡å‘½å</p>
</li>
<li><p>logt + Enter    Tag </p>
</li>
<li><p>loge logd â€¦    æ‰“å°log</p>
</li>
</ul>
<hr>
<p>####2.è‡ªåŠ¨ç”Ÿæˆä»£ç  </p>
<blockquote>
<p>Ctrl  + J   </p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20160503222913571" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>é‡Œé¢ç›¸å½“å¤šçš„æ¨¡ç‰ˆä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if åˆ¤ç©º     ifn</span><br><span class="line">for å¾ªç¯     for </span><br><span class="line">foreach     foreach</span><br><span class="line">setVisibility     gone</span><br><span class="line">findViewById   fbc</span><br><span class="line">instanceof    inst</span><br></pre></td></tr></table></figure></p>
<p>è¿™äº›æ¯”è¾ƒå¸¸ç”¨</p>
<p>####3.è‡ªåŠ¨å¯¼å…¥åŒ…<br>Settings&gt;Editor&gt;General&gt;Auto import<br><img src="http://img.blog.csdn.net/20160503215409545" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>####4.å…¶ä»–è®¾ç½®å·²ç»å¯¼å‡º</p>
<blockquote>
<p>ps : åœ¨ç™¾åº¦äº‘é‡Œæœ‰<br><img src="http://img.blog.csdn.net/20160503223900468" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
</blockquote>
]]></content>
      
        <categories>
            
            <category> Android Studio </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android Studio </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Android Studio å¯¼å…¥ VitamioåŠæ¨ªç«–å±åˆ‡æ¢]]></title>
      <url>/Android-Studio/Android-Studio-%E5%AF%BC%E5%85%A5-Vitamio%E5%8F%8A%E6%A8%AA%E7%AB%96%E5%B1%8F%E5%88%87%E6%8D%A2/</url>
      <content type="html"><![CDATA[<p>##å»ºè®®ä¸è¦ä½¿ç”¨Vitamio,å„ç§æ·±å‘</p>
<blockquote>
<p><a href="https://github.com/Bilibili/ijkplayerçœ‹çœ‹bilibiliçš„å¼€æºæ’­æ”¾å™¨" target="_blank" rel="noopener">https://github.com/Bilibili/ijkplayerçœ‹çœ‹bilibiliçš„å¼€æºæ’­æ”¾å™¨</a></p>
</blockquote>
<p>##Vitamio<br>å®˜æ–¹:<a href="https://www.vitamio.org/" target="_blank" rel="noopener">https://www.vitamio.org/</a><br>GitHub:<a href="https://github.com/yixia/VitamioBundle" target="_blank" rel="noopener">https://github.com/yixia/VitamioBundle</a></p>
<blockquote>
<p><a href="https://www.vitamio.org/" target="_blank" rel="noopener">Vitamio</a> èƒ½å¤Ÿæµç•…æ’­æ”¾720Pç”šè‡³1080Pé«˜æ¸…MKVï¼ŒFLVï¼ŒMP4ï¼ŒMOVï¼ŒTSï¼ŒRMVBç­‰å¸¸è§æ ¼å¼çš„è§†é¢‘ï¼Œæ”¯æŒ MMS, RTSP, RTMP, HLS(m3u8) ç­‰å¸¸è§çš„å¤šç§è§†é¢‘æµåª’ä½“åè®®ï¼ŒåŒ…æ‹¬ç‚¹æ’­ä¸ç›´æ’­ã€‚</p>
</blockquote>
<p>###1.ä¸‹è½½Vitamio<br>  <img src="http://img.blog.csdn.net/20160408235109325" alt="å»å®˜ç½‘ä¸‹è½½å³å¯"></p>
<ul>
<li>åœ°å€<a href="https://www.vitamio.org/Download/" target="_blank" rel="noopener">https://www.vitamio.org/Download/</a></li>
</ul>
<hr>
<p>###2.è§£å‹å¹¶å¯¼å…¥Android</p>
<ul>
<li><p>æ‰¾åˆ°åˆ°æ–‡ä»¶å¤¹VitamioBundle</p>
<p><img src="http://img.blog.csdn.net/20160408235743265" alt="VitamioBundle"></p>
</li>
<li><p>File &gt; New &gt; New Module<br><img src="http://img.blog.csdn.net/20160409000630784" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
</li>
<li><p>å¯¼å…¥å®Œæˆåæ˜¯è¿™æ ·çš„</p>
<p><img src="http://img.blog.csdn.net/20160409001321974" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
</li>
</ul>
<p>###3.å¯¼å…¥åˆ°è‡ªå·±çš„é¡¹ç›®(å³ä¸ä½¿ç”¨Vitamioçš„libiary,å¼ºè¿«ç—‡ä¸“å±)<br><img src="http://img.blog.csdn.net/20160908231510455" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>####A.åœ¨è‡ªå·±çš„ç›®å½•ä¸‹å»ºç«‹io.vov.vitamio<br>    å¹¶å¯¼å…¥æ‰€æœ‰çš„ç±»,ä»¥åŠå°†jniLibsç›®å½•æ‹·è´åˆ°mainç›®å½•ä¸‹,è¿˜æœ‰ç›¸å…³çš„èµ„æºæ–‡ä»¶</p>
<p>####B.åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­å†™å…¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;activity </span><br><span class="line">android:name=&quot;io.vov.vitamio.activity.InitActivity&quot;             android:configChanges=&quot;orientation|screenSize|smallestScreenSize|keyboard|keyboardHidden|navigation&quot;</span><br><span class="line">android:launchMode=&quot;singleTop&quot;</span><br><span class="line">android:theme=&quot;@android:style/Theme.NoTitleBar&quot;</span><br><span class="line">android:windowSoftInputMode=&quot;stateAlwaysHidden&quot;/&gt;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>å¹¶åŠ å…¥ç›¸åº”çš„æƒé™</p>
</blockquote>
<p>####C.åœ¨ä½ å–œæ¬¢çš„åœ°æ–¹åˆå§‹åŒ–Vitamio<br> å¼€ç©ç¬‘çš„,æ”¾åœ¨activityæˆ–è€…æ˜¯Applicationçš„onCreateä¸­</p>
<blockquote>
<p>Vitamio.isInitialized(application.getApplicationContext()); </p>
</blockquote>
<hr>
<p>###3.Vatimioçš„ä½¿ç”¨</p>
<p>####A.ç•Œé¢çš„æ­å»º<br><img src="http://img.blog.csdn.net/20160908232554310" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥çœ‹åˆ°<br>    æ•´ä¸ªé¡µé¢ä¸»è¦åˆ†ä¸Šä¸‹ä¸¤å±‚,ä¸»è¦æ˜¯ä¸ºäº†è§†å±å…¨å±çš„æ—¶å€™èƒ½æ–¹ä¾¿çš„éšè—æ•´ä¸ªä¸‹é¢çš„å¸ƒå±€</p>
<p>####B.ä½¿ç”¨<br>åœ¨æ­¤ä¹‹å‰ä¸ºäº†æ–¹ä¾¿çš„ä½¿ç”¨è§†å±å…¨å±æ’­æ”¾,å¯¹MediaController(package io.vov.vitamio.widget)åšä¸€ä¸ªå°å°çš„æ”¹é€ :<br>æ·»åŠ ä¸€ä¸ªæ„é€ :ä¸»è¦ç”¨äºæŠŠè§†å±,è¿›åº¦æ¡ç­‰æ”¾åˆ°ä¸€ä¸ªViewä¸­,ä¾¿äºå…¨å±å±•ç¤º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//è¿™ä¸ªå…¨å±çš„æ“ä½œå¯æŠŠæˆ‘éš¾åäº†,çœ‹åˆ°è¿™ä¸ªçœŸçš„æ˜¯ä¸ºåŸä½œè€…çš„æœºæ™ºç‚¹èµ</span><br><span class="line">  public MediaController(Context context,boolean fromXml,View container) &#123;</span><br><span class="line">    super(context);</span><br><span class="line">    initController(context);</span><br><span class="line">    mFromXml = fromXml;</span><br><span class="line">    mRoot = makeControllerView();</span><br><span class="line">    //è¿™ä¸ªåœ°æ–¹çš„FrameLayout.LayoutpParamsæ˜¯å› ä¸ºå¸ƒå±€æ–‡ä»¶ä¸­è¦æŠŠMediaControllerçš„è§†å›¾ä½œä¸ºchildViewåŠ åˆ°ä¸€ä¸ªFrameLayoutä¸­å»</span><br><span class="line">    LayoutParams p = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);</span><br><span class="line">    //æƒ³æ€æ ·å¸ƒå±€MediaControllerå°±å°½æƒ…çš„å‘æŒ¥è¿™ä¸ªLayoutParamså§</span><br><span class="line">    p.gravity = Gravity.BOTTOM;</span><br><span class="line">    mRoot.setLayoutParams(p);</span><br><span class="line">    ((FrameLayout)container).addView(mRoot);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>æ¥ç€ä½ å°±å¯ä»¥æ„‰å¿«çš„ç©è€äº†:<br>åœ¨oncreateä¸­è°ƒç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">initVitamioView();</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">//åˆå§‹åŒ–æ§ä»¶</span><br><span class="line">private void initVitamioView() &#123;</span><br><span class="line">//VideoView</span><br><span class="line">mVideoView = (VideoView) findViewById(R.id.buffer);</span><br><span class="line">//è¿™ä¸ªå°±æ˜¯åŒ…è£¹æ•´ä¸ªè§†å±æ¨¡å—çš„FrameLayout</span><br><span class="line">fl_controller = (FrameLayout) findViewById(R.id.fl_controller);</span><br><span class="line">//ç¼“å†²æ—¶å‡ºç°çš„è¿›åº¦æ¡</span><br><span class="line">pb = (ProgressBar) findViewById(R.id.probar);</span><br><span class="line">//æ’­æ”¾è¿›åº¦,å¹¶å¯ä»¥æ‹–åŠ¨è°ƒèŠ‚è§†å±æ’­æ”¾ä½ç½®</span><br><span class="line">downloadRateView = (TextView) findViewById(R.id.download_rate);</span><br><span class="line">loadRateView = (TextView) findViewById(R.id.load_rate);</span><br><span class="line">//è®¾ç½®è§†å±setVideoURIå¯ä»¥ç¼“å†²å¹¶æ’­æ”¾</span><br><span class="line">//setVideoPath()ç¼“å†²å®Œå†æ’­æ”¾</span><br><span class="line">mVideoView.setVideoURI(Uri.parse(TextUtils.isEmpty(path)?defaultPath:path));</span><br><span class="line">//è¿™é‡Œä½¿ç”¨è‡ªå®šä¹‰çš„é‚£ä¸ªMediaControlleræ„é€ </span><br><span class="line">mMediaController= new MediaController(this, true, fl_controller);</span><br><span class="line">//è¿™é‡Œçš„ç›‘å¬å…¶å®æ˜¯åœ¨MediaControllerä¸­è‡ªå·±å®šä¹‰çš„,ä¸»è¦å°±æ˜¯å…¨å±çš„åˆ‡æ¢æŒ‰é’®</span><br><span class="line">mMediaController.setOnControllerClick(new MediaController.OnControllerClick() &#123;</span><br><span class="line">     @Override</span><br><span class="line">     public void OnClick(int type) &#123;</span><br><span class="line">         if (type == 0) &#123;  //è¡¨ç¤ºç‚¹å‡»åˆ‡æ¢å…¨å±æŒ‰é’®</span><br><span class="line">	          if (isPortrait) &#123;</span><br><span class="line">		          //ä¸æ˜¯å…¨å±,åˆ‡æ¢ä¸ºå…¨å±</span><br><span class="line">	             //ä»£ç å—1</span><br><span class="line">	           &#125; else &#123;</span><br><span class="line">		          //æ˜¯å…¨å±,è¿‘æ¥å°±åˆ‡ä¸ºåŸæ¥çš„å¤§å°</span><br><span class="line">	             //ä»£ç å—2</span><br><span class="line">		       &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">//ç±»ä¼¼ç»‘å®š </span><br><span class="line">mVideoView.setMediaController(mMediaController);</span><br><span class="line">//éšè—æ§åˆ¶æ¨¡å—</span><br><span class="line">mMediaController.setVisibility(View.GONE);</span><br><span class="line">mVideoView.requestFocus();</span><br><span class="line">//è®¾ç½®å¯¹è§†å±ä¿¡æ¯çš„ç›‘å¬</span><br><span class="line">mVideoView.setOnInfoListener(this);</span><br><span class="line">//è§†å±ç¼“å†²çš„ç›‘å¬</span><br><span class="line">mVideoView.setOnBufferingUpdateListener(this);</span><br><span class="line">//è§†å±OK</span><br><span class="line">mVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() &#123;</span><br><span class="line">     @Override</span><br><span class="line">     public void onPrepared(MediaPlayer mediaPlayer) &#123;</span><br><span class="line">	     //è®¾ç½®æ’­æ”¾é€Ÿåº¦</span><br><span class="line">         mediaPlayer.setPlaybackSpeed(1.0f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¡¥å……ä»£ç å—1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; RelativeLayout.LayoutParams fl_lp = new RelativeLayout.LayoutParams(displayheight, displayWidth);</span><br><span class="line">                        fl_controller.setLayoutParams(fl_lp);</span><br><span class="line">//è®¾ç½®æ¨ªå±                        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);  //è¿™æ ·mVideoViewä¼šè‡ªå·±å……æ»¡å…¨å±</span><br><span class="line">                        mVideoView.setVideoLayout(VideoView.VIDEO_LAYOUT_SCALE, 0);</span><br><span class="line">                        isPortrait = false;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<p>ä»£ç å—2<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; RelativeLayout.LayoutParams fl_lp = new RelativeLayout.LayoutParams(</span><br><span class="line">                                LinearLayout.LayoutParams.MATCH_PARENT,</span><br><span class="line">                                DensityUtils.dip2px(ClassRoomActivity.this,200)</span><br><span class="line">                        );</span><br><span class="line">                        fl_controller.setLayoutParams(fl_lp);</span><br><span class="line">                        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);</span><br><span class="line">                        isPortrait = true;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * æ¨ªç«–å±åˆ‡æ¢çš„æ—¶å€™å›èµ°è¿™ä¸ªå›è°ƒ</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">@Override</span><br><span class="line">public void onConfigurationChanged(Configuration newConfig) &#123;</span><br><span class="line">        //å±å¹•åˆ‡æ¢æ—¶ï¼Œè®¾ç½®å…¨å±</span><br><span class="line">        if (this.getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) &#123;</span><br><span class="line">	        //éšè—ä¸‹é¢çš„å¸ƒå±€å’Œæ ‡é¢˜</span><br><span class="line">            tLBelow.setVisibility(View.GONE);</span><br><span class="line">            mTitlebar.setVisibility(View.GONE);</span><br><span class="line">        &#125;</span><br><span class="line">        if (this.getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) &#123;</span><br><span class="line">	         //æ˜¾ç¤ºä¸‹é¢çš„å¸ƒå±€å’Œæ ‡é¢˜</span><br><span class="line">            tLBelow.setVisibility(View.VISIBLE);</span><br><span class="line">            mTitlebar.setVisibility(View.VISIBLE);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        super.onConfigurationChanged(newConfig);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>####C.ä¸¤ä¸ªé‡è¦çš„ç›‘å¬(ä¸Šé¢å·²ç»æ³¨å†Œè¿‡äº†)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//ç¼“å†²çš„ç›‘å¬</span><br><span class="line">@Override</span><br><span class="line">    public void onBufferingUpdate(MediaPlayer mp, int percent) &#123;</span><br><span class="line">    //æ˜¾ç¤ºç¼“å†²è¿›åº¦</span><br><span class="line">        loadRateView.setText(percent + &quot;%&quot;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">//è§†å±ä¿¡æ¯ç›‘å¬</span><br><span class="line">@Override</span><br><span class="line">    public boolean onInfo(MediaPlayer mp, int what, int extra) &#123;</span><br><span class="line">        switch (what) &#123;</span><br><span class="line">        //å¼€å§‹ç¼“å†²</span><br><span class="line">            case MediaPlayer.MEDIA_INFO_BUFFERING_START:</span><br><span class="line">                if (mVideoView.isPlaying()) &#123;</span><br><span class="line">                    mVideoView.pause();</span><br><span class="line">                    pb.setVisibility(View.VISIBLE);</span><br><span class="line">                    downloadRateView.setText(&quot;&quot;);</span><br><span class="line">                    loadRateView.setText(&quot;&quot;);</span><br><span class="line">                    downloadRateView.setVisibility(View.VISIBLE);</span><br><span class="line">                    loadRateView.setVisibility(View.VISIBLE);</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">                //åœæ­¢ç¼“å†²,è¿™é‡Œè‡ªåŠ¨å¼€å§‹æ’­æ”¾</span><br><span class="line">            case MediaPlayer.MEDIA_INFO_BUFFERING_END:</span><br><span class="line">                mVideoView.start();</span><br><span class="line">                pb.setVisibility(View.GONE);</span><br><span class="line">                downloadRateView.setVisibility(View.GONE);</span><br><span class="line">                loadRateView.setVisibility(View.GONE);</span><br><span class="line">                break;</span><br><span class="line">            case MediaPlayer.MEDIA_INFO_DOWNLOAD_RATE_CHANGED:</span><br><span class="line">	            //ç¼“å†²çš„...é‚£ä¸ªå•¥    change</span><br><span class="line">                downloadRateView.setText(&quot;&quot; + extra + &quot;kb/s&quot; + &quot;  &quot;);</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>###4.å°±è¿™æ ·<br>   å¯¹äº†,å®Œäº‹è®°å¾—<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">    protected void onDestroy() &#123;</span><br><span class="line">            mVideoView.stopPlayback();</span><br><span class="line">           super.onDestroy();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>åŸºæœ¬å°±æ˜¯è¿™æ ·äº†,å…¶ä»–çš„é—®é¢˜è‡ªå·±è§£å†³ä¸€ä¸‹å°±å¥½äº†â€¦</p>
]]></content>
      
        <categories>
            
            <category> Android Studio </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
            <tag> Android Studio </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Linux å­¦ä¹ ç¬”è®°]]></title>
      <url>/Server/Linux-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<ul>
<li>netstat -an</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œè¿æ¥</span><br></pre></td></tr></table></figure>
<ul>
<li>moreå‘½ä»¤</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">é€‰é¡¹</span><br><span class="line"></span><br><span class="line">-num    æŒ‡å®šå±å¹•çš„è¡Œæ•°ï¼ˆä»¥æ•´æ•°è¡¨ç¤ºï¼‰</span><br><span class="line"></span><br><span class="line">+num    ä»è¡Œå·numå¼€å§‹æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line">-d    è®©moreç»™ç”¨æˆ·æ˜¾ç¤ºä¿¡æ¯[Press space to continue, &apos;q&apos; to quit.]</span><br><span class="line"></span><br><span class="line">-f    ä½¿moreè®¡æ•°é€»è¾‘è¡Œï¼Œè€Œä¸æ˜¯å±å¹•è¡Œï¼ˆé•¿è¡Œä¸ä¼šæ–­åˆ°ä¸‹ä¸€è¡Œï¼‰</span><br><span class="line"></span><br><span class="line">-s   æŠŠé‡å¤çš„ç©ºè¡Œå‹ç¼©æˆä¸€ä¸ªç©ºè¡Œ</span><br><span class="line"></span><br><span class="line">-u    é˜²æ­¢ä¸‹åˆ’çº¿</span><br><span class="line"></span><br><span class="line">äº¤äº’åŸºäºVIM</span><br></pre></td></tr></table></figure>
<ul>
<li>å­—ç¬¦ç•Œé¢</li>
</ul>
<p>1.å­—ç¬¦ç•Œé¢å ç”¨èµ„æºå°‘</p>
<p>2.å‡å°‘äº†å‡ºé”™,åˆ«æ”»å‡»çš„å¯èƒ½</p>
<ul>
<li>ä¸€åˆ‡çš†æ–‡ä»¶</li>
</ul>
<p>ç”¨æˆ·  ç¡¬ä»¶ æ–‡ä»¶â€¦.</p>
<ul>
<li>åˆ†åŒº</li>
<li>swap å†…å­˜çš„ä¸¤å€</li>
</ul>
<p>/ æ ¹åˆ†åŒº</p>
<p>/boot    bootåˆ†åŒº  200må³å¯  (ä½œä¸ºå¯åŠ¨ç›˜ä½¿ç”¨,å¯åŠ¨éœ€è¦ç©ºé—´)</p>
<p>/home  </p>
<p>/etc</p>
<p>â€¦</p>
<ul>
<li>å®‰è£…æ—¥å¿—</li>
</ul>
<p>/root/install.log     è®°å½•äº†å®‰è£…åœ¨ç³»ç»Ÿä¸­çš„è½¯ä»¶åŒ…å’Œç‰ˆæœ¬ä¿¡æ¯</p>
<p>/root/install.log.syslog    å®‰è£…è¿‡ç¨‹çš„è®°å½•</p>
<p>/root/anaconda-ks.cfg    è®°å½•å®‰è£…è¿‡ç¨‹ä¸­çš„é…ç½®ä¿¡æ¯(ç”¨äºç½‘ç»œæ‰¹é‡å®‰è£…)</p>
<ul>
<li>linuxèµ·å§‹ç¬¦</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop ~]#</span><br><span class="line">root ç”¨æˆ·å</span><br><span class="line">hadoop  å½“å‰ç”¨æˆ·çš„ä¸»æœºå</span><br><span class="line">"~" å½“å‰çš„ç›®å½•, "~"è¡¨ç¤ºå®¶ç›®å½•</span><br><span class="line">"#" è¶…çº§ç”¨æˆ·çš„æç¤ºç¬¦</span><br><span class="line">"$" æ™®é€šç”¨æˆ·çš„æç¤ºç¬¦</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>-rw-râ€“râ€“</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">drwxr-xr-x. 2 wzm wzm 4096 6æœˆ  21 16:19 Desktop</span><br><span class="line"><span class="meta">#</span>ä¸€å…±10ä½  drwxr-xr-x</span><br><span class="line"><span class="meta">#</span>d</span><br><span class="line">ç¬¬ä¸€ä½ æ–‡ä»¶ç±»å‹( -æ–‡ä»¶  dç›®å½• |è½¯é“¾æ¥æ–‡ä»¶   c  b )</span><br><span class="line"><span class="meta">#</span>rwx r-x r-x</span><br><span class="line">åé¢çš„æ¯ä¸‰ä½æ˜¯ä¸€ç»„</span><br><span class="line">ç¬¬ä¸€ä¸ªä¸‰ä½   æ‰€å±è€…u</span><br><span class="line">ç¬¬äºŒä¸ªä¸‰ä½   æ‰€å±ç»„g</span><br><span class="line">ç¬¬ä¸‰ä¸ªä¸‰ä½   å…¶ä»–äººo</span><br><span class="line"><span class="meta">#</span>acfæƒé™</span><br><span class="line">rè¯»</span><br><span class="line">wå†™</span><br><span class="line">xæ‰§è¡Œ</span><br></pre></td></tr></table></figure>
<ul>
<li>ç›®å½•</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/        æ ¹ç›®å½•</span><br><span class="line">/etc     é…ç½®æ–‡ä»¶ç›®å½•</span><br><span class="line">/bin     ç³»ç»Ÿå‘½ä»¤çš„ç›®å½• (æ™®é€šç”¨æˆ·å³å¯è¯»å–)</span><br><span class="line">/sbin    ç³»ç»Ÿå‘½ä»¤çš„ç›®å½• (è¶…çº§ç”¨æˆ·å³å¯è¯»å–)</span><br><span class="line">/usr/bin ç³»ç»Ÿå‘½ä»¤çš„ç›®å½• (æ™®é€šç”¨æˆ·å³å¯è¯»å–)</span><br><span class="line">/usr/sbinç³»ç»Ÿå‘½ä»¤çš„ç›®å½• (è¶…çº§ç”¨æˆ·å³å¯è¯»å–)</span><br><span class="line">/home    æ™®é€šç”¨æˆ·çš„å®¶ç›®å½•</span><br><span class="line">/root    è¶…çº§ç”¨æˆ·çš„å®¶ç›®å½•</span><br><span class="line">/usr     ç³»ç»Ÿè½¯ä»¶èµ„æºç›®å½•</span><br><span class="line">/boot    å¯åŠ¨ç›®å½•</span><br><span class="line">/var     ç³»ç»Ÿç›¸å…³æ–‡æ¡£</span><br><span class="line">/sys	 ç›´æ¥å†™å…¥å†…å­˜</span><br><span class="line">/proc    ç›´æ¥å†™å…¥å†…å­˜</span><br><span class="line">/dev     è®¾å¤‡æ–‡ä»¶ç›®å½•</span><br><span class="line">/lib     ç³»ç»Ÿåº“ ä¿å­˜ç›®å½•</span><br><span class="line">/mnt     ç³»ç»ŸæŒ‚è½½ç›®å½•</span><br><span class="line">/media   æŒ‚è½½ç›®å½•</span><br></pre></td></tr></table></figure>
<ul>
<li><p>linux å¸¸ç”¨å‘½ä»¤     control + L  æ¸…å±</p>
</li>
<li><p>æ–‡ä»¶å‘½ä»¤</p>
<ul>
<li>åŸºæœ¬å‘½ä»¤æ ¼å¼</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ [é€‰é¡¹] [å‚æ•°]</span><br><span class="line"><span class="meta">#</span>ls</span><br><span class="line">ls </span><br><span class="line">   -a  æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶</span><br><span class="line">   -l  æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯,ç›®å½•ä¸‹æ‰€æœ‰å†…å®¹</span><br><span class="line">   -d  æŸ¥çœ‹ç›®å½•å±æ€§,ç›®å½•æœ¬èº«</span><br><span class="line">   -h  äººæ€§åŒ–æ˜¾ç¤ºæ–‡ä»¶å¤§å°</span><br><span class="line">   -i  æ˜¾ç¤ºinode  æ–‡ä»¶çš„idå·</span><br><span class="line">ll ll -l</span><br><span class="line"><span class="meta">#</span></span><br></pre></td></tr></table></figure>
<p>â€‹</p>
<ul>
<li>ç›®å½•æ–‡ä»¶å¤„ç†</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>mkdir  åˆ›å»ºç›®å½•</span><br><span class="line">mkdir </span><br><span class="line">  -p  é€’å½’åˆ›å»º,åˆ›å»ºå¤šçº§ç›®å½•</span><br><span class="line">  </span><br><span class="line"><span class="meta">#</span>cd  åˆ‡æ¢ç›®å½•</span><br><span class="line">cd </span><br><span class="line">  ~  å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•</span><br><span class="line">  -  è¿›å…¥ä¸Šæ¬¡è¿›å…¥çš„ç›®å½•</span><br><span class="line">  .. è¿›å…¥ä¸Šçº§ç›®å½•</span><br><span class="line">  .  è¿›å…¥å½“å‰ç›®å½•</span><br><span class="line">  </span><br><span class="line"><span class="meta">#</span>pwd</span><br><span class="line">pwd  æ˜¾ç¤ºå½“å‰ç›®å½•å…¨è·¯å¾„</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>rm -rf [æ–‡ä»¶æˆ–ç›®å½•]</span><br><span class="line">rm </span><br><span class="line"> -f å¼ºåˆ¶åˆ é™¤</span><br><span class="line"> -r åˆ é™¤ç›®å½•</span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span>cp</span><br><span class="line">cp</span><br><span class="line"> -r å¤åˆ¶ç›®å½•</span><br><span class="line"> -p è¿å¸¦æ–‡ä»¶çš„å±æ€§ä¸€èµ·å¤åˆ¶</span><br><span class="line"> -d å¦‚æœæ–‡ä»¶ä¸ºé“¾æ¥æ–‡ä»¶,åˆ™å¤åˆ¶é“¾æ¥å±æ€§</span><br><span class="line"> -a ç›¸å½“äº-pdr</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>mv</span><br><span class="line">mv [æºåœ°å€] [ç›®æ ‡åœ°å€]</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
<ul>
<li>è½¯é“¾æ¥å‘½ä»¤(æºæ–‡ä»¶ä¸€å®šå†™å·¨ç»å¯¹è·¯å¾„)</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>ln [æº] [ç›®æ ‡]</span><br><span class="line">ln</span><br><span class="line">ä¸èƒ½è·¨åˆ†åŒº,ä¸èƒ½æ˜¯ä¸€ä¸ªç›®å½•</span><br><span class="line">ç›¸å½“äºä¸€ä¸ªæ–‡ä»¶   æ–‡ä»¶idå·ç›¸åŒ</span><br><span class="line"></span><br><span class="line"> -s    è½¯é“¾æ¥   ç±»ä¼¼windowsé‡Œé¢çš„å¿«æ·æ–¹å¼</span><br><span class="line"> æœ‰è‡ªå·±çš„idå·   </span><br><span class="line"> å…¶å®æ˜¯å»æŸ¥çœ‹è‡ªå·±çš„å­˜å‚¨ç‚¹,</span><br><span class="line"> å­˜å‚¨ç‚¹é‡Œé¢æ˜¯æºæ–‡ä»¶çš„idå·,</span><br><span class="line"> ç„¶ååˆç”¨æºæ–‡ä»¶idå·å»æ‰¾æºæ–‡ä»¶çš„å­˜å‚¨ç‚¹</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
</li>
<li><p>æœç´¢å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">locate æ–‡ä»¶æœç´¢å‘½ä»¤</span><br><span class="line">whereis ä¸ which</span><br><span class="line">find æ–‡ä»¶æœç´¢å‘½ä»¤</span><br><span class="line">grep å­—ç¬¦ä¸²æœç´¢å‘½ä»¤</span><br></pre></td></tr></table></figure>
<ul>
<li><p>locate </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>locate</span><br><span class="line">locate [æ–‡ä»¶å]</span><br><span class="line"></span><br><span class="line">åœ¨åå°æ•°æ®åº“ä¸­æŒ‰æ–‡ä»¶åæœç´¢</span><br><span class="line">ä½ç½®åœ¨:</span><br><span class="line">/var/lib/mlocate</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>updatedb</span><br><span class="line">updatedb æ›´æ–°æ•°æ®åº“</span><br></pre></td></tr></table></figure>
</li>
<li><p>whereis </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>whereis</span><br><span class="line">whereis [å‘½ä»¤å]</span><br><span class="line"> -b ä¹‹æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶</span><br><span class="line"> -m åªæŸ¥æ‰¾å¸®åŠ©æ–‡ä»¶</span><br></pre></td></tr></table></figure>
</li>
<li><p>which</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹</span><br><span class="line"><span class="meta">#</span>which</span><br><span class="line">which [æ–‡ä»¶å]</span><br><span class="line">æœç´¢å‘½ä»¤æ‰€åœ¨ç›®å½•è·¯å¾„å·²ç»åˆ«å</span><br></pre></td></tr></table></figure>
</li>
<li><p>find</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>find</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>é¿å¤§èŒƒå›´æœç´¢,ä¼šéå¸¸æ¶ˆè€—ç³»ç»Ÿèµ„æº</span><br><span class="line"><span class="meta">#</span>å¦‚æœä¸ç”¨é€šé…ç¬¦,åˆ™ä¼šæœç´¢ä¸æ–‡ä»¶åå®Œå…¨ä¸€è‡´çš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">find [æœç´ èŒƒå›´] [æœç´¢æ¡ä»¶]</span><br><span class="line"></span><br><span class="line">find [æœç´ èŒƒå›´] </span><br><span class="line">  -name [åå­—]</span><br><span class="line">  </span><br><span class="line">  -iname [åå­—]  ä¸åŒºåˆ†å¤§å°å†™</span><br><span class="line">  </span><br><span class="line">  -user [æ‰€æœ‰è€…]  æŒ‰æ‰€æœ‰è€…æœç´¢</span><br><span class="line">  </span><br><span class="line">  -nouser   æŸ¥æ‰¾æ²¡æœ‰æ‰€æœ‰è€…çš„æ–‡ä»¶ </span><br><span class="line">  </span><br><span class="line">  -mtime  [] ä¿®æ”¹æ–‡ä»¶å†…å®¹çš„æ—¶é—´ </span><br><span class="line">  -atime  [] æ–‡ä»¶è®¿é—®æ—¶é—´</span><br><span class="line">  -ctime  [] æ”¹å˜æ–‡ä»¶å±æ€§çš„æ—¶é—´</span><br><span class="line">    [-10 10 +10  10å¤©å†…  10å¤©å½“å¤©  +10å¤©å‰]</span><br><span class="line">  </span><br><span class="line">  -size [å¤§å°]  å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾å¤§å°æ˜¯ 25kçš„æ–‡ä»¶</span><br><span class="line">    [-25k 25k +25k]</span><br><span class="line">    [-2M 2M +2M]</span><br><span class="line">  </span><br><span class="line">  -inum [idå·]  </span><br><span class="line">  </span><br><span class="line">  -a   and é€»è¾‘ä¸,åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶</span><br><span class="line">   eg find /etc -size +25k -a -size -50k</span><br><span class="line"></span><br><span class="line">  -o   or  é€»è¾‘æˆ–,ä¸¤ä¸ªæ¡ä»¶æ»¡è¶³ä¸€ä¸ªæ¡ä»¶å³å¯</span><br><span class="line">  </span><br><span class="line">  -exec [ä¸€ä¸ªå‘½ä»¤] &#123;&#125; \;   æœç´¢å‡ºæ¥çš„ç»“æœå†æ‰§è¡Œä¸€æ¬¡å‘½ä»¤</span><br><span class="line">   eg find /etc -size +25k -a -size -50k -exec ls -lh &#123;&#125; \;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>é€šé…ç¬¦</span><br><span class="line">*    åŒ¹é…ä»»ä½•å†…å®¹</span><br><span class="line">?    åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">[]   åŒ¹é…ä»»æ„ä¸€ä¸ªä¸­å£å·å†…çš„å­—ç¬¦    </span><br><span class="line">     eg:  abc  abd</span><br><span class="line">     find /home -name ab[cd]</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
</li>
<li><p>grep</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>grep</span><br><span class="line">grep "size" system.log</span><br><span class="line"></span><br><span class="line">grepæ˜¯åŒ…å«åŒ¹é…   åœ¨  system.log  ä¸­æŸ¥æ‰¾"size"</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>â€‹</p>
</li>
<li><p>å¸®åŠ©å‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">man [å‘½ä»¤]</span><br><span class="line"></span><br><span class="line">whatis [å‘½ä»¤] </span><br><span class="line"></span><br><span class="line">man -f [å‘½ä»¤]   å‘½ä»¤çš„å¸®åŠ©çº§åˆ«</span><br><span class="line"></span><br><span class="line">man -k [å‘½ä»¤]   æ¨¡ç³ŠåŒ¹é…</span><br><span class="line"> </span><br><span class="line">apropos [å‘½ä»¤]   æ¨¡ç³ŠåŒ¹é…</span><br><span class="line"></span><br><span class="line">[å‘½ä»¤] --help</span><br><span class="line"></span><br><span class="line">å†…æ ¸çš„å‘½ä»¤æŸ¥çœ‹å¸®åŠ©</span><br><span class="line"></span><br><span class="line">help [å‘½ä»¤]</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
</li>
<li><p>å‹ç¼©ä¸è§£å‹ç¼©</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¸¸ç”¨å‹ç¼©æ ¼å¼   .zip  .gz  .bz2   .tar.gz   .tar.bz2</span><br></pre></td></tr></table></figure>
<ul>
<li><p>zip</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">zip [å‹ç¼©æ–‡ä»¶åå­—] [æºæ–‡ä»¶]</span><br><span class="line"></span><br><span class="line">zip -r [å‹ç¼©æ–‡ä»¶åå­—] [æºç›®å½•]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>è§£å‹ç¼©</span><br><span class="line">unzip [zipæ–‡ä»¶]</span><br></pre></td></tr></table></figure>
</li>
<li><p>gz</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">gzip [æºæ–‡ä»¶]   </span><br><span class="line"><span class="meta">#</span>å‹ç¼©ä¸º.gzæ ¼å¼çš„å‹ç¼©æ–‡ä»¶,æºæ–‡ä»¶ä¼šæ¶ˆå¤±</span><br><span class="line"></span><br><span class="line">gzip -c [æºæ–‡ä»¶] &gt; å‹ç¼©æ–‡ä»¶</span><br><span class="line"><span class="meta">#</span>å‹ç¼©ä¸º.gzæ ¼å¼ ,æºæ–‡ä»¶ä¿ç•™</span><br><span class="line"></span><br><span class="line">gzip -r [æºç›®å½•] </span><br><span class="line"><span class="meta">#</span>å‹ç¼©ç›®å½•ä¸‹æ‰€æœ‰çš„å­æ–‡ä»¶,ä½†æ˜¯ä¸èƒ½å‹ç¼©ç›®å½•</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>è§£å‹ç¼©</span><br><span class="line">gzip -d [å‹ç¼©æ–‡ä»¶]</span><br><span class="line"></span><br><span class="line">gunzip [å‹ç¼©æ–‡ä»¶]</span><br><span class="line"></span><br><span class="line">gzp -d -r [ç›®å½•]   è§£å‹ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶</span><br></pre></td></tr></table></figure>
</li>
<li><p>tar </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#tar</span><br><span class="line">tar -cvf [æ‰“åŒ…æ–‡ä»¶å] [æºæ–‡ä»¶]</span><br><span class="line">  -c æ‰“åŒ…</span><br><span class="line">  -v æ˜¾ç¤ºè¿‡ç¨‹</span><br><span class="line">  -f æŒ‡å®šæ‰“åŒ…åçš„æ–‡ä»¶å</span><br><span class="line">     eg tar -cvf jp.tar jp</span><br><span class="line"></span><br><span class="line">#è§£å‹ç¼©</span><br><span class="line">tar -xvf [å‹ç¼©æ–‡ä»¶]</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<pre><code>- .tar.gz

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -zcvf [å‹ç¼©æ–‡ä»¶å] [æºæ–‡ä»¶]</span><br><span class="line"></span><br><span class="line">#è§£å‹ç¼©</span><br><span class="line">tar -zxvf [å‹ç¼©åŒ…å.tar.gz]</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li>å…³æœºå’Œé‡å¯</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shutdown [é€‰é¡¹] æ—¶é—´</span><br><span class="line"> -c   å–æ¶ˆå‰ä¸€ä¸ªå…³æœºå‘½ä»¤</span><br><span class="line"> -h   å…³æœº</span><br><span class="line"> -r   é‡å¯</span><br><span class="line"> </span><br><span class="line">logout é€€å‡ºç™»å½•</span><br></pre></td></tr></table></figure>
<ul>
<li>å…¶ä»–çš„å‘½ä»¤</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">w  æ˜¾ç¤ºæ‰€æœ‰çš„ç™»å½•ç”¨æˆ·</span><br><span class="line">last  æ‰€æœ‰ç™»å½•ä¿¡æ¯</span><br><span class="line">lastlog   æ‰€æœ‰ç”¨æˆ·ç™»å½•ä¿¡æ¯</span><br></pre></td></tr></table></figure>
<ul>
<li>å…¶ä»–å¿«æ·é”®</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">control + c   å¼ºåˆ¶ç»ˆæ­¢å½“å‰å‘½ä»¤</span><br><span class="line">control + l   æ¸…å±</span><br><span class="line">control + a   å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦–</span><br><span class="line">control + e   å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾</span><br><span class="line">control + u   ä»å…‰æ ‡ä½ç½®åˆ é™¤åˆ°è¡Œé¦–</span><br><span class="line">control + z   æŠŠå‘½ä»¤æ”¾å…¥åˆ°åå°</span><br><span class="line">control + r   åœ¨å†å²è®°å½•ä¸­æœç´¢</span><br></pre></td></tr></table></figure>
<ul>
<li>è¾“å‡ºé‡å®šå‘</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#æ ‡å‡†çš„è¾“å‡ºé‡å®šå‘</span><br><span class="line">å‘½ä»¤ &gt; æ–‡ä»¶    è¦†ç›–çš„æ–¹å¼å†™å…¥</span><br><span class="line"></span><br><span class="line">å‘½ä»¤ &gt;&gt; æ–‡ä»¶   è¿½åŠ çš„æ–¹å¼å†™å…¥</span><br><span class="line"></span><br><span class="line">#é”™è¯¯è¾“å‡ºé‡å®šå‘</span><br><span class="line"></span><br><span class="line">é”™è¯¯å‘½ä»¤ 2&gt; æ–‡ä»¶  è¦†ç›–çš„æ–¹å¼å†™å…¥é”™è¯¯æç¤º</span><br><span class="line">é”™è¯¯å‘½ä»¤ 2&gt;&gt; æ–‡ä»¶  è¿½åŠ çš„æ–¹å¼å†™å…¥é”™è¯¯æç¤º</span><br><span class="line"></span><br><span class="line">#æ­£ç¡®å’Œé”™è¯¯çš„åŒæ—¶è¾“å‡º</span><br><span class="line">å‘½ä»¤  &gt;&gt; æ–‡ä»¶ 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line">å‘½ä»¤  &amp;&gt;&gt; æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">#æ­£ç¡®é”™è¯¯åˆ†å¼€è¾“å‡º</span><br><span class="line">å‘½ä»¤ &gt;&gt; æ–‡ä»¶ 2&gt;&gt; æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<p>-è¾“å…¥é‡å®šå‘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">wc [é€‰é¡¹] [æ–‡ä»¶å]</span><br><span class="line">    -c ç»Ÿè®¡å­—èŠ‚æ•°</span><br><span class="line">    -w ç»Ÿè®¡å•è¯æ•°</span><br><span class="line">    -l ç»Ÿè®¡è¡Œæ•°</span><br><span class="line"> </span><br><span class="line">wc</span><br><span class="line">åœ¨ç»ˆç«¯è¾“å…¥æ–‡å­—    </span><br><span class="line">control + D ç»Ÿè®¡ç»“æœ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wc [æ–‡ä»¶å]</span><br><span class="line">   æ–‡ä»¶å†…å®¹è¾“å…¥åˆ°ç»ˆç«¯</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ç®¡é“ç¬¦</p>
<ul>
<li><p>å¤šå‘½ä»¤æ‰§è¡Œ(å‰ä¸€æ¡å‘½ä»¤çš„ç»“æœä¸ä¼šä¼ å…¥)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[å‘½ä»¤1] ; [å‘½ä»¤2]    é¡ºåºæ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">[å‘½ä»¤1] &amp;&amp; [å‘½ä»¤2]    </span><br><span class="line">    å‘½ä»¤1æ‰§è¡Œæ­£ç¡®   å‘½ä»¤2æ‰§è¡Œ</span><br><span class="line">    å‘½ä»¤1æ‰§è¡Œé”™è¯¯   å‘½ä»¤2ä¸ä¼šæ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">[å‘½ä»¤1] || [å‘½ä»¤2]  </span><br><span class="line">    å½“å‘½ä»¤1æ‰§è¡Œä¸æ­£ç¡®   å‘½ä»¤2æ‰§è¡Œ</span><br><span class="line">    å‘½ä»¤1æ‰§è¡Œæ­£ç¡®   å‘½ä»¤2å°±ä¸ä¼šæ‰§è¡Œ</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<pre><code>- ç®¡é“ç¬¦(å‰ä¸€æ¡å‘½ä»¤çš„ç»“æœä¼ å…¥ä¸‹ä¸€ä¸ªå‘½ä»¤)

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> # |</span><br><span class="line">[å‘½ä»¤1] | [å‘½ä»¤2]</span><br><span class="line">   å‘½ä»¤2ä¼šå»æ“ä½œå‘½ä»¤1æ‰§è¡Œçš„ç»“æœ</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li>é€šé…ç¬¦</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">?       ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">*       ä»»æ„å†…å®¹</span><br><span class="line">[]      åŒ¹é…æ‹¬å·ä¸­çš„æŸä¸€ä¸ªå­—ç¬¦</span><br><span class="line">[-]     åŒ¹é…æ‹¬å·ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ - ä»£è¡¨ä¸€ä¸ªèŒƒå›´ [a-z] [1-3]</span><br><span class="line">[^]     è¡¨ç¤ºåŒ¹é…ä¸æ˜¯æ‹¬å·ä¸­çš„å­—ç¬¦ æ¯”å¦‚[^0-9] æŒ‡åŒ¹é…ä¸æ˜¯æ•°å­—çš„å­—ç¬¦</span><br><span class="line"></span><br><span class="line">&apos;&apos;      å•å¼•å·   åœ¨å•å¼•å·ä¸­æ‰€æœ‰å­—ç¬¦éƒ½æ²¡æœ‰ç‰¹æ®Šå«ä¹‰</span><br><span class="line">&quot;&quot;      åŒå¼•å· é™¤äº†&quot;$&quot; å’Œ &quot;`&quot; &quot;\&quot; å…¶ä»–å­—ç¬¦éƒ½æ²¡æœ‰ç‰¹æ®Šæ„ä¹‰</span><br><span class="line"></span><br><span class="line">``      åå¼•å· æ˜¯ç³»ç»Ÿå‘½ä»¤å†…å®¹</span><br><span class="line">$()     ç”¨æ¥å¼•ç”¨ç³»ç»Ÿå‘½ä»¤</span><br><span class="line">#       shellä¸­è¡¨ç¤ºæ³¨é‡Š</span><br><span class="line">$       è°ƒç”¨å˜é‡çš„å€¼</span><br><span class="line">\       è½¬ä¹‰ç¬¦</span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Server </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Server </tag>
            
            <tag> Linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Facebook/Stethoâ€”â€”Androidå¼€å‘è°ƒè¯•ç¥å™¨]]></title>
      <url>/Android/Facebook-Stetho%E2%80%94%E2%80%94Android%E5%BC%80%E5%8F%91%E8%B0%83%E8%AF%95%E7%A5%9E%E5%99%A8/</url>
      <content type="html"><![CDATA[<p>####ä¸€ã€ç®€ä»‹</p>
<p>Stethoæ˜¯ä¸€ä¸ªAndroidåº”ç”¨è°ƒè¯•å·¥å…·ã€‚é›†æˆåï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡Chromeçš„å¼€å‘å·¥å…·æŸ¥çœ‹Appç›¸å…³çš„ä¿¡æ¯å’Œè°ƒè¯•ï¼›å¯è§†åŒ–æ“ä½œï¼Œä¸éœ€è¦è‡ªå·±ä½¿ç”¨adbä¹Ÿä¸éœ€è¦rootæƒé™ã€‚</p>
<p>####äºŒã€APPé›†æˆ</p>
<p>1.ä¸‹è½½æœ€æ–°çš„jarï¼Œæˆ–è€…é€šè¿‡Gradleå¼•å…¥stethoçš„libraay</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &apos;com.facebook.stetho:stetho:1.3.1&apos;</span><br></pre></td></tr></table></figure>
<p>2.åªéœ€è¦åœ¨ Applicationçš„ onCreate æ–¹æ³•ä¸­è°ƒç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class MyApplication extends Application &#123;</span><br><span class="line">   public void onCreate() &#123;</span><br><span class="line">     super.onCreate();</span><br><span class="line">     Stetho.initializeWithDefaults(this);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>3.å¦‚æœè¿˜æƒ³æŸ¥çœ‹ç½‘ç»œè¯·æ±‚çš„è¯ï¼Œéœ€è¦å¼•å…¥å¦å¤–çš„Library</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &apos;com.facebook.stetho:stetho-okhttp3:1.3.1&apos;</span><br></pre></td></tr></table></figure>
<p>4.ä½¿ç”¨okhttp è¿˜éœ€è¦æ·»åŠ  StethoInterceptor</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">OkHttpClient client = new OkHttpClient.Builder()</span><br><span class="line">             .addNetworkInterceptor(new StethoInterceptor())</span><br><span class="line">             .build();</span><br></pre></td></tr></table></figure>
<p>####ä¸‰ã€ä½¿ç”¨<br>é…ç½®å®Œæˆä¹‹åï¼Œåœ¨Chromeåœ°å€æ è¾“å…¥<code>chrome://inspect</code></p>
<blockquote>
<p>chrome://inspect/#devices</p>
</blockquote>
<p>chromeä¼šæ£€æµ‹åˆ°æˆ‘ä»¬çš„appï¼Œç‚¹å‡» <em>inspect</em> è¿›å…¥æŸ¥çœ‹é¡µé¢</p>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[String.formatçš„å‚æ•°è¡¨]]></title>
      <url>/Android/String-format%E7%9A%84%E5%8F%82%E6%95%B0%E8%A1%A8/</url>
      <content type="html"><![CDATA[<p>####String.format()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">%s  å­—ç¬¦ä¸²ç±»å‹ &quot;mingrisoft&quot;</span><br><span class="line">%c  å­—ç¬¦ç±»å‹    &apos;m&apos;</span><br><span class="line">%b  å¸ƒå°”ç±»å‹    true</span><br><span class="line">%d  æ•´æ•°ç±»å‹ï¼ˆåè¿›åˆ¶ï¼‰   99</span><br><span class="line">%x  æ•´æ•°ç±»å‹ï¼ˆåå…­è¿›åˆ¶ï¼‰  FF</span><br><span class="line">%o  æ•´æ•°ç±»å‹ï¼ˆå…«è¿›åˆ¶ï¼‰   77</span><br><span class="line">%f  æµ®ç‚¹ç±»å‹    99.99</span><br><span class="line">%a  åå…­è¿›åˆ¶æµ®ç‚¹ç±»å‹    FF.35AE</span><br><span class="line">%e  æŒ‡æ•°ç±»å‹    9.38e+5</span><br><span class="line">%g  é€šç”¨æµ®ç‚¹ç±»å‹ï¼ˆfå’Œeç±»å‹ä¸­è¾ƒçŸ­çš„ï¼‰</span><br><span class="line">%h  æ•£åˆ—ç  </span><br><span class="line">%%  ç™¾åˆ†æ¯”ç±»å‹   ï¼…</span><br><span class="line">%n  æ¢è¡Œç¬¦</span><br><span class="line">%tx æ—¥æœŸä¸æ—¶é—´ç±»å‹ï¼ˆxä»£è¡¨ä¸åŒçš„æ—¥æœŸä¸æ—¶é—´è½¬æ¢ç¬¦</span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Android </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[é€æ˜åº¦å¯¹ç…§è¡¨]]></title>
      <url>/Tools/%E9%80%8F%E6%98%8E%E5%BA%A6%E5%AF%B9%E7%85%A7%E8%A1%A8/</url>
      <content type="html"><![CDATA[<p>####é€æ˜åº¦å¯¹ç…§è¡¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">100%Â â€”Â FF</span><br><span class="line"></span><br><span class="line">95%Â â€”Â F2</span><br><span class="line"></span><br><span class="line">90%Â â€”Â E6</span><br><span class="line"></span><br><span class="line">85%Â â€”Â D9</span><br><span class="line"></span><br><span class="line">80%Â â€”Â CC</span><br><span class="line"></span><br><span class="line">75%Â â€”Â BF</span><br><span class="line"></span><br><span class="line">70%Â â€”Â B3</span><br><span class="line"></span><br><span class="line">65%Â â€”Â A6</span><br><span class="line"></span><br><span class="line">60%Â â€”Â 99</span><br><span class="line"></span><br><span class="line">55%Â â€”Â 8C</span><br><span class="line"></span><br><span class="line">50%Â â€”Â 80</span><br><span class="line"></span><br><span class="line">45%Â â€”Â 73</span><br><span class="line"></span><br><span class="line">40%Â â€”Â 66</span><br><span class="line"></span><br><span class="line">35%Â â€”Â 59</span><br><span class="line"></span><br><span class="line">30%Â â€”Â 4D</span><br><span class="line"></span><br><span class="line">25%Â â€”Â 40</span><br><span class="line"></span><br><span class="line">20%Â â€”Â 33</span><br><span class="line"></span><br><span class="line">15%Â â€”Â 26</span><br><span class="line"></span><br><span class="line">10%Â â€”Â 1A</span><br><span class="line"></span><br><span class="line">5%Â â€”Â 0D</span><br><span class="line"></span><br><span class="line">0%Â â€”Â 00</span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> Tools </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Android </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
